/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./node_modules/@wpmudev/shared-ui/dist/js/shared-ui.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/@wpmudev/shared-ui/dist/js/shared-ui.js":
/*!**************************************************************!*\
  !*** ./node_modules/@wpmudev/shared-ui/dist/js/shared-ui.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global, ClipboardJS, A11yDialog) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var require;var require;var require;var require;/*!\n * WPMU DEV Shared UI\n * Copyright 2018 Incsub (https://incsub.com)\n * Licensed under GPL v2 (http://www.gnu.org/licenses/gpl-2.0.html)\n */\n/* global NodeList, Element, define */\n\n(function (global) {\n  'use strict';\n\n  var FOCUSABLE_ELEMENTS = ['a[href]', 'area[href]', 'input:not([disabled])', 'select:not([disabled])', 'textarea:not([disabled])', 'button:not([disabled])', 'iframe', 'object', 'embed', '[contenteditable]', '[tabindex]:not([tabindex^=\"-\"])'];\n  var TAB_KEY = 9;\n  var ESCAPE_KEY = 27;\n  var focusedBeforeDialog;\n\n  /**\n   * Define the constructor to instantiate a dialog\n   *\n   * @constructor\n   * @param {Element} node\n   * @param {(NodeList | Element | string)} targets\n   */\n  function A11yDialog (node, targets) {\n    // Prebind the functions that will be bound in addEventListener and\n    // removeEventListener to avoid losing references\n    this._show = this.show.bind(this);\n    this._hide = this.hide.bind(this);\n    this._maintainFocus = this._maintainFocus.bind(this);\n    this._bindKeypress = this._bindKeypress.bind(this);\n\n    // Keep a reference of the node on the instance\n    this.node = node;\n\n    // Keep an object of listener types mapped to callback functions\n    this._listeners = {};\n\n    // Initialise everything needed for the dialog to work properly\n    this.create(targets);\n  }\n\n  /**\n   * Set up everything necessary for the dialog to be functioning\n   *\n   * @param {(NodeList | Element | string)} targets\n   * @return {this}\n   */\n  A11yDialog.prototype.create = function (targets) {\n    // Keep a collection of nodes to disable/enable when toggling the dialog\n    this._targets = this._targets || collect(targets) || getSiblings(this.node);\n\n    // Make sure the dialog element is disabled on load, and that the `shown`\n    // property is synced with its value\n    this.node.setAttribute('aria-hidden', true);\n    this.shown = false;\n\n    // Keep a collection of dialog openers, each of which will be bound a click\n    // event listener to open the dialog\n    this._openers = $$('[data-a11y-dialog-show=\"' + this.node.id + '\"]');\n    this._openers.forEach(function (opener) {\n      opener.addEventListener('click', this._show);\n    }.bind(this));\n\n    // Keep a collection of dialog closers, each of which will be bound a click\n    // event listener to close the dialog\n    this._closers = $$('[data-a11y-dialog-hide]', this.node)\n      .concat($$('[data-a11y-dialog-hide=\"' + this.node.id + '\"]'));\n    this._closers.forEach(function (closer) {\n      closer.addEventListener('click', this._hide);\n    }.bind(this));\n\n    // Execute all callbacks registered for the `create` event\n    this._fire('create');\n\n    return this;\n  };\n\n  /**\n   * Show the dialog element, disable all the targets (siblings), trap the\n   * current focus within it, listen for some specific key presses and fire all\n   * registered callbacks for `show` event\n   *\n   * @param {Event} event\n   * @return {this}\n   */\n  A11yDialog.prototype.show = function (event) {\n    // If the dialog is already open, abort\n    if (this.shown) {\n      return this;\n    }\n\n    var overlay = this.node.getElementsByClassName('sui-dialog-overlay');\n    var content = this.node.getElementsByClassName('sui-dialog-content');\n    content[0].className = 'sui-dialog-content sui-bounce-in';\n    overlay[0].className = 'sui-dialog-overlay sui-fade-in';\n\n    this.shown = true;\n    this.node.removeAttribute('aria-hidden');\n\n    // Iterate over the targets to disable them by setting their `aria-hidden`\n    // attribute to `true`; in case they already have this attribute, keep a\n    // reference of their original value to be able to restore it later\n    this._targets.forEach(function (target) {\n      var original = target.getAttribute('aria-hidden');\n\n      if (original) {\n        target.setAttribute('data-a11y-dialog-original', original);\n      }\n\n      target.setAttribute('aria-hidden', 'true');\n    });\n\n    // Keep a reference to the currently focused element to be able to restore\n    // it later, then set the focus to the first focusable child of the dialog\n    // element\n    focusedBeforeDialog = document.activeElement;\n    setFocusToFirstItem(this.node);\n\n    // Bind a focus event listener to the body element to make sure the focus\n    // stays trapped inside the dialog while open, and start listening for some\n    // specific key presses (TAB and ESC)\n    document.body.addEventListener('focus', this._maintainFocus, true);\n    document.addEventListener('keydown', this._bindKeypress);\n\n    // Add overlay class to document body.\n    document.getElementsByTagName( 'html' )[0].classList.add( 'sui-has-overlay' );\n\n    // Execute all callbacks registered for the `show` event\n    this._fire('show', event);\n\n    return this;\n  };\n\n  /**\n   * Hide the dialog element, enable all the targets (siblings), restore the\n   * focus to the previously active element, stop listening for some specific\n   * key presses and fire all registered callbacks for `hide` event\n   *\n   * @param {Event} event\n   * @return {this}\n   */\n  A11yDialog.prototype.hide = function (event) {\n    // If the dialog is already closed, abort\n    if (!this.shown) {\n      return this;\n    }\n\n\n    var overlay = this.node.getElementsByClassName('sui-dialog-overlay');\n\n    var content = this.node.getElementsByClassName('sui-dialog-content');\n\n    content[0].className = 'sui-dialog-content sui-bounce-out';\n\n    overlay[0].className = 'sui-dialog-overlay sui-fade-out';\n\n    this.shown = false;\n    // This has been set so there is enough time for the animation to show\n    var timeout_node = this.node;\n    setTimeout(function () {\n\t\ttimeout_node.setAttribute('aria-hidden', 'true');\n\t}, 300);\n\n    // Iterate over the targets to enable them by remove their `aria-hidden`\n    // attribute or resetting them to their initial value\n    this._targets.forEach(function (target) {\n      var original = target.getAttribute('data-a11y-dialog-original');\n\n\n      if (original) {\n        target.setAttribute('aria-hidden', original);\n        target.removeAttribute('data-a11y-dialog-original');\n      } else {\n        target.removeAttribute('aria-hidden');\n      }\n    });\n\n    // If their was a focused element before the dialog was opened, restore the\n    // focus back to it\n    if (focusedBeforeDialog) {\n      focusedBeforeDialog.focus();\n    }\n\n    // Remove the focus event listener to the body element and stop listening\n    // for specific key presses\n    document.body.removeEventListener('focus', this._maintainFocus, true);\n    document.removeEventListener('keydown', this._bindKeypress);\n\n    // Remove overlay class to document body.\n    document.getElementsByTagName( 'html' )[0].classList.remove( 'sui-has-overlay' );\n\n    // Execute all callbacks registered for the `hide` event\n    this._fire('hide', event);\n\n    return this;\n  };\n\n  /**\n   * Destroy the current instance (after making sure the dialog has been hidden)\n   * and remove all associated listeners from dialog openers and closers\n   *\n   * @return {this}\n   */\n  A11yDialog.prototype.destroy = function () {\n    // Hide the dialog to avoid destroying an open instance\n    this.hide();\n\n    // Remove the click event listener from all dialog openers\n    this._openers.forEach(function (opener) {\n      opener.removeEventListener('click', this._show);\n    }.bind(this));\n\n    // Remove the click event listener from all dialog closers\n    this._closers.forEach(function (closer) {\n      closer.removeEventListener('click', this._hide);\n    }.bind(this));\n\n    // Execute all callbacks registered for the `destroy` event\n    this._fire('destroy');\n\n    // Keep an object of listener types mapped to callback functions\n    this._listeners = {};\n\n    return this;\n  };\n\n  /**\n   * Register a new callback for the given event type\n   *\n   * @param {string} type\n   * @param {Function} handler\n   */\n  A11yDialog.prototype.on = function (type, handler) {\n    if (typeof this._listeners[type] === 'undefined') {\n      this._listeners[type] = [];\n    }\n\n    this._listeners[type].push(handler);\n\n    return this;\n  };\n\n  /**\n   * Unregister an existing callback for the given event type\n   *\n   * @param {string} type\n   * @param {Function} handler\n   */\n  A11yDialog.prototype.off = function (type, handler) {\n    var index = this._listeners[type].indexOf(handler);\n\n    if (index > -1) {\n      this._listeners[type].splice(index, 1);\n    }\n\n    return this;\n  };\n\n  /**\n   * Iterate over all registered handlers for given type and call them all with\n   * the dialog element as first argument, event as second argument (if any).\n   *\n   * @access private\n   * @param {string} type\n   * @param {Event} event\n   */\n  A11yDialog.prototype._fire = function (type, event) {\n    var listeners = this._listeners[type] || [];\n\n    listeners.forEach(function (listener) {\n      listener(this.node, event);\n    }.bind(this));\n  };\n\n  /**\n   * Private event handler used when listening to some specific key presses\n   * (namely ESCAPE and TAB)\n   *\n   * @access private\n   * @param {Event} event\n   */\n  A11yDialog.prototype._bindKeypress = function (event) {\n    // If the dialog is shown and the ESCAPE key is being pressed, prevent any\n    // further effects from the ESCAPE key and hide the dialog\n    if (this.shown && event.which === ESCAPE_KEY) {\n      event.preventDefault();\n      this.hide();\n    }\n\n    // If the dialog is shown and the TAB key is being pressed, make sure the\n    // focus stays trapped within the dialog element\n    if (this.shown && event.which === TAB_KEY) {\n      trapTabKey(this.node, event);\n    }\n  };\n\n  /**\n   * Private event handler used when making sure the focus stays within the\n   * currently open dialog\n   *\n   * @access private\n   * @param {Event} event\n   */\n  A11yDialog.prototype._maintainFocus = function (event) {\n    // If the dialog is shown and the focus is not within the dialog element,\n    // move it back to its first focusable child\n    if (this.shown && !this.node.contains(event.target)) {\n      setFocusToFirstItem(this.node);\n    }\n  };\n\n  /**\n   * Convert a NodeList into an array\n   *\n   * @param {NodeList} collection\n   * @return {Array<Element>}\n   */\n  function toArray (collection) {\n    return Array.prototype.slice.call(collection);\n  }\n\n  /**\n   * Query the DOM for nodes matching the given selector, scoped to context (or\n   * the whole document)\n   *\n   * @param {String} selector\n   * @param {Element} [context = document]\n   * @return {Array<Element>}\n   */\n  function $$ (selector, context) {\n    return toArray((context || document).querySelectorAll(selector));\n  }\n\n  /**\n   * Return an array of Element based on given argument (NodeList, Element or\n   * string representing a selector)\n   *\n   * @param {(NodeList | Element | string)} target\n   * @return {Array<Element>}\n   */\n  function collect (target) {\n    if (NodeList.prototype.isPrototypeOf(target)) {\n      return toArray(target);\n    }\n\n    if (Element.prototype.isPrototypeOf(target)) {\n      return [target];\n    }\n\n    if (typeof target === 'string') {\n      return $$(target);\n    }\n  }\n\n  /**\n   * Set the focus to the first focusable child of the given element\n   *\n   * @param {Element} node\n   */\n  function setFocusToFirstItem (node) {\n    var focusableChildren = getFocusableChildren(node);\n\n    if (focusableChildren.length) {\n      focusableChildren[0].focus();\n    }\n  }\n\n  /**\n   * Get the focusable children of the given element\n   *\n   * @param {Element} node\n   * @return {Array<Element>}\n   */\n  function getFocusableChildren (node) {\n    return $$(FOCUSABLE_ELEMENTS.join(','), node).filter(function (child) {\n      return !!(child.offsetWidth || child.offsetHeight || child.getClientRects().length);\n    });\n  }\n\n  /**\n   * Trap the focus inside the given element\n   *\n   * @param {Element} node\n   * @param {Event} event\n   */\n  function trapTabKey (node, event) {\n    var focusableChildren = getFocusableChildren(node);\n    var focusedItemIndex = focusableChildren.indexOf(document.activeElement);\n\n    // If the SHIFT key is being pressed while tabbing (moving backwards) and\n    // the currently focused item is the first one, move the focus to the last\n    // focusable item from the dialog element\n    if (event.shiftKey && focusedItemIndex === 0) {\n      focusableChildren[focusableChildren.length - 1].focus();\n      event.preventDefault();\n    // If the SHIFT key is not being pressed (moving forwards) and the currently\n    // focused item is the last one, move the focus to the first focusable item\n    // from the dialog element\n    } else if (!event.shiftKey && focusedItemIndex === focusableChildren.length - 1) {\n      focusableChildren[0].focus();\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * Retrieve siblings from given element\n   *\n   * @param {Element} node\n   * @return {Array<Element>}\n   */\n  function getSiblings (node) {\n    var nodes = toArray(node.parentNode.childNodes);\n    var siblings = nodes.filter(function (node) {\n      return node.nodeType === 1;\n    });\n\n    siblings.splice(siblings.indexOf(node), 1);\n\n    return siblings;\n  }\n\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = A11yDialog;\n  } else if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n      return A11yDialog;\n    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {}\n}(typeof global !== 'undefined' ? global : window));\n\n// the semi-colon before function invocation is a safety net against concatenated\n// scripts and/or other plugins which may not be closed properly.\n;\n( function( $, window, document, undefined ) {\n\n    'use strict';\n\n    // undefined is used here as the undefined global variable in ECMAScript 3 is\n    // mutable (ie. it can be changed by someone else). undefined isn't really being\n    // passed in so we can ensure the value of it is truly undefined. In ES5, undefined\n    // can no longer be modified.\n\n    // window and document are passed through as local variables rather than global\n    // as this (slightly) quickens the resolution process and can be more efficiently\n    // minified (especially when both are regularly referenced in your plugin).\n\n    // Create the defaults once\n    var pluginName = 'SUIAccordion',\n        defaults = {};\n\n    // The actual plugin constructor\n    function SUIAccordion( element, options ) {\n        this.element = element;\n        this.$element = $( this.element );\n\n\n        // jQuery has an extend method which merges the contents of two or\n        // more objects, storing the result in the first object. The first object\n        // is generally empty as we don't want to alter the default options for\n        // future instances of the plugin\n        this.settings = $.extend({}, defaults, options );\n        this._defaults = defaults;\n        this._name = pluginName;\n        this.init();\n    }\n\n    // Avoid Plugin.prototype conflicts\n    $.extend( SUIAccordion.prototype, {\n        init: function() {\n\n            // namespaced event\n            this.$element.on( 'click.sui.accordion', '.sui-accordion-item', function( event ) {\n\n                var getParentItem = $( this ).closest( '.sui-accordion-item' ),\n                    getNextAdditionalContentRow = getParentItem.nextUntil( '.sui-accordion-item' ).filter( '.sui-accordion-item-content' );\n\n                getNextAdditionalContentRow.toggleClass( 'sui-accordion-item--open' );\n\n                if ( getNextAdditionalContentRow.hasClass( 'sui-accordion-item--open' ) ) {\n                    getParentItem.addClass( 'sui-accordion-item--open' );\n                } else {\n                    getParentItem.removeClass( 'sui-accordion-item--open' );\n                }\n\n            });\n        }\n    });\n\n    // A really lightweight plugin wrapper around the constructor,\n    // preventing against multiple instantiations\n    $.fn[ pluginName ] = function( options ) {\n        return this.each( function() {\n\n            // instance of SUIAccordion can be called with $(element).data('SUIAccordion')\n            if ( ! $.data( this, pluginName ) ) {\n                $.data( this, pluginName, new SUIAccordion( this, options ) );\n            }\n        });\n    };\n\n}( jQuery, window, document ) );\n\n( function( $ ) {\n\n    // Enable strict mode.\n    'use strict';\n\n    // Define global SUI object if it doesn't exist.\n    if ( 'object' !== typeof window.SUI ) {\n        window.SUI = {};\n    }\n\n    SUI.suiAccordion = function( el ) {\n        var accordionTable = $( el );\n\n        function init() {\n            accordionTable.SUIAccordion({});\n        }\n\n        init();\n\n        return this;\n    };\n\n    // wait document ready first\n    $( document ).ready( function() {\n\n        // Convert all accordions.\n        $( '.sui-2-2-4 .sui-accordion' ).each( function() {\n\n            // backward compat of instantiate new accordion\n            SUI.suiAccordion( this );\n        });\n    });\n\n}( jQuery ) );\n\n/**\n * clipboard.js v1.7.1\n * https://zenorocha.github.io/clipboard.js\n *\n * Licensed MIT Â© Zeno Rocha\n */\n(function(f){if(true){module.exports=f()}else { var g; }})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n\tvar proto = Element.prototype;\n\n\tproto.matches = proto.matchesSelector ||\n\t\t\t\t\tproto.mozMatchesSelector ||\n\t\t\t\t\tproto.msMatchesSelector ||\n\t\t\t\t\tproto.oMatchesSelector ||\n\t\t\t\t\tproto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest(element, selector) {\n\twhile (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n\t\tif (typeof element.matches === 'function' &&\n\t\t\telement.matches(selector)) {\n\t\t\treturn element;\n\t\t}\n\t\telement = element.parentNode;\n\t}\n}\n\nmodule.exports = closest;\n\n},{}],2:[function(require,module,exports){\nvar closest = require('./closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(element, selector, type, callback, useCapture) {\n\tvar listenerFn = listener.apply(this, arguments);\n\n\telement.addEventListener(type, listenerFn, useCapture);\n\n\treturn {\n\t\tdestroy: function() {\n\t\t\telement.removeEventListener(type, listenerFn, useCapture);\n\t\t}\n\t}\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n\treturn function(e) {\n\t\te.delegateTarget = closest(e.target, selector);\n\n\t\tif (e.delegateTarget) {\n\t\t\tcallback.call(element, e);\n\t\t}\n\t}\n}\n\nmodule.exports = delegate;\n\n},{\"./closest\":1}],3:[function(require,module,exports){\n/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n\treturn value !== undefined\n\t\t&& value instanceof HTMLElement\n\t\t&& value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n\tvar type = Object.prototype.toString.call(value);\n\n\treturn value !== undefined\n\t\t&& (type === '[object NodeList]' || type === '[object HTMLCollection]')\n\t\t&& ('length' in value)\n\t\t&& (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n\treturn typeof value === 'string'\n\t\t|| value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n\tvar type = Object.prototype.toString.call(value);\n\n\treturn type === '[object Function]';\n};\n\n},{}],4:[function(require,module,exports){\nvar is = require('./is');\nvar delegate = require('delegate');\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n\tif (!target && !type && !callback) {\n\t\tthrow new Error('Missing required arguments');\n\t}\n\n\tif (!is.string(type)) {\n\t\tthrow new TypeError('Second argument must be a String');\n\t}\n\n\tif (!is.fn(callback)) {\n\t\tthrow new TypeError('Third argument must be a Function');\n\t}\n\n\tif (is.node(target)) {\n\t\treturn listenNode(target, type, callback);\n\t}\n\telse if (is.nodeList(target)) {\n\t\treturn listenNodeList(target, type, callback);\n\t}\n\telse if (is.string(target)) {\n\t\treturn listenSelector(target, type, callback);\n\t}\n\telse {\n\t\tthrow new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n\t}\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n\tnode.addEventListener(type, callback);\n\n\treturn {\n\t\tdestroy: function() {\n\t\t\tnode.removeEventListener(type, callback);\n\t\t}\n\t}\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n\tArray.prototype.forEach.call(nodeList, function(node) {\n\t\tnode.addEventListener(type, callback);\n\t});\n\n\treturn {\n\t\tdestroy: function() {\n\t\t\tArray.prototype.forEach.call(nodeList, function(node) {\n\t\t\t\tnode.removeEventListener(type, callback);\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n\treturn delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n\n},{\"./is\":3,\"delegate\":2}],5:[function(require,module,exports){\nfunction select(element) {\n\tvar selectedText;\n\n\tif (element.nodeName === 'SELECT') {\n\t\telement.focus();\n\n\t\tselectedText = element.value;\n\t}\n\telse if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n\t\tvar isReadOnly = element.hasAttribute('readonly');\n\n\t\tif (!isReadOnly) {\n\t\t\telement.setAttribute('readonly', '');\n\t\t}\n\n\t\telement.select();\n\t\telement.setSelectionRange(0, element.value.length);\n\n\t\tif (!isReadOnly) {\n\t\t\telement.removeAttribute('readonly');\n\t\t}\n\n\t\tselectedText = element.value;\n\t}\n\telse {\n\t\tif (element.hasAttribute('contenteditable')) {\n\t\t\telement.focus();\n\t\t}\n\n\t\tvar selection = window.getSelection();\n\t\tvar range = document.createRange();\n\n\t\trange.selectNodeContents(element);\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(range);\n\n\t\tselectedText = selection.toString();\n\t}\n\n\treturn selectedText;\n}\n\nmodule.exports = select;\n\n},{}],6:[function(require,module,exports){\nfunction E () {\n\t// Keep this empty so it's easier to inherit from\n\t// (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n\ton: function (name, callback, ctx) {\n\tvar e = this.e || (this.e = {});\n\n\t(e[name] || (e[name] = [])).push({\n\t\tfn: callback,\n\t\tctx: ctx\n\t});\n\n\treturn this;\n\t},\n\n\tonce: function (name, callback, ctx) {\n\tvar self = this;\n\tfunction listener () {\n\t\tself.off(name, listener);\n\t\tcallback.apply(ctx, arguments);\n\t};\n\n\tlistener._ = callback\n\treturn this.on(name, listener, ctx);\n\t},\n\n\temit: function (name) {\n\tvar data = [].slice.call(arguments, 1);\n\tvar evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n\tvar i = 0;\n\tvar len = evtArr.length;\n\n\tfor (i; i < len; i++) {\n\t\tevtArr[i].fn.apply(evtArr[i].ctx, data);\n\t}\n\n\treturn this;\n\t},\n\n\toff: function (name, callback) {\n\tvar e = this.e || (this.e = {});\n\tvar evts = e[name];\n\tvar liveEvents = [];\n\n\tif (evts && callback) {\n\t\tfor (var i = 0, len = evts.length; i < len; i++) {\n\t\tif (evts[i].fn !== callback && evts[i].fn._ !== callback)\n\t\t\tliveEvents.push(evts[i]);\n\t\t}\n\t}\n\n\t// Remove event from queue to prevent memory leak\n\t// Suggested by https://github.com/lazd\n\t// Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n\t(liveEvents.length)\n\t\t? e[name] = liveEvents\n\t\t: delete e[name];\n\n\treturn this;\n\t}\n};\n\nmodule.exports = E;\n\n},{}],7:[function(require,module,exports){\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'select'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, require('select'));\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, global.select);\n\t\tglobal.clipboardAction = mod.exports;\n\t}\n})(this, function (module, _select) {\n\t'use strict';\n\n\tvar _select2 = _interopRequireDefault(_select);\n\n\tfunction _interopRequireDefault(obj) {\n\t\treturn obj && obj.__esModule ? obj : {\n\t\t\tdefault: obj\n\t\t};\n\t}\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n\t\treturn typeof obj;\n\t} : function (obj) {\n\t\treturn obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n\t};\n\n\tfunction _classCallCheck(instance, Constructor) {\n\t\tif (!(instance instanceof Constructor)) {\n\t\t\tthrow new TypeError(\"Cannot call a class as a function\");\n\t\t}\n\t}\n\n\tvar _createClass = function () {\n\t\tfunction defineProperties(target, props) {\n\t\t\tfor (var i = 0; i < props.length; i++) {\n\t\t\t\tvar descriptor = props[i];\n\t\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\n\t\t\t\tdescriptor.configurable = true;\n\t\t\t\tif (\"value\" in descriptor) descriptor.writable = true;\n\t\t\t\tObject.defineProperty(target, descriptor.key, descriptor);\n\t\t\t}\n\t\t}\n\n\t\treturn function (Constructor, protoProps, staticProps) {\n\t\t\tif (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t\t\tif (staticProps) defineProperties(Constructor, staticProps);\n\t\t\treturn Constructor;\n\t\t};\n\t}();\n\n\tvar ClipboardJSAction = function () {\n\t\t/**\n\t\t * @param {Object} options\n\t\t */\n\t\tfunction ClipboardJSAction(options) {\n\t\t\t_classCallCheck(this, ClipboardJSAction);\n\n\t\t\tthis.resolveOptions(options);\n\t\t\tthis.initSelection();\n\t\t}\n\n\t\t/**\n\t\t * Defines base properties passed from constructor.\n\t\t * @param {Object} options\n\t\t */\n\n\n\t\t_createClass(ClipboardJSAction, [{\n\t\t\tkey: 'resolveOptions',\n\t\t\tvalue: function resolveOptions() {\n\t\t\t\tvar options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t\t\t\tthis.action = options.action;\n\t\t\t\tthis.container = options.container;\n\t\t\t\tthis.emitter = options.emitter;\n\t\t\t\tthis.target = options.target;\n\t\t\t\tthis.text = options.text;\n\t\t\t\tthis.trigger = options.trigger;\n\n\t\t\t\tthis.selectedText = '';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'initSelection',\n\t\t\tvalue: function initSelection() {\n\t\t\t\tif (this.text) {\n\t\t\t\t\tthis.selectFake();\n\t\t\t\t} else if (this.target) {\n\t\t\t\t\tthis.selectTarget();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'selectFake',\n\t\t\tvalue: function selectFake() {\n\t\t\t\tvar _this = this;\n\n\t\t\t\tvar isRTL = document.documentElement.getAttribute('dir') == 'rtl';\n\n\t\t\t\tthis.removeFake();\n\n\t\t\t\tthis.fakeHandlerCallback = function () {\n\t\t\t\t\treturn _this.removeFake();\n\t\t\t\t};\n\t\t\t\tthis.fakeHandler = this.container.addEventListener('click', this.fakeHandlerCallback) || true;\n\n\t\t\t\tthis.fakeElem = document.createElement('textarea');\n\t\t\t\t// Prevent zooming on iOS\n\t\t\t\tthis.fakeElem.style.fontSize = '12pt';\n\t\t\t\t// Reset box model\n\t\t\t\tthis.fakeElem.style.border = '0';\n\t\t\t\tthis.fakeElem.style.padding = '0';\n\t\t\t\tthis.fakeElem.style.margin = '0';\n\t\t\t\t// Move element out of screen horizontally\n\t\t\t\tthis.fakeElem.style.position = 'absolute';\n\t\t\t\tthis.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';\n\t\t\t\t// Move element to the same position vertically\n\t\t\t\tvar yPosition = window.pageYOffset || document.documentElement.scrollTop;\n\t\t\t\tthis.fakeElem.style.top = yPosition + 'px';\n\n\t\t\t\tthis.fakeElem.setAttribute('readonly', '');\n\t\t\t\tthis.fakeElem.value = this.text;\n\n\t\t\t\tthis.container.appendChild(this.fakeElem);\n\n\t\t\t\tthis.selectedText = (0, _select2.default)(this.fakeElem);\n\t\t\t\tthis.copyText();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'removeFake',\n\t\t\tvalue: function removeFake() {\n\t\t\t\tif (this.fakeHandler) {\n\t\t\t\t\tthis.container.removeEventListener('click', this.fakeHandlerCallback);\n\t\t\t\t\tthis.fakeHandler = null;\n\t\t\t\t\tthis.fakeHandlerCallback = null;\n\t\t\t\t}\n\n\t\t\t\tif (this.fakeElem) {\n\t\t\t\t\tthis.container.removeChild(this.fakeElem);\n\t\t\t\t\tthis.fakeElem = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'selectTarget',\n\t\t\tvalue: function selectTarget() {\n\t\t\t\tthis.selectedText = (0, _select2.default)(this.target);\n\t\t\t\tthis.copyText();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'copyText',\n\t\t\tvalue: function copyText() {\n\t\t\t\tvar succeeded = void 0;\n\n\t\t\t\ttry {\n\t\t\t\t\tsucceeded = document.execCommand(this.action);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tsucceeded = false;\n\t\t\t\t}\n\n\t\t\t\tthis.handleResult(succeeded);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'handleResult',\n\t\t\tvalue: function handleResult(succeeded) {\n\t\t\t\tthis.emitter.emit(succeeded ? 'success' : 'error', {\n\t\t\t\t\taction: this.action,\n\t\t\t\t\ttext: this.selectedText,\n\t\t\t\t\ttrigger: this.trigger,\n\t\t\t\t\tclearSelection: this.clearSelection.bind(this)\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'clearSelection',\n\t\t\tvalue: function clearSelection() {\n\t\t\t\tif (this.trigger) {\n\t\t\t\t\tthis.trigger.focus();\n\t\t\t\t}\n\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'destroy',\n\t\t\tvalue: function destroy() {\n\t\t\t\tthis.removeFake();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'action',\n\t\t\tset: function set() {\n\t\t\t\tvar action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';\n\n\t\t\t\tthis._action = action;\n\n\t\t\t\tif (this._action !== 'copy' && this._action !== 'cut') {\n\t\t\t\t\tthrow new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n\t\t\t\t}\n\t\t\t},\n\t\t\tget: function get() {\n\t\t\t\treturn this._action;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'target',\n\t\t\tset: function set(target) {\n\t\t\t\tif (target !== undefined) {\n\t\t\t\t\tif (target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target.nodeType === 1) {\n\t\t\t\t\t\tif (this.action === 'copy' && target.hasAttribute('disabled')) {\n\t\t\t\t\t\t\tthrow new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n\t\t\t\t\t\t\tthrow new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._target = target;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error('Invalid \"target\" value, use a valid Element');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tget: function get() {\n\t\t\t\treturn this._target;\n\t\t\t}\n\t\t}]);\n\n\t\treturn ClipboardJSAction;\n\t}();\n\n\tmodule.exports = ClipboardJSAction;\n});\n\n},{\"select\":5}],8:[function(require,module,exports){\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', './clipboard-action', 'tiny-emitter', 'good-listener'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, require('./clipboard-action'), require('tiny-emitter'), require('good-listener'));\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, global.clipboardAction, global.tinyEmitter, global.goodListener);\n\t\tglobal.clipboard = mod.exports;\n\t}\n})(this, function (module, _clipboardAction, _tinyEmitter, _goodListener) {\n\t'use strict';\n\n\tvar _clipboardAction2 = _interopRequireDefault(_clipboardAction);\n\n\tvar _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);\n\n\tvar _goodListener2 = _interopRequireDefault(_goodListener);\n\n\tfunction _interopRequireDefault(obj) {\n\t\treturn obj && obj.__esModule ? obj : {\n\t\t\tdefault: obj\n\t\t};\n\t}\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n\t\treturn typeof obj;\n\t} : function (obj) {\n\t\treturn obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n\t};\n\n\tfunction _classCallCheck(instance, Constructor) {\n\t\tif (!(instance instanceof Constructor)) {\n\t\t\tthrow new TypeError(\"Cannot call a class as a function\");\n\t\t}\n\t}\n\n\tvar _createClass = function () {\n\t\tfunction defineProperties(target, props) {\n\t\t\tfor (var i = 0; i < props.length; i++) {\n\t\t\t\tvar descriptor = props[i];\n\t\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\n\t\t\t\tdescriptor.configurable = true;\n\t\t\t\tif (\"value\" in descriptor) descriptor.writable = true;\n\t\t\t\tObject.defineProperty(target, descriptor.key, descriptor);\n\t\t\t}\n\t\t}\n\n\t\treturn function (Constructor, protoProps, staticProps) {\n\t\t\tif (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t\t\tif (staticProps) defineProperties(Constructor, staticProps);\n\t\t\treturn Constructor;\n\t\t};\n\t}();\n\n\tfunction _possibleConstructorReturn(self, call) {\n\t\tif (!self) {\n\t\t\tthrow new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n\t\t}\n\n\t\treturn call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n\t}\n\n\tfunction _inherits(subClass, superClass) {\n\t\tif (typeof superClass !== \"function\" && superClass !== null) {\n\t\t\tthrow new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n\t\t}\n\n\t\tsubClass.prototype = Object.create(superClass && superClass.prototype, {\n\t\t\tconstructor: {\n\t\t\t\tvalue: subClass,\n\t\t\t\tenumerable: false,\n\t\t\t\twritable: true,\n\t\t\t\tconfigurable: true\n\t\t\t}\n\t\t});\n\t\tif (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n\t}\n\n\tvar ClipboardJS = function (_Emitter) {\n\t\t_inherits(ClipboardJS, _Emitter);\n\n\t\t/**\n\t\t * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n\t\t * @param {Object} options\n\t\t */\n\t\tfunction ClipboardJS(trigger, options) {\n\t\t\t_classCallCheck(this, ClipboardJS);\n\n\t\t\tvar _this = _possibleConstructorReturn(this, (ClipboardJS.__proto__ || Object.getPrototypeOf(ClipboardJS)).call(this));\n\n\t\t\t_this.resolveOptions(options);\n\t\t\t_this.listenClick(trigger);\n\t\t\treturn _this;\n\t\t}\n\n\t\t/**\n\t\t * Defines if attributes would be resolved using internal setter functions\n\t\t * or custom functions that were passed in the constructor.\n\t\t * @param {Object} options\n\t\t */\n\n\n\t\t_createClass(ClipboardJS, [{\n\t\t\tkey: 'resolveOptions',\n\t\t\tvalue: function resolveOptions() {\n\t\t\t\tvar options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t\t\t\tthis.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n\t\t\t\tthis.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n\t\t\t\tthis.text = typeof options.text === 'function' ? options.text : this.defaultText;\n\t\t\t\tthis.container = _typeof(options.container) === 'object' ? options.container : document.body;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'listenClick',\n\t\t\tvalue: function listenClick(trigger) {\n\t\t\t\tvar _this2 = this;\n\n\t\t\t\tthis.listener = (0, _goodListener2.default)(trigger, 'click', function (e) {\n\t\t\t\t\treturn _this2.onClick(e);\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'onClick',\n\t\t\tvalue: function onClick(e) {\n\t\t\t\tvar trigger = e.delegateTarget || e.currentTarget;\n\n\t\t\t\tif (this.clipboardAction) {\n\t\t\t\t\tthis.clipboardAction = null;\n\t\t\t\t}\n\n\t\t\t\tthis.clipboardAction = new _clipboardAction2.default({\n\t\t\t\t\taction: this.action(trigger),\n\t\t\t\t\ttarget: this.target(trigger),\n\t\t\t\t\ttext: this.text(trigger),\n\t\t\t\t\tcontainer: this.container,\n\t\t\t\t\ttrigger: trigger,\n\t\t\t\t\temitter: this\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'defaultAction',\n\t\t\tvalue: function defaultAction(trigger) {\n\t\t\t\treturn getAttributeValue('action', trigger);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'defaultTarget',\n\t\t\tvalue: function defaultTarget(trigger) {\n\t\t\t\tvar selector = getAttributeValue('target', trigger);\n\n\t\t\t\tif (selector) {\n\t\t\t\t\treturn document.querySelector(selector);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'defaultText',\n\t\t\tvalue: function defaultText(trigger) {\n\t\t\t\treturn getAttributeValue('text', trigger);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'destroy',\n\t\t\tvalue: function destroy() {\n\t\t\t\tthis.listener.destroy();\n\n\t\t\t\tif (this.clipboardAction) {\n\t\t\t\t\tthis.clipboardAction.destroy();\n\t\t\t\t\tthis.clipboardAction = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: 'isSupported',\n\t\t\tvalue: function isSupported() {\n\t\t\t\tvar action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n\n\t\t\t\tvar actions = typeof action === 'string' ? [action] : action;\n\t\t\t\tvar support = !!document.queryCommandSupported;\n\n\t\t\t\tactions.forEach(function (action) {\n\t\t\t\t\tsupport = support && !!document.queryCommandSupported(action);\n\t\t\t\t});\n\n\t\t\t\treturn support;\n\t\t\t}\n\t\t}]);\n\n\t\treturn ClipboardJS;\n\t}(_tinyEmitter2.default);\n\n\t/**\n\t * Helper function to retrieve attribute value.\n\t * @param {String} suffix\n\t * @param {Element} element\n\t */\n\tfunction getAttributeValue(suffix, element) {\n\t\tvar attribute = 'data-clipboard-' + suffix;\n\n\t\tif (!element.hasAttribute(attribute)) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn element.getAttribute(attribute);\n\t}\n\n\tmodule.exports = ClipboardJS;\n});\n\n},{\"./clipboard-action\":7,\"good-listener\":4,\"tiny-emitter\":6}]},{},[8])(8)\n});\n\n( function( $ ) {\n\n\t$( '.sui-2-2-4 .sui-code-snippet:not(.sui-no-copy)' ).each( function( i ) {\n\t\tvar id = 'sui-code-snippet-' + i,\n\t\t\tbutton = '<button class=\"sui-button\" data-clipboard-target=\"#' + id + '\">Copy</button>';\n\n\t\t$( this ).wrap( '<div class=\"sui-code-snippet-wrapper\"></div>' );\n\t\t$( this ).attr( 'id', id ).after( button );\n\t});\n\n\t$( document ).ready( function() {\n\t\tvar btns = $( '[data-clipboard-target]' );\n\t\tvar clipboard = new ClipboardJS( '[data-clipboard-target]' );\n\n\t\tif ( btns.length ) {\n\n\t\t\tclipboard.on( 'success', function( e ) {\n\t\t\t\te.clearSelection();\n\t\t\t\tshowTooltip( e.trigger, 'Copied!' );\n\t\t\t});\n\n\t\t\tbtns.mouseleave( function() {\n\t\t\t\t$( this ).removeClass( 'sui-tooltip' );\n\t\t\t\t$( this ).removeAttr( 'aria-label' );\n\t\t\t\t$( this ).removeAttr( 'data-tooltip' );\n\t\t\t});\n\n\t\t\tfunction showTooltip( e, msg ) {\n\t\t\t\t$( e ).addClass( 'sui-tooltip' );\n\t\t\t\t$( e ).attr( 'aria-label', msg );\n\t\t\t\t$( e ).attr( 'data-tooltip', msg );\n\t\t\t}\n\n\t\t}\n\n\t});\n\n}( jQuery ) );\n\n( function( $ ) {\n\n\t// Enable strict mode.\n\t'use strict';\n\n\t// Define global SUI object if it doesn't exist.\n\tif ( 'object' !== typeof window.SUI ) {\n\t\twindow.SUI = {};\n\t}\n\n\tSUI.linkDropdown = function() {\n\n\t\tfunction closeAllDropdowns( $except ) {\n\t\t\tvar $dropdowns = $( '.sui-2-2-4 .sui-dropdown' );\n\n\t\t\tif ( $except ) {\n\t\t\t\t$dropdowns = $dropdowns.not( $except );\n\t\t\t}\n\n\t\t\t$dropdowns.removeClass( 'open' );\n\t\t}\n\n\t\t$( 'body' ).click( function( e ) {\n\t\t\tvar $this = $( e.target ),\n\t\t\t\t$el = $this.closest( '.sui-dropdown' );\n\n\t\t\tif ( 0 == $el.length ) {\n\t\t\t\tcloseAllDropdowns();\n\t\t\t} else if ( $this.is( 'a' ) ) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tcloseAllDropdowns( $el );\n\n\t\t\t\t$el.toggleClass( 'open' );\n\t\t\t}\n\n\t\t});\n\n\t};\n\n\tSUI.linkDropdown();\n\n}( jQuery ) );\n\n( function( $ ) {\n\n\t// Enable strict mode.\n\t'use strict';\n\n\t// Define global SUI object if it doesn't exist.\n\tif ( 'object' !== typeof window.SUI ) {\n\t\twindow.SUI = {};\n\t}\n\n\tdocument.addEventListener( 'DOMContentLoaded', function() {\n\t\tvar mainEl = $( '.sui-wrap' );\n\t\tSUI.dialogs = {};\n\n\t\t// Init the dialog elements.\n\t\t$( '.sui-dialog' ).each( function() {\n\t\t\tSUI.dialogs[this.id] = new A11yDialog( this, mainEl );\n\t\t});\n\n\t});\n\n}( jQuery ) );\n\n( function( $ ) {\n\n\t// This will auto hide the top notice if the classes .sui-can-dismiss or .sui-cant-dismiss aren't present.\n\t$( '.sui-2-2-4 .sui-notice-top:not(.sui-can-dismiss, .sui-cant-dismiss)' ).delay( 3000 ).slideUp( 'slow' );\n\n\t$( '.sui-2-2-4 .sui-notice-dismiss' ).click( function( e ) {\n\t\te.preventDefault();\n\n        $( this ).parent().stop().slideUp( 'slow' );\n\n\t\treturn false;\n\t});\n\n}( jQuery ) );\n\n( function( $ ) {\n\n\t// Enable strict mode.\n\t'use strict';\n\n\t// Define global SUI object if it doesn't exist.\n\tif ( 'object' !== typeof window.SUI ) {\n\t\twindow.SUI = {};\n\t}\n\n\tSUI.showHidePassword = function() {\n\n\t\t$( '.sui-2-2-4 .sui-password-group' ).each( function() {\n\t\t\tvar $this = $( this ),\n\t\t\t\t$input = $this.find( 'input[type=\"password\"]' ),\n\t\t\t\t$button = $this.find( '.sui-password-toggle' );\n\n\t\t\t$button.on( 'click', function() {\n\t\t\t\tvar $inputType = '',\n\t\t\t\t\t$repInput = '';\n\n\t\t\t\t$( this ).toggleClass( 'is-visible' );\n\n\t\t\t\tif ( $input.hasClass( 'is-visible' ) ) {\n\t\t\t\t\t$input.removeClass( 'is-visible' ).addClass( 'is-hidden' );\n\t\t\t\t\t$inputType = 'password';\n\t\t\t\t\t$button.find( '> .sui-screen-reader-text' ).text( 'Show Password' );\n\t\t\t\t\t$button.find( '> i' ).removeClass( 'sui-ico-eye-hide' ).addClass( 'sui-ico-eye' );\n\t\t\t\t} else {\n\t\t\t\t\t$input.removeClass( 'is-hidden' ).addClass( 'is-visible' );\n\t\t\t\t\t$inputType = 'text';\n\t\t\t\t\t$button.find( '> .sui-screen-reader-text' ).text( 'Hide Password' );\n\t\t\t\t\t$button.find( '> i' ).removeClass( 'sui-ico-eye' ).addClass( 'sui-ico-eye-hide' );\n\t\t\t\t}\n\n\t\t\t\t$repInput = $( '<input type=' + $inputType + ' />' )\n\t\t\t\t\t.attr( 'id', $input.attr( 'id' ) )\n\t\t\t\t\t.attr( 'name', $input.attr( 'name' ) )\n\t\t\t\t\t.attr( 'class', $input.attr( 'class' ) )\n\t\t\t\t\t.val( $input.val() )\n\t\t\t\t\t.insertBefore( $input );\n\n\t\t\t\t$input.remove();\n\t\t\t\t$input = $repInput;\n\t\t\t\t$input.focus();\n\n\t\t\t});\n\n\t\t});\n\n\t};\n\n\tSUI.showHidePassword();\n\n}( jQuery ) );\n\n( function( $ ) {\n\n    // Enable strict mode.\n    'use strict';\n\n    // Define global SUI object if it doesn't exist.\n    if ( 'object' !== typeof window.SUI ) {\n        window.SUI = {};\n    }\n\n    SUI.loadCircleScore = function( el ) {\n\t\tvar dial          = $( el ).find( 'svg circle:last-child' ),\n\t\t\tscore         = $( el ).data( 'score' ),\n\t\t\tradius        = 42,\n\t\t\tcircumference = 2 * Math.PI * radius,\n\t\t\tdashLength    = ( circumference / 100 ) * score,\n\t\t\tgapLength     = dashLength * 100 - score,\n\t\t\tsvg           =\n\t\t\t\t'<svg viewbox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\\n' +\n\t\t\t\t\t'<circle stroke-width=\"16\" cx=\"50\" cy=\"50\" r=\"42\" />\\n' +\n\t\t\t\t\t'<circle stroke-width=\"16\" cx=\"50\" cy=\"50\" r=\"42\" stroke-dasharray=\"0,' + gapLength + '\" />\\n' +\n\t\t\t\t'</svg>\\n' +\n\t\t\t\t'<span class=\"sui-circle-score-label\">' + score + '</span>\\n';\n\n\t\t// Add svg to score element, add loaded class, & change stroke-dasharray to represent target score/percentage.\n\t\t$( el ).prepend( svg ).addClass( 'loaded' ).find( 'circle:last-child' ).css( 'animation', 'sui' + score + ' 3s forwards' );\n\t};\n\n\t$( '.sui-2-2-4 .sui-circle-score' ).each( function() {\n\t\tSUI.loadCircleScore( this );\n\t});\n\n}( jQuery ) );\n\n( function( $ ) {\n\n    // Enable strict mode.\n    'use strict';\n\n    // Define global SUI object if it doesn't exist.\n    if ( 'object' !== typeof window.SUI ) {\n        window.SUI = {};\n    }\n\n    SUI.suiSelect = function( el ) {\n\t\tvar jq = $( el ),\n\t\t\twrap, handle, list, value, items;\n\n\t\tif ( ! jq.is( 'select' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( jq.closest( '.select-container' ).length || jq.data( 'select2' ) || jq.is( '.sui-select' )  || jq.is( '.none-sui' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Add the DOM elements to style the select list.\n\t\tfunction setupElement() {\n\t\t\tjq.wrap( '<div class=\"select-container\">' );\n\t\t\tjq.hide();\n\n\t\t\twrap = jq.parent();\n\t\t\thandle = $( '<span class=\"dropdown-handle\"><i class=\"sui-icon-chevron-down\" aria-hidden=\"true\"></i></span>' ).prependTo( wrap );\n\t\t\tlist = $( '<div class=\"select-list-container\"></div>' ).appendTo( wrap );\n\t\t\tvalue = $( '<div class=\"list-value\">&nbsp;</div>' ).appendTo( list );\n\t\t\titems = $( '<ul class=\"list-results\"></ul>' ).appendTo( list );\n\n\t\t\twrap.addClass( jq.attr( 'class' ) );\n\t\t}\n\n\t\t// When changing selection using JS, you need to trigger a 'sui:change' event\n\t\t// eg: $('select').val('4').trigger('sui:change')\n\t\tfunction handleSelectionChange() {\n\t\t\tjq.on( 'sui:change', function() {\n\n\t\t\t\t// We need to re-populateList to handle dynamic select options added via JS/ajax.\n\t\t\t\tpopulateList();\n\t\t\t\titems.find( 'li' ).not( '.optgroup-label' ).on( 'click', function onItemClick( ev ) {\n\t\t\t\t\tvar opt = $( ev.target );\n\t\t\t\t\tselectItem( opt, false );\n\t\t\t\t\thandleValue();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t// Add all the options to the new DOM elements.\n\t\tfunction populateList() {\n            var children = jq.children();\n\t\t\titems.empty();\n            children.each( function() {\n                var opt = $( this ),\n                    item,\n\t\t\t\t\toptgroup = $( this ),\n                    optGroupItem,\n                    $label;\n                if ( 'OPTION' == $( this ).prop ( 'tagName' ) ) {\n                    item = $( '<li></li>' ).appendTo( items );\n                    item.text( opt.text() );\n                    item.data( 'value', opt.val() );\n\n                    if ( opt.val() == jq.val() ) {\n                        selectItem( item, true );\n                    }\n                } else {\n                    optGroupItem = $( '<ul></ul>' ).appendTo( items );\n                    $label = $( '<li class=\"optgroup-label\"></li>' ).text( optgroup.prop( 'label' ) );\n\n                    optGroupItem.html( $label );\n                    optGroupItem.addClass( 'optgroup' );\n\n                    optgroup.find( 'option' ).each( function onPopulateLoop() {\n                        var opt = $( this ),\n                            item;\n                        item = $( '<li></li>' ).appendTo( optGroupItem );\n                        item.text( opt.text() );\n                        item.data( 'value', opt.val() );\n\n                        if ( opt.val() == jq.val() ) {\n                            selectItem( item );\n                        }\n                    });\n                }\n\n            });\n\t\t}\n\n\t\t// Checks the option value for a link.\n\t\tfunction handleValue() {\n\t\t\tvar val = jq[0].value;\n\n\t\t\t// If option is link, navigate to it.\n\t\t\tif ( val.match( '^https?:\\/\\/|#' ) ) {\n\t\t\t\twindow.location.href = val;\n\t\t\t}\n\t\t}\n\n\t\t// Toggle the dropdown state between open/closed.\n\t\tfunction stateToggle() {\n\t\t\tif ( wrap.find( 'select' ).is( ':disabled' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( ! wrap.hasClass( 'active' ) ) {\n\t\t\t\tstateOpen();\n\t\t\t} else {\n\t\t\t\tstateClose();\n\t\t\t}\n\t\t}\n\n\t\t// Close the dropdown list.\n\t\tfunction stateClose( item ) {\n\t\t\tif ( ! item ) {\n\t\t\t\titem = wrap;\n\t\t\t}\n\n\t\t\titem.removeClass( 'active' );\n\t\t\titem.closest( 'tr' ).removeClass( 'select-open' );\n\t\t}\n\n\t\t// Open the dropdown list.\n\t\tfunction stateOpen() {\n\t\t\t$( '.select-container.active' ).each( function() {\n\t\t\t\tstateClose( $( this ) );\n\t\t\t});\n\n\t\t\twrap.addClass( 'active' );\n\t\t\twrap.closest( 'tr' ).addClass( 'select-open' );\n\t\t}\n\n\t\t// Visually mark the specified option as \"selected\".\n\t\tfunction selectItem( opt, isInit ) {\n\t\t\tisInit = 'undefined' === typeof isInit ? false : isInit;\n\t\t\tvalue.text( opt.text() );\n\t\t\t$( '.current', items ).removeClass( 'current' );\n\t\t\topt.addClass( 'current' );\n\t\t\tstateClose();\n\n\t\t\t// Also update the select list value.\n\t\t\tjq.val( opt.data( 'value' ) );\n\n\t\t\tif ( ! isInit ) {\n\t\t\t\tjq.trigger( 'change' );\n\t\t\t}\n\n\t\t}\n\n\t\t// Element constructor.\n\t\tfunction init() {\n\t\t\tvar selectID;\n\n\t\t\tsetupElement();\n\t\t\tpopulateList();\n\t\t\thandleSelectionChange();\n\n\t\t\titems.find( 'li' ).not( '.optgroup-label' ).on( 'click', function onItemClick( ev ) {\n\t\t\t\tvar opt = $( ev.target );\n\t\t\t\tselectItem( opt, false );\n\t\t\t\thandleValue();\n\t\t\t});\n\n\t\t\thandle.on( 'click', stateToggle );\n\t\t\tvalue.on( 'click', stateToggle );\n\t\t\tjq.on( 'focus', stateOpen );\n\n\t\t\t$( document ).click( function onOutsideClick( ev ) {\n\t\t\t\tvar jq = $( ev.target ),\n\t\t\t\t\tselectID;\n\n\t\t\t\tif ( jq.closest( '.select-container' ).length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( jq.is( 'label' ) && jq.attr( 'for' ) ) {\n\t\t\t\t\tselectID = jq.attr( 'for' );\n\n\t\t\t\t\tif ( $( 'select#' + selectID ).length ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstateClose();\n\t\t\t});\n\n\t\t\tselectID = jq.attr( 'id' );\n\n\t\t\tif ( selectID ) {\n\t\t\t\t$( 'label[for=' + selectID + ']' ).on( 'click', stateOpen );\n\t\t\t}\n\n\t\t\tjq.addClass( 'sui-styled' );\n\t\t}\n\n\t\tinit();\n\n\t\treturn this;\n\t};\n\n\t// Convert all select lists to fancy sui Select lists.\n\t$( '.sui-2-2-4 select' ).each( function() {\n\t\tSUI.suiSelect( this );\n\t});\n\n}( jQuery ) );\n\n/*!\n * Select2 4.0.5\n * https://select2.github.io\n *\n * Released under the MIT license\n * https://github.com/select2/select2/blob/master/LICENSE.md\n *\n * Modified logic/function,etc besides formatting should be marked with //SUI-SELECT2\n * For easy debugging process or update upstream of select\n */\n(function (factory) {\n    // SUI-SELECT2 disable AMD and module exports\n    if (false) {} else if (false) {} else {\n        // Browser globals\n        factory(jQuery);\n    }\n} (function (jQuery) {\n    // This is needed so we can catch the AMD loader configuration and use it\n    // The inner file should be wrapped (by `banner.start.js`) in a function that\n    // returns the AMD loader references.\n    var S2 =(function () {\n        // Restore the Select2 AMD loader so it can be used\n        // Needed mostly in the language files, where the loader is not inserted\n        if (jQuery && jQuery.fn && jQuery.fn.select2 && jQuery.fn.select2.amd) {\n            var S2 = jQuery.fn.select2.amd;\n        }\n        var S2;(function () { if (!S2 || !S2.requirejs) {\n            if (!S2) { S2 = {}; } else { require = S2; }\n            /**\n             * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.\n             * Released under MIT license, http://github.com/requirejs/almond/LICENSE\n             */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n            /*global setTimeout: false */\n\n            var requirejs, require, define;\n            (function (undef) {\n                var main, req, makeMap, handlers,\n                    defined = {},\n                    waiting = {},\n                    config = {},\n                    defining = {},\n                    hasOwn = Object.prototype.hasOwnProperty,\n                    aps = [].slice,\n                    jsSuffixRegExp = /\\.js$/;\n\n                function hasProp(obj, prop) {\n                    return hasOwn.call(obj, prop);\n                }\n\n                /**\n                 * Given a relative module name, like ./something, normalize it to\n                 * a real name that can be mapped to a path.\n                 * @param {String} name the relative name\n                 * @param {String} baseName a real name that the name arg is relative\n                 * to.\n                 * @returns {String} normalized name\n                 */\n                function normalize(name, baseName) {\n                    var nameParts, nameSegment, mapValue, foundMap, lastIndex,\n                        foundI, foundStarMap, starI, i, j, part, normalizedBaseParts,\n                        baseParts = baseName && baseName.split(\"/\"),\n                        map = config.map,\n                        starMap = (map && map['*']) || {};\n\n                    //Adjust any relative paths.\n                    if (name) {\n                        name = name.split('/');\n                        lastIndex = name.length - 1;\n\n                        // If wanting node ID compatibility, strip .js from end\n                        // of IDs. Have to do this here, and not in nameToUrl\n                        // because node allows either .js or non .js to map\n                        // to same file.\n                        if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n                            name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n                        }\n\n                        // Starts with a '.' so need the baseName\n                        if (name[0].charAt(0) === '.' && baseParts) {\n                            //Convert baseName to array, and lop off the last part,\n                            //so that . matches that 'directory' and not name of the baseName's\n                            //module. For instance, baseName of 'one/two/three', maps to\n                            //'one/two/three.js', but we want the directory, 'one/two' for\n                            //this normalization.\n                            normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\n                            name = normalizedBaseParts.concat(name);\n                        }\n\n                        //start trimDots\n                        for (i = 0; i < name.length; i++) {\n                            part = name[i];\n                            if (part === '.') {\n                                name.splice(i, 1);\n                                i -= 1;\n                            } else if (part === '..') {\n                                // If at the start, or previous value is still ..,\n                                // keep them so that when converted to a path it may\n                                // still work when converted to a path, even though\n                                // as an ID it is less than ideal. In larger point\n                                // releases, may be better to just kick out an error.\n                                if (i === 0 || (i === 1 && name[2] === '..') || name[i - 1] === '..') {\n                                    continue;\n                                } else if (i > 0) {\n                                    name.splice(i - 1, 2);\n                                    i -= 2;\n                                }\n                            }\n                        }\n                        //end trimDots\n\n                        name = name.join('/');\n                    }\n\n                    //Apply map config if available.\n                    if ((baseParts || starMap) && map) {\n                        nameParts = name.split('/');\n\n                        for (i = nameParts.length; i > 0; i -= 1) {\n                            nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                            if (baseParts) {\n                                //Find the longest baseName segment match in the config.\n                                //So, do joins on the biggest to smallest lengths of baseParts.\n                                for (j = baseParts.length; j > 0; j -= 1) {\n                                    mapValue = map[baseParts.slice(0, j).join('/')];\n\n                                    //baseName segment has  config, find if it has one for\n                                    //this name.\n                                    if (mapValue) {\n                                        mapValue = mapValue[nameSegment];\n                                        if (mapValue) {\n                                            //Match, update name to the new value.\n                                            foundMap = mapValue;\n                                            foundI = i;\n                                            break;\n                                        }\n                                    }\n                                }\n                            }\n\n                            if (foundMap) {\n                                break;\n                            }\n\n                            //Check for a star map match, but just hold on to it,\n                            //if there is a shorter segment match later in a matching\n                            //config, then favor over this star map.\n                            if (!foundStarMap && starMap && starMap[nameSegment]) {\n                                foundStarMap = starMap[nameSegment];\n                                starI = i;\n                            }\n                        }\n\n                        if (!foundMap && foundStarMap) {\n                            foundMap = foundStarMap;\n                            foundI = starI;\n                        }\n\n                        if (foundMap) {\n                            nameParts.splice(0, foundI, foundMap);\n                            name = nameParts.join('/');\n                        }\n                    }\n\n                    return name;\n                }\n\n                function makeRequire(relName, forceSync) {\n                    return function () {\n                        //A version of a require function that passes a moduleName\n                        //value for items that may need to\n                        //look up paths relative to the moduleName\n                        var args = aps.call(arguments, 0);\n\n                        //If first arg is not require('string'), and there is only\n                        //one arg, it is the array form without a callback. Insert\n                        //a null so that the following concat is correct.\n                        if (typeof args[0] !== 'string' && args.length === 1) {\n                            args.push(null);\n                        }\n                        return req.apply(undef, args.concat([relName, forceSync]));\n                    };\n                }\n\n                function makeNormalize(relName) {\n                    return function (name) {\n                        return normalize(name, relName);\n                    };\n                }\n\n                function makeLoad(depName) {\n                    return function (value) {\n                        defined[depName] = value;\n                    };\n                }\n\n                function callDep(name) {\n                    if (hasProp(waiting, name)) {\n                        var args = waiting[name];\n                        delete waiting[name];\n                        defining[name] = true;\n                        main.apply(undef, args);\n                    }\n\n                    if (!hasProp(defined, name) && !hasProp(defining, name)) {\n                        throw new Error('No ' + name);\n                    }\n                    return defined[name];\n                }\n\n                //Turns a plugin!resource to [plugin, resource]\n                //with the plugin being undefined if the name\n                //did not have a plugin prefix.\n                function splitPrefix(name) {\n                    var prefix,\n                        index = name ? name.indexOf('!') : -1;\n                    if (index > -1) {\n                        prefix = name.substring(0, index);\n                        name = name.substring(index + 1, name.length);\n                    }\n                    return [prefix, name];\n                }\n\n                //Creates a parts array for a relName where first part is plugin ID,\n                //second part is resource ID. Assumes relName has already been normalized.\n                function makeRelParts(relName) {\n                    return relName ? splitPrefix(relName) : [];\n                }\n\n                /**\n                 * Makes a name map, normalizing the name, and using a plugin\n                 * for normalization if necessary. Grabs a ref to plugin\n                 * too, as an optimization.\n                 */\n                makeMap = function (name, relParts) {\n                    var plugin,\n                        parts = splitPrefix(name),\n                        prefix = parts[0],\n                        relResourceName = relParts[1];\n\n                    name = parts[1];\n\n                    if (prefix) {\n                        prefix = normalize(prefix, relResourceName);\n                        plugin = callDep(prefix);\n                    }\n\n                    //Normalize according\n                    if (prefix) {\n                        if (plugin && plugin.normalize) {\n                            name = plugin.normalize(name, makeNormalize(relResourceName));\n                        } else {\n                            name = normalize(name, relResourceName);\n                        }\n                    } else {\n                        name = normalize(name, relResourceName);\n                        parts = splitPrefix(name);\n                        prefix = parts[0];\n                        name = parts[1];\n                        if (prefix) {\n                            plugin = callDep(prefix);\n                        }\n                    }\n\n                    //Using ridiculous property names for space reasons\n                    return {\n                        f: prefix ? prefix + '!' + name : name, //fullName\n                        n: name,\n                        pr: prefix,\n                        p: plugin\n                    };\n                };\n\n                function makeConfig(name) {\n                    return function () {\n                        return (config && config.config && config.config[name]) || {};\n                    };\n                }\n\n                handlers = {\n                    require: function (name) {\n                        return makeRequire(name);\n                    },\n                    exports: function (name) {\n                        var e = defined[name];\n                        if (typeof e !== 'undefined') {\n                            return e;\n                        } else {\n                            return (defined[name] = {});\n                        }\n                    },\n                    module: function (name) {\n                        return {\n                            id: name,\n                            uri: '',\n                            exports: defined[name],\n                            config: makeConfig(name)\n                        };\n                    }\n                };\n\n                main = function (name, deps, callback, relName) {\n                    var cjsModule, depName, ret, map, i, relParts,\n                        args = [],\n                        callbackType = typeof callback,\n                        usingExports;\n\n                    //Use name if no relName\n                    relName = relName || name;\n                    relParts = makeRelParts(relName);\n\n                    //Call the callback to define the module, if necessary.\n                    if (callbackType === 'undefined' || callbackType === 'function') {\n                        //Pull out the defined dependencies and pass the ordered\n                        //values to the callback.\n                        //Default to [require, exports, module] if no deps\n                        deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n                        for (i = 0; i < deps.length; i += 1) {\n                            map = makeMap(deps[i], relParts);\n                            depName = map.f;\n\n                            //Fast path CommonJS standard dependencies.\n                            if (depName === \"require\") {\n                                args[i] = handlers.require(name);\n                            } else if (depName === \"exports\") {\n                                //CommonJS module spec 1.1\n                                args[i] = handlers.exports(name);\n                                usingExports = true;\n                            } else if (depName === \"module\") {\n                                //CommonJS module spec 1.1\n                                cjsModule = args[i] = handlers.module(name);\n                            } else if (hasProp(defined, depName) ||\n                                       hasProp(waiting, depName) ||\n                                       hasProp(defining, depName)) {\n                                args[i] = callDep(depName);\n                            } else if (map.p) {\n                                map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                                args[i] = defined[depName];\n                            } else {\n                                throw new Error(name + ' missing ' + depName);\n                            }\n                        }\n\n                        ret = callback ? callback.apply(defined[name], args) : undefined;\n\n                        if (name) {\n                            //If setting exports via \"module\" is in play,\n                            //favor that over return value and exports. After that,\n                            //favor a non-undefined return value over exports use.\n                            if (cjsModule && cjsModule.exports !== undef &&\n                                cjsModule.exports !== defined[name]) {\n                                defined[name] = cjsModule.exports;\n                            } else if (ret !== undef || !usingExports) {\n                                //Use the return value from the function.\n                                defined[name] = ret;\n                            }\n                        }\n                    } else if (name) {\n                        //May just be an object definition for the module. Only\n                        //worry about defining if have a module name.\n                        defined[name] = callback;\n                    }\n                };\n\n                requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n                    if (typeof deps === \"string\") {\n                        if (handlers[deps]) {\n                            //callback in this case is really relName\n                            return handlers[deps](callback);\n                        }\n                        //Just return the module wanted. In this scenario, the\n                        //deps arg is the module name, and second arg (if passed)\n                        //is just the relName.\n                        //Normalize module name, if it contains . or ..\n                        return callDep(makeMap(deps, makeRelParts(callback)).f);\n                    } else if (!deps.splice) {\n                        //deps is a config object, not an array.\n                        config = deps;\n                        if (config.deps) {\n                            req(config.deps, config.callback);\n                        }\n                        if (!callback) {\n                            return;\n                        }\n\n                        if (callback.splice) {\n                            //callback is an array, which means it is a dependency list.\n                            //Adjust args if there are dependencies\n                            deps = callback;\n                            callback = relName;\n                            relName = null;\n                        } else {\n                            deps = undef;\n                        }\n                    }\n\n                    //Support require(['a'])\n                    callback = callback || function () {};\n\n                    //If relName is a function, it is an errback handler,\n                    //so remove it.\n                    if (typeof relName === 'function') {\n                        relName = forceSync;\n                        forceSync = alt;\n                    }\n\n                    //Simulate async callback;\n                    if (forceSync) {\n                        main(undef, deps, callback, relName);\n                    } else {\n                        //Using a non-zero value because of concern for what old browsers\n                        //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n                        //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n                        //If want a value immediately, use require('id') instead -- something\n                        //that works in almond on the global level, but not guaranteed and\n                        //unlikely to work in other AMD implementations.\n                        setTimeout(function () {\n                            main(undef, deps, callback, relName);\n                        }, 4);\n                    }\n\n                    return req;\n                };\n\n                /**\n                 * Just drops the config on the floor, but returns req in case\n                 * the config return value is used.\n                 */\n                req.config = function (cfg) {\n                    return req(cfg);\n                };\n\n                /**\n                 * Expose module registry for debugging and tooling\n                 */\n                requirejs._defined = defined;\n\n                define = function (name, deps, callback) {\n                    if (typeof name !== 'string') {\n                        throw new Error('See almond README: incorrect module build, no module name');\n                    }\n\n                    //This module may not have dependencies\n                    if (!deps.splice) {\n                        //deps is not an array, so probably means\n                        //an object literal or factory function for\n                        //the value. Adjust args.\n                        callback = deps;\n                        deps = [];\n                    }\n\n                    if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n                        waiting[name] = [name, deps, callback];\n                    }\n                };\n\n                define.amd = {\n                    jQuery: true\n                };\n            }());\n\n            S2.requirejs = requirejs;S2.require = require;S2.define = define;\n        }\n        }());\n        S2.define(\"almond\", function(){});\n\n        /* global jQuery:false, $:false */\n        S2.define('jquery',[],function () {\n            var _$ = jQuery || $;\n\n            if (_$ == null && console && console.error) {\n                console.error(\n                    'Select2: An instance of jQuery or a jQuery-compatible library was not ' +\n                    'found. Make sure that you are including jQuery before Select2 on your ' +\n                    'web page.'\n                );\n            }\n\n            return _$;\n        });\n\n        S2.define('select2/utils',[\n            'jquery'\n        ], function ($) {\n            var Utils = {};\n\n            Utils.Extend = function (ChildClass, SuperClass) {\n                var __hasProp = {}.hasOwnProperty;\n\n                function BaseConstructor () {\n                    this.constructor = ChildClass;\n                }\n\n                for (var key in SuperClass) {\n                    if (__hasProp.call(SuperClass, key)) {\n                        ChildClass[key] = SuperClass[key];\n                    }\n                }\n\n                BaseConstructor.prototype = SuperClass.prototype;\n                ChildClass.prototype = new BaseConstructor();\n                ChildClass.__super__ = SuperClass.prototype;\n\n                return ChildClass;\n            };\n\n            function getMethods (theClass) {\n                var proto = theClass.prototype;\n\n                var methods = [];\n\n                for (var methodName in proto) {\n                    var m = proto[methodName];\n\n                    if (typeof m !== 'function') {\n                        continue;\n                    }\n\n                    if (methodName === 'constructor') {\n                        continue;\n                    }\n\n                    methods.push(methodName);\n                }\n\n                return methods;\n            }\n\n            Utils.Decorate = function (SuperClass, DecoratorClass) {\n                var decoratedMethods = getMethods(DecoratorClass);\n                var superMethods = getMethods(SuperClass);\n\n                function DecoratedClass () {\n                    var unshift = Array.prototype.unshift;\n\n                    var argCount = DecoratorClass.prototype.constructor.length;\n\n                    var calledConstructor = SuperClass.prototype.constructor;\n\n                    if (argCount > 0) {\n                        unshift.call(arguments, SuperClass.prototype.constructor);\n\n                        calledConstructor = DecoratorClass.prototype.constructor;\n                    }\n\n                    calledConstructor.apply(this, arguments);\n                }\n\n                DecoratorClass.displayName = SuperClass.displayName;\n\n                function ctr () {\n                    this.constructor = DecoratedClass;\n                }\n\n                DecoratedClass.prototype = new ctr();\n\n                for (var m = 0; m < superMethods.length; m++) {\n                    var superMethod = superMethods[m];\n\n                    DecoratedClass.prototype[superMethod] =\n                        SuperClass.prototype[superMethod];\n                }\n\n                var calledMethod = function (methodName) {\n                    // Stub out the original method if it's not decorating an actual method\n                    var originalMethod = function () {};\n\n                    if (methodName in DecoratedClass.prototype) {\n                        originalMethod = DecoratedClass.prototype[methodName];\n                    }\n\n                    var decoratedMethod = DecoratorClass.prototype[methodName];\n\n                    return function () {\n                        var unshift = Array.prototype.unshift;\n\n                        unshift.call(arguments, originalMethod);\n\n                        return decoratedMethod.apply(this, arguments);\n                    };\n                };\n\n                for (var d = 0; d < decoratedMethods.length; d++) {\n                    var decoratedMethod = decoratedMethods[d];\n\n                    DecoratedClass.prototype[decoratedMethod] = calledMethod(decoratedMethod);\n                }\n\n                return DecoratedClass;\n            };\n\n            var Observable = function () {\n                this.listeners = {};\n            };\n\n            Observable.prototype.on = function (event, callback) {\n                this.listeners = this.listeners || {};\n\n                if (event in this.listeners) {\n                    this.listeners[event].push(callback);\n                } else {\n                    this.listeners[event] = [callback];\n                }\n            };\n\n            Observable.prototype.trigger = function (event) {\n                var slice = Array.prototype.slice;\n                var params = slice.call(arguments, 1);\n\n                this.listeners = this.listeners || {};\n\n                // Params should always come in as an array\n                if (params == null) {\n                    params = [];\n                }\n\n                // If there are no arguments to the event, use a temporary object\n                if (params.length === 0) {\n                    params.push({});\n                }\n\n                // Set the `_type` of the first object to the event\n                params[0]._type = event;\n\n                if (event in this.listeners) {\n                    this.invoke(this.listeners[event], slice.call(arguments, 1));\n                }\n\n                if ('*' in this.listeners) {\n                    this.invoke(this.listeners['*'], arguments);\n                }\n            };\n\n            Observable.prototype.invoke = function (listeners, params) {\n                for (var i = 0, len = listeners.length; i < len; i++) {\n                    listeners[i].apply(this, params);\n                }\n            };\n\n            Utils.Observable = Observable;\n\n            Utils.generateChars = function (length) {\n                var chars = '';\n\n                for (var i = 0; i < length; i++) {\n                    var randomChar = Math.floor(Math.random() * 36);\n                    chars += randomChar.toString(36);\n                }\n\n                return chars;\n            };\n\n            Utils.bind = function (func, context) {\n                return function () {\n                    func.apply(context, arguments);\n                };\n            };\n\n            Utils._convertData = function (data) {\n                for (var originalKey in data) {\n                    var keys = originalKey.split('-');\n\n                    var dataLevel = data;\n\n                    if (keys.length === 1) {\n                        continue;\n                    }\n\n                    for (var k = 0; k < keys.length; k++) {\n                        var key = keys[k];\n\n                        // Lowercase the first letter\n                        // By default, dash-separated becomes camelCase\n                        key = key.substring(0, 1).toLowerCase() + key.substring(1);\n\n                        if (!(key in dataLevel)) {\n                            dataLevel[key] = {};\n                        }\n\n                        if (k == keys.length - 1) {\n                            dataLevel[key] = data[originalKey];\n                        }\n\n                        dataLevel = dataLevel[key];\n                    }\n\n                    delete data[originalKey];\n                }\n\n                return data;\n            };\n\n            Utils.hasScroll = function (index, el) {\n                // Adapted from the function created by @ShadowScripter\n                // and adapted by @BillBarry on the Stack Exchange Code Review website.\n                // The original code can be found at\n                // http://codereview.stackexchange.com/q/13338\n                // and was designed to be used with the Sizzle selector engine.\n\n                var $el = $(el);\n                var overflowX = el.style.overflowX;\n                var overflowY = el.style.overflowY;\n\n                //Check both x and y declarations\n                if (overflowX === overflowY &&\n                    (overflowY === 'hidden' || overflowY === 'visible')) {\n                    return false;\n                }\n\n                if (overflowX === 'scroll' || overflowY === 'scroll') {\n                    return true;\n                }\n\n                return ($el.innerHeight() < el.scrollHeight ||\n                        $el.innerWidth() < el.scrollWidth);\n            };\n\n            Utils.escapeMarkup = function (markup) {\n                var replaceMap = {\n                    '\\\\': '&#92;',\n                    '&': '&amp;',\n                    '<': '&lt;',\n                    '>': '&gt;',\n                    '\"': '&quot;',\n                    '\\'': '&#39;',\n                    '/': '&#47;'\n                };\n\n                // Do not try to escape the markup if it's not a string\n                if (typeof markup !== 'string') {\n                    return markup;\n                }\n\n                return String(markup).replace(/[&<>\"'\\/\\\\]/g, function (match) {\n                    return replaceMap[match];\n                });\n            };\n\n            // Append an array of jQuery nodes to a given element.\n            Utils.appendMany = function ($element, $nodes) {\n                // jQuery 1.7.x does not support $.fn.append() with an array\n                // Fall back to a jQuery object collection using $.fn.add()\n                if ($.fn.jquery.substr(0, 3) === '1.7') {\n                    var $jqNodes = $();\n\n                    $.map($nodes, function (node) {\n                        $jqNodes = $jqNodes.add(node);\n                    });\n\n                    $nodes = $jqNodes;\n                }\n\n                $element.append($nodes);\n            };\n\n            return Utils;\n        });\n\n        S2.define('select2/results',[\n            'jquery',\n            './utils'\n        ], function ($, Utils) {\n            function Results ($element, options, dataAdapter) {\n                this.$element = $element;\n                this.data = dataAdapter;\n                this.options = options;\n\n                Results.__super__.constructor.call(this);\n            }\n\n            Utils.Extend(Results, Utils.Observable);\n\n            Results.prototype.render = function () {\n                var $results = $(\n                    '<ul class=\"select2-results__options\" role=\"tree\"></ul>'\n                );\n\n                if (this.options.get('multiple')) {\n                    $results.attr('aria-multiselectable', 'true');\n                }\n\n                this.$results = $results;\n\n                return $results;\n            };\n\n            Results.prototype.clear = function () {\n                this.$results.empty();\n            };\n\n            Results.prototype.displayMessage = function (params) {\n                var escapeMarkup = this.options.get('escapeMarkup');\n\n                this.clear();\n                this.hideLoading();\n\n                var $message = $(\n                    '<li role=\"treeitem\" aria-live=\"assertive\"' +\n                    ' class=\"select2-results__option\"></li>'\n                );\n\n                var message = this.options.get('translations').get(params.message);\n\n                $message.append(\n                    escapeMarkup(\n                        message(params.args)\n                    )\n                );\n\n                $message[0].className += ' select2-results__message';\n\n                this.$results.append($message);\n            };\n\n            Results.prototype.hideMessages = function () {\n                this.$results.find('.select2-results__message').remove();\n            };\n\n            Results.prototype.append = function (data) {\n                this.hideLoading();\n\n                var $options = [];\n\n                if (data.results == null || data.results.length === 0) {\n                    if (this.$results.children().length === 0) {\n                        this.trigger('results:message', {\n                            message: 'noResults'\n                        });\n                    }\n\n                    return;\n                }\n\n                data.results = this.sort(data.results);\n\n                for (var d = 0; d < data.results.length; d++) {\n                    var item = data.results[d];\n\n                    var $option = this.option(item);\n\n                    $options.push($option);\n                }\n\n                this.$results.append($options);\n            };\n\n            Results.prototype.position = function ($results, $dropdown) {\n                var $resultsContainer = $dropdown.find('.select2-results');\n                $resultsContainer.append($results);\n            };\n\n            Results.prototype.sort = function (data) {\n                var sorter = this.options.get('sorter');\n\n                return sorter(data);\n            };\n\n            Results.prototype.highlightFirstItem = function () {\n                var $options = this.$results\n                                   .find('.select2-results__option[aria-selected]');\n\n                var $selected = $options.filter('[aria-selected=true]');\n\n                // Check if there are any selected options\n                if ($selected.length > 0) {\n                    // If there are selected options, highlight the first\n                    $selected.first().trigger('mouseenter');\n                } else {\n                    // If there are no selected options, highlight the first option\n                    // in the dropdown\n                    $options.first().trigger('mouseenter');\n                }\n\n                this.ensureHighlightVisible();\n            };\n\n            Results.prototype.setClasses = function () {\n                var self = this;\n\n                this.data.current(function (selected) {\n                    var selectedIds = $.map(selected, function (s) {\n                        return s.id.toString();\n                    });\n\n                    var $options = self.$results\n                                       .find('.select2-results__option[aria-selected]');\n\n                    $options.each(function () {\n                        var $option = $(this);\n\n                        var item = $.data(this, 'data');\n\n                        // id needs to be converted to a string when comparing\n                        var id = '' + item.id;\n\n                        if ((item.element != null && item.element.selected) ||\n                            (item.element == null && $.inArray(id, selectedIds) > -1)) {\n                            $option.attr('aria-selected', 'true');\n                        } else {\n                            $option.attr('aria-selected', 'false');\n                        }\n                    });\n\n                });\n            };\n\n            Results.prototype.showLoading = function (params) {\n                this.hideLoading();\n\n                var loadingMore = this.options.get('translations').get('searching');\n\n                var loading = {\n                    disabled: true,\n                    loading: true,\n                    text: loadingMore(params)\n                };\n                var $loading = this.option(loading);\n                $loading.className += ' loading-results';\n\n                this.$results.prepend($loading);\n            };\n\n            Results.prototype.hideLoading = function () {\n                this.$results.find('.loading-results').remove();\n            };\n\n            Results.prototype.option = function (data) {\n                var option = document.createElement('li');\n                option.className = 'select2-results__option';\n\n                var attrs = {\n                    'role': 'treeitem',\n                    'aria-selected': 'false'\n                };\n\n                if (data.disabled) {\n                    delete attrs['aria-selected'];\n                    attrs['aria-disabled'] = 'true';\n                }\n\n                if (data.id == null) {\n                    delete attrs['aria-selected'];\n                }\n\n                if (data._resultId != null) {\n                    option.id = data._resultId;\n                }\n\n                if (data.title) {\n                    option.title = data.title;\n                }\n\n                if (data.children) {\n                    attrs.role = 'group';\n                    attrs['aria-label'] = data.text;\n                    delete attrs['aria-selected'];\n                }\n\n                for (var attr in attrs) {\n                    var val = attrs[attr];\n\n                    option.setAttribute(attr, val);\n                }\n\n                if (data.children) {\n                    var $option = $(option);\n\n                    var label = document.createElement('strong');\n                    label.className = 'select2-results__group';\n\n                    var $label = $(label);\n                    this.template(data, label);\n\n                    var $children = [];\n\n                    for (var c = 0; c < data.children.length; c++) {\n                        var child = data.children[c];\n\n                        var $child = this.option(child);\n\n                        $children.push($child);\n                    }\n\n                    var $childrenContainer = $('<ul></ul>', {\n                        'class': 'select2-results__options select2-results__options--nested'\n                    });\n\n                    $childrenContainer.append($children);\n\n                    $option.append(label);\n                    $option.append($childrenContainer);\n                } else {\n                    this.template(data, option);\n                }\n\n                $.data(option, 'data', data);\n\n                return option;\n            };\n\n            Results.prototype.bind = function (container, $container) {\n                var self = this;\n\n                var id = container.id + '-results';\n\n                this.$results.attr('id', id);\n\n                container.on('results:all', function (params) {\n                    self.clear();\n                    self.append(params.data);\n\n                    if (container.isOpen()) {\n                        self.setClasses();\n                        self.highlightFirstItem();\n                    }\n                });\n\n                container.on('results:append', function (params) {\n                    self.append(params.data);\n\n                    if (container.isOpen()) {\n                        self.setClasses();\n                    }\n                });\n\n                container.on('query', function (params) {\n                    self.hideMessages();\n                    self.showLoading(params);\n                });\n\n                container.on('select', function () {\n                    if (!container.isOpen()) {\n                        return;\n                    }\n\n                    self.setClasses();\n                    self.highlightFirstItem();\n                });\n\n                container.on('unselect', function () {\n                    if (!container.isOpen()) {\n                        return;\n                    }\n\n                    self.setClasses();\n                    self.highlightFirstItem();\n                });\n\n                container.on('open', function () {\n                    // When the dropdown is open, aria-expended=\"true\"\n                    self.$results.attr('aria-expanded', 'true');\n                    self.$results.attr('aria-hidden', 'false');\n\n                    self.setClasses();\n                    self.ensureHighlightVisible();\n                });\n\n                container.on('close', function () {\n                    // When the dropdown is closed, aria-expended=\"false\"\n                    self.$results.attr('aria-expanded', 'false');\n                    self.$results.attr('aria-hidden', 'true');\n                    self.$results.removeAttr('aria-activedescendant');\n                });\n\n                container.on('results:toggle', function () {\n                    var $highlighted = self.getHighlightedResults();\n\n                    if ($highlighted.length === 0) {\n                        return;\n                    }\n\n                    $highlighted.trigger('mouseup');\n                });\n\n                container.on('results:select', function () {\n                    var $highlighted = self.getHighlightedResults();\n\n                    if ($highlighted.length === 0) {\n                        return;\n                    }\n\n                    var data = $highlighted.data('data');\n\n                    if ($highlighted.attr('aria-selected') == 'true') {\n                        self.trigger('close', {});\n                    } else {\n                        self.trigger('select', {\n                            data: data\n                        });\n                    }\n                });\n\n                container.on('results:previous', function () {\n                    var $highlighted = self.getHighlightedResults();\n\n                    var $options = self.$results.find('[aria-selected]');\n\n                    var currentIndex = $options.index($highlighted);\n\n                    // If we are already at te top, don't move further\n                    if (currentIndex === 0) {\n                        return;\n                    }\n\n                    var nextIndex = currentIndex - 1;\n\n                    // If none are highlighted, highlight the first\n                    if ($highlighted.length === 0) {\n                        nextIndex = 0;\n                    }\n\n                    var $next = $options.eq(nextIndex);\n\n                    $next.trigger('mouseenter');\n\n                    var currentOffset = self.$results.offset().top;\n                    var nextTop = $next.offset().top;\n                    var nextOffset = self.$results.scrollTop() + (nextTop - currentOffset);\n\n                    if (nextIndex === 0) {\n                        self.$results.scrollTop(0);\n                    } else if (nextTop - currentOffset < 0) {\n                        self.$results.scrollTop(nextOffset);\n                    }\n                });\n\n                container.on('results:next', function () {\n                    var $highlighted = self.getHighlightedResults();\n\n                    var $options = self.$results.find('[aria-selected]');\n\n                    var currentIndex = $options.index($highlighted);\n\n                    var nextIndex = currentIndex + 1;\n\n                    // If we are at the last option, stay there\n                    if (nextIndex >= $options.length) {\n                        return;\n                    }\n\n                    var $next = $options.eq(nextIndex);\n\n                    $next.trigger('mouseenter');\n\n                    var currentOffset = self.$results.offset().top +\n                                        self.$results.outerHeight(false);\n                    var nextBottom = $next.offset().top + $next.outerHeight(false);\n                    var nextOffset = self.$results.scrollTop() + nextBottom - currentOffset;\n\n                    if (nextIndex === 0) {\n                        self.$results.scrollTop(0);\n                    } else if (nextBottom > currentOffset) {\n                        self.$results.scrollTop(nextOffset);\n                    }\n                });\n\n                container.on('results:focus', function (params) {\n                    params.element.addClass('select2-results__option--highlighted');\n                });\n\n                container.on('results:message', function (params) {\n                    self.displayMessage(params);\n                });\n\n                if ($.fn.mousewheel) {\n                    this.$results.on('mousewheel', function (e) {\n                        var top = self.$results.scrollTop();\n\n                        var bottom = self.$results.get(0).scrollHeight - top + e.deltaY;\n\n                        var isAtTop = e.deltaY > 0 && top - e.deltaY <= 0;\n                        var isAtBottom = e.deltaY < 0 && bottom <= self.$results.height();\n\n                        if (isAtTop) {\n                            self.$results.scrollTop(0);\n\n                            e.preventDefault();\n                            e.stopPropagation();\n                        } else if (isAtBottom) {\n                            self.$results.scrollTop(\n                                self.$results.get(0).scrollHeight - self.$results.height()\n                            );\n\n                            e.preventDefault();\n                            e.stopPropagation();\n                        }\n                    });\n                }\n\n                this.$results.on('mouseup', '.select2-results__option[aria-selected]',\n                    function (evt) {\n                        var $this = $(this);\n\n                        var data = $this.data('data');\n\n                        if ($this.attr('aria-selected') === 'true') {\n                            if (self.options.get('multiple')) {\n                                self.trigger('unselect', {\n                                    originalEvent: evt,\n                                    data: data\n                                });\n                            } else {\n                                self.trigger('close', {});\n                            }\n\n                            return;\n                        }\n\n                        self.trigger('select', {\n                            originalEvent: evt,\n                            data: data\n                        });\n                    });\n\n                this.$results.on('mouseenter', '.select2-results__option[aria-selected]',\n                    function (evt) {\n                        var data = $(this).data('data');\n\n                        self.getHighlightedResults()\n                            .removeClass('select2-results__option--highlighted');\n\n                        self.trigger('results:focus', {\n                            data: data,\n                            element: $(this)\n                        });\n                    });\n            };\n\n            Results.prototype.getHighlightedResults = function () {\n                var $highlighted = this.$results\n                                       .find('.select2-results__option--highlighted');\n\n                return $highlighted;\n            };\n\n            Results.prototype.destroy = function () {\n                this.$results.remove();\n            };\n\n            Results.prototype.ensureHighlightVisible = function () {\n                var $highlighted = this.getHighlightedResults();\n\n                if ($highlighted.length === 0) {\n                    return;\n                }\n\n                var $options = this.$results.find('[aria-selected]');\n\n                var currentIndex = $options.index($highlighted);\n\n                var currentOffset = this.$results.offset().top;\n                var nextTop = $highlighted.offset().top;\n                var nextOffset = this.$results.scrollTop() + (nextTop - currentOffset);\n\n                var offsetDelta = nextTop - currentOffset;\n                nextOffset -= $highlighted.outerHeight(false) * 2;\n\n                if (currentIndex <= 2) {\n                    this.$results.scrollTop(0);\n                } else if (offsetDelta > this.$results.outerHeight() || offsetDelta < 0) {\n                    this.$results.scrollTop(nextOffset);\n                }\n            };\n\n            Results.prototype.template = function (result, container) {\n                var template = this.options.get('templateResult');\n                var escapeMarkup = this.options.get('escapeMarkup');\n\n                var content = template(result, container);\n\n                if (content == null) {\n                    container.style.display = 'none';\n                } else if (typeof content === 'string') {\n                    container.innerHTML = escapeMarkup(content);\n                } else {\n                    $(container).append(content);\n                }\n            };\n\n            return Results;\n        });\n\n        S2.define('select2/keys',[\n\n        ], function () {\n            var KEYS = {\n                BACKSPACE: 8,\n                TAB: 9,\n                ENTER: 13,\n                SHIFT: 16,\n                CTRL: 17,\n                ALT: 18,\n                ESC: 27,\n                SPACE: 32,\n                PAGE_UP: 33,\n                PAGE_DOWN: 34,\n                END: 35,\n                HOME: 36,\n                LEFT: 37,\n                UP: 38,\n                RIGHT: 39,\n                DOWN: 40,\n                DELETE: 46\n            };\n\n            return KEYS;\n        });\n\n        S2.define('select2/selection/base',[\n            'jquery',\n            '../utils',\n            '../keys'\n        ], function ($, Utils, KEYS) {\n            function BaseSelection ($element, options) {\n                this.$element = $element;\n                this.options = options;\n\n                BaseSelection.__super__.constructor.call(this);\n            }\n\n            Utils.Extend(BaseSelection, Utils.Observable);\n\n            BaseSelection.prototype.render = function () {\n                var $selection = $(\n                    '<span class=\"select2-selection\" role=\"combobox\" ' +\n                    ' aria-haspopup=\"true\" aria-expanded=\"false\">' +\n                    '</span>'\n                );\n\n                this._tabindex = 0;\n\n                if (this.$element.data('old-tabindex') != null) {\n                    this._tabindex = this.$element.data('old-tabindex');\n                } else if (this.$element.attr('tabindex') != null) {\n                    this._tabindex = this.$element.attr('tabindex');\n                }\n\n                $selection.attr('title', this.$element.attr('title'));\n                $selection.attr('tabindex', this._tabindex);\n\n                this.$selection = $selection;\n\n                return $selection;\n            };\n\n            BaseSelection.prototype.bind = function (container, $container) {\n                var self = this;\n\n                var id = container.id + '-container';\n                var resultsId = container.id + '-results';\n\n                this.container = container;\n\n                this.$selection.on('focus', function (evt) {\n                    self.trigger('focus', evt);\n                });\n\n                this.$selection.on('blur', function (evt) {\n                    self._handleBlur(evt);\n                });\n\n                this.$selection.on('keydown', function (evt) {\n                    self.trigger('keypress', evt);\n\n                    if (evt.which === KEYS.SPACE) {\n                        evt.preventDefault();\n                    }\n                });\n\n                container.on('results:focus', function (params) {\n                    self.$selection.attr('aria-activedescendant', params.data._resultId);\n                });\n\n                container.on('selection:update', function (params) {\n                    self.update(params.data);\n                });\n\n                container.on('open', function () {\n                    // When the dropdown is open, aria-expanded=\"true\"\n                    self.$selection.attr('aria-expanded', 'true');\n                    self.$selection.attr('aria-owns', resultsId);\n\n                    self._attachCloseHandler(container);\n                });\n\n                container.on('close', function () {\n                    // When the dropdown is closed, aria-expanded=\"false\"\n                    self.$selection.attr('aria-expanded', 'false');\n                    self.$selection.removeAttr('aria-activedescendant');\n                    self.$selection.removeAttr('aria-owns');\n\n                    self.$selection.focus();\n\n                    self._detachCloseHandler(container);\n                });\n\n                container.on('enable', function () {\n                    self.$selection.attr('tabindex', self._tabindex);\n                });\n\n                container.on('disable', function () {\n                    self.$selection.attr('tabindex', '-1');\n                });\n            };\n\n            BaseSelection.prototype._handleBlur = function (evt) {\n                var self = this;\n\n                // This needs to be delayed as the active element is the body when the tab\n                // key is pressed, possibly along with others.\n                window.setTimeout(function () {\n                    // Don't trigger `blur` if the focus is still in the selection\n                    if (\n                        (document.activeElement == self.$selection[0]) ||\n                        ($.contains(self.$selection[0], document.activeElement))\n                    ) {\n                        return;\n                    }\n\n                    self.trigger('blur', evt);\n                }, 1);\n            };\n\n            BaseSelection.prototype._attachCloseHandler = function (container) {\n                var self = this;\n\n                $(document.body).on('mousedown.select2.' + container.id, function (e) {\n                    var $target = $(e.target);\n\n                    var $select = $target.closest('.select2');\n\n                    var $all = $('.select2.select2-container--open');\n\n                    $all.each(function () {\n                        var $this = $(this);\n\n                        if (this == $select[0]) {\n                            return;\n                        }\n\n                        var $element = $this.data('element');\n\n                        // SUI-SELECT2 renamed function to SUIselect2\n                        $element.SUIselect2('close');\n                        // $element.select2('close');\n                    });\n                });\n            };\n\n            BaseSelection.prototype._detachCloseHandler = function (container) {\n                $(document.body).off('mousedown.select2.' + container.id);\n            };\n\n            BaseSelection.prototype.position = function ($selection, $container) {\n                var $selectionContainer = $container.find('.selection');\n                $selectionContainer.append($selection);\n            };\n\n            BaseSelection.prototype.destroy = function () {\n                this._detachCloseHandler(this.container);\n            };\n\n            BaseSelection.prototype.update = function (data) {\n                throw new Error('The `update` method must be defined in child classes.');\n            };\n\n            return BaseSelection;\n        });\n\n        S2.define('select2/selection/single',[\n            'jquery',\n            './base',\n            '../utils',\n            '../keys'\n        ], function ($, BaseSelection, Utils, KEYS) {\n            function SingleSelection () {\n                SingleSelection.__super__.constructor.apply(this, arguments);\n            }\n\n            Utils.Extend(SingleSelection, BaseSelection);\n\n            SingleSelection.prototype.render = function () {\n                var $selection = SingleSelection.__super__.render.call(this);\n\n                $selection.addClass('select2-selection--single');\n\n                $selection.html(\n                    '<span class=\"select2-selection__rendered\"></span>' +\n                    '<span class=\"select2-selection__arrow\" role=\"presentation\">' +\n                    '<b role=\"presentation\"></b>' +\n                    '</span>'\n                );\n\n                return $selection;\n            };\n\n            SingleSelection.prototype.bind = function (container, $container) {\n                var self = this;\n\n                SingleSelection.__super__.bind.apply(this, arguments);\n\n                var id = container.id + '-container';\n\n                this.$selection.find('.select2-selection__rendered').attr('id', id);\n                this.$selection.attr('aria-labelledby', id);\n\n                this.$selection.on('mousedown', function (evt) {\n                    // Only respond to left clicks\n                    if (evt.which !== 1) {\n                        return;\n                    }\n\n                    self.trigger('toggle', {\n                        originalEvent: evt\n                    });\n                });\n\n                this.$selection.on('focus', function (evt) {\n                    // User focuses on the container\n                });\n\n                this.$selection.on('blur', function (evt) {\n                    // User exits the container\n                });\n\n                container.on('focus', function (evt) {\n                    if (!container.isOpen()) {\n                        self.$selection.focus();\n                    }\n                });\n\n                container.on('selection:update', function (params) {\n                    self.update(params.data);\n                });\n            };\n\n            SingleSelection.prototype.clear = function () {\n                this.$selection.find('.select2-selection__rendered').empty();\n            };\n\n            SingleSelection.prototype.display = function (data, container) {\n                var template = this.options.get('templateSelection');\n                var escapeMarkup = this.options.get('escapeMarkup');\n\n                return escapeMarkup(template(data, container));\n            };\n\n            SingleSelection.prototype.selectionContainer = function () {\n                return $('<span></span>');\n            };\n\n            SingleSelection.prototype.update = function (data) {\n                if (data.length === 0) {\n                    this.clear();\n                    return;\n                }\n\n                var selection = data[0];\n\n                var $rendered = this.$selection.find('.select2-selection__rendered');\n                var formatted = this.display(selection, $rendered);\n\n                $rendered.empty().append(formatted);\n                $rendered.prop('title', selection.title || selection.text);\n            };\n\n            return SingleSelection;\n        });\n\n        S2.define('select2/selection/multiple',[\n            'jquery',\n            './base',\n            '../utils'\n        ], function ($, BaseSelection, Utils) {\n            function MultipleSelection ($element, options) {\n                MultipleSelection.__super__.constructor.apply(this, arguments);\n            }\n\n            Utils.Extend(MultipleSelection, BaseSelection);\n\n            MultipleSelection.prototype.render = function () {\n                var $selection = MultipleSelection.__super__.render.call(this);\n\n                $selection.addClass('select2-selection--multiple');\n\n                $selection.html(\n                    '<ul class=\"select2-selection__rendered\"></ul>'\n                );\n\n                return $selection;\n            };\n\n            MultipleSelection.prototype.bind = function (container, $container) {\n                var self = this;\n\n                MultipleSelection.__super__.bind.apply(this, arguments);\n\n                this.$selection.on('click', function (evt) {\n                    self.trigger('toggle', {\n                        originalEvent: evt\n                    });\n                });\n\n                this.$selection.on(\n                    'click',\n                    '.select2-selection__choice__remove',\n                    function (evt) {\n                        // Ignore the event if it is disabled\n                        if (self.options.get('disabled')) {\n                            return;\n                        }\n\n                        var $remove = $(this);\n                        var $selection = $remove.parent();\n\n                        var data = $selection.data('data');\n\n                        self.trigger('unselect', {\n                            originalEvent: evt,\n                            data: data\n                        });\n                    }\n                );\n            };\n\n            MultipleSelection.prototype.clear = function () {\n                this.$selection.find('.select2-selection__rendered').empty();\n            };\n\n            MultipleSelection.prototype.display = function (data, container) {\n                var template = this.options.get('templateSelection');\n                var escapeMarkup = this.options.get('escapeMarkup');\n\n                return escapeMarkup(template(data, container));\n            };\n\n            MultipleSelection.prototype.selectionContainer = function () {\n                var $container = $(\n                    '<li class=\"select2-selection__choice\">' +\n                    '<span class=\"select2-selection__choice__remove\" role=\"presentation\">' +\n                    '&times;' +\n                    '</span>' +\n                    '</li>'\n                );\n\n                return $container;\n            };\n\n            MultipleSelection.prototype.update = function (data) {\n                this.clear();\n\n                if (data.length === 0) {\n                    return;\n                }\n\n                var $selections = [];\n\n                for (var d = 0; d < data.length; d++) {\n                    var selection = data[d];\n\n                    var $selection = this.selectionContainer();\n                    var formatted = this.display(selection, $selection);\n\n                    $selection.append(formatted);\n                    $selection.prop('title', selection.title || selection.text);\n\n                    $selection.data('data', selection);\n\n                    $selections.push($selection);\n                }\n\n                var $rendered = this.$selection.find('.select2-selection__rendered');\n\n                Utils.appendMany($rendered, $selections);\n            };\n\n            return MultipleSelection;\n        });\n\n        S2.define('select2/selection/placeholder',[\n            '../utils'\n        ], function (Utils) {\n            function Placeholder (decorated, $element, options) {\n                this.placeholder = this.normalizePlaceholder(options.get('placeholder'));\n\n                decorated.call(this, $element, options);\n            }\n\n            Placeholder.prototype.normalizePlaceholder = function (_, placeholder) {\n                if (typeof placeholder === 'string') {\n                    placeholder = {\n                        id: '',\n                        text: placeholder\n                    };\n                }\n\n                return placeholder;\n            };\n\n            Placeholder.prototype.createPlaceholder = function (decorated, placeholder) {\n                var $placeholder = this.selectionContainer();\n\n                $placeholder.html(this.display(placeholder));\n                $placeholder.addClass('select2-selection__placeholder')\n                            .removeClass('select2-selection__choice');\n\n                return $placeholder;\n            };\n\n            Placeholder.prototype.update = function (decorated, data) {\n                var singlePlaceholder = (\n                    data.length == 1 && data[0].id != this.placeholder.id\n                );\n                var multipleSelections = data.length > 1;\n\n                if (multipleSelections || singlePlaceholder) {\n                    return decorated.call(this, data);\n                }\n\n                this.clear();\n\n                var $placeholder = this.createPlaceholder(this.placeholder);\n\n                this.$selection.find('.select2-selection__rendered').append($placeholder);\n            };\n\n            return Placeholder;\n        });\n\n        S2.define('select2/selection/allowClear',[\n            'jquery',\n            '../keys'\n        ], function ($, KEYS) {\n            function AllowClear () { }\n\n            AllowClear.prototype.bind = function (decorated, container, $container) {\n                var self = this;\n\n                decorated.call(this, container, $container);\n\n                if (this.placeholder == null) {\n                    if (this.options.get('debug') && window.console && console.error) {\n                        console.error(\n                            'Select2: The `allowClear` option should be used in combination ' +\n                            'with the `placeholder` option.'\n                        );\n                    }\n                }\n\n                this.$selection.on('mousedown', '.select2-selection__clear',\n                    function (evt) {\n                        self._handleClear(evt);\n                    });\n\n                container.on('keypress', function (evt) {\n                    self._handleKeyboardClear(evt, container);\n                });\n            };\n\n            AllowClear.prototype._handleClear = function (_, evt) {\n                // Ignore the event if it is disabled\n                if (this.options.get('disabled')) {\n                    return;\n                }\n\n                var $clear = this.$selection.find('.select2-selection__clear');\n\n                // Ignore the event if nothing has been selected\n                if ($clear.length === 0) {\n                    return;\n                }\n\n                evt.stopPropagation();\n\n                var data = $clear.data('data');\n\n                for (var d = 0; d < data.length; d++) {\n                    var unselectData = {\n                        data: data[d]\n                    };\n\n                    // Trigger the `unselect` event, so people can prevent it from being\n                    // cleared.\n                    this.trigger('unselect', unselectData);\n\n                    // If the event was prevented, don't clear it out.\n                    if (unselectData.prevented) {\n                        return;\n                    }\n                }\n\n                this.$element.val(this.placeholder.id).trigger('change');\n\n                this.trigger('toggle', {});\n            };\n\n            AllowClear.prototype._handleKeyboardClear = function (_, evt, container) {\n                if (container.isOpen()) {\n                    return;\n                }\n\n                if (evt.which == KEYS.DELETE || evt.which == KEYS.BACKSPACE) {\n                    this._handleClear(evt);\n                }\n            };\n\n            AllowClear.prototype.update = function (decorated, data) {\n                decorated.call(this, data);\n\n                if (this.$selection.find('.select2-selection__placeholder').length > 0 ||\n                    data.length === 0) {\n                    return;\n                }\n\n                var $remove = $(\n                    '<span class=\"select2-selection__clear\">' +\n                    '&times;' +\n                    '</span>'\n                );\n                $remove.data('data', data);\n\n                this.$selection.find('.select2-selection__rendered').prepend($remove);\n            };\n\n            return AllowClear;\n        });\n\n        S2.define('select2/selection/search',[\n            'jquery',\n            '../utils',\n            '../keys'\n        ], function ($, Utils, KEYS) {\n            function Search (decorated, $element, options) {\n                decorated.call(this, $element, options);\n            }\n\n            Search.prototype.render = function (decorated) {\n                var $search = $(\n                    '<li class=\"select2-search select2-search--inline\">' +\n                    '<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\"' +\n                    ' autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"none\"' +\n                    ' spellcheck=\"false\" role=\"textbox\" aria-autocomplete=\"list\" />' +\n                    '</li>'\n                );\n\n                this.$searchContainer = $search;\n                this.$search = $search.find('input');\n\n                var $rendered = decorated.call(this);\n\n                this._transferTabIndex();\n\n                return $rendered;\n            };\n\n            Search.prototype.bind = function (decorated, container, $container) {\n                var self = this;\n\n                decorated.call(this, container, $container);\n\n                container.on('open', function () {\n                    self.$search.trigger('focus');\n                });\n\n                container.on('close', function () {\n                    self.$search.val('');\n                    self.$search.removeAttr('aria-activedescendant');\n                    self.$search.trigger('focus');\n                });\n\n                container.on('enable', function () {\n                    self.$search.prop('disabled', false);\n\n                    self._transferTabIndex();\n                });\n\n                container.on('disable', function () {\n                    self.$search.prop('disabled', true);\n                });\n\n                container.on('focus', function (evt) {\n                    self.$search.trigger('focus');\n                });\n\n                container.on('results:focus', function (params) {\n                    self.$search.attr('aria-activedescendant', params.id);\n                });\n\n                this.$selection.on('focusin', '.select2-search--inline', function (evt) {\n                    self.trigger('focus', evt);\n                });\n\n                this.$selection.on('focusout', '.select2-search--inline', function (evt) {\n                    self._handleBlur(evt);\n                });\n\n                this.$selection.on('keydown', '.select2-search--inline', function (evt) {\n                    evt.stopPropagation();\n\n                    self.trigger('keypress', evt);\n\n                    self._keyUpPrevented = evt.isDefaultPrevented();\n\n                    var key = evt.which;\n\n                    if (key === KEYS.BACKSPACE && self.$search.val() === '') {\n                        var $previousChoice = self.$searchContainer\n                                                  .prev('.select2-selection__choice');\n\n                        if ($previousChoice.length > 0) {\n                            var item = $previousChoice.data('data');\n\n                            self.searchRemoveChoice(item);\n\n                            evt.preventDefault();\n                        }\n                    }\n                });\n\n                // Try to detect the IE version should the `documentMode` property that\n                // is stored on the document. This is only implemented in IE and is\n                // slightly cleaner than doing a user agent check.\n                // This property is not available in Edge, but Edge also doesn't have\n                // this bug.\n                var msie = document.documentMode;\n                var disableInputEvents = msie && msie <= 11;\n\n                // Workaround for browsers which do not support the `input` event\n                // This will prevent double-triggering of events for browsers which support\n                // both the `keyup` and `input` events.\n                this.$selection.on(\n                    'input.searchcheck',\n                    '.select2-search--inline',\n                    function (evt) {\n                        // IE will trigger the `input` event when a placeholder is used on a\n                        // search box. To get around this issue, we are forced to ignore all\n                        // `input` events in IE and keep using `keyup`.\n                        if (disableInputEvents) {\n                            self.$selection.off('input.search input.searchcheck');\n                            return;\n                        }\n\n                        // Unbind the duplicated `keyup` event\n                        self.$selection.off('keyup.search');\n                    }\n                );\n\n                this.$selection.on(\n                    'keyup.search input.search',\n                    '.select2-search--inline',\n                    function (evt) {\n                        // IE will trigger the `input` event when a placeholder is used on a\n                        // search box. To get around this issue, we are forced to ignore all\n                        // `input` events in IE and keep using `keyup`.\n                        if (disableInputEvents && evt.type === 'input') {\n                            self.$selection.off('input.search input.searchcheck');\n                            return;\n                        }\n\n                        var key = evt.which;\n\n                        // We can freely ignore events from modifier keys\n                        if (key == KEYS.SHIFT || key == KEYS.CTRL || key == KEYS.ALT) {\n                            return;\n                        }\n\n                        // Tabbing will be handled during the `keydown` phase\n                        if (key == KEYS.TAB) {\n                            return;\n                        }\n\n                        self.handleSearch(evt);\n                    }\n                );\n            };\n\n            /**\n             * This method will transfer the tabindex attribute from the rendered\n             * selection to the search box. This allows for the search box to be used as\n             * the primary focus instead of the selection container.\n             *\n             * @private\n             */\n            Search.prototype._transferTabIndex = function (decorated) {\n                this.$search.attr('tabindex', this.$selection.attr('tabindex'));\n                this.$selection.attr('tabindex', '-1');\n            };\n\n            Search.prototype.createPlaceholder = function (decorated, placeholder) {\n                this.$search.attr('placeholder', placeholder.text);\n            };\n\n            Search.prototype.update = function (decorated, data) {\n                var searchHadFocus = this.$search[0] == document.activeElement;\n\n                this.$search.attr('placeholder', '');\n\n                decorated.call(this, data);\n\n                this.$selection.find('.select2-selection__rendered')\n                    .append(this.$searchContainer);\n\n                this.resizeSearch();\n                if (searchHadFocus) {\n                    this.$search.focus();\n                }\n            };\n\n            Search.prototype.handleSearch = function () {\n                this.resizeSearch();\n\n                if (!this._keyUpPrevented) {\n                    var input = this.$search.val();\n\n                    this.trigger('query', {\n                        term: input\n                    });\n                }\n\n                this._keyUpPrevented = false;\n            };\n\n            Search.prototype.searchRemoveChoice = function (decorated, item) {\n                this.trigger('unselect', {\n                    data: item\n                });\n\n                this.$search.val(item.text);\n                this.handleSearch();\n            };\n\n            Search.prototype.resizeSearch = function () {\n                this.$search.css('width', '25px');\n\n                var width = '';\n\n                if (this.$search.attr('placeholder') !== '') {\n                    width = this.$selection.find('.select2-selection__rendered').innerWidth();\n                } else {\n                    var minimumWidth = this.$search.val().length + 1;\n\n                    width = (minimumWidth * 0.75) + 'em';\n                }\n\n                this.$search.css('width', width);\n            };\n\n            return Search;\n        });\n\n        S2.define('select2/selection/eventRelay',[\n            'jquery'\n        ], function ($) {\n            function EventRelay () { }\n\n            EventRelay.prototype.bind = function (decorated, container, $container) {\n                var self = this;\n                var relayEvents = [\n                    'open', 'opening',\n                    'close', 'closing',\n                    'select', 'selecting',\n                    'unselect', 'unselecting'\n                ];\n\n                var preventableEvents = ['opening', 'closing', 'selecting', 'unselecting'];\n\n                decorated.call(this, container, $container);\n\n                container.on('*', function (name, params) {\n                    // Ignore events that should not be relayed\n                    if ($.inArray(name, relayEvents) === -1) {\n                        return;\n                    }\n\n                    // The parameters should always be an object\n                    params = params || {};\n\n                    // Generate the jQuery event for the Select2 event\n                    var evt = $.Event('select2:' + name, {\n                        params: params\n                    });\n\n                    self.$element.trigger(evt);\n\n                    // Only handle preventable events if it was one\n                    if ($.inArray(name, preventableEvents) === -1) {\n                        return;\n                    }\n\n                    params.prevented = evt.isDefaultPrevented();\n                });\n            };\n\n            return EventRelay;\n        });\n\n        S2.define('select2/translation',[\n            'jquery',\n            'require'\n        ], function ($, require) {\n            function Translation (dict) {\n                this.dict = dict || {};\n            }\n\n            Translation.prototype.all = function () {\n                return this.dict;\n            };\n\n            Translation.prototype.get = function (key) {\n                return this.dict[key];\n            };\n\n            Translation.prototype.extend = function (translation) {\n                this.dict = $.extend({}, translation.all(), this.dict);\n            };\n\n            // Static functions\n\n            Translation._cache = {};\n\n            Translation.loadPath = function (path) {\n                if (!(path in Translation._cache)) {\n                    var translations = require(path);\n\n                    Translation._cache[path] = translations;\n                }\n\n                return new Translation(Translation._cache[path]);\n            };\n\n            return Translation;\n        });\n\n        S2.define('select2/diacritics',[\n\n        ], function () {\n            var diacritics = {\n                '\\u24B6': 'A',\n                '\\uFF21': 'A',\n                '\\u00C0': 'A',\n                '\\u00C1': 'A',\n                '\\u00C2': 'A',\n                '\\u1EA6': 'A',\n                '\\u1EA4': 'A',\n                '\\u1EAA': 'A',\n                '\\u1EA8': 'A',\n                '\\u00C3': 'A',\n                '\\u0100': 'A',\n                '\\u0102': 'A',\n                '\\u1EB0': 'A',\n                '\\u1EAE': 'A',\n                '\\u1EB4': 'A',\n                '\\u1EB2': 'A',\n                '\\u0226': 'A',\n                '\\u01E0': 'A',\n                '\\u00C4': 'A',\n                '\\u01DE': 'A',\n                '\\u1EA2': 'A',\n                '\\u00C5': 'A',\n                '\\u01FA': 'A',\n                '\\u01CD': 'A',\n                '\\u0200': 'A',\n                '\\u0202': 'A',\n                '\\u1EA0': 'A',\n                '\\u1EAC': 'A',\n                '\\u1EB6': 'A',\n                '\\u1E00': 'A',\n                '\\u0104': 'A',\n                '\\u023A': 'A',\n                '\\u2C6F': 'A',\n                '\\uA732': 'AA',\n                '\\u00C6': 'AE',\n                '\\u01FC': 'AE',\n                '\\u01E2': 'AE',\n                '\\uA734': 'AO',\n                '\\uA736': 'AU',\n                '\\uA738': 'AV',\n                '\\uA73A': 'AV',\n                '\\uA73C': 'AY',\n                '\\u24B7': 'B',\n                '\\uFF22': 'B',\n                '\\u1E02': 'B',\n                '\\u1E04': 'B',\n                '\\u1E06': 'B',\n                '\\u0243': 'B',\n                '\\u0182': 'B',\n                '\\u0181': 'B',\n                '\\u24B8': 'C',\n                '\\uFF23': 'C',\n                '\\u0106': 'C',\n                '\\u0108': 'C',\n                '\\u010A': 'C',\n                '\\u010C': 'C',\n                '\\u00C7': 'C',\n                '\\u1E08': 'C',\n                '\\u0187': 'C',\n                '\\u023B': 'C',\n                '\\uA73E': 'C',\n                '\\u24B9': 'D',\n                '\\uFF24': 'D',\n                '\\u1E0A': 'D',\n                '\\u010E': 'D',\n                '\\u1E0C': 'D',\n                '\\u1E10': 'D',\n                '\\u1E12': 'D',\n                '\\u1E0E': 'D',\n                '\\u0110': 'D',\n                '\\u018B': 'D',\n                '\\u018A': 'D',\n                '\\u0189': 'D',\n                '\\uA779': 'D',\n                '\\u01F1': 'DZ',\n                '\\u01C4': 'DZ',\n                '\\u01F2': 'Dz',\n                '\\u01C5': 'Dz',\n                '\\u24BA': 'E',\n                '\\uFF25': 'E',\n                '\\u00C8': 'E',\n                '\\u00C9': 'E',\n                '\\u00CA': 'E',\n                '\\u1EC0': 'E',\n                '\\u1EBE': 'E',\n                '\\u1EC4': 'E',\n                '\\u1EC2': 'E',\n                '\\u1EBC': 'E',\n                '\\u0112': 'E',\n                '\\u1E14': 'E',\n                '\\u1E16': 'E',\n                '\\u0114': 'E',\n                '\\u0116': 'E',\n                '\\u00CB': 'E',\n                '\\u1EBA': 'E',\n                '\\u011A': 'E',\n                '\\u0204': 'E',\n                '\\u0206': 'E',\n                '\\u1EB8': 'E',\n                '\\u1EC6': 'E',\n                '\\u0228': 'E',\n                '\\u1E1C': 'E',\n                '\\u0118': 'E',\n                '\\u1E18': 'E',\n                '\\u1E1A': 'E',\n                '\\u0190': 'E',\n                '\\u018E': 'E',\n                '\\u24BB': 'F',\n                '\\uFF26': 'F',\n                '\\u1E1E': 'F',\n                '\\u0191': 'F',\n                '\\uA77B': 'F',\n                '\\u24BC': 'G',\n                '\\uFF27': 'G',\n                '\\u01F4': 'G',\n                '\\u011C': 'G',\n                '\\u1E20': 'G',\n                '\\u011E': 'G',\n                '\\u0120': 'G',\n                '\\u01E6': 'G',\n                '\\u0122': 'G',\n                '\\u01E4': 'G',\n                '\\u0193': 'G',\n                '\\uA7A0': 'G',\n                '\\uA77D': 'G',\n                '\\uA77E': 'G',\n                '\\u24BD': 'H',\n                '\\uFF28': 'H',\n                '\\u0124': 'H',\n                '\\u1E22': 'H',\n                '\\u1E26': 'H',\n                '\\u021E': 'H',\n                '\\u1E24': 'H',\n                '\\u1E28': 'H',\n                '\\u1E2A': 'H',\n                '\\u0126': 'H',\n                '\\u2C67': 'H',\n                '\\u2C75': 'H',\n                '\\uA78D': 'H',\n                '\\u24BE': 'I',\n                '\\uFF29': 'I',\n                '\\u00CC': 'I',\n                '\\u00CD': 'I',\n                '\\u00CE': 'I',\n                '\\u0128': 'I',\n                '\\u012A': 'I',\n                '\\u012C': 'I',\n                '\\u0130': 'I',\n                '\\u00CF': 'I',\n                '\\u1E2E': 'I',\n                '\\u1EC8': 'I',\n                '\\u01CF': 'I',\n                '\\u0208': 'I',\n                '\\u020A': 'I',\n                '\\u1ECA': 'I',\n                '\\u012E': 'I',\n                '\\u1E2C': 'I',\n                '\\u0197': 'I',\n                '\\u24BF': 'J',\n                '\\uFF2A': 'J',\n                '\\u0134': 'J',\n                '\\u0248': 'J',\n                '\\u24C0': 'K',\n                '\\uFF2B': 'K',\n                '\\u1E30': 'K',\n                '\\u01E8': 'K',\n                '\\u1E32': 'K',\n                '\\u0136': 'K',\n                '\\u1E34': 'K',\n                '\\u0198': 'K',\n                '\\u2C69': 'K',\n                '\\uA740': 'K',\n                '\\uA742': 'K',\n                '\\uA744': 'K',\n                '\\uA7A2': 'K',\n                '\\u24C1': 'L',\n                '\\uFF2C': 'L',\n                '\\u013F': 'L',\n                '\\u0139': 'L',\n                '\\u013D': 'L',\n                '\\u1E36': 'L',\n                '\\u1E38': 'L',\n                '\\u013B': 'L',\n                '\\u1E3C': 'L',\n                '\\u1E3A': 'L',\n                '\\u0141': 'L',\n                '\\u023D': 'L',\n                '\\u2C62': 'L',\n                '\\u2C60': 'L',\n                '\\uA748': 'L',\n                '\\uA746': 'L',\n                '\\uA780': 'L',\n                '\\u01C7': 'LJ',\n                '\\u01C8': 'Lj',\n                '\\u24C2': 'M',\n                '\\uFF2D': 'M',\n                '\\u1E3E': 'M',\n                '\\u1E40': 'M',\n                '\\u1E42': 'M',\n                '\\u2C6E': 'M',\n                '\\u019C': 'M',\n                '\\u24C3': 'N',\n                '\\uFF2E': 'N',\n                '\\u01F8': 'N',\n                '\\u0143': 'N',\n                '\\u00D1': 'N',\n                '\\u1E44': 'N',\n                '\\u0147': 'N',\n                '\\u1E46': 'N',\n                '\\u0145': 'N',\n                '\\u1E4A': 'N',\n                '\\u1E48': 'N',\n                '\\u0220': 'N',\n                '\\u019D': 'N',\n                '\\uA790': 'N',\n                '\\uA7A4': 'N',\n                '\\u01CA': 'NJ',\n                '\\u01CB': 'Nj',\n                '\\u24C4': 'O',\n                '\\uFF2F': 'O',\n                '\\u00D2': 'O',\n                '\\u00D3': 'O',\n                '\\u00D4': 'O',\n                '\\u1ED2': 'O',\n                '\\u1ED0': 'O',\n                '\\u1ED6': 'O',\n                '\\u1ED4': 'O',\n                '\\u00D5': 'O',\n                '\\u1E4C': 'O',\n                '\\u022C': 'O',\n                '\\u1E4E': 'O',\n                '\\u014C': 'O',\n                '\\u1E50': 'O',\n                '\\u1E52': 'O',\n                '\\u014E': 'O',\n                '\\u022E': 'O',\n                '\\u0230': 'O',\n                '\\u00D6': 'O',\n                '\\u022A': 'O',\n                '\\u1ECE': 'O',\n                '\\u0150': 'O',\n                '\\u01D1': 'O',\n                '\\u020C': 'O',\n                '\\u020E': 'O',\n                '\\u01A0': 'O',\n                '\\u1EDC': 'O',\n                '\\u1EDA': 'O',\n                '\\u1EE0': 'O',\n                '\\u1EDE': 'O',\n                '\\u1EE2': 'O',\n                '\\u1ECC': 'O',\n                '\\u1ED8': 'O',\n                '\\u01EA': 'O',\n                '\\u01EC': 'O',\n                '\\u00D8': 'O',\n                '\\u01FE': 'O',\n                '\\u0186': 'O',\n                '\\u019F': 'O',\n                '\\uA74A': 'O',\n                '\\uA74C': 'O',\n                '\\u01A2': 'OI',\n                '\\uA74E': 'OO',\n                '\\u0222': 'OU',\n                '\\u24C5': 'P',\n                '\\uFF30': 'P',\n                '\\u1E54': 'P',\n                '\\u1E56': 'P',\n                '\\u01A4': 'P',\n                '\\u2C63': 'P',\n                '\\uA750': 'P',\n                '\\uA752': 'P',\n                '\\uA754': 'P',\n                '\\u24C6': 'Q',\n                '\\uFF31': 'Q',\n                '\\uA756': 'Q',\n                '\\uA758': 'Q',\n                '\\u024A': 'Q',\n                '\\u24C7': 'R',\n                '\\uFF32': 'R',\n                '\\u0154': 'R',\n                '\\u1E58': 'R',\n                '\\u0158': 'R',\n                '\\u0210': 'R',\n                '\\u0212': 'R',\n                '\\u1E5A': 'R',\n                '\\u1E5C': 'R',\n                '\\u0156': 'R',\n                '\\u1E5E': 'R',\n                '\\u024C': 'R',\n                '\\u2C64': 'R',\n                '\\uA75A': 'R',\n                '\\uA7A6': 'R',\n                '\\uA782': 'R',\n                '\\u24C8': 'S',\n                '\\uFF33': 'S',\n                '\\u1E9E': 'S',\n                '\\u015A': 'S',\n                '\\u1E64': 'S',\n                '\\u015C': 'S',\n                '\\u1E60': 'S',\n                '\\u0160': 'S',\n                '\\u1E66': 'S',\n                '\\u1E62': 'S',\n                '\\u1E68': 'S',\n                '\\u0218': 'S',\n                '\\u015E': 'S',\n                '\\u2C7E': 'S',\n                '\\uA7A8': 'S',\n                '\\uA784': 'S',\n                '\\u24C9': 'T',\n                '\\uFF34': 'T',\n                '\\u1E6A': 'T',\n                '\\u0164': 'T',\n                '\\u1E6C': 'T',\n                '\\u021A': 'T',\n                '\\u0162': 'T',\n                '\\u1E70': 'T',\n                '\\u1E6E': 'T',\n                '\\u0166': 'T',\n                '\\u01AC': 'T',\n                '\\u01AE': 'T',\n                '\\u023E': 'T',\n                '\\uA786': 'T',\n                '\\uA728': 'TZ',\n                '\\u24CA': 'U',\n                '\\uFF35': 'U',\n                '\\u00D9': 'U',\n                '\\u00DA': 'U',\n                '\\u00DB': 'U',\n                '\\u0168': 'U',\n                '\\u1E78': 'U',\n                '\\u016A': 'U',\n                '\\u1E7A': 'U',\n                '\\u016C': 'U',\n                '\\u00DC': 'U',\n                '\\u01DB': 'U',\n                '\\u01D7': 'U',\n                '\\u01D5': 'U',\n                '\\u01D9': 'U',\n                '\\u1EE6': 'U',\n                '\\u016E': 'U',\n                '\\u0170': 'U',\n                '\\u01D3': 'U',\n                '\\u0214': 'U',\n                '\\u0216': 'U',\n                '\\u01AF': 'U',\n                '\\u1EEA': 'U',\n                '\\u1EE8': 'U',\n                '\\u1EEE': 'U',\n                '\\u1EEC': 'U',\n                '\\u1EF0': 'U',\n                '\\u1EE4': 'U',\n                '\\u1E72': 'U',\n                '\\u0172': 'U',\n                '\\u1E76': 'U',\n                '\\u1E74': 'U',\n                '\\u0244': 'U',\n                '\\u24CB': 'V',\n                '\\uFF36': 'V',\n                '\\u1E7C': 'V',\n                '\\u1E7E': 'V',\n                '\\u01B2': 'V',\n                '\\uA75E': 'V',\n                '\\u0245': 'V',\n                '\\uA760': 'VY',\n                '\\u24CC': 'W',\n                '\\uFF37': 'W',\n                '\\u1E80': 'W',\n                '\\u1E82': 'W',\n                '\\u0174': 'W',\n                '\\u1E86': 'W',\n                '\\u1E84': 'W',\n                '\\u1E88': 'W',\n                '\\u2C72': 'W',\n                '\\u24CD': 'X',\n                '\\uFF38': 'X',\n                '\\u1E8A': 'X',\n                '\\u1E8C': 'X',\n                '\\u24CE': 'Y',\n                '\\uFF39': 'Y',\n                '\\u1EF2': 'Y',\n                '\\u00DD': 'Y',\n                '\\u0176': 'Y',\n                '\\u1EF8': 'Y',\n                '\\u0232': 'Y',\n                '\\u1E8E': 'Y',\n                '\\u0178': 'Y',\n                '\\u1EF6': 'Y',\n                '\\u1EF4': 'Y',\n                '\\u01B3': 'Y',\n                '\\u024E': 'Y',\n                '\\u1EFE': 'Y',\n                '\\u24CF': 'Z',\n                '\\uFF3A': 'Z',\n                '\\u0179': 'Z',\n                '\\u1E90': 'Z',\n                '\\u017B': 'Z',\n                '\\u017D': 'Z',\n                '\\u1E92': 'Z',\n                '\\u1E94': 'Z',\n                '\\u01B5': 'Z',\n                '\\u0224': 'Z',\n                '\\u2C7F': 'Z',\n                '\\u2C6B': 'Z',\n                '\\uA762': 'Z',\n                '\\u24D0': 'a',\n                '\\uFF41': 'a',\n                '\\u1E9A': 'a',\n                '\\u00E0': 'a',\n                '\\u00E1': 'a',\n                '\\u00E2': 'a',\n                '\\u1EA7': 'a',\n                '\\u1EA5': 'a',\n                '\\u1EAB': 'a',\n                '\\u1EA9': 'a',\n                '\\u00E3': 'a',\n                '\\u0101': 'a',\n                '\\u0103': 'a',\n                '\\u1EB1': 'a',\n                '\\u1EAF': 'a',\n                '\\u1EB5': 'a',\n                '\\u1EB3': 'a',\n                '\\u0227': 'a',\n                '\\u01E1': 'a',\n                '\\u00E4': 'a',\n                '\\u01DF': 'a',\n                '\\u1EA3': 'a',\n                '\\u00E5': 'a',\n                '\\u01FB': 'a',\n                '\\u01CE': 'a',\n                '\\u0201': 'a',\n                '\\u0203': 'a',\n                '\\u1EA1': 'a',\n                '\\u1EAD': 'a',\n                '\\u1EB7': 'a',\n                '\\u1E01': 'a',\n                '\\u0105': 'a',\n                '\\u2C65': 'a',\n                '\\u0250': 'a',\n                '\\uA733': 'aa',\n                '\\u00E6': 'ae',\n                '\\u01FD': 'ae',\n                '\\u01E3': 'ae',\n                '\\uA735': 'ao',\n                '\\uA737': 'au',\n                '\\uA739': 'av',\n                '\\uA73B': 'av',\n                '\\uA73D': 'ay',\n                '\\u24D1': 'b',\n                '\\uFF42': 'b',\n                '\\u1E03': 'b',\n                '\\u1E05': 'b',\n                '\\u1E07': 'b',\n                '\\u0180': 'b',\n                '\\u0183': 'b',\n                '\\u0253': 'b',\n                '\\u24D2': 'c',\n                '\\uFF43': 'c',\n                '\\u0107': 'c',\n                '\\u0109': 'c',\n                '\\u010B': 'c',\n                '\\u010D': 'c',\n                '\\u00E7': 'c',\n                '\\u1E09': 'c',\n                '\\u0188': 'c',\n                '\\u023C': 'c',\n                '\\uA73F': 'c',\n                '\\u2184': 'c',\n                '\\u24D3': 'd',\n                '\\uFF44': 'd',\n                '\\u1E0B': 'd',\n                '\\u010F': 'd',\n                '\\u1E0D': 'd',\n                '\\u1E11': 'd',\n                '\\u1E13': 'd',\n                '\\u1E0F': 'd',\n                '\\u0111': 'd',\n                '\\u018C': 'd',\n                '\\u0256': 'd',\n                '\\u0257': 'd',\n                '\\uA77A': 'd',\n                '\\u01F3': 'dz',\n                '\\u01C6': 'dz',\n                '\\u24D4': 'e',\n                '\\uFF45': 'e',\n                '\\u00E8': 'e',\n                '\\u00E9': 'e',\n                '\\u00EA': 'e',\n                '\\u1EC1': 'e',\n                '\\u1EBF': 'e',\n                '\\u1EC5': 'e',\n                '\\u1EC3': 'e',\n                '\\u1EBD': 'e',\n                '\\u0113': 'e',\n                '\\u1E15': 'e',\n                '\\u1E17': 'e',\n                '\\u0115': 'e',\n                '\\u0117': 'e',\n                '\\u00EB': 'e',\n                '\\u1EBB': 'e',\n                '\\u011B': 'e',\n                '\\u0205': 'e',\n                '\\u0207': 'e',\n                '\\u1EB9': 'e',\n                '\\u1EC7': 'e',\n                '\\u0229': 'e',\n                '\\u1E1D': 'e',\n                '\\u0119': 'e',\n                '\\u1E19': 'e',\n                '\\u1E1B': 'e',\n                '\\u0247': 'e',\n                '\\u025B': 'e',\n                '\\u01DD': 'e',\n                '\\u24D5': 'f',\n                '\\uFF46': 'f',\n                '\\u1E1F': 'f',\n                '\\u0192': 'f',\n                '\\uA77C': 'f',\n                '\\u24D6': 'g',\n                '\\uFF47': 'g',\n                '\\u01F5': 'g',\n                '\\u011D': 'g',\n                '\\u1E21': 'g',\n                '\\u011F': 'g',\n                '\\u0121': 'g',\n                '\\u01E7': 'g',\n                '\\u0123': 'g',\n                '\\u01E5': 'g',\n                '\\u0260': 'g',\n                '\\uA7A1': 'g',\n                '\\u1D79': 'g',\n                '\\uA77F': 'g',\n                '\\u24D7': 'h',\n                '\\uFF48': 'h',\n                '\\u0125': 'h',\n                '\\u1E23': 'h',\n                '\\u1E27': 'h',\n                '\\u021F': 'h',\n                '\\u1E25': 'h',\n                '\\u1E29': 'h',\n                '\\u1E2B': 'h',\n                '\\u1E96': 'h',\n                '\\u0127': 'h',\n                '\\u2C68': 'h',\n                '\\u2C76': 'h',\n                '\\u0265': 'h',\n                '\\u0195': 'hv',\n                '\\u24D8': 'i',\n                '\\uFF49': 'i',\n                '\\u00EC': 'i',\n                '\\u00ED': 'i',\n                '\\u00EE': 'i',\n                '\\u0129': 'i',\n                '\\u012B': 'i',\n                '\\u012D': 'i',\n                '\\u00EF': 'i',\n                '\\u1E2F': 'i',\n                '\\u1EC9': 'i',\n                '\\u01D0': 'i',\n                '\\u0209': 'i',\n                '\\u020B': 'i',\n                '\\u1ECB': 'i',\n                '\\u012F': 'i',\n                '\\u1E2D': 'i',\n                '\\u0268': 'i',\n                '\\u0131': 'i',\n                '\\u24D9': 'j',\n                '\\uFF4A': 'j',\n                '\\u0135': 'j',\n                '\\u01F0': 'j',\n                '\\u0249': 'j',\n                '\\u24DA': 'k',\n                '\\uFF4B': 'k',\n                '\\u1E31': 'k',\n                '\\u01E9': 'k',\n                '\\u1E33': 'k',\n                '\\u0137': 'k',\n                '\\u1E35': 'k',\n                '\\u0199': 'k',\n                '\\u2C6A': 'k',\n                '\\uA741': 'k',\n                '\\uA743': 'k',\n                '\\uA745': 'k',\n                '\\uA7A3': 'k',\n                '\\u24DB': 'l',\n                '\\uFF4C': 'l',\n                '\\u0140': 'l',\n                '\\u013A': 'l',\n                '\\u013E': 'l',\n                '\\u1E37': 'l',\n                '\\u1E39': 'l',\n                '\\u013C': 'l',\n                '\\u1E3D': 'l',\n                '\\u1E3B': 'l',\n                '\\u017F': 'l',\n                '\\u0142': 'l',\n                '\\u019A': 'l',\n                '\\u026B': 'l',\n                '\\u2C61': 'l',\n                '\\uA749': 'l',\n                '\\uA781': 'l',\n                '\\uA747': 'l',\n                '\\u01C9': 'lj',\n                '\\u24DC': 'm',\n                '\\uFF4D': 'm',\n                '\\u1E3F': 'm',\n                '\\u1E41': 'm',\n                '\\u1E43': 'm',\n                '\\u0271': 'm',\n                '\\u026F': 'm',\n                '\\u24DD': 'n',\n                '\\uFF4E': 'n',\n                '\\u01F9': 'n',\n                '\\u0144': 'n',\n                '\\u00F1': 'n',\n                '\\u1E45': 'n',\n                '\\u0148': 'n',\n                '\\u1E47': 'n',\n                '\\u0146': 'n',\n                '\\u1E4B': 'n',\n                '\\u1E49': 'n',\n                '\\u019E': 'n',\n                '\\u0272': 'n',\n                '\\u0149': 'n',\n                '\\uA791': 'n',\n                '\\uA7A5': 'n',\n                '\\u01CC': 'nj',\n                '\\u24DE': 'o',\n                '\\uFF4F': 'o',\n                '\\u00F2': 'o',\n                '\\u00F3': 'o',\n                '\\u00F4': 'o',\n                '\\u1ED3': 'o',\n                '\\u1ED1': 'o',\n                '\\u1ED7': 'o',\n                '\\u1ED5': 'o',\n                '\\u00F5': 'o',\n                '\\u1E4D': 'o',\n                '\\u022D': 'o',\n                '\\u1E4F': 'o',\n                '\\u014D': 'o',\n                '\\u1E51': 'o',\n                '\\u1E53': 'o',\n                '\\u014F': 'o',\n                '\\u022F': 'o',\n                '\\u0231': 'o',\n                '\\u00F6': 'o',\n                '\\u022B': 'o',\n                '\\u1ECF': 'o',\n                '\\u0151': 'o',\n                '\\u01D2': 'o',\n                '\\u020D': 'o',\n                '\\u020F': 'o',\n                '\\u01A1': 'o',\n                '\\u1EDD': 'o',\n                '\\u1EDB': 'o',\n                '\\u1EE1': 'o',\n                '\\u1EDF': 'o',\n                '\\u1EE3': 'o',\n                '\\u1ECD': 'o',\n                '\\u1ED9': 'o',\n                '\\u01EB': 'o',\n                '\\u01ED': 'o',\n                '\\u00F8': 'o',\n                '\\u01FF': 'o',\n                '\\u0254': 'o',\n                '\\uA74B': 'o',\n                '\\uA74D': 'o',\n                '\\u0275': 'o',\n                '\\u01A3': 'oi',\n                '\\u0223': 'ou',\n                '\\uA74F': 'oo',\n                '\\u24DF': 'p',\n                '\\uFF50': 'p',\n                '\\u1E55': 'p',\n                '\\u1E57': 'p',\n                '\\u01A5': 'p',\n                '\\u1D7D': 'p',\n                '\\uA751': 'p',\n                '\\uA753': 'p',\n                '\\uA755': 'p',\n                '\\u24E0': 'q',\n                '\\uFF51': 'q',\n                '\\u024B': 'q',\n                '\\uA757': 'q',\n                '\\uA759': 'q',\n                '\\u24E1': 'r',\n                '\\uFF52': 'r',\n                '\\u0155': 'r',\n                '\\u1E59': 'r',\n                '\\u0159': 'r',\n                '\\u0211': 'r',\n                '\\u0213': 'r',\n                '\\u1E5B': 'r',\n                '\\u1E5D': 'r',\n                '\\u0157': 'r',\n                '\\u1E5F': 'r',\n                '\\u024D': 'r',\n                '\\u027D': 'r',\n                '\\uA75B': 'r',\n                '\\uA7A7': 'r',\n                '\\uA783': 'r',\n                '\\u24E2': 's',\n                '\\uFF53': 's',\n                '\\u00DF': 's',\n                '\\u015B': 's',\n                '\\u1E65': 's',\n                '\\u015D': 's',\n                '\\u1E61': 's',\n                '\\u0161': 's',\n                '\\u1E67': 's',\n                '\\u1E63': 's',\n                '\\u1E69': 's',\n                '\\u0219': 's',\n                '\\u015F': 's',\n                '\\u023F': 's',\n                '\\uA7A9': 's',\n                '\\uA785': 's',\n                '\\u1E9B': 's',\n                '\\u24E3': 't',\n                '\\uFF54': 't',\n                '\\u1E6B': 't',\n                '\\u1E97': 't',\n                '\\u0165': 't',\n                '\\u1E6D': 't',\n                '\\u021B': 't',\n                '\\u0163': 't',\n                '\\u1E71': 't',\n                '\\u1E6F': 't',\n                '\\u0167': 't',\n                '\\u01AD': 't',\n                '\\u0288': 't',\n                '\\u2C66': 't',\n                '\\uA787': 't',\n                '\\uA729': 'tz',\n                '\\u24E4': 'u',\n                '\\uFF55': 'u',\n                '\\u00F9': 'u',\n                '\\u00FA': 'u',\n                '\\u00FB': 'u',\n                '\\u0169': 'u',\n                '\\u1E79': 'u',\n                '\\u016B': 'u',\n                '\\u1E7B': 'u',\n                '\\u016D': 'u',\n                '\\u00FC': 'u',\n                '\\u01DC': 'u',\n                '\\u01D8': 'u',\n                '\\u01D6': 'u',\n                '\\u01DA': 'u',\n                '\\u1EE7': 'u',\n                '\\u016F': 'u',\n                '\\u0171': 'u',\n                '\\u01D4': 'u',\n                '\\u0215': 'u',\n                '\\u0217': 'u',\n                '\\u01B0': 'u',\n                '\\u1EEB': 'u',\n                '\\u1EE9': 'u',\n                '\\u1EEF': 'u',\n                '\\u1EED': 'u',\n                '\\u1EF1': 'u',\n                '\\u1EE5': 'u',\n                '\\u1E73': 'u',\n                '\\u0173': 'u',\n                '\\u1E77': 'u',\n                '\\u1E75': 'u',\n                '\\u0289': 'u',\n                '\\u24E5': 'v',\n                '\\uFF56': 'v',\n                '\\u1E7D': 'v',\n                '\\u1E7F': 'v',\n                '\\u028B': 'v',\n                '\\uA75F': 'v',\n                '\\u028C': 'v',\n                '\\uA761': 'vy',\n                '\\u24E6': 'w',\n                '\\uFF57': 'w',\n                '\\u1E81': 'w',\n                '\\u1E83': 'w',\n                '\\u0175': 'w',\n                '\\u1E87': 'w',\n                '\\u1E85': 'w',\n                '\\u1E98': 'w',\n                '\\u1E89': 'w',\n                '\\u2C73': 'w',\n                '\\u24E7': 'x',\n                '\\uFF58': 'x',\n                '\\u1E8B': 'x',\n                '\\u1E8D': 'x',\n                '\\u24E8': 'y',\n                '\\uFF59': 'y',\n                '\\u1EF3': 'y',\n                '\\u00FD': 'y',\n                '\\u0177': 'y',\n                '\\u1EF9': 'y',\n                '\\u0233': 'y',\n                '\\u1E8F': 'y',\n                '\\u00FF': 'y',\n                '\\u1EF7': 'y',\n                '\\u1E99': 'y',\n                '\\u1EF5': 'y',\n                '\\u01B4': 'y',\n                '\\u024F': 'y',\n                '\\u1EFF': 'y',\n                '\\u24E9': 'z',\n                '\\uFF5A': 'z',\n                '\\u017A': 'z',\n                '\\u1E91': 'z',\n                '\\u017C': 'z',\n                '\\u017E': 'z',\n                '\\u1E93': 'z',\n                '\\u1E95': 'z',\n                '\\u01B6': 'z',\n                '\\u0225': 'z',\n                '\\u0240': 'z',\n                '\\u2C6C': 'z',\n                '\\uA763': 'z',\n                '\\u0386': '\\u0391',\n                '\\u0388': '\\u0395',\n                '\\u0389': '\\u0397',\n                '\\u038A': '\\u0399',\n                '\\u03AA': '\\u0399',\n                '\\u038C': '\\u039F',\n                '\\u038E': '\\u03A5',\n                '\\u03AB': '\\u03A5',\n                '\\u038F': '\\u03A9',\n                '\\u03AC': '\\u03B1',\n                '\\u03AD': '\\u03B5',\n                '\\u03AE': '\\u03B7',\n                '\\u03AF': '\\u03B9',\n                '\\u03CA': '\\u03B9',\n                '\\u0390': '\\u03B9',\n                '\\u03CC': '\\u03BF',\n                '\\u03CD': '\\u03C5',\n                '\\u03CB': '\\u03C5',\n                '\\u03B0': '\\u03C5',\n                '\\u03C9': '\\u03C9',\n                '\\u03C2': '\\u03C3'\n            };\n\n            return diacritics;\n        });\n\n        S2.define('select2/data/base',[\n            '../utils'\n        ], function (Utils) {\n            function BaseAdapter ($element, options) {\n                BaseAdapter.__super__.constructor.call(this);\n            }\n\n            Utils.Extend(BaseAdapter, Utils.Observable);\n\n            BaseAdapter.prototype.current = function (callback) {\n                throw new Error('The `current` method must be defined in child classes.');\n            };\n\n            BaseAdapter.prototype.query = function (params, callback) {\n                throw new Error('The `query` method must be defined in child classes.');\n            };\n\n            BaseAdapter.prototype.bind = function (container, $container) {\n                // Can be implemented in subclasses\n            };\n\n            BaseAdapter.prototype.destroy = function () {\n                // Can be implemented in subclasses\n            };\n\n            BaseAdapter.prototype.generateResultId = function (container, data) {\n                var id = container.id + '-result-';\n\n                id += Utils.generateChars(4);\n\n                if (data.id != null) {\n                    id += '-' + data.id.toString();\n                } else {\n                    id += '-' + Utils.generateChars(4);\n                }\n                return id;\n            };\n\n            return BaseAdapter;\n        });\n\n        S2.define('select2/data/select',[\n            './base',\n            '../utils',\n            'jquery'\n        ], function (BaseAdapter, Utils, $) {\n            function SelectAdapter ($element, options) {\n                this.$element = $element;\n                this.options = options;\n\n                SelectAdapter.__super__.constructor.call(this);\n            }\n\n            Utils.Extend(SelectAdapter, BaseAdapter);\n\n            SelectAdapter.prototype.current = function (callback) {\n                var data = [];\n                var self = this;\n\n                this.$element.find(':selected').each(function () {\n                    var $option = $(this);\n\n                    var option = self.item($option);\n\n                    data.push(option);\n                });\n\n                callback(data);\n            };\n\n            SelectAdapter.prototype.select = function (data) {\n                var self = this;\n\n                data.selected = true;\n\n                // If data.element is a DOM node, use it instead\n                if ($(data.element).is('option')) {\n                    data.element.selected = true;\n\n                    this.$element.trigger('change');\n\n                    return;\n                }\n\n                if (this.$element.prop('multiple')) {\n                    this.current(function (currentData) {\n                        var val = [];\n\n                        data = [data];\n                        data.push.apply(data, currentData);\n\n                        for (var d = 0; d < data.length; d++) {\n                            var id = data[d].id;\n\n                            if ($.inArray(id, val) === -1) {\n                                val.push(id);\n                            }\n                        }\n\n                        self.$element.val(val);\n                        self.$element.trigger('change');\n                    });\n                } else {\n                    var val = data.id;\n\n                    this.$element.val(val);\n                    this.$element.trigger('change');\n                }\n            };\n\n            SelectAdapter.prototype.unselect = function (data) {\n                var self = this;\n\n                if (!this.$element.prop('multiple')) {\n                    return;\n                }\n\n                data.selected = false;\n\n                if ($(data.element).is('option')) {\n                    data.element.selected = false;\n\n                    this.$element.trigger('change');\n\n                    return;\n                }\n\n                this.current(function (currentData) {\n                    var val = [];\n\n                    for (var d = 0; d < currentData.length; d++) {\n                        var id = currentData[d].id;\n\n                        if (id !== data.id && $.inArray(id, val) === -1) {\n                            val.push(id);\n                        }\n                    }\n\n                    self.$element.val(val);\n\n                    self.$element.trigger('change');\n                });\n            };\n\n            SelectAdapter.prototype.bind = function (container, $container) {\n                var self = this;\n\n                this.container = container;\n\n                container.on('select', function (params) {\n                    self.select(params.data);\n                });\n\n                container.on('unselect', function (params) {\n                    self.unselect(params.data);\n                });\n            };\n\n            SelectAdapter.prototype.destroy = function () {\n                // Remove anything added to child elements\n                this.$element.find('*').each(function () {\n                    // Remove any custom data set by Select2\n                    $.removeData(this, 'data');\n                });\n            };\n\n            SelectAdapter.prototype.query = function (params, callback) {\n                var data = [];\n                var self = this;\n\n                var $options = this.$element.children();\n\n                $options.each(function () {\n                    var $option = $(this);\n\n                    if (!$option.is('option') && !$option.is('optgroup')) {\n                        return;\n                    }\n\n                    var option = self.item($option);\n\n                    var matches = self.matches(params, option);\n\n                    if (matches !== null) {\n                        data.push(matches);\n                    }\n                });\n\n                callback({\n                    results: data\n                });\n            };\n\n            SelectAdapter.prototype.addOptions = function ($options) {\n                Utils.appendMany(this.$element, $options);\n            };\n\n            SelectAdapter.prototype.option = function (data) {\n                var option;\n\n                if (data.children) {\n                    option = document.createElement('optgroup');\n                    option.label = data.text;\n                } else {\n                    option = document.createElement('option');\n\n                    if (option.textContent !== undefined) {\n                        option.textContent = data.text;\n                    } else {\n                        option.innerText = data.text;\n                    }\n                }\n\n                if (data.id !== undefined) {\n                    option.value = data.id;\n                }\n\n                if (data.disabled) {\n                    option.disabled = true;\n                }\n\n                if (data.selected) {\n                    option.selected = true;\n                }\n\n                if (data.title) {\n                    option.title = data.title;\n                }\n\n                var $option = $(option);\n\n                var normalizedData = this._normalizeItem(data);\n                normalizedData.element = option;\n\n                // Override the option's data with the combined data\n                $.data(option, 'data', normalizedData);\n\n                return $option;\n            };\n\n            SelectAdapter.prototype.item = function ($option) {\n                var data = {};\n\n                data = $.data($option[0], 'data');\n\n                if (data != null) {\n                    return data;\n                }\n\n                if ($option.is('option')) {\n                    data = {\n                        id: $option.val(),\n                        text: $option.text(),\n                        disabled: $option.prop('disabled'),\n                        selected: $option.prop('selected'),\n                        title: $option.prop('title')\n                    };\n                } else if ($option.is('optgroup')) {\n                    data = {\n                        text: $option.prop('label'),\n                        children: [],\n                        title: $option.prop('title')\n                    };\n\n                    var $children = $option.children('option');\n                    var children = [];\n\n                    for (var c = 0; c < $children.length; c++) {\n                        var $child = $($children[c]);\n\n                        var child = this.item($child);\n\n                        children.push(child);\n                    }\n\n                    data.children = children;\n                }\n\n                data = this._normalizeItem(data);\n                data.element = $option[0];\n\n                $.data($option[0], 'data', data);\n\n                return data;\n            };\n\n            SelectAdapter.prototype._normalizeItem = function (item) {\n                if (!$.isPlainObject(item)) {\n                    item = {\n                        id: item,\n                        text: item\n                    };\n                }\n\n                item = $.extend({}, {\n                    text: ''\n                }, item);\n\n                var defaults = {\n                    selected: false,\n                    disabled: false\n                };\n\n                if (item.id != null) {\n                    item.id = item.id.toString();\n                }\n\n                if (item.text != null) {\n                    item.text = item.text.toString();\n                }\n\n                if (item._resultId == null && item.id && this.container != null) {\n                    item._resultId = this.generateResultId(this.container, item);\n                }\n\n                return $.extend({}, defaults, item);\n            };\n\n            SelectAdapter.prototype.matches = function (params, data) {\n                var matcher = this.options.get('matcher');\n\n                return matcher(params, data);\n            };\n\n            return SelectAdapter;\n        });\n\n        S2.define('select2/data/array',[\n            './select',\n            '../utils',\n            'jquery'\n        ], function (SelectAdapter, Utils, $) {\n            function ArrayAdapter ($element, options) {\n                var data = options.get('data') || [];\n\n                ArrayAdapter.__super__.constructor.call(this, $element, options);\n\n                this.addOptions(this.convertToOptions(data));\n            }\n\n            Utils.Extend(ArrayAdapter, SelectAdapter);\n\n            ArrayAdapter.prototype.select = function (data) {\n                var $option = this.$element.find('option').filter(function (i, elm) {\n                    return elm.value == data.id.toString();\n                });\n\n                if ($option.length === 0) {\n                    $option = this.option(data);\n\n                    this.addOptions($option);\n                }\n\n                ArrayAdapter.__super__.select.call(this, data);\n            };\n\n            ArrayAdapter.prototype.convertToOptions = function (data) {\n                var self = this;\n\n                var $existing = this.$element.find('option');\n                var existingIds = $existing.map(function () {\n                    return self.item($(this)).id;\n                }).get();\n\n                var $options = [];\n\n                // Filter out all items except for the one passed in the argument\n                function onlyItem (item) {\n                    return function () {\n                        return $(this).val() == item.id;\n                    };\n                }\n\n                for (var d = 0; d < data.length; d++) {\n                    var item = this._normalizeItem(data[d]);\n\n                    // Skip items which were pre-loaded, only merge the data\n                    if ($.inArray(item.id, existingIds) >= 0) {\n                        var $existingOption = $existing.filter(onlyItem(item));\n\n                        var existingData = this.item($existingOption);\n                        var newData = $.extend(true, {}, item, existingData);\n\n                        var $newOption = this.option(newData);\n\n                        $existingOption.replaceWith($newOption);\n\n                        continue;\n                    }\n\n                    var $option = this.option(item);\n\n                    if (item.children) {\n                        var $children = this.convertToOptions(item.children);\n\n                        Utils.appendMany($option, $children);\n                    }\n\n                    $options.push($option);\n                }\n\n                return $options;\n            };\n\n            return ArrayAdapter;\n        });\n\n        S2.define('select2/data/ajax',[\n            './array',\n            '../utils',\n            'jquery'\n        ], function (ArrayAdapter, Utils, $) {\n            function AjaxAdapter ($element, options) {\n                this.ajaxOptions = this._applyDefaults(options.get('ajax'));\n\n                if (this.ajaxOptions.processResults != null) {\n                    this.processResults = this.ajaxOptions.processResults;\n                }\n\n                AjaxAdapter.__super__.constructor.call(this, $element, options);\n            }\n\n            Utils.Extend(AjaxAdapter, ArrayAdapter);\n\n            AjaxAdapter.prototype._applyDefaults = function (options) {\n                var defaults = {\n                    data: function (params) {\n                        return $.extend({}, params, {\n                            q: params.term\n                        });\n                    },\n                    transport: function (params, success, failure) {\n                        var $request = $.ajax(params);\n\n                        $request.then(success);\n                        $request.fail(failure);\n\n                        return $request;\n                    }\n                };\n\n                return $.extend({}, defaults, options, true);\n            };\n\n            AjaxAdapter.prototype.processResults = function (results) {\n                return results;\n            };\n\n            AjaxAdapter.prototype.query = function (params, callback) {\n                var matches = [];\n                var self = this;\n\n                if (this._request != null) {\n                    // JSONP requests cannot always be aborted\n                    if ($.isFunction(this._request.abort)) {\n                        this._request.abort();\n                    }\n\n                    this._request = null;\n                }\n\n                var options = $.extend({\n                    type: 'GET'\n                }, this.ajaxOptions);\n\n                if (typeof options.url === 'function') {\n                    options.url = options.url.call(this.$element, params);\n                }\n\n                if (typeof options.data === 'function') {\n                    options.data = options.data.call(this.$element, params);\n                }\n\n                function request () {\n                    var $request = options.transport(options, function (data) {\n                        var results = self.processResults(data, params);\n\n                        if (self.options.get('debug') && window.console && console.error) {\n                            // Check to make sure that the response included a `results` key.\n                            if (!results || !results.results || !$.isArray(results.results)) {\n                                console.error(\n                                    'Select2: The AJAX results did not return an array in the ' +\n                                    '`results` key of the response.'\n                                );\n                            }\n                        }\n\n                        callback(results);\n                    }, function () {\n                        // Attempt to detect if a request was aborted\n                        // Only works if the transport exposes a status property\n                        if ($request.status && $request.status === '0') {\n                            return;\n                        }\n\n                        self.trigger('results:message', {\n                            message: 'errorLoading'\n                        });\n                    });\n\n                    self._request = $request;\n                }\n\n                if (this.ajaxOptions.delay && params.term != null) {\n                    if (this._queryTimeout) {\n                        window.clearTimeout(this._queryTimeout);\n                    }\n\n                    this._queryTimeout = window.setTimeout(request, this.ajaxOptions.delay);\n                } else {\n                    request();\n                }\n            };\n\n            return AjaxAdapter;\n        });\n\n        S2.define('select2/data/tags',[\n            'jquery'\n        ], function ($) {\n            function Tags (decorated, $element, options) {\n                var tags = options.get('tags');\n\n                var createTag = options.get('createTag');\n\n                if (createTag !== undefined) {\n                    this.createTag = createTag;\n                }\n\n                var insertTag = options.get('insertTag');\n\n                if (insertTag !== undefined) {\n                    this.insertTag = insertTag;\n                }\n\n                decorated.call(this, $element, options);\n\n                if ($.isArray(tags)) {\n                    for (var t = 0; t < tags.length; t++) {\n                        var tag = tags[t];\n                        var item = this._normalizeItem(tag);\n\n                        var $option = this.option(item);\n\n                        this.$element.append($option);\n                    }\n                }\n            }\n\n            Tags.prototype.query = function (decorated, params, callback) {\n                var self = this;\n\n                this._removeOldTags();\n\n                if (params.term == null || params.page != null) {\n                    decorated.call(this, params, callback);\n                    return;\n                }\n\n                function wrapper (obj, child) {\n                    var data = obj.results;\n\n                    for (var i = 0; i < data.length; i++) {\n                        var option = data[i];\n\n                        var checkChildren = (\n                            option.children != null &&\n                            !wrapper({\n                                results: option.children\n                            }, true)\n                        );\n\n                        var optionText = (option.text || '').toUpperCase();\n                        var paramsTerm = (params.term || '').toUpperCase();\n\n                        var checkText = optionText === paramsTerm;\n\n                        if (checkText || checkChildren) {\n                            if (child) {\n                                return false;\n                            }\n\n                            obj.data = data;\n                            callback(obj);\n\n                            return;\n                        }\n                    }\n\n                    if (child) {\n                        return true;\n                    }\n\n                    var tag = self.createTag(params);\n\n                    if (tag != null) {\n                        var $option = self.option(tag);\n                        $option.attr('data-select2-tag', true);\n\n                        self.addOptions([$option]);\n\n                        self.insertTag(data, tag);\n                    }\n\n                    obj.results = data;\n\n                    callback(obj);\n                }\n\n                decorated.call(this, params, wrapper);\n            };\n\n            Tags.prototype.createTag = function (decorated, params) {\n                var term = $.trim(params.term);\n\n                if (term === '') {\n                    return null;\n                }\n\n                return {\n                    id: term,\n                    text: term\n                };\n            };\n\n            Tags.prototype.insertTag = function (_, data, tag) {\n                data.unshift(tag);\n            };\n\n            Tags.prototype._removeOldTags = function (_) {\n                var tag = this._lastTag;\n\n                var $options = this.$element.find('option[data-select2-tag]');\n\n                $options.each(function () {\n                    if (this.selected) {\n                        return;\n                    }\n\n                    $(this).remove();\n                });\n            };\n\n            return Tags;\n        });\n\n        S2.define('select2/data/tokenizer',[\n            'jquery'\n        ], function ($) {\n            function Tokenizer (decorated, $element, options) {\n                var tokenizer = options.get('tokenizer');\n\n                if (tokenizer !== undefined) {\n                    this.tokenizer = tokenizer;\n                }\n\n                decorated.call(this, $element, options);\n            }\n\n            Tokenizer.prototype.bind = function (decorated, container, $container) {\n                decorated.call(this, container, $container);\n\n                this.$search =  container.dropdown.$search || container.selection.$search ||\n                                $container.find('.select2-search__field');\n            };\n\n            Tokenizer.prototype.query = function (decorated, params, callback) {\n                var self = this;\n\n                function createAndSelect (data) {\n                    // Normalize the data object so we can use it for checks\n                    var item = self._normalizeItem(data);\n\n                    // Check if the data object already exists as a tag\n                    // Select it if it doesn't\n                    var $existingOptions = self.$element.find('option').filter(function () {\n                        return $(this).val() === item.id;\n                    });\n\n                    // If an existing option wasn't found for it, create the option\n                    if (!$existingOptions.length) {\n                        var $option = self.option(item);\n                        $option.attr('data-select2-tag', true);\n\n                        self._removeOldTags();\n                        self.addOptions([$option]);\n                    }\n\n                    // Select the item, now that we know there is an option for it\n                    select(item);\n                }\n\n                function select (data) {\n                    self.trigger('select', {\n                        data: data\n                    });\n                }\n\n                params.term = params.term || '';\n\n                var tokenData = this.tokenizer(params, this.options, createAndSelect);\n\n                if (tokenData.term !== params.term) {\n                    // Replace the search term if we have the search box\n                    if (this.$search.length) {\n                        this.$search.val(tokenData.term);\n                        this.$search.focus();\n                    }\n\n                    params.term = tokenData.term;\n                }\n\n                decorated.call(this, params, callback);\n            };\n\n            Tokenizer.prototype.tokenizer = function (_, params, options, callback) {\n                var separators = options.get('tokenSeparators') || [];\n                var term = params.term;\n                var i = 0;\n\n                var createTag = this.createTag || function (params) {\n                    return {\n                        id: params.term,\n                        text: params.term\n                    };\n                };\n\n                while (i < term.length) {\n                    var termChar = term[i];\n\n                    if ($.inArray(termChar, separators) === -1) {\n                        i++;\n\n                        continue;\n                    }\n\n                    var part = term.substr(0, i);\n                    var partParams = $.extend({}, params, {\n                        term: part\n                    });\n\n                    var data = createTag(partParams);\n\n                    if (data == null) {\n                        i++;\n                        continue;\n                    }\n\n                    callback(data);\n\n                    // Reset the term to not include the tokenized portion\n                    term = term.substr(i + 1) || '';\n                    i = 0;\n                }\n\n                return {\n                    term: term\n                };\n            };\n\n            return Tokenizer;\n        });\n\n        S2.define('select2/data/minimumInputLength',[\n\n        ], function () {\n            function MinimumInputLength (decorated, $e, options) {\n                this.minimumInputLength = options.get('minimumInputLength');\n\n                decorated.call(this, $e, options);\n            }\n\n            MinimumInputLength.prototype.query = function (decorated, params, callback) {\n                params.term = params.term || '';\n\n                if (params.term.length < this.minimumInputLength) {\n                    this.trigger('results:message', {\n                        message: 'inputTooShort',\n                        args: {\n                            minimum: this.minimumInputLength,\n                            input: params.term,\n                            params: params\n                        }\n                    });\n\n                    return;\n                }\n\n                decorated.call(this, params, callback);\n            };\n\n            return MinimumInputLength;\n        });\n\n        S2.define('select2/data/maximumInputLength',[\n\n        ], function () {\n            function MaximumInputLength (decorated, $e, options) {\n                this.maximumInputLength = options.get('maximumInputLength');\n\n                decorated.call(this, $e, options);\n            }\n\n            MaximumInputLength.prototype.query = function (decorated, params, callback) {\n                params.term = params.term || '';\n\n                if (this.maximumInputLength > 0 &&\n                    params.term.length > this.maximumInputLength) {\n                    this.trigger('results:message', {\n                        message: 'inputTooLong',\n                        args: {\n                            maximum: this.maximumInputLength,\n                            input: params.term,\n                            params: params\n                        }\n                    });\n\n                    return;\n                }\n\n                decorated.call(this, params, callback);\n            };\n\n            return MaximumInputLength;\n        });\n\n        S2.define('select2/data/maximumSelectionLength',[\n\n        ], function (){\n            function MaximumSelectionLength (decorated, $e, options) {\n                this.maximumSelectionLength = options.get('maximumSelectionLength');\n\n                decorated.call(this, $e, options);\n            }\n\n            MaximumSelectionLength.prototype.query =\n                function (decorated, params, callback) {\n                    var self = this;\n\n                    this.current(function (currentData) {\n                        var count = currentData != null ? currentData.length : 0;\n                        if (self.maximumSelectionLength > 0 &&\n                            count >= self.maximumSelectionLength) {\n                            self.trigger('results:message', {\n                                message: 'maximumSelected',\n                                args: {\n                                    maximum: self.maximumSelectionLength\n                                }\n                            });\n                            return;\n                        }\n                        decorated.call(self, params, callback);\n                    });\n                };\n\n            return MaximumSelectionLength;\n        });\n\n        S2.define('select2/dropdown',[\n            'jquery',\n            './utils'\n        ], function ($, Utils) {\n            function Dropdown ($element, options) {\n                this.$element = $element;\n                this.options = options;\n\n                Dropdown.__super__.constructor.call(this);\n            }\n\n            Utils.Extend(Dropdown, Utils.Observable);\n\n            Dropdown.prototype.render = function () {\n                var $dropdown = $(\n                    '<span class=\"select2-dropdown\">' +\n                    '<span class=\"select2-results\"></span>' +\n                    '</span>'\n                );\n\n                $dropdown.attr('dir', this.options.get('dir'));\n\n                this.$dropdown = $dropdown;\n\n                return $dropdown;\n            };\n\n            Dropdown.prototype.bind = function () {\n                // Should be implemented in subclasses\n            };\n\n            Dropdown.prototype.position = function ($dropdown, $container) {\n                // Should be implmented in subclasses\n            };\n\n            Dropdown.prototype.destroy = function () {\n                // Remove the dropdown from the DOM\n                this.$dropdown.remove();\n            };\n\n            return Dropdown;\n        });\n\n        S2.define('select2/dropdown/search',[\n            'jquery',\n            '../utils'\n        ], function ($, Utils) {\n            function Search () { }\n\n            Search.prototype.render = function (decorated) {\n                var $rendered = decorated.call(this);\n\n                var $search = $(\n                    '<span class=\"select2-search select2-search--dropdown\">' +\n                    '<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\"' +\n                    ' autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"none\"' +\n                    ' spellcheck=\"false\" role=\"textbox\" />' +\n                    '</span>'\n                );\n\n                this.$searchContainer = $search;\n                this.$search = $search.find('input');\n\n                $rendered.prepend($search);\n\n                return $rendered;\n            };\n\n            Search.prototype.bind = function (decorated, container, $container) {\n                var self = this;\n\n                decorated.call(this, container, $container);\n\n                this.$search.on('keydown', function (evt) {\n                    self.trigger('keypress', evt);\n\n                    self._keyUpPrevented = evt.isDefaultPrevented();\n                });\n\n                // Workaround for browsers which do not support the `input` event\n                // This will prevent double-triggering of events for browsers which support\n                // both the `keyup` and `input` events.\n                this.$search.on('input', function (evt) {\n                    // Unbind the duplicated `keyup` event\n                    $(this).off('keyup');\n                });\n\n                this.$search.on('keyup input', function (evt) {\n                    self.handleSearch(evt);\n                });\n\n                container.on('open', function () {\n                    self.$search.attr('tabindex', 0);\n\n                    self.$search.focus();\n\n                    window.setTimeout(function () {\n                        self.$search.focus();\n                    }, 0);\n                });\n\n                container.on('close', function () {\n                    self.$search.attr('tabindex', -1);\n\n                    self.$search.val('');\n                });\n\n                container.on('focus', function () {\n                    if (!container.isOpen()) {\n                        self.$search.focus();\n                    }\n                });\n\n                container.on('results:all', function (params) {\n                    if (params.query.term == null || params.query.term === '') {\n                        var showSearch = self.showSearch(params);\n\n                        if (showSearch) {\n                            self.$searchContainer.removeClass('select2-search--hide');\n                        } else {\n                            self.$searchContainer.addClass('select2-search--hide');\n                        }\n                    }\n                });\n            };\n\n            Search.prototype.handleSearch = function (evt) {\n                if (!this._keyUpPrevented) {\n                    var input = this.$search.val();\n\n                    this.trigger('query', {\n                        term: input\n                    });\n                }\n\n                this._keyUpPrevented = false;\n            };\n\n            Search.prototype.showSearch = function (_, params) {\n                return true;\n            };\n\n            return Search;\n        });\n\n        S2.define('select2/dropdown/hidePlaceholder',[\n\n        ], function () {\n            function HidePlaceholder (decorated, $element, options, dataAdapter) {\n                this.placeholder = this.normalizePlaceholder(options.get('placeholder'));\n\n                decorated.call(this, $element, options, dataAdapter);\n            }\n\n            HidePlaceholder.prototype.append = function (decorated, data) {\n                data.results = this.removePlaceholder(data.results);\n\n                decorated.call(this, data);\n            };\n\n            HidePlaceholder.prototype.normalizePlaceholder = function (_, placeholder) {\n                if (typeof placeholder === 'string') {\n                    placeholder = {\n                        id: '',\n                        text: placeholder\n                    };\n                }\n\n                return placeholder;\n            };\n\n            HidePlaceholder.prototype.removePlaceholder = function (_, data) {\n                var modifiedData = data.slice(0);\n\n                for (var d = data.length - 1; d >= 0; d--) {\n                    var item = data[d];\n\n                    if (this.placeholder.id === item.id) {\n                        modifiedData.splice(d, 1);\n                    }\n                }\n\n                return modifiedData;\n            };\n\n            return HidePlaceholder;\n        });\n\n        S2.define('select2/dropdown/infiniteScroll',[\n            'jquery'\n        ], function ($) {\n            function InfiniteScroll (decorated, $element, options, dataAdapter) {\n                this.lastParams = {};\n\n                decorated.call(this, $element, options, dataAdapter);\n\n                this.$loadingMore = this.createLoadingMore();\n                this.loading = false;\n            }\n\n            InfiniteScroll.prototype.append = function (decorated, data) {\n                this.$loadingMore.remove();\n                this.loading = false;\n\n                decorated.call(this, data);\n\n                if (this.showLoadingMore(data)) {\n                    this.$results.append(this.$loadingMore);\n                }\n            };\n\n            InfiniteScroll.prototype.bind = function (decorated, container, $container) {\n                var self = this;\n\n                decorated.call(this, container, $container);\n\n                container.on('query', function (params) {\n                    self.lastParams = params;\n                    self.loading = true;\n                });\n\n                container.on('query:append', function (params) {\n                    self.lastParams = params;\n                    self.loading = true;\n                });\n\n                this.$results.on('scroll', function () {\n                    var isLoadMoreVisible = $.contains(\n                        document.documentElement,\n                        self.$loadingMore[0]\n                    );\n\n                    if (self.loading || !isLoadMoreVisible) {\n                        return;\n                    }\n\n                    var currentOffset = self.$results.offset().top +\n                                        self.$results.outerHeight(false);\n                    var loadingMoreOffset = self.$loadingMore.offset().top +\n                                            self.$loadingMore.outerHeight(false);\n\n                    if (currentOffset + 50 >= loadingMoreOffset) {\n                        self.loadMore();\n                    }\n                });\n            };\n\n            InfiniteScroll.prototype.loadMore = function () {\n                this.loading = true;\n\n                var params = $.extend({}, {page: 1}, this.lastParams);\n\n                params.page++;\n\n                this.trigger('query:append', params);\n            };\n\n            InfiniteScroll.prototype.showLoadingMore = function (_, data) {\n                return data.pagination && data.pagination.more;\n            };\n\n            InfiniteScroll.prototype.createLoadingMore = function () {\n                var $option = $(\n                    '<li ' +\n                    'class=\"select2-results__option select2-results__option--load-more\"' +\n                    'role=\"treeitem\" aria-disabled=\"true\"></li>'\n                );\n\n                var message = this.options.get('translations').get('loadingMore');\n\n                $option.html(message(this.lastParams));\n\n                return $option;\n            };\n\n            return InfiniteScroll;\n        });\n\n        S2.define('select2/dropdown/attachBody',[\n            'jquery',\n            '../utils'\n        ], function ($, Utils) {\n            function AttachBody (decorated, $element, options) {\n                this.$dropdownParent = options.get('dropdownParent') || $(document.body);\n\n                decorated.call(this, $element, options);\n            }\n\n            AttachBody.prototype.bind = function (decorated, container, $container) {\n                var self = this;\n\n                var setupResultsEvents = false;\n\n                decorated.call(this, container, $container);\n\n                container.on('open', function () {\n                    self._showDropdown();\n                    self._attachPositioningHandler(container);\n\n                    if (!setupResultsEvents) {\n                        setupResultsEvents = true;\n\n                        container.on('results:all', function () {\n                            self._positionDropdown();\n                            self._resizeDropdown();\n                        });\n\n                        container.on('results:append', function () {\n                            self._positionDropdown();\n                            self._resizeDropdown();\n                        });\n                    }\n                });\n\n                container.on('close', function () {\n                    self._hideDropdown();\n                    self._detachPositioningHandler(container);\n                });\n\n                this.$dropdownContainer.on('mousedown', function (evt) {\n                    evt.stopPropagation();\n                });\n            };\n\n            AttachBody.prototype.destroy = function (decorated) {\n                decorated.call(this);\n\n                this.$dropdownContainer.remove();\n            };\n\n            AttachBody.prototype.position = function (decorated, $dropdown, $container) {\n                // Clone all of the container classes\n                $dropdown.attr('class', $container.attr('class'));\n\n                $dropdown.removeClass('select2');\n                $dropdown.addClass('select2-container--open');\n\n                $dropdown.css({\n                    position: 'absolute',\n                    top: -999999\n                });\n\n                this.$container = $container;\n            };\n\n            AttachBody.prototype.render = function (decorated) {\n                var $container = $('<span></span>');\n\n                var $dropdown = decorated.call(this);\n                $container.append($dropdown);\n\n                this.$dropdownContainer = $container;\n\n                return $container;\n            };\n\n            AttachBody.prototype._hideDropdown = function (decorated) {\n                this.$dropdownContainer.detach();\n            };\n\n            AttachBody.prototype._attachPositioningHandler =\n                function (decorated, container) {\n                    var self = this;\n\n                    var scrollEvent = 'scroll.select2.' + container.id;\n                    var resizeEvent = 'resize.select2.' + container.id;\n                    var orientationEvent = 'orientationchange.select2.' + container.id;\n\n                    var $watchers = this.$container.parents().filter(Utils.hasScroll);\n                    $watchers.each(function () {\n                        $(this).data('select2-scroll-position', {\n                            x: $(this).scrollLeft(),\n                            y: $(this).scrollTop()\n                        });\n                    });\n\n                    $watchers.on(scrollEvent, function (ev) {\n                        var position = $(this).data('select2-scroll-position');\n                        $(this).scrollTop(position.y);\n                    });\n\n                    $(window).on(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent,\n                        function (e) {\n                            self._positionDropdown();\n                            self._resizeDropdown();\n                        });\n                };\n\n            AttachBody.prototype._detachPositioningHandler =\n                function (decorated, container) {\n                    var scrollEvent = 'scroll.select2.' + container.id;\n                    var resizeEvent = 'resize.select2.' + container.id;\n                    var orientationEvent = 'orientationchange.select2.' + container.id;\n\n                    var $watchers = this.$container.parents().filter(Utils.hasScroll);\n                    $watchers.off(scrollEvent);\n\n                    $(window).off(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent);\n                };\n\n            AttachBody.prototype._positionDropdown = function () {\n                var $window = $(window);\n\n                var isCurrentlyAbove = this.$dropdown.hasClass('select2-dropdown--above');\n                var isCurrentlyBelow = this.$dropdown.hasClass('select2-dropdown--below');\n\n                var newDirection = null;\n\n                var offset = this.$container.offset();\n\n                offset.bottom = offset.top + this.$container.outerHeight(false);\n\n                var container = {\n                    height: this.$container.outerHeight(false)\n                };\n\n                container.top = offset.top;\n                container.bottom = offset.top + container.height;\n\n                var dropdown = {\n                    height: this.$dropdown.outerHeight(false)\n                };\n\n                var viewport = {\n                    top: $window.scrollTop(),\n                    bottom: $window.scrollTop() + $window.height()\n                };\n\n                var enoughRoomAbove = viewport.top < (offset.top - dropdown.height);\n                var enoughRoomBelow = viewport.bottom > (offset.bottom + dropdown.height);\n\n                var css = {\n                    left: offset.left,\n                    top: container.bottom\n                };\n\n                // Determine what the parent element is to use for calciulating the offset\n                var $offsetParent = this.$dropdownParent;\n\n                // For statically positoned elements, we need to get the element\n                // that is determining the offset\n                if ($offsetParent.css('position') === 'static') {\n                    $offsetParent = $offsetParent.offsetParent();\n                }\n\n                var parentOffset = $offsetParent.offset();\n\n                css.top -= parentOffset.top;\n                css.left -= parentOffset.left;\n\n                if (!isCurrentlyAbove && !isCurrentlyBelow) {\n                    newDirection = 'below';\n                }\n\n                if (!enoughRoomBelow && enoughRoomAbove && !isCurrentlyAbove) {\n                    newDirection = 'above';\n                } else if (!enoughRoomAbove && enoughRoomBelow && isCurrentlyAbove) {\n                    newDirection = 'below';\n                }\n\n                if (newDirection == 'above' ||\n                    (isCurrentlyAbove && newDirection !== 'below')) {\n                    css.top = container.top - parentOffset.top - dropdown.height;\n                }\n\n                if (newDirection != null) {\n                    this.$dropdown\n                        .removeClass('select2-dropdown--below select2-dropdown--above')\n                        .addClass('select2-dropdown--' + newDirection);\n                    this.$container\n                        .removeClass('select2-container--below select2-container--above')\n                        .addClass('select2-container--' + newDirection);\n                }\n\n                this.$dropdownContainer.css(css);\n            };\n\n            AttachBody.prototype._resizeDropdown = function () {\n                var css = {\n                    width: this.$container.outerWidth(false) + 'px'\n                };\n\n                if (this.options.get('dropdownAutoWidth')) {\n                    css.minWidth = css.width;\n                    css.position = 'relative';\n                    css.width = 'auto';\n                }\n\n                this.$dropdown.css(css);\n            };\n\n            AttachBody.prototype._showDropdown = function (decorated) {\n                this.$dropdownContainer.appendTo(this.$dropdownParent);\n\n                this._positionDropdown();\n                this._resizeDropdown();\n            };\n\n            return AttachBody;\n        });\n\n        S2.define('select2/dropdown/minimumResultsForSearch',[\n\n        ], function () {\n            function countResults (data) {\n                var count = 0;\n\n                for (var d = 0; d < data.length; d++) {\n                    var item = data[d];\n\n                    if (item.children) {\n                        count += countResults(item.children);\n                    } else {\n                        count++;\n                    }\n                }\n\n                return count;\n            }\n\n            function MinimumResultsForSearch (decorated, $element, options, dataAdapter) {\n                this.minimumResultsForSearch = options.get('minimumResultsForSearch');\n\n                if (this.minimumResultsForSearch < 0) {\n                    this.minimumResultsForSearch = Infinity;\n                }\n\n                decorated.call(this, $element, options, dataAdapter);\n            }\n\n            MinimumResultsForSearch.prototype.showSearch = function (decorated, params) {\n                if (countResults(params.data.results) < this.minimumResultsForSearch) {\n                    return false;\n                }\n\n                return decorated.call(this, params);\n            };\n\n            return MinimumResultsForSearch;\n        });\n\n        S2.define('select2/dropdown/selectOnClose',[\n\n        ], function () {\n            function SelectOnClose () { }\n\n            SelectOnClose.prototype.bind = function (decorated, container, $container) {\n                var self = this;\n\n                decorated.call(this, container, $container);\n\n                container.on('close', function (params) {\n                    self._handleSelectOnClose(params);\n                });\n            };\n\n            SelectOnClose.prototype._handleSelectOnClose = function (_, params) {\n                if (params && params.originalSelect2Event != null) {\n                    var event = params.originalSelect2Event;\n\n                    // Don't select an item if the close event was triggered from a select or\n                    // unselect event\n                    if (event._type === 'select' || event._type === 'unselect') {\n                        return;\n                    }\n                }\n\n                var $highlightedResults = this.getHighlightedResults();\n\n                // Only select highlighted results\n                if ($highlightedResults.length < 1) {\n                    return;\n                }\n\n                var data = $highlightedResults.data('data');\n\n                // Don't re-select already selected resulte\n                if (\n                    (data.element != null && data.element.selected) ||\n                    (data.element == null && data.selected)\n                ) {\n                    return;\n                }\n\n                this.trigger('select', {\n                    data: data\n                });\n            };\n\n            return SelectOnClose;\n        });\n\n        S2.define('select2/dropdown/closeOnSelect',[\n\n        ], function () {\n            function CloseOnSelect () { }\n\n            CloseOnSelect.prototype.bind = function (decorated, container, $container) {\n                var self = this;\n\n                decorated.call(this, container, $container);\n\n                container.on('select', function (evt) {\n                    self._selectTriggered(evt);\n                });\n\n                container.on('unselect', function (evt) {\n                    self._selectTriggered(evt);\n                });\n            };\n\n            CloseOnSelect.prototype._selectTriggered = function (_, evt) {\n                var originalEvent = evt.originalEvent;\n\n                // Don't close if the control key is being held\n                if (originalEvent && originalEvent.ctrlKey) {\n                    return;\n                }\n\n                this.trigger('close', {\n                    originalEvent: originalEvent,\n                    originalSelect2Event: evt\n                });\n            };\n\n            return CloseOnSelect;\n        });\n\n        S2.define('select2/i18n/en',[],function () {\n            // English\n            return {\n                errorLoading: function () {\n                    return 'The results could not be loaded.';\n                },\n                inputTooLong: function (args) {\n                    var overChars = args.input.length - args.maximum;\n\n                    var message = 'Please delete ' + overChars + ' character';\n\n                    if (overChars != 1) {\n                        message += 's';\n                    }\n\n                    return message;\n                },\n                inputTooShort: function (args) {\n                    var remainingChars = args.minimum - args.input.length;\n\n                    var message = 'Please enter ' + remainingChars + ' or more characters';\n\n                    return message;\n                },\n                loadingMore: function () {\n                    return 'Loading more resultsâ¦';\n                },\n                maximumSelected: function (args) {\n                    var message = 'You can only select ' + args.maximum + ' item';\n\n                    if (args.maximum != 1) {\n                        message += 's';\n                    }\n\n                    return message;\n                },\n                noResults: function () {\n                    return 'No results found';\n                },\n                searching: function () {\n                    return 'Searchingâ¦';\n                }\n            };\n        });\n\n        S2.define('select2/defaults',[\n            'jquery',\n            'require',\n\n            './results',\n\n            './selection/single',\n            './selection/multiple',\n            './selection/placeholder',\n            './selection/allowClear',\n            './selection/search',\n            './selection/eventRelay',\n\n            './utils',\n            './translation',\n            './diacritics',\n\n            './data/select',\n            './data/array',\n            './data/ajax',\n            './data/tags',\n            './data/tokenizer',\n            './data/minimumInputLength',\n            './data/maximumInputLength',\n            './data/maximumSelectionLength',\n\n            './dropdown',\n            './dropdown/search',\n            './dropdown/hidePlaceholder',\n            './dropdown/infiniteScroll',\n            './dropdown/attachBody',\n            './dropdown/minimumResultsForSearch',\n            './dropdown/selectOnClose',\n            './dropdown/closeOnSelect',\n\n            './i18n/en'\n        ], function ($, require,\n\n            ResultsList,\n\n            SingleSelection, MultipleSelection, Placeholder, AllowClear,\n            SelectionSearch, EventRelay,\n\n            Utils, Translation, DIACRITICS,\n\n            SelectData, ArrayData, AjaxData, Tags, Tokenizer,\n            MinimumInputLength, MaximumInputLength, MaximumSelectionLength,\n\n            Dropdown, DropdownSearch, HidePlaceholder, InfiniteScroll,\n            AttachBody, MinimumResultsForSearch, SelectOnClose, CloseOnSelect,\n\n            EnglishTranslation) {\n            function Defaults () {\n                this.reset();\n            }\n\n            Defaults.prototype.apply = function (options) {\n                options = $.extend(true, {}, this.defaults, options);\n\n                if (options.dataAdapter == null) {\n                    if (options.ajax != null) {\n                        options.dataAdapter = AjaxData;\n                    } else if (options.data != null) {\n                        options.dataAdapter = ArrayData;\n                    } else {\n                        options.dataAdapter = SelectData;\n                    }\n\n                    if (options.minimumInputLength > 0) {\n                        options.dataAdapter = Utils.Decorate(\n                            options.dataAdapter,\n                            MinimumInputLength\n                        );\n                    }\n\n                    if (options.maximumInputLength > 0) {\n                        options.dataAdapter = Utils.Decorate(\n                            options.dataAdapter,\n                            MaximumInputLength\n                        );\n                    }\n\n                    if (options.maximumSelectionLength > 0) {\n                        options.dataAdapter = Utils.Decorate(\n                            options.dataAdapter,\n                            MaximumSelectionLength\n                        );\n                    }\n\n                    if (options.tags) {\n                        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);\n                    }\n\n                    if (options.tokenSeparators != null || options.tokenizer != null) {\n                        options.dataAdapter = Utils.Decorate(\n                            options.dataAdapter,\n                            Tokenizer\n                        );\n                    }\n\n                    if (options.query != null) {\n                        var Query = require(options.amdBase + 'compat/query');\n\n                        options.dataAdapter = Utils.Decorate(\n                            options.dataAdapter,\n                            Query\n                        );\n                    }\n\n                    if (options.initSelection != null) {\n                        var InitSelection = require(options.amdBase + 'compat/initSelection');\n\n                        options.dataAdapter = Utils.Decorate(\n                            options.dataAdapter,\n                            InitSelection\n                        );\n                    }\n                }\n\n                if (options.resultsAdapter == null) {\n                    options.resultsAdapter = ResultsList;\n\n                    if (options.ajax != null) {\n                        options.resultsAdapter = Utils.Decorate(\n                            options.resultsAdapter,\n                            InfiniteScroll\n                        );\n                    }\n\n                    if (options.placeholder != null) {\n                        options.resultsAdapter = Utils.Decorate(\n                            options.resultsAdapter,\n                            HidePlaceholder\n                        );\n                    }\n\n                    if (options.selectOnClose) {\n                        options.resultsAdapter = Utils.Decorate(\n                            options.resultsAdapter,\n                            SelectOnClose\n                        );\n                    }\n                }\n\n                if (options.dropdownAdapter == null) {\n                    if (options.multiple) {\n                        options.dropdownAdapter = Dropdown;\n                    } else {\n                        var SearchableDropdown = Utils.Decorate(Dropdown, DropdownSearch);\n\n                        options.dropdownAdapter = SearchableDropdown;\n                    }\n\n                    if (options.minimumResultsForSearch !== 0) {\n                        options.dropdownAdapter = Utils.Decorate(\n                            options.dropdownAdapter,\n                            MinimumResultsForSearch\n                        );\n                    }\n\n                    if (options.closeOnSelect) {\n                        options.dropdownAdapter = Utils.Decorate(\n                            options.dropdownAdapter,\n                            CloseOnSelect\n                        );\n                    }\n\n                    if (\n                        options.dropdownCssClass != null ||\n                        options.dropdownCss != null ||\n                        options.adaptDropdownCssClass != null\n                    ) {\n                        var DropdownCSS = require(options.amdBase + 'compat/dropdownCss');\n\n                        options.dropdownAdapter = Utils.Decorate(\n                            options.dropdownAdapter,\n                            DropdownCSS\n                        );\n                    }\n\n                    options.dropdownAdapter = Utils.Decorate(\n                        options.dropdownAdapter,\n                        AttachBody\n                    );\n                }\n\n                if (options.selectionAdapter == null) {\n                    if (options.multiple) {\n                        options.selectionAdapter = MultipleSelection;\n                    } else {\n                        options.selectionAdapter = SingleSelection;\n                    }\n\n                    // Add the placeholder mixin if a placeholder was specified\n                    if (options.placeholder != null) {\n                        options.selectionAdapter = Utils.Decorate(\n                            options.selectionAdapter,\n                            Placeholder\n                        );\n                    }\n\n                    if (options.allowClear) {\n                        options.selectionAdapter = Utils.Decorate(\n                            options.selectionAdapter,\n                            AllowClear\n                        );\n                    }\n\n                    if (options.multiple) {\n                        options.selectionAdapter = Utils.Decorate(\n                            options.selectionAdapter,\n                            SelectionSearch\n                        );\n                    }\n\n                    if (\n                        options.containerCssClass != null ||\n                        options.containerCss != null ||\n                        options.adaptContainerCssClass != null\n                    ) {\n                        var ContainerCSS = require(options.amdBase + 'compat/containerCss');\n\n                        options.selectionAdapter = Utils.Decorate(\n                            options.selectionAdapter,\n                            ContainerCSS\n                        );\n                    }\n\n                    options.selectionAdapter = Utils.Decorate(\n                        options.selectionAdapter,\n                        EventRelay\n                    );\n                }\n\n                if (typeof options.language === 'string') {\n                    // Check if the language is specified with a region\n                    if (options.language.indexOf('-') > 0) {\n                        // Extract the region information if it is included\n                        var languageParts = options.language.split('-');\n                        var baseLanguage = languageParts[0];\n\n                        options.language = [options.language, baseLanguage];\n                    } else {\n                        options.language = [options.language];\n                    }\n                }\n\n                if ($.isArray(options.language)) {\n                    var languages = new Translation();\n                    options.language.push('en');\n\n                    var languageNames = options.language;\n\n                    for (var l = 0; l < languageNames.length; l++) {\n                        var name = languageNames[l];\n                        var language = {};\n\n                        try {\n                            // Try to load it with the original name\n                            language = Translation.loadPath(name);\n                        } catch (e) {\n                            try {\n                                // If we couldn't load it, check if it wasn't the full path\n                                name = this.defaults.amdLanguageBase + name;\n                                language = Translation.loadPath(name);\n                            } catch (ex) {\n                                // The translation could not be loaded at all. Sometimes this is\n                                // because of a configuration problem, other times this can be\n                                // because of how Select2 helps load all possible translation files.\n                                if (options.debug && window.console && console.warn) {\n                                    console.warn(\n                                        'Select2: The language file for \"' + name + '\" could not be ' +\n                                        'automatically loaded. A fallback will be used instead.'\n                                    );\n                                }\n\n                                continue;\n                            }\n                        }\n\n                        languages.extend(language);\n                    }\n\n                    options.translations = languages;\n                } else {\n                    var baseTranslation = Translation.loadPath(\n                        this.defaults.amdLanguageBase + 'en'\n                    );\n                    var customTranslation = new Translation(options.language);\n\n                    customTranslation.extend(baseTranslation);\n\n                    options.translations = customTranslation;\n                }\n\n                return options;\n            };\n\n            Defaults.prototype.reset = function () {\n                function stripDiacritics (text) {\n                    // Used 'uni range + named function' from http://jsperf.com/diacritics/18\n                    function match(a) {\n                        return DIACRITICS[a] || a;\n                    }\n\n                    return text.replace(/[^\\u0000-\\u007E]/g, match);\n                }\n\n                function matcher (params, data) {\n                    // Always return the object if there is nothing to compare\n                    if ($.trim(params.term) === '') {\n                        return data;\n                    }\n\n                    // Do a recursive check for options with children\n                    if (data.children && data.children.length > 0) {\n                        // Clone the data object if there are children\n                        // This is required as we modify the object to remove any non-matches\n                        var match = $.extend(true, {}, data);\n\n                        // Check each child of the option\n                        for (var c = data.children.length - 1; c >= 0; c--) {\n                            var child = data.children[c];\n\n                            var matches = matcher(params, child);\n\n                            // If there wasn't a match, remove the object in the array\n                            if (matches == null) {\n                                match.children.splice(c, 1);\n                            }\n                        }\n\n                        // If any children matched, return the new object\n                        if (match.children.length > 0) {\n                            return match;\n                        }\n\n                        // If there were no matching children, check just the plain object\n                        return matcher(params, match);\n                    }\n\n                    var original = stripDiacritics(data.text).toUpperCase();\n                    var term = stripDiacritics(params.term).toUpperCase();\n\n                    // Check if the text contains the term\n                    if (original.indexOf(term) > -1) {\n                        return data;\n                    }\n\n                    // If it doesn't contain the term, don't return anything\n                    return null;\n                }\n\n                this.defaults = {\n                    amdBase: './',\n                    amdLanguageBase: './i18n/',\n                    closeOnSelect: true,\n                    debug: false,\n                    dropdownAutoWidth: false,\n                    escapeMarkup: Utils.escapeMarkup,\n                    language: EnglishTranslation,\n                    matcher: matcher,\n                    minimumInputLength: 0,\n                    maximumInputLength: 0,\n                    maximumSelectionLength: 0,\n                    minimumResultsForSearch: 0,\n                    selectOnClose: false,\n                    sorter: function (data) {\n                        return data;\n                    },\n                    templateResult: function (result) {\n                        return result.text;\n                    },\n                    templateSelection: function (selection) {\n                        return selection.text;\n                    },\n                    theme: 'default',\n                    width: 'resolve'\n                };\n            };\n\n            Defaults.prototype.set = function (key, value) {\n                var camelKey = $.camelCase(key);\n\n                var data = {};\n                data[camelKey] = value;\n\n                var convertedData = Utils._convertData(data);\n\n                $.extend(this.defaults, convertedData);\n            };\n\n            var defaults = new Defaults();\n\n            return defaults;\n        });\n\n        S2.define('select2/options',[\n            'require',\n            'jquery',\n            './defaults',\n            './utils'\n        ], function (require, $, Defaults, Utils) {\n            function Options (options, $element) {\n                this.options = options;\n\n                if ($element != null) {\n                    this.fromElement($element);\n                }\n\n                this.options = Defaults.apply(this.options);\n\n                if ($element && $element.is('input')) {\n                    var InputCompat = require(this.get('amdBase') + 'compat/inputData');\n\n                    this.options.dataAdapter = Utils.Decorate(\n                        this.options.dataAdapter,\n                        InputCompat\n                    );\n                }\n            }\n\n            Options.prototype.fromElement = function ($e) {\n                var excludedData = ['select2'];\n\n                if (this.options.multiple == null) {\n                    this.options.multiple = $e.prop('multiple');\n                }\n\n                if (this.options.disabled == null) {\n                    this.options.disabled = $e.prop('disabled');\n                }\n\n                if (this.options.language == null) {\n                    if ($e.prop('lang')) {\n                        this.options.language = $e.prop('lang').toLowerCase();\n                    } else if ($e.closest('[lang]').prop('lang')) {\n                        this.options.language = $e.closest('[lang]').prop('lang');\n                    }\n                }\n\n                if (this.options.dir == null) {\n                    if ($e.prop('dir')) {\n                        this.options.dir = $e.prop('dir');\n                    } else if ($e.closest('[dir]').prop('dir')) {\n                        this.options.dir = $e.closest('[dir]').prop('dir');\n                    } else {\n                        this.options.dir = 'ltr';\n                    }\n                }\n\n                $e.prop('disabled', this.options.disabled);\n                $e.prop('multiple', this.options.multiple);\n\n                if ($e.data('select2Tags')) {\n                    if (this.options.debug && window.console && console.warn) {\n                        console.warn(\n                            'Select2: The `data-select2-tags` attribute has been changed to ' +\n                            'use the `data-data` and `data-tags=\"true\"` attributes and will be ' +\n                            'removed in future versions of Select2.'\n                        );\n                    }\n\n                    $e.data('data', $e.data('select2Tags'));\n                    $e.data('tags', true);\n                }\n\n                if ($e.data('ajaxUrl')) {\n                    if (this.options.debug && window.console && console.warn) {\n                        console.warn(\n                            'Select2: The `data-ajax-url` attribute has been changed to ' +\n                            '`data-ajax--url` and support for the old attribute will be removed' +\n                            ' in future versions of Select2.'\n                        );\n                    }\n\n                    $e.attr('ajax--url', $e.data('ajaxUrl'));\n                    $e.data('ajax--url', $e.data('ajaxUrl'));\n                }\n\n                var dataset = {};\n\n                // Prefer the element's `dataset` attribute if it exists\n                // jQuery 1.x does not correctly handle data attributes with multiple dashes\n                if ($.fn.jquery && $.fn.jquery.substr(0, 2) == '1.' && $e[0].dataset) {\n                    dataset = $.extend(true, {}, $e[0].dataset, $e.data());\n                } else {\n                    dataset = $e.data();\n                }\n\n                var data = $.extend(true, {}, dataset);\n\n                data = Utils._convertData(data);\n\n                for (var key in data) {\n                    if ($.inArray(key, excludedData) > -1) {\n                        continue;\n                    }\n\n                    if ($.isPlainObject(this.options[key])) {\n                        $.extend(this.options[key], data[key]);\n                    } else {\n                        this.options[key] = data[key];\n                    }\n                }\n\n                return this;\n            };\n\n            Options.prototype.get = function (key) {\n                return this.options[key];\n            };\n\n            Options.prototype.set = function (key, val) {\n                this.options[key] = val;\n            };\n\n            return Options;\n        });\n\n        S2.define('select2/core',[\n            'jquery',\n            './options',\n            './utils',\n            './keys'\n        ], function ($, Options, Utils, KEYS) {\n            var Select2 = function ($element, options) {\n                if ($element.data('select2') != null) {\n                    $element.data('select2').destroy();\n                }\n\n                this.$element = $element;\n\n                this.id = this._generateId($element);\n\n                options = options || {};\n\n                this.options = new Options(options, $element);\n\n                Select2.__super__.constructor.call(this);\n\n                // Set up the tabindex\n\n                var tabindex = $element.attr('tabindex') || 0;\n                $element.data('old-tabindex', tabindex);\n                $element.attr('tabindex', '-1');\n\n                // Set up containers and adapters\n\n                var DataAdapter = this.options.get('dataAdapter');\n                this.dataAdapter = new DataAdapter($element, this.options);\n\n                var $container = this.render();\n\n                this._placeContainer($container);\n\n                var SelectionAdapter = this.options.get('selectionAdapter');\n                this.selection = new SelectionAdapter($element, this.options);\n                this.$selection = this.selection.render();\n\n                this.selection.position(this.$selection, $container);\n\n                var DropdownAdapter = this.options.get('dropdownAdapter');\n                this.dropdown = new DropdownAdapter($element, this.options);\n                this.$dropdown = this.dropdown.render();\n\n                this.dropdown.position(this.$dropdown, $container);\n\n                var ResultsAdapter = this.options.get('resultsAdapter');\n                this.results = new ResultsAdapter($element, this.options, this.dataAdapter);\n                this.$results = this.results.render();\n\n                this.results.position(this.$results, this.$dropdown);\n\n                // Bind events\n\n                var self = this;\n\n                // Bind the container to all of the adapters\n                this._bindAdapters();\n\n                // Register any DOM event handlers\n                this._registerDomEvents();\n\n                // Register any internal event handlers\n                this._registerDataEvents();\n                this._registerSelectionEvents();\n                this._registerDropdownEvents();\n                this._registerResultsEvents();\n                this._registerEvents();\n\n                // Set the initial state\n                this.dataAdapter.current(function (initialData) {\n                    self.trigger('selection:update', {\n                        data: initialData\n                    });\n                });\n\n                // Hide the original select\n                $element.addClass('select2-hidden-accessible');\n                $element.attr('aria-hidden', 'true');\n\n                // Synchronize any monitored attributes\n                this._syncAttributes();\n\n                $element.data('select2', this);\n            };\n\n            Utils.Extend(Select2, Utils.Observable);\n\n            Select2.prototype._generateId = function ($element) {\n                var id = '';\n\n                if ($element.attr('id') != null) {\n                    id = $element.attr('id');\n                } else if ($element.attr('name') != null) {\n                    id = $element.attr('name') + '-' + Utils.generateChars(2);\n                } else {\n                    id = Utils.generateChars(4);\n                }\n\n                id = id.replace(/(:|\\.|\\[|\\]|,)/g, '');\n                id = 'select2-' + id;\n\n                return id;\n            };\n\n            Select2.prototype._placeContainer = function ($container) {\n                $container.insertAfter(this.$element);\n\n                var width = this._resolveWidth(this.$element, this.options.get('width'));\n\n                if (width != null) {\n                    $container.css('width', width);\n                }\n            };\n\n            Select2.prototype._resolveWidth = function ($element, method) {\n                var WIDTH = /^width:(([-+]?([0-9]*\\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;\n\n                if (method == 'resolve') {\n                    var styleWidth = this._resolveWidth($element, 'style');\n\n                    if (styleWidth != null) {\n                        return styleWidth;\n                    }\n\n                    return this._resolveWidth($element, 'element');\n                }\n\n                if (method == 'element') {\n                    var elementWidth = $element.outerWidth(false);\n\n                    if (elementWidth <= 0) {\n                        return 'auto';\n                    }\n\n                    return elementWidth + 'px';\n                }\n\n                if (method == 'style') {\n                    var style = $element.attr('style');\n\n                    if (typeof(style) !== 'string') {\n                        return null;\n                    }\n\n                    var attrs = style.split(';');\n\n                    for (var i = 0, l = attrs.length; i < l; i = i + 1) {\n                        var attr = attrs[i].replace(/\\s/g, '');\n                        var matches = attr.match(WIDTH);\n\n                        if (matches !== null && matches.length >= 1) {\n                            return matches[1];\n                        }\n                    }\n\n                    return null;\n                }\n\n                return method;\n            };\n\n            Select2.prototype._bindAdapters = function () {\n                this.dataAdapter.bind(this, this.$container);\n                this.selection.bind(this, this.$container);\n\n                this.dropdown.bind(this, this.$container);\n                this.results.bind(this, this.$container);\n            };\n\n            Select2.prototype._registerDomEvents = function () {\n                var self = this;\n\n                this.$element.on('change.select2', function () {\n                    self.dataAdapter.current(function (data) {\n                        self.trigger('selection:update', {\n                            data: data\n                        });\n                    });\n                });\n\n                this.$element.on('focus.select2', function (evt) {\n                    self.trigger('focus', evt);\n                });\n\n                this._syncA = Utils.bind(this._syncAttributes, this);\n                this._syncS = Utils.bind(this._syncSubtree, this);\n\n                if (this.$element[0].attachEvent) {\n                    this.$element[0].attachEvent('onpropertychange', this._syncA);\n                }\n\n                var observer = window.MutationObserver ||\n                               window.WebKitMutationObserver ||\n                               window.MozMutationObserver\n                ;\n\n                if (observer != null) {\n                    this._observer = new observer(function (mutations) {\n                        $.each(mutations, self._syncA);\n                        $.each(mutations, self._syncS);\n                    });\n                    this._observer.observe(this.$element[0], {\n                        attributes: true,\n                        childList: true,\n                        subtree: false\n                    });\n                } else if (this.$element[0].addEventListener) {\n                    this.$element[0].addEventListener(\n                        'DOMAttrModified',\n                        self._syncA,\n                        false\n                    );\n                    this.$element[0].addEventListener(\n                        'DOMNodeInserted',\n                        self._syncS,\n                        false\n                    );\n                    this.$element[0].addEventListener(\n                        'DOMNodeRemoved',\n                        self._syncS,\n                        false\n                    );\n                }\n            };\n\n            Select2.prototype._registerDataEvents = function () {\n                var self = this;\n\n                this.dataAdapter.on('*', function (name, params) {\n                    self.trigger(name, params);\n                });\n            };\n\n            Select2.prototype._registerSelectionEvents = function () {\n                var self = this;\n                var nonRelayEvents = ['toggle', 'focus'];\n\n                this.selection.on('toggle', function () {\n                    self.toggleDropdown();\n                });\n\n                this.selection.on('focus', function (params) {\n                    self.focus(params);\n                });\n\n                this.selection.on('*', function (name, params) {\n                    if ($.inArray(name, nonRelayEvents) !== -1) {\n                        return;\n                    }\n\n                    self.trigger(name, params);\n                });\n            };\n\n            Select2.prototype._registerDropdownEvents = function () {\n                var self = this;\n\n                this.dropdown.on('*', function (name, params) {\n                    self.trigger(name, params);\n                });\n            };\n\n            Select2.prototype._registerResultsEvents = function () {\n                var self = this;\n\n                this.results.on('*', function (name, params) {\n                    self.trigger(name, params);\n                });\n            };\n\n            Select2.prototype._registerEvents = function () {\n                var self = this;\n\n                this.on('open', function () {\n                    self.$container.addClass('select2-container--open');\n                });\n\n                this.on('close', function () {\n                    self.$container.removeClass('select2-container--open');\n                });\n\n                this.on('enable', function () {\n                    self.$container.removeClass('select2-container--disabled');\n                });\n\n                this.on('disable', function () {\n                    self.$container.addClass('select2-container--disabled');\n                });\n\n                this.on('blur', function () {\n                    self.$container.removeClass('select2-container--focus');\n                });\n\n                this.on('query', function (params) {\n                    if (!self.isOpen()) {\n                        self.trigger('open', {});\n                    }\n\n                    this.dataAdapter.query(params, function (data) {\n                        self.trigger('results:all', {\n                            data: data,\n                            query: params\n                        });\n                    });\n                });\n\n                this.on('query:append', function (params) {\n                    this.dataAdapter.query(params, function (data) {\n                        self.trigger('results:append', {\n                            data: data,\n                            query: params\n                        });\n                    });\n                });\n\n                this.on('keypress', function (evt) {\n                    var key = evt.which;\n\n                    if (self.isOpen()) {\n                        if (key === KEYS.ESC || key === KEYS.TAB ||\n                            (key === KEYS.UP && evt.altKey)) {\n                            self.close();\n\n                            evt.preventDefault();\n                        } else if (key === KEYS.ENTER) {\n                            self.trigger('results:select', {});\n\n                            evt.preventDefault();\n                        } else if ((key === KEYS.SPACE && evt.ctrlKey)) {\n                            self.trigger('results:toggle', {});\n\n                            evt.preventDefault();\n                        } else if (key === KEYS.UP) {\n                            self.trigger('results:previous', {});\n\n                            evt.preventDefault();\n                        } else if (key === KEYS.DOWN) {\n                            self.trigger('results:next', {});\n\n                            evt.preventDefault();\n                        }\n                    } else {\n                        if (key === KEYS.ENTER || key === KEYS.SPACE ||\n                            (key === KEYS.DOWN && evt.altKey)) {\n                            self.open();\n\n                            evt.preventDefault();\n                        }\n                    }\n                });\n            };\n\n            Select2.prototype._syncAttributes = function () {\n                this.options.set('disabled', this.$element.prop('disabled'));\n\n                if (this.options.get('disabled')) {\n                    if (this.isOpen()) {\n                        this.close();\n                    }\n\n                    this.trigger('disable', {});\n                } else {\n                    this.trigger('enable', {});\n                }\n            };\n\n            Select2.prototype._syncSubtree = function (evt, mutations) {\n                var changed = false;\n                var self = this;\n\n                // Ignore any mutation events raised for elements that aren't options or\n                // optgroups. This handles the case when the select element is destroyed\n                if (\n                    evt && evt.target && (\n                    evt.target.nodeName !== 'OPTION' && evt.target.nodeName !== 'OPTGROUP'\n                        )\n                ) {\n                    return;\n                }\n\n                if (!mutations) {\n                    // If mutation events aren't supported, then we can only assume that the\n                    // change affected the selections\n                    changed = true;\n                } else if (mutations.addedNodes && mutations.addedNodes.length > 0) {\n                    for (var n = 0; n < mutations.addedNodes.length; n++) {\n                        var node = mutations.addedNodes[n];\n\n                        if (node.selected) {\n                            changed = true;\n                        }\n                    }\n                } else if (mutations.removedNodes && mutations.removedNodes.length > 0) {\n                    changed = true;\n                }\n\n                // Only re-pull the data if we think there is a change\n                if (changed) {\n                    this.dataAdapter.current(function (currentData) {\n                        self.trigger('selection:update', {\n                            data: currentData\n                        });\n                    });\n                }\n            };\n\n            /**\n             * Override the trigger method to automatically trigger pre-events when\n             * there are events that can be prevented.\n             */\n            Select2.prototype.trigger = function (name, args) {\n                var actualTrigger = Select2.__super__.trigger;\n                var preTriggerMap = {\n                    'open': 'opening',\n                    'close': 'closing',\n                    'select': 'selecting',\n                    'unselect': 'unselecting'\n                };\n\n                if (args === undefined) {\n                    args = {};\n                }\n\n                if (name in preTriggerMap) {\n                    var preTriggerName = preTriggerMap[name];\n                    var preTriggerArgs = {\n                        prevented: false,\n                        name: name,\n                        args: args\n                    };\n\n                    actualTrigger.call(this, preTriggerName, preTriggerArgs);\n\n                    if (preTriggerArgs.prevented) {\n                        args.prevented = true;\n\n                        return;\n                    }\n                }\n\n                actualTrigger.call(this, name, args);\n            };\n\n            Select2.prototype.toggleDropdown = function () {\n                if (this.options.get('disabled')) {\n                    return;\n                }\n\n                if (this.isOpen()) {\n                    this.close();\n                } else {\n                    this.open();\n                }\n            };\n\n            Select2.prototype.open = function () {\n                if (this.isOpen()) {\n                    return;\n                }\n\n                this.trigger('query', {});\n            };\n\n            Select2.prototype.close = function () {\n                if (!this.isOpen()) {\n                    return;\n                }\n\n                this.trigger('close', {});\n            };\n\n            Select2.prototype.isOpen = function () {\n                return this.$container.hasClass('select2-container--open');\n            };\n\n            Select2.prototype.hasFocus = function () {\n                return this.$container.hasClass('select2-container--focus');\n            };\n\n            Select2.prototype.focus = function (data) {\n                // No need to re-trigger focus events if we are already focused\n                if (this.hasFocus()) {\n                    return;\n                }\n\n                this.$container.addClass('select2-container--focus');\n                this.trigger('focus', {});\n            };\n\n            Select2.prototype.enable = function (args) {\n                if (this.options.get('debug') && window.console && console.warn) {\n                    console.warn(\n                        'Select2: The `select2(\"enable\")` method has been deprecated and will' +\n                        ' be removed in later Select2 versions. Use $element.prop(\"disabled\")' +\n                        ' instead.'\n                    );\n                }\n\n                if (args == null || args.length === 0) {\n                    args = [true];\n                }\n\n                var disabled = !args[0];\n\n                this.$element.prop('disabled', disabled);\n            };\n\n            Select2.prototype.data = function () {\n                if (this.options.get('debug') &&\n                    arguments.length > 0 && window.console && console.warn) {\n                    console.warn(\n                        'Select2: Data can no longer be set using `select2(\"data\")`. You ' +\n                        'should consider setting the value instead using `$element.val()`.'\n                    );\n                }\n\n                var data = [];\n\n                this.dataAdapter.current(function (currentData) {\n                    data = currentData;\n                });\n\n                return data;\n            };\n\n            Select2.prototype.val = function (args) {\n                if (this.options.get('debug') && window.console && console.warn) {\n                    console.warn(\n                        'Select2: The `select2(\"val\")` method has been deprecated and will be' +\n                        ' removed in later Select2 versions. Use $element.val() instead.'\n                    );\n                }\n\n                if (args == null || args.length === 0) {\n                    return this.$element.val();\n                }\n\n                var newVal = args[0];\n\n                if ($.isArray(newVal)) {\n                    newVal = $.map(newVal, function (obj) {\n                        return obj.toString();\n                    });\n                }\n\n                this.$element.val(newVal).trigger('change');\n            };\n\n            Select2.prototype.destroy = function () {\n                this.$container.remove();\n\n                if (this.$element[0].detachEvent) {\n                    this.$element[0].detachEvent('onpropertychange', this._syncA);\n                }\n\n                if (this._observer != null) {\n                    this._observer.disconnect();\n                    this._observer = null;\n                } else if (this.$element[0].removeEventListener) {\n                    this.$element[0]\n                        .removeEventListener('DOMAttrModified', this._syncA, false);\n                    this.$element[0]\n                        .removeEventListener('DOMNodeInserted', this._syncS, false);\n                    this.$element[0]\n                        .removeEventListener('DOMNodeRemoved', this._syncS, false);\n                }\n\n                this._syncA = null;\n                this._syncS = null;\n\n                this.$element.off('.select2');\n                this.$element.attr('tabindex', this.$element.data('old-tabindex'));\n\n                this.$element.removeClass('select2-hidden-accessible');\n                this.$element.attr('aria-hidden', 'false');\n                this.$element.removeData('select2');\n\n                this.dataAdapter.destroy();\n                this.selection.destroy();\n                this.dropdown.destroy();\n                this.results.destroy();\n\n                this.dataAdapter = null;\n                this.selection = null;\n                this.dropdown = null;\n                this.results = null;\n            };\n\n            Select2.prototype.render = function () {\n                var $container = $(\n                    '<span class=\"select2 select2-container\">' +\n                    '<span class=\"selection\"></span>' +\n                    '<span class=\"dropdown-wrapper\" aria-hidden=\"true\"></span>' +\n                    '</span>'\n                );\n\n                $container.attr('dir', this.options.get('dir'));\n\n                this.$container = $container;\n\n                this.$container.addClass('select2-container--' + this.options.get('theme'));\n\n                $container.data('element', this.$element);\n\n                return $container;\n            };\n\n            return Select2;\n        });\n\n        S2.define('select2/compat/utils',[\n            'jquery'\n        ], function ($) {\n            function syncCssClasses ($dest, $src, adapter) {\n                var classes, replacements = [], adapted;\n\n                classes = $.trim($dest.attr('class'));\n\n                if (classes) {\n                    classes = '' + classes; // for IE which returns object\n\n                    $(classes.split(/\\s+/)).each(function () {\n                        // Save all Select2 classes\n                        if (this.indexOf('select2-') === 0) {\n                            replacements.push(this);\n                        }\n                    });\n                }\n\n                classes = $.trim($src.attr('class'));\n\n                if (classes) {\n                    classes = '' + classes; // for IE which returns object\n\n                    $(classes.split(/\\s+/)).each(function () {\n                        // Only adapt non-Select2 classes\n                        if (this.indexOf('select2-') !== 0) {\n                            adapted = adapter(this);\n\n                            if (adapted != null) {\n                                replacements.push(adapted);\n                            }\n                        }\n                    });\n                }\n\n                $dest.attr('class', replacements.join(' '));\n            }\n\n            return {\n                syncCssClasses: syncCssClasses\n            };\n        });\n\n        S2.define('select2/compat/containerCss',[\n            'jquery',\n            './utils'\n        ], function ($, CompatUtils) {\n            // No-op CSS adapter that discards all classes by default\n            function _containerAdapter (clazz) {\n                return null;\n            }\n\n            function ContainerCSS () { }\n\n            ContainerCSS.prototype.render = function (decorated) {\n                var $container = decorated.call(this);\n\n                var containerCssClass = this.options.get('containerCssClass') || '';\n\n                if ($.isFunction(containerCssClass)) {\n                    containerCssClass = containerCssClass(this.$element);\n                }\n\n                var containerCssAdapter = this.options.get('adaptContainerCssClass');\n                containerCssAdapter = containerCssAdapter || _containerAdapter;\n\n                if (containerCssClass.indexOf(':all:') !== -1) {\n                    containerCssClass = containerCssClass.replace(':all:', '');\n\n                    var _cssAdapter = containerCssAdapter;\n\n                    containerCssAdapter = function (clazz) {\n                        var adapted = _cssAdapter(clazz);\n\n                        if (adapted != null) {\n                            // Append the old one along with the adapted one\n                            return adapted + ' ' + clazz;\n                        }\n\n                        return clazz;\n                    };\n                }\n\n                var containerCss = this.options.get('containerCss') || {};\n\n                if ($.isFunction(containerCss)) {\n                    containerCss = containerCss(this.$element);\n                }\n\n                CompatUtils.syncCssClasses($container, this.$element, containerCssAdapter);\n\n                $container.css(containerCss);\n                $container.addClass(containerCssClass);\n\n                return $container;\n            };\n\n            return ContainerCSS;\n        });\n\n        S2.define('select2/compat/dropdownCss',[\n            'jquery',\n            './utils'\n        ], function ($, CompatUtils) {\n            // No-op CSS adapter that discards all classes by default\n            function _dropdownAdapter (clazz) {\n                return null;\n            }\n\n            function DropdownCSS () { }\n\n            DropdownCSS.prototype.render = function (decorated) {\n                var $dropdown = decorated.call(this);\n\n                var dropdownCssClass = this.options.get('dropdownCssClass') || '';\n\n                if ($.isFunction(dropdownCssClass)) {\n                    dropdownCssClass = dropdownCssClass(this.$element);\n                }\n\n                var dropdownCssAdapter = this.options.get('adaptDropdownCssClass');\n                dropdownCssAdapter = dropdownCssAdapter || _dropdownAdapter;\n\n                if (dropdownCssClass.indexOf(':all:') !== -1) {\n                    dropdownCssClass = dropdownCssClass.replace(':all:', '');\n\n                    var _cssAdapter = dropdownCssAdapter;\n\n                    dropdownCssAdapter = function (clazz) {\n                        var adapted = _cssAdapter(clazz);\n\n                        if (adapted != null) {\n                            // Append the old one along with the adapted one\n                            return adapted + ' ' + clazz;\n                        }\n\n                        return clazz;\n                    };\n                }\n\n                var dropdownCss = this.options.get('dropdownCss') || {};\n\n                if ($.isFunction(dropdownCss)) {\n                    dropdownCss = dropdownCss(this.$element);\n                }\n\n                CompatUtils.syncCssClasses($dropdown, this.$element, dropdownCssAdapter);\n\n                $dropdown.css(dropdownCss);\n                $dropdown.addClass(dropdownCssClass);\n\n                return $dropdown;\n            };\n\n            return DropdownCSS;\n        });\n\n        S2.define('select2/compat/initSelection',[\n            'jquery'\n        ], function ($) {\n            function InitSelection (decorated, $element, options) {\n                if (options.get('debug') && window.console && console.warn) {\n                    console.warn(\n                        'Select2: The `initSelection` option has been deprecated in favor' +\n                        ' of a custom data adapter that overrides the `current` method. ' +\n                        'This method is now called multiple times instead of a single ' +\n                        'time when the instance is initialized. Support will be removed ' +\n                        'for the `initSelection` option in future versions of Select2'\n                    );\n                }\n\n                this.initSelection = options.get('initSelection');\n                this._isInitialized = false;\n\n                decorated.call(this, $element, options);\n            }\n\n            InitSelection.prototype.current = function (decorated, callback) {\n                var self = this;\n\n                if (this._isInitialized) {\n                    decorated.call(this, callback);\n\n                    return;\n                }\n\n                this.initSelection.call(null, this.$element, function (data) {\n                    self._isInitialized = true;\n\n                    if (!$.isArray(data)) {\n                        data = [data];\n                    }\n\n                    callback(data);\n                });\n            };\n\n            return InitSelection;\n        });\n\n        S2.define('select2/compat/inputData',[\n            'jquery'\n        ], function ($) {\n            function InputData (decorated, $element, options) {\n                this._currentData = [];\n                this._valueSeparator = options.get('valueSeparator') || ',';\n\n                if ($element.prop('type') === 'hidden') {\n                    if (options.get('debug') && console && console.warn) {\n                        console.warn(\n                            'Select2: Using a hidden input with Select2 is no longer ' +\n                            'supported and may stop working in the future. It is recommended ' +\n                            'to use a `<select>` element instead.'\n                        );\n                    }\n                }\n\n                decorated.call(this, $element, options);\n            }\n\n            InputData.prototype.current = function (_, callback) {\n                function getSelected (data, selectedIds) {\n                    var selected = [];\n\n                    if (data.selected || $.inArray(data.id, selectedIds) !== -1) {\n                        data.selected = true;\n                        selected.push(data);\n                    } else {\n                        data.selected = false;\n                    }\n\n                    if (data.children) {\n                        selected.push.apply(selected, getSelected(data.children, selectedIds));\n                    }\n\n                    return selected;\n                }\n\n                var selected = [];\n\n                for (var d = 0; d < this._currentData.length; d++) {\n                    var data = this._currentData[d];\n\n                    selected.push.apply(\n                        selected,\n                        getSelected(\n                            data,\n                            this.$element.val().split(\n                                this._valueSeparator\n                            )\n                        )\n                    );\n                }\n\n                callback(selected);\n            };\n\n            InputData.prototype.select = function (_, data) {\n                if (!this.options.get('multiple')) {\n                    this.current(function (allData) {\n                        $.map(allData, function (data) {\n                            data.selected = false;\n                        });\n                    });\n\n                    this.$element.val(data.id);\n                    this.$element.trigger('change');\n                } else {\n                    var value = this.$element.val();\n                    value += this._valueSeparator + data.id;\n\n                    this.$element.val(value);\n                    this.$element.trigger('change');\n                }\n            };\n\n            InputData.prototype.unselect = function (_, data) {\n                var self = this;\n\n                data.selected = false;\n\n                this.current(function (allData) {\n                    var values = [];\n\n                    for (var d = 0; d < allData.length; d++) {\n                        var item = allData[d];\n\n                        if (data.id == item.id) {\n                            continue;\n                        }\n\n                        values.push(item.id);\n                    }\n\n                    self.$element.val(values.join(self._valueSeparator));\n                    self.$element.trigger('change');\n                });\n            };\n\n            InputData.prototype.query = function (_, params, callback) {\n                var results = [];\n\n                for (var d = 0; d < this._currentData.length; d++) {\n                    var data = this._currentData[d];\n\n                    var matches = this.matches(params, data);\n\n                    if (matches !== null) {\n                        results.push(matches);\n                    }\n                }\n\n                callback({\n                    results: results\n                });\n            };\n\n            InputData.prototype.addOptions = function (_, $options) {\n                var options = $.map($options, function ($option) {\n                    return $.data($option[0], 'data');\n                });\n\n                this._currentData.push.apply(this._currentData, options);\n            };\n\n            return InputData;\n        });\n\n        S2.define('select2/compat/matcher',[\n            'jquery'\n        ], function ($) {\n            function oldMatcher (matcher) {\n                function wrappedMatcher (params, data) {\n                    var match = $.extend(true, {}, data);\n\n                    if (params.term == null || $.trim(params.term) === '') {\n                        return match;\n                    }\n\n                    if (data.children) {\n                        for (var c = data.children.length - 1; c >= 0; c--) {\n                            var child = data.children[c];\n\n                            // Check if the child object matches\n                            // The old matcher returned a boolean true or false\n                            var doesMatch = matcher(params.term, child.text, child);\n\n                            // If the child didn't match, pop it off\n                            if (!doesMatch) {\n                                match.children.splice(c, 1);\n                            }\n                        }\n\n                        if (match.children.length > 0) {\n                            return match;\n                        }\n                    }\n\n                    if (matcher(params.term, data.text, data)) {\n                        return match;\n                    }\n\n                    return null;\n                }\n\n                return wrappedMatcher;\n            }\n\n            return oldMatcher;\n        });\n\n        S2.define('select2/compat/query',[\n\n        ], function () {\n            function Query (decorated, $element, options) {\n                if (options.get('debug') && window.console && console.warn) {\n                    console.warn(\n                        'Select2: The `query` option has been deprecated in favor of a ' +\n                        'custom data adapter that overrides the `query` method. Support ' +\n                        'will be removed for the `query` option in future versions of ' +\n                        'Select2.'\n                    );\n                }\n\n                decorated.call(this, $element, options);\n            }\n\n            Query.prototype.query = function (_, params, callback) {\n                params.callback = callback;\n\n                var query = this.options.get('query');\n\n                query.call(null, params);\n            };\n\n            return Query;\n        });\n\n        S2.define('select2/dropdown/attachContainer',[\n\n        ], function () {\n            function AttachContainer (decorated, $element, options) {\n                decorated.call(this, $element, options);\n            }\n\n            AttachContainer.prototype.position =\n                function (decorated, $dropdown, $container) {\n                    var $dropdownContainer = $container.find('.dropdown-wrapper');\n                    $dropdownContainer.append($dropdown);\n\n                    $dropdown.addClass('select2-dropdown--below');\n                    $container.addClass('select2-container--below');\n                };\n\n            return AttachContainer;\n        });\n\n        S2.define('select2/dropdown/stopPropagation',[\n\n        ], function () {\n            function StopPropagation () { }\n\n            StopPropagation.prototype.bind = function (decorated, container, $container) {\n                decorated.call(this, container, $container);\n\n                var stoppedEvents = [\n                    'blur',\n                    'change',\n                    'click',\n                    'dblclick',\n                    'focus',\n                    'focusin',\n                    'focusout',\n                    'input',\n                    'keydown',\n                    'keyup',\n                    'keypress',\n                    'mousedown',\n                    'mouseenter',\n                    'mouseleave',\n                    'mousemove',\n                    'mouseover',\n                    'mouseup',\n                    'search',\n                    'touchend',\n                    'touchstart'\n                ];\n\n                this.$dropdown.on(stoppedEvents.join(' '), function (evt) {\n                    evt.stopPropagation();\n                });\n            };\n\n            return StopPropagation;\n        });\n\n        S2.define('select2/selection/stopPropagation',[\n\n        ], function () {\n            function StopPropagation () { }\n\n            StopPropagation.prototype.bind = function (decorated, container, $container) {\n                decorated.call(this, container, $container);\n\n                var stoppedEvents = [\n                    'blur',\n                    'change',\n                    'click',\n                    'dblclick',\n                    'focus',\n                    'focusin',\n                    'focusout',\n                    'input',\n                    'keydown',\n                    'keyup',\n                    'keypress',\n                    'mousedown',\n                    'mouseenter',\n                    'mouseleave',\n                    'mousemove',\n                    'mouseover',\n                    'mouseup',\n                    'search',\n                    'touchend',\n                    'touchstart'\n                ];\n\n                this.$selection.on(stoppedEvents.join(' '), function (evt) {\n                    evt.stopPropagation();\n                });\n            };\n\n            return StopPropagation;\n        });\n\n        /*!\n * jQuery Mousewheel 3.1.13\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n */\n\n        (function (factory) {\n            if ( typeof S2.define === 'function' && S2.define.amd ) {\n                // AMD. Register as an anonymous module.\n                S2.define('jquery-mousewheel',['jquery'], factory);\n            } else if (true) {\n                // Node/CommonJS style for Browserify\n                module.exports = factory;\n            } else {}\n        }(function ($) {\n\n            var toFix  = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],\n                toBind = ( 'onwheel' in document || document.documentMode >= 9 ) ?\n                         ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],\n                slice  = Array.prototype.slice,\n                nullLowestDeltaTimeout, lowestDelta;\n\n            if ( $.event.fixHooks ) {\n                for ( var i = toFix.length; i; ) {\n                    $.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks;\n                }\n            }\n\n            var special = $.event.special.mousewheel = {\n                version: '3.1.12',\n\n                setup: function() {\n                    if ( this.addEventListener ) {\n                        for ( var i = toBind.length; i; ) {\n                            this.addEventListener( toBind[--i], handler, false );\n                        }\n                    } else {\n                        this.onmousewheel = handler;\n                    }\n                    // Store the line height and page height for this particular element\n                    $.data(this, 'mousewheel-line-height', special.getLineHeight(this));\n                    $.data(this, 'mousewheel-page-height', special.getPageHeight(this));\n                },\n\n                teardown: function() {\n                    if ( this.removeEventListener ) {\n                        for ( var i = toBind.length; i; ) {\n                            this.removeEventListener( toBind[--i], handler, false );\n                        }\n                    } else {\n                        this.onmousewheel = null;\n                    }\n                    // Clean up the data we added to the element\n                    $.removeData(this, 'mousewheel-line-height');\n                    $.removeData(this, 'mousewheel-page-height');\n                },\n\n                getLineHeight: function(elem) {\n                    var $elem = $(elem),\n                        $parent = $elem['offsetParent' in $.fn ? 'offsetParent' : 'parent']();\n                    if (!$parent.length) {\n                        $parent = $('body');\n                    }\n                    return parseInt($parent.css('fontSize'), 10) || parseInt($elem.css('fontSize'), 10) || 16;\n                },\n\n                getPageHeight: function(elem) {\n                    return $(elem).height();\n                },\n\n                settings: {\n                    adjustOldDeltas: true, // see shouldAdjustOldDeltas() below\n                    normalizeOffset: true  // calls getBoundingClientRect for each event\n                }\n            };\n\n            $.fn.extend({\n                mousewheel: function(fn) {\n                    return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');\n                },\n\n                unmousewheel: function(fn) {\n                    return this.unbind('mousewheel', fn);\n                }\n            });\n\n\n            function handler(event) {\n                var orgEvent   = event || window.event,\n                    args       = slice.call(arguments, 1),\n                    delta      = 0,\n                    deltaX     = 0,\n                    deltaY     = 0,\n                    absDelta   = 0,\n                    offsetX    = 0,\n                    offsetY    = 0;\n                event = $.event.fix(orgEvent);\n                event.type = 'mousewheel';\n\n                // Old school scrollwheel delta\n                if ( 'detail'      in orgEvent ) { deltaY = orgEvent.detail * -1;      }\n                if ( 'wheelDelta'  in orgEvent ) { deltaY = orgEvent.wheelDelta;       }\n                if ( 'wheelDeltaY' in orgEvent ) { deltaY = orgEvent.wheelDeltaY;      }\n                if ( 'wheelDeltaX' in orgEvent ) { deltaX = orgEvent.wheelDeltaX * -1; }\n\n                // Firefox < 17 horizontal scrolling related to DOMMouseScroll event\n                if ( 'axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {\n                    deltaX = deltaY * -1;\n                    deltaY = 0;\n                }\n\n                // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy\n                delta = deltaY === 0 ? deltaX : deltaY;\n\n                // New school wheel delta (wheel event)\n                if ( 'deltaY' in orgEvent ) {\n                    deltaY = orgEvent.deltaY * -1;\n                    delta  = deltaY;\n                }\n                if ( 'deltaX' in orgEvent ) {\n                    deltaX = orgEvent.deltaX;\n                    if ( deltaY === 0 ) { delta  = deltaX * -1; }\n                }\n\n                // No change actually happened, no reason to go any further\n                if ( deltaY === 0 && deltaX === 0 ) { return; }\n\n                // Need to convert lines and pages to pixels if we aren't already in pixels\n                // There are three delta modes:\n                //   * deltaMode 0 is by pixels, nothing to do\n                //   * deltaMode 1 is by lines\n                //   * deltaMode 2 is by pages\n                if ( orgEvent.deltaMode === 1 ) {\n                    var lineHeight = $.data(this, 'mousewheel-line-height');\n                    delta  *= lineHeight;\n                    deltaY *= lineHeight;\n                    deltaX *= lineHeight;\n                } else if ( orgEvent.deltaMode === 2 ) {\n                    var pageHeight = $.data(this, 'mousewheel-page-height');\n                    delta  *= pageHeight;\n                    deltaY *= pageHeight;\n                    deltaX *= pageHeight;\n                }\n\n                // Store lowest absolute delta to normalize the delta values\n                absDelta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );\n\n                if ( !lowestDelta || absDelta < lowestDelta ) {\n                    lowestDelta = absDelta;\n\n                    // Adjust older deltas if necessary\n                    if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {\n                        lowestDelta /= 40;\n                    }\n                }\n\n                // Adjust older deltas if necessary\n                if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {\n                    // Divide all the things by 40!\n                    delta  /= 40;\n                    deltaX /= 40;\n                    deltaY /= 40;\n                }\n\n                // Get a whole, normalized value for the deltas\n                delta  = Math[ delta  >= 1 ? 'floor' : 'ceil' ](delta  / lowestDelta);\n                deltaX = Math[ deltaX >= 1 ? 'floor' : 'ceil' ](deltaX / lowestDelta);\n                deltaY = Math[ deltaY >= 1 ? 'floor' : 'ceil' ](deltaY / lowestDelta);\n\n                // Normalise offsetX and offsetY properties\n                if ( special.settings.normalizeOffset && this.getBoundingClientRect ) {\n                    var boundingRect = this.getBoundingClientRect();\n                    offsetX = event.clientX - boundingRect.left;\n                    offsetY = event.clientY - boundingRect.top;\n                }\n\n                // Add information to the event object\n                event.deltaX = deltaX;\n                event.deltaY = deltaY;\n                event.deltaFactor = lowestDelta;\n                event.offsetX = offsetX;\n                event.offsetY = offsetY;\n                // Go ahead and set deltaMode to 0 since we converted to pixels\n                // Although this is a little odd since we overwrite the deltaX/Y\n                // properties with normalized deltas.\n                event.deltaMode = 0;\n\n                // Add event and delta to the front of the arguments\n                args.unshift(event, delta, deltaX, deltaY);\n\n                // Clearout lowestDelta after sometime to better\n                // handle multiple device types that give different\n                // a different lowestDelta\n                // Ex: trackpad = 3 and mouse wheel = 120\n                if (nullLowestDeltaTimeout) { clearTimeout(nullLowestDeltaTimeout); }\n                nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);\n\n                return ($.event.dispatch || $.event.handle).apply(this, args);\n            }\n\n            function nullLowestDelta() {\n                lowestDelta = null;\n            }\n\n            function shouldAdjustOldDeltas(orgEvent, absDelta) {\n                // If this is an older event and the delta is divisable by 120,\n                // then we are assuming that the browser is treating this as an\n                // older mouse wheel event and that we should divide the deltas\n                // by 40 to try and get a more usable deltaFactor.\n                // Side note, this actually impacts the reported scroll distance\n                // in older browsers and can cause scrolling to be slower than native.\n                // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.\n                return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;\n            }\n\n        }));\n\n        S2.define('jquery.select2',[\n            'jquery',\n            'jquery-mousewheel',\n\n            './select2/core',\n            './select2/defaults'\n        ], function ($, _, Select2, Defaults) {\n            if ($.fn.select2 == null) {\n                // All methods that should return the element\n                var thisMethods = ['open', 'close', 'destroy'];\n\n                $.fn.select2 = function (options) {\n                    options = options || {};\n\n                    if (typeof options === 'object') {\n                        this.each(function () {\n                            var instanceOptions = $.extend(true, {}, options);\n\n                            var instance = new Select2($(this), instanceOptions);\n                        });\n\n                        return this;\n                    } else if (typeof options === 'string') {\n                        var ret;\n                        var args = Array.prototype.slice.call(arguments, 1);\n\n                        this.each(function () {\n                            var instance = $(this).data('select2');\n\n                            if (instance == null && window.console && console.error) {\n                                console.error(\n                                    'The select2(\\'' + options + '\\') method was called on an ' +\n                                    'element that is not using Select2.'\n                                );\n                            }\n\n                            ret = instance[options].apply(instance, args);\n                        });\n\n                        // Check if we should be returning `this`\n                        if ($.inArray(options, thisMethods) > -1) {\n                            return this;\n                        }\n\n                        return ret;\n                    } else {\n                        throw new Error('Invalid arguments for Select2: ' + options);\n                    }\n                };\n            }\n\n            if ($.fn.select2.defaults == null) {\n                $.fn.select2.defaults = Defaults;\n            }\n\n            return Select2;\n        });\n\n        //SUI-SELECT2\n        /**\n         * Rebranding select2 to SUIselect2\n         * It does avoid conflicts with other(s) that include select2 manually\n         */\n        S2.define('sui.select2',[\n            'jquery',\n            'jquery-mousewheel',\n\n            './select2/core',\n            './select2/defaults'\n        ], function ($, _, Select2, Defaults) {\n            if ($.fn.SUIselect2 == null) {\n                // All methods that should return the element\n                var thisMethods = ['open', 'close', 'destroy'];\n\n                $.fn.SUIselect2 = function (options) {\n                    options = options || {};\n\n                    if (typeof options === 'object') {\n                        this.each(function () {\n                            var instanceOptions = $.extend(true, {}, options);\n\n                            var instance = new Select2($(this), instanceOptions);\n                        });\n\n                        return this;\n                    } else if (typeof options === 'string') {\n                        var ret;\n                        var args = Array.prototype.slice.call(arguments, 1);\n\n                        this.each(function () {\n                            var instance = $(this).data('select2');\n\n                            if (instance == null && window.console && console.error) {\n                                console.error(\n                                    'The SUISelect2(\\'' + options + '\\') method was called on an ' +\n                                    'element that is not using Select2.'\n                                );\n\n                            }\n                            ret = instance[options].apply(instance, args);\n                        });\n\n                        // Check if we should be returning `this`\n                        if ($.inArray(options, thisMethods) > -1) {\n                            return this;\n                        }\n\n                        return ret;\n                    } else {\n                        throw new Error('Invalid arguments for SUISelect2: ' + options);\n                    }\n                };\n            }\n\n            if ($.fn.SUIselect2.defaults == null) {\n                $.fn.SUIselect2.defaults = Defaults;\n            }\n\n            return Select2;\n        });\n\n        // Return the AMD loader configuration so it can be used outside of this file\n        return {\n            define: S2.define,\n            require: S2.require\n        };\n    }());\n\n    // // Autoload the jQuery bindings\n    // // We know that all of the modules exist above this, so we're safe\n    // var select2 = S2.require('jquery.select2');\n    //\n    // // Hold the AMD module references on the jQuery function that was just loaded\n    // // This allows Select2 to use the internal loader outside of this file, such\n    // // as in the language files.\n    // jQuery.fn.select2.amd = S2;\n    //\n    // // Return the Select2 instance for anyone who is importing it.\n    // return select2;\n\n    // SUI-SELECT2\n    var select2 = S2.require('sui.select2');\n    return select2;\n}));\n\n( function( $ ) {\n\n\t// Convert all select lists to fancy sui Select lists.\n\t$( '.sui-select' ).SUIselect2({\n\t\tdropdownCssClass: 'sui-select-dropdown'\n\t});\n\n}( jQuery ) );\n\n( function( $ ) {\n\n    // Enable strict mode.\n    'use strict';\n\n    // Define global SUI object if it doesn't exist.\n    if ( 'object' !== typeof window.SUI ) {\n        window.SUI = {};\n    }\n\n    SUI.suiTabs = function( el ) {\n\t\tvar jq = $( el ).closest( '.sui-tabs' );\n\n\t\tif ( ! jq.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Resize the tab-area after short delay.\n\t\tfunction resizeArea() {\n\t\t\twindow.setTimeout( resizeAreaHandler, 20 );\n\t\t}\n\n\t\t// Resize the tab area to match the current tab.\n\t\tfunction resizeAreaHandler() {\n\t\t\tvar current = jq.find( '.sui-tab > input:checked' ).parent(),\n\t\t\t\tcontent = current.find( '.sui-tab-content' );\n\n\t\t\tjq.height( content.outerHeight() + current.outerHeight() - 6 );\n\t\t}\n\n\t\t// Updates the URL hash to keep tab open during page refresh\n\t\tfunction updateHash() {\n\t\t\tvar current = jq.find( '.sui-tab > input:checked' );\n\n\t\t\tjq.find( '.sui-tab label.active' ).removeClass( 'active' );\n\t\t\tcurrent.parent().find( 'label' ).addClass( 'active' );\n\n\t\t\tresizeArea();\n\t\t}\n\n\t\t// Open the tab that is specified in window URL hash\n\t\tfunction switchTab() {\n\t\t\tvar curTab,\n\t\t\t\troute = window.location.hash.replace( /[^\\w-_]/g, '' );\n\n\t\t\tif ( route ) {\n\t\t\t\tcurTab = jq.find( 'input#' + route );\n\n\t\t\t\tif ( curTab.parent().find( 'label' ).length ) {\n\t\t\t\t\tjq.find( '.sui-tab label.active' ).removeClass( 'active' );\n\t\t\t\t\tcurTab.parent().find( 'label' ).addClass( 'active' );\n\n\t\t\t\t\tif ( curTab.length && ! curTab.prop( 'checked' ) ) {\n\t\t\t\t\t\tcurTab.prop( 'checked', true );\n\n\t\t\t\t\t\tscrollWindow();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Scroll the window to top of the tab list.\n\t\tfunction scrollWindow() {\n\t\t\tresizeArea();\n\n\t\t\t$( 'html, body' ).scrollTop(\n\t\t\t\tjq.offset().top -\n\t\t\t\tparseInt( $( 'html' ).css( 'paddingTop' ) ) -\n\t\t\t\t20\n\t\t\t);\n\t\t}\n\n\t\t// Constructor.\n\t\tfunction init() {\n\t\t\tvar current = jq.find( '.sui-tab > input:checked' );\n\n\t\t\tjq.on( 'click', '.sui-tab > input[type=radio]', updateHash );\n\t\t\t$( window ).on( 'hashchange', switchTab );\n\t\t\tcurrent.parent().find( 'label' ).addClass( 'active' );\n\n\t\t\tresizeArea();\n\t\t\tswitchTab();\n\t\t}\n\n\t\tinit();\n\n\t\t$( window ).resize( function() {\n\t\t\tresizeArea();\n\t\t});\n\n\t\treturn this;\n\t};\n\n\t// Initialize all tab-areas.\n\t$( '.sui-2-2-4 .sui-tabs' ).each( function() {\n\t\tSUI.suiTabs( this );\n\t});\n\n}( jQuery ) );\n\n( function( $ ) {\n\n\t// Enable strict mode.\n\t'use strict';\n\n\t// Define global SUI object if it doesn't exist.\n\tif ( 'object' !== typeof window.SUI ) {\n\t\twindow.SUI = {};\n\t}\n\n\tSUI.upload = function() {\n\n\t\t$( '.sui-2-2-4 .sui-upload-group input[type=\"file\"]' ).on( 'change', function( e ) {\n\t\t\tvar file = $( this )[0].files[0],\n\t\t\t\tmessage = $( this ).find( '~ .sui-upload-message' );\n\n\t\t\tif ( file ) {\n\t\t\t\tmessage.text( file.name );\n\t\t\t}\n\n\t\t});\n\n\t};\n\n\tSUI.upload();\n\n}( jQuery ) );\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! @wpmudev/shared-ui/js/clipboard.js */ \"./node_modules/@wpmudev/shared-ui/js/clipboard.js\"), __webpack_require__(/*! @wpmudev/shared-ui/js/a11y-dialog.js */ \"./node_modules/@wpmudev/shared-ui/js/a11y-dialog.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHdwbXVkZXYvc2hhcmVkLXVpL2Rpc3QvanMvc2hhcmVkLXVpLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B3cG11ZGV2L3NoYXJlZC11aS9kaXN0L2pzL3NoYXJlZC11aS5qcz9jNjYzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogV1BNVSBERVYgU2hhcmVkIFVJXG4gKiBDb3B5cmlnaHQgMjAxOCBJbmNzdWIgKGh0dHBzOi8vaW5jc3ViLmNvbSlcbiAqIExpY2Vuc2VkIHVuZGVyIEdQTCB2MiAoaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2dwbC0yLjAuaHRtbClcbiAqL1xuLyogZ2xvYmFsIE5vZGVMaXN0LCBFbGVtZW50LCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBGT0NVU0FCTEVfRUxFTUVOVFMgPSBbJ2FbaHJlZl0nLCAnYXJlYVtocmVmXScsICdpbnB1dDpub3QoW2Rpc2FibGVkXSknLCAnc2VsZWN0Om5vdChbZGlzYWJsZWRdKScsICd0ZXh0YXJlYTpub3QoW2Rpc2FibGVkXSknLCAnYnV0dG9uOm5vdChbZGlzYWJsZWRdKScsICdpZnJhbWUnLCAnb2JqZWN0JywgJ2VtYmVkJywgJ1tjb250ZW50ZWRpdGFibGVdJywgJ1t0YWJpbmRleF06bm90KFt0YWJpbmRleF49XCItXCJdKSddO1xuICB2YXIgVEFCX0tFWSA9IDk7XG4gIHZhciBFU0NBUEVfS0VZID0gMjc7XG4gIHZhciBmb2N1c2VkQmVmb3JlRGlhbG9nO1xuXG4gIC8qKlxuICAgKiBEZWZpbmUgdGhlIGNvbnN0cnVjdG9yIHRvIGluc3RhbnRpYXRlIGEgZGlhbG9nXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGVcbiAgICogQHBhcmFtIHsoTm9kZUxpc3QgfCBFbGVtZW50IHwgc3RyaW5nKX0gdGFyZ2V0c1xuICAgKi9cbiAgZnVuY3Rpb24gQTExeURpYWxvZyAobm9kZSwgdGFyZ2V0cykge1xuICAgIC8vIFByZWJpbmQgdGhlIGZ1bmN0aW9ucyB0aGF0IHdpbGwgYmUgYm91bmQgaW4gYWRkRXZlbnRMaXN0ZW5lciBhbmRcbiAgICAvLyByZW1vdmVFdmVudExpc3RlbmVyIHRvIGF2b2lkIGxvc2luZyByZWZlcmVuY2VzXG4gICAgdGhpcy5fc2hvdyA9IHRoaXMuc2hvdy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hpZGUgPSB0aGlzLmhpZGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9tYWludGFpbkZvY3VzID0gdGhpcy5fbWFpbnRhaW5Gb2N1cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2JpbmRLZXlwcmVzcyA9IHRoaXMuX2JpbmRLZXlwcmVzcy5iaW5kKHRoaXMpO1xuXG4gICAgLy8gS2VlcCBhIHJlZmVyZW5jZSBvZiB0aGUgbm9kZSBvbiB0aGUgaW5zdGFuY2VcbiAgICB0aGlzLm5vZGUgPSBub2RlO1xuXG4gICAgLy8gS2VlcCBhbiBvYmplY3Qgb2YgbGlzdGVuZXIgdHlwZXMgbWFwcGVkIHRvIGNhbGxiYWNrIGZ1bmN0aW9uc1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xuXG4gICAgLy8gSW5pdGlhbGlzZSBldmVyeXRoaW5nIG5lZWRlZCBmb3IgdGhlIGRpYWxvZyB0byB3b3JrIHByb3Blcmx5XG4gICAgdGhpcy5jcmVhdGUodGFyZ2V0cyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHVwIGV2ZXJ5dGhpbmcgbmVjZXNzYXJ5IGZvciB0aGUgZGlhbG9nIHRvIGJlIGZ1bmN0aW9uaW5nXG4gICAqXG4gICAqIEBwYXJhbSB7KE5vZGVMaXN0IHwgRWxlbWVudCB8IHN0cmluZyl9IHRhcmdldHNcbiAgICogQHJldHVybiB7dGhpc31cbiAgICovXG4gIEExMXlEaWFsb2cucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uICh0YXJnZXRzKSB7XG4gICAgLy8gS2VlcCBhIGNvbGxlY3Rpb24gb2Ygbm9kZXMgdG8gZGlzYWJsZS9lbmFibGUgd2hlbiB0b2dnbGluZyB0aGUgZGlhbG9nXG4gICAgdGhpcy5fdGFyZ2V0cyA9IHRoaXMuX3RhcmdldHMgfHwgY29sbGVjdCh0YXJnZXRzKSB8fCBnZXRTaWJsaW5ncyh0aGlzLm5vZGUpO1xuXG4gICAgLy8gTWFrZSBzdXJlIHRoZSBkaWFsb2cgZWxlbWVudCBpcyBkaXNhYmxlZCBvbiBsb2FkLCBhbmQgdGhhdCB0aGUgYHNob3duYFxuICAgIC8vIHByb3BlcnR5IGlzIHN5bmNlZCB3aXRoIGl0cyB2YWx1ZVxuICAgIHRoaXMubm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgdHJ1ZSk7XG4gICAgdGhpcy5zaG93biA9IGZhbHNlO1xuXG4gICAgLy8gS2VlcCBhIGNvbGxlY3Rpb24gb2YgZGlhbG9nIG9wZW5lcnMsIGVhY2ggb2Ygd2hpY2ggd2lsbCBiZSBib3VuZCBhIGNsaWNrXG4gICAgLy8gZXZlbnQgbGlzdGVuZXIgdG8gb3BlbiB0aGUgZGlhbG9nXG4gICAgdGhpcy5fb3BlbmVycyA9ICQkKCdbZGF0YS1hMTF5LWRpYWxvZy1zaG93PVwiJyArIHRoaXMubm9kZS5pZCArICdcIl0nKTtcbiAgICB0aGlzLl9vcGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKG9wZW5lcikge1xuICAgICAgb3BlbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fc2hvdyk7XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIC8vIEtlZXAgYSBjb2xsZWN0aW9uIG9mIGRpYWxvZyBjbG9zZXJzLCBlYWNoIG9mIHdoaWNoIHdpbGwgYmUgYm91bmQgYSBjbGlja1xuICAgIC8vIGV2ZW50IGxpc3RlbmVyIHRvIGNsb3NlIHRoZSBkaWFsb2dcbiAgICB0aGlzLl9jbG9zZXJzID0gJCQoJ1tkYXRhLWExMXktZGlhbG9nLWhpZGVdJywgdGhpcy5ub2RlKVxuICAgICAgLmNvbmNhdCgkJCgnW2RhdGEtYTExeS1kaWFsb2ctaGlkZT1cIicgKyB0aGlzLm5vZGUuaWQgKyAnXCJdJykpO1xuICAgIHRoaXMuX2Nsb3NlcnMuZm9yRWFjaChmdW5jdGlvbiAoY2xvc2VyKSB7XG4gICAgICBjbG9zZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oaWRlKTtcbiAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgLy8gRXhlY3V0ZSBhbGwgY2FsbGJhY2tzIHJlZ2lzdGVyZWQgZm9yIHRoZSBgY3JlYXRlYCBldmVudFxuICAgIHRoaXMuX2ZpcmUoJ2NyZWF0ZScpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIGRpYWxvZyBlbGVtZW50LCBkaXNhYmxlIGFsbCB0aGUgdGFyZ2V0cyAoc2libGluZ3MpLCB0cmFwIHRoZVxuICAgKiBjdXJyZW50IGZvY3VzIHdpdGhpbiBpdCwgbGlzdGVuIGZvciBzb21lIHNwZWNpZmljIGtleSBwcmVzc2VzIGFuZCBmaXJlIGFsbFxuICAgKiByZWdpc3RlcmVkIGNhbGxiYWNrcyBmb3IgYHNob3dgIGV2ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAqIEByZXR1cm4ge3RoaXN9XG4gICAqL1xuICBBMTF5RGlhbG9nLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gSWYgdGhlIGRpYWxvZyBpcyBhbHJlYWR5IG9wZW4sIGFib3J0XG4gICAgaWYgKHRoaXMuc2hvd24pIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHZhciBvdmVybGF5ID0gdGhpcy5ub2RlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3N1aS1kaWFsb2ctb3ZlcmxheScpO1xuICAgIHZhciBjb250ZW50ID0gdGhpcy5ub2RlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3N1aS1kaWFsb2ctY29udGVudCcpO1xuICAgIGNvbnRlbnRbMF0uY2xhc3NOYW1lID0gJ3N1aS1kaWFsb2ctY29udGVudCBzdWktYm91bmNlLWluJztcbiAgICBvdmVybGF5WzBdLmNsYXNzTmFtZSA9ICdzdWktZGlhbG9nLW92ZXJsYXkgc3VpLWZhZGUtaW4nO1xuXG4gICAgdGhpcy5zaG93biA9IHRydWU7XG4gICAgdGhpcy5ub2RlLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcblxuICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgdGFyZ2V0cyB0byBkaXNhYmxlIHRoZW0gYnkgc2V0dGluZyB0aGVpciBgYXJpYS1oaWRkZW5gXG4gICAgLy8gYXR0cmlidXRlIHRvIGB0cnVlYDsgaW4gY2FzZSB0aGV5IGFscmVhZHkgaGF2ZSB0aGlzIGF0dHJpYnV0ZSwga2VlcCBhXG4gICAgLy8gcmVmZXJlbmNlIG9mIHRoZWlyIG9yaWdpbmFsIHZhbHVlIHRvIGJlIGFibGUgdG8gcmVzdG9yZSBpdCBsYXRlclxuICAgIHRoaXMuX3RhcmdldHMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICB2YXIgb3JpZ2luYWwgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuXG4gICAgICBpZiAob3JpZ2luYWwpIHtcbiAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS1hMTF5LWRpYWxvZy1vcmlnaW5hbCcsIG9yaWdpbmFsKTtcbiAgICAgIH1cblxuICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIH0pO1xuXG4gICAgLy8gS2VlcCBhIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudGx5IGZvY3VzZWQgZWxlbWVudCB0byBiZSBhYmxlIHRvIHJlc3RvcmVcbiAgICAvLyBpdCBsYXRlciwgdGhlbiBzZXQgdGhlIGZvY3VzIHRvIHRoZSBmaXJzdCBmb2N1c2FibGUgY2hpbGQgb2YgdGhlIGRpYWxvZ1xuICAgIC8vIGVsZW1lbnRcbiAgICBmb2N1c2VkQmVmb3JlRGlhbG9nID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICBzZXRGb2N1c1RvRmlyc3RJdGVtKHRoaXMubm9kZSk7XG5cbiAgICAvLyBCaW5kIGEgZm9jdXMgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGJvZHkgZWxlbWVudCB0byBtYWtlIHN1cmUgdGhlIGZvY3VzXG4gICAgLy8gc3RheXMgdHJhcHBlZCBpbnNpZGUgdGhlIGRpYWxvZyB3aGlsZSBvcGVuLCBhbmQgc3RhcnQgbGlzdGVuaW5nIGZvciBzb21lXG4gICAgLy8gc3BlY2lmaWMga2V5IHByZXNzZXMgKFRBQiBhbmQgRVNDKVxuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9tYWludGFpbkZvY3VzLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fYmluZEtleXByZXNzKTtcblxuICAgIC8vIEFkZCBvdmVybGF5IGNsYXNzIHRvIGRvY3VtZW50IGJvZHkuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdodG1sJyApWzBdLmNsYXNzTGlzdC5hZGQoICdzdWktaGFzLW92ZXJsYXknICk7XG5cbiAgICAvLyBFeGVjdXRlIGFsbCBjYWxsYmFja3MgcmVnaXN0ZXJlZCBmb3IgdGhlIGBzaG93YCBldmVudFxuICAgIHRoaXMuX2ZpcmUoJ3Nob3cnLCBldmVudCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogSGlkZSB0aGUgZGlhbG9nIGVsZW1lbnQsIGVuYWJsZSBhbGwgdGhlIHRhcmdldHMgKHNpYmxpbmdzKSwgcmVzdG9yZSB0aGVcbiAgICogZm9jdXMgdG8gdGhlIHByZXZpb3VzbHkgYWN0aXZlIGVsZW1lbnQsIHN0b3AgbGlzdGVuaW5nIGZvciBzb21lIHNwZWNpZmljXG4gICAqIGtleSBwcmVzc2VzIGFuZCBmaXJlIGFsbCByZWdpc3RlcmVkIGNhbGxiYWNrcyBmb3IgYGhpZGVgIGV2ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAqIEByZXR1cm4ge3RoaXN9XG4gICAqL1xuICBBMTF5RGlhbG9nLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gSWYgdGhlIGRpYWxvZyBpcyBhbHJlYWR5IGNsb3NlZCwgYWJvcnRcbiAgICBpZiAoIXRoaXMuc2hvd24pIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuXG4gICAgdmFyIG92ZXJsYXkgPSB0aGlzLm5vZGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc3VpLWRpYWxvZy1vdmVybGF5Jyk7XG5cbiAgICB2YXIgY29udGVudCA9IHRoaXMubm9kZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzdWktZGlhbG9nLWNvbnRlbnQnKTtcblxuICAgIGNvbnRlbnRbMF0uY2xhc3NOYW1lID0gJ3N1aS1kaWFsb2ctY29udGVudCBzdWktYm91bmNlLW91dCc7XG5cbiAgICBvdmVybGF5WzBdLmNsYXNzTmFtZSA9ICdzdWktZGlhbG9nLW92ZXJsYXkgc3VpLWZhZGUtb3V0JztcblxuICAgIHRoaXMuc2hvd24gPSBmYWxzZTtcbiAgICAvLyBUaGlzIGhhcyBiZWVuIHNldCBzbyB0aGVyZSBpcyBlbm91Z2ggdGltZSBmb3IgdGhlIGFuaW1hdGlvbiB0byBzaG93XG4gICAgdmFyIHRpbWVvdXRfbm9kZSA9IHRoaXMubm9kZTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHR0aW1lb3V0X25vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG5cdH0sIDMwMCk7XG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIHRhcmdldHMgdG8gZW5hYmxlIHRoZW0gYnkgcmVtb3ZlIHRoZWlyIGBhcmlhLWhpZGRlbmBcbiAgICAvLyBhdHRyaWJ1dGUgb3IgcmVzZXR0aW5nIHRoZW0gdG8gdGhlaXIgaW5pdGlhbCB2YWx1ZVxuICAgIHRoaXMuX3RhcmdldHMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICB2YXIgb3JpZ2luYWwgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWExMXktZGlhbG9nLW9yaWdpbmFsJyk7XG5cblxuICAgICAgaWYgKG9yaWdpbmFsKSB7XG4gICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgb3JpZ2luYWwpO1xuICAgICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWExMXktZGlhbG9nLW9yaWdpbmFsJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gSWYgdGhlaXIgd2FzIGEgZm9jdXNlZCBlbGVtZW50IGJlZm9yZSB0aGUgZGlhbG9nIHdhcyBvcGVuZWQsIHJlc3RvcmUgdGhlXG4gICAgLy8gZm9jdXMgYmFjayB0byBpdFxuICAgIGlmIChmb2N1c2VkQmVmb3JlRGlhbG9nKSB7XG4gICAgICBmb2N1c2VkQmVmb3JlRGlhbG9nLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIHRoZSBmb2N1cyBldmVudCBsaXN0ZW5lciB0byB0aGUgYm9keSBlbGVtZW50IGFuZCBzdG9wIGxpc3RlbmluZ1xuICAgIC8vIGZvciBzcGVjaWZpYyBrZXkgcHJlc3Nlc1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9tYWludGFpbkZvY3VzLCB0cnVlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fYmluZEtleXByZXNzKTtcblxuICAgIC8vIFJlbW92ZSBvdmVybGF5IGNsYXNzIHRvIGRvY3VtZW50IGJvZHkuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdodG1sJyApWzBdLmNsYXNzTGlzdC5yZW1vdmUoICdzdWktaGFzLW92ZXJsYXknICk7XG5cbiAgICAvLyBFeGVjdXRlIGFsbCBjYWxsYmFja3MgcmVnaXN0ZXJlZCBmb3IgdGhlIGBoaWRlYCBldmVudFxuICAgIHRoaXMuX2ZpcmUoJ2hpZGUnLCBldmVudCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogRGVzdHJveSB0aGUgY3VycmVudCBpbnN0YW5jZSAoYWZ0ZXIgbWFraW5nIHN1cmUgdGhlIGRpYWxvZyBoYXMgYmVlbiBoaWRkZW4pXG4gICAqIGFuZCByZW1vdmUgYWxsIGFzc29jaWF0ZWQgbGlzdGVuZXJzIGZyb20gZGlhbG9nIG9wZW5lcnMgYW5kIGNsb3NlcnNcbiAgICpcbiAgICogQHJldHVybiB7dGhpc31cbiAgICovXG4gIEExMXlEaWFsb2cucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gSGlkZSB0aGUgZGlhbG9nIHRvIGF2b2lkIGRlc3Ryb3lpbmcgYW4gb3BlbiBpbnN0YW5jZVxuICAgIHRoaXMuaGlkZSgpO1xuXG4gICAgLy8gUmVtb3ZlIHRoZSBjbGljayBldmVudCBsaXN0ZW5lciBmcm9tIGFsbCBkaWFsb2cgb3BlbmVyc1xuICAgIHRoaXMuX29wZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAob3BlbmVyKSB7XG4gICAgICBvcGVuZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9zaG93KTtcbiAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgLy8gUmVtb3ZlIHRoZSBjbGljayBldmVudCBsaXN0ZW5lciBmcm9tIGFsbCBkaWFsb2cgY2xvc2Vyc1xuICAgIHRoaXMuX2Nsb3NlcnMuZm9yRWFjaChmdW5jdGlvbiAoY2xvc2VyKSB7XG4gICAgICBjbG9zZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oaWRlKTtcbiAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgLy8gRXhlY3V0ZSBhbGwgY2FsbGJhY2tzIHJlZ2lzdGVyZWQgZm9yIHRoZSBgZGVzdHJveWAgZXZlbnRcbiAgICB0aGlzLl9maXJlKCdkZXN0cm95Jyk7XG5cbiAgICAvLyBLZWVwIGFuIG9iamVjdCBvZiBsaXN0ZW5lciB0eXBlcyBtYXBwZWQgdG8gY2FsbGJhY2sgZnVuY3Rpb25zXG4gICAgdGhpcy5fbGlzdGVuZXJzID0ge307XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBuZXcgY2FsbGJhY2sgZm9yIHRoZSBnaXZlbiBldmVudCB0eXBlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICovXG4gIEExMXlEaWFsb2cucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKHR5cGUsIGhhbmRsZXIpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2xpc3RlbmVyc1t0eXBlXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuX2xpc3RlbmVyc1t0eXBlXSA9IFtdO1xuICAgIH1cblxuICAgIHRoaXMuX2xpc3RlbmVyc1t0eXBlXS5wdXNoKGhhbmRsZXIpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXIgYW4gZXhpc3RpbmcgY2FsbGJhY2sgZm9yIHRoZSBnaXZlbiBldmVudCB0eXBlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICovXG4gIEExMXlEaWFsb2cucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5fbGlzdGVuZXJzW3R5cGVdLmluZGV4T2YoaGFuZGxlcik7XG5cbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgdGhpcy5fbGlzdGVuZXJzW3R5cGVdLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgb3ZlciBhbGwgcmVnaXN0ZXJlZCBoYW5kbGVycyBmb3IgZ2l2ZW4gdHlwZSBhbmQgY2FsbCB0aGVtIGFsbCB3aXRoXG4gICAqIHRoZSBkaWFsb2cgZWxlbWVudCBhcyBmaXJzdCBhcmd1bWVudCwgZXZlbnQgYXMgc2Vjb25kIGFyZ3VtZW50IChpZiBhbnkpLlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICovXG4gIEExMXlEaWFsb2cucHJvdG90eXBlLl9maXJlID0gZnVuY3Rpb24gKHR5cGUsIGV2ZW50KSB7XG4gICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc1t0eXBlXSB8fCBbXTtcblxuICAgIGxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgbGlzdGVuZXIodGhpcy5ub2RlLCBldmVudCk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgfTtcblxuICAvKipcbiAgICogUHJpdmF0ZSBldmVudCBoYW5kbGVyIHVzZWQgd2hlbiBsaXN0ZW5pbmcgdG8gc29tZSBzcGVjaWZpYyBrZXkgcHJlc3Nlc1xuICAgKiAobmFtZWx5IEVTQ0FQRSBhbmQgVEFCKVxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICovXG4gIEExMXlEaWFsb2cucHJvdG90eXBlLl9iaW5kS2V5cHJlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBJZiB0aGUgZGlhbG9nIGlzIHNob3duIGFuZCB0aGUgRVNDQVBFIGtleSBpcyBiZWluZyBwcmVzc2VkLCBwcmV2ZW50IGFueVxuICAgIC8vIGZ1cnRoZXIgZWZmZWN0cyBmcm9tIHRoZSBFU0NBUEUga2V5IGFuZCBoaWRlIHRoZSBkaWFsb2dcbiAgICBpZiAodGhpcy5zaG93biAmJiBldmVudC53aGljaCA9PT0gRVNDQVBFX0tFWSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBkaWFsb2cgaXMgc2hvd24gYW5kIHRoZSBUQUIga2V5IGlzIGJlaW5nIHByZXNzZWQsIG1ha2Ugc3VyZSB0aGVcbiAgICAvLyBmb2N1cyBzdGF5cyB0cmFwcGVkIHdpdGhpbiB0aGUgZGlhbG9nIGVsZW1lbnRcbiAgICBpZiAodGhpcy5zaG93biAmJiBldmVudC53aGljaCA9PT0gVEFCX0tFWSkge1xuICAgICAgdHJhcFRhYktleSh0aGlzLm5vZGUsIGV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFByaXZhdGUgZXZlbnQgaGFuZGxlciB1c2VkIHdoZW4gbWFraW5nIHN1cmUgdGhlIGZvY3VzIHN0YXlzIHdpdGhpbiB0aGVcbiAgICogY3VycmVudGx5IG9wZW4gZGlhbG9nXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgKi9cbiAgQTExeURpYWxvZy5wcm90b3R5cGUuX21haW50YWluRm9jdXMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBJZiB0aGUgZGlhbG9nIGlzIHNob3duIGFuZCB0aGUgZm9jdXMgaXMgbm90IHdpdGhpbiB0aGUgZGlhbG9nIGVsZW1lbnQsXG4gICAgLy8gbW92ZSBpdCBiYWNrIHRvIGl0cyBmaXJzdCBmb2N1c2FibGUgY2hpbGRcbiAgICBpZiAodGhpcy5zaG93biAmJiAhdGhpcy5ub2RlLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgIHNldEZvY3VzVG9GaXJzdEl0ZW0odGhpcy5ub2RlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYSBOb2RlTGlzdCBpbnRvIGFuIGFycmF5XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZUxpc3R9IGNvbGxlY3Rpb25cbiAgICogQHJldHVybiB7QXJyYXk8RWxlbWVudD59XG4gICAqL1xuICBmdW5jdGlvbiB0b0FycmF5IChjb2xsZWN0aW9uKSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNvbGxlY3Rpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXJ5IHRoZSBET00gZm9yIG5vZGVzIG1hdGNoaW5nIHRoZSBnaXZlbiBzZWxlY3Rvciwgc2NvcGVkIHRvIGNvbnRleHQgKG9yXG4gICAqIHRoZSB3aG9sZSBkb2N1bWVudClcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gW2NvbnRleHQgPSBkb2N1bWVudF1cbiAgICogQHJldHVybiB7QXJyYXk8RWxlbWVudD59XG4gICAqL1xuICBmdW5jdGlvbiAkJCAoc2VsZWN0b3IsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gdG9BcnJheSgoY29udGV4dCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBFbGVtZW50IGJhc2VkIG9uIGdpdmVuIGFyZ3VtZW50IChOb2RlTGlzdCwgRWxlbWVudCBvclxuICAgKiBzdHJpbmcgcmVwcmVzZW50aW5nIGEgc2VsZWN0b3IpXG4gICAqXG4gICAqIEBwYXJhbSB7KE5vZGVMaXN0IHwgRWxlbWVudCB8IHN0cmluZyl9IHRhcmdldFxuICAgKiBAcmV0dXJuIHtBcnJheTxFbGVtZW50Pn1cbiAgICovXG4gIGZ1bmN0aW9uIGNvbGxlY3QgKHRhcmdldCkge1xuICAgIGlmIChOb2RlTGlzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih0YXJnZXQpKSB7XG4gICAgICByZXR1cm4gdG9BcnJheSh0YXJnZXQpO1xuICAgIH1cblxuICAgIGlmIChFbGVtZW50LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHRhcmdldCkpIHtcbiAgICAgIHJldHVybiBbdGFyZ2V0XTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiAkJCh0YXJnZXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGZvY3VzIHRvIHRoZSBmaXJzdCBmb2N1c2FibGUgY2hpbGQgb2YgdGhlIGdpdmVuIGVsZW1lbnRcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlXG4gICAqL1xuICBmdW5jdGlvbiBzZXRGb2N1c1RvRmlyc3RJdGVtIChub2RlKSB7XG4gICAgdmFyIGZvY3VzYWJsZUNoaWxkcmVuID0gZ2V0Rm9jdXNhYmxlQ2hpbGRyZW4obm9kZSk7XG5cbiAgICBpZiAoZm9jdXNhYmxlQ2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICBmb2N1c2FibGVDaGlsZHJlblswXS5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGZvY3VzYWJsZSBjaGlsZHJlbiBvZiB0aGUgZ2l2ZW4gZWxlbWVudFxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGVcbiAgICogQHJldHVybiB7QXJyYXk8RWxlbWVudD59XG4gICAqL1xuICBmdW5jdGlvbiBnZXRGb2N1c2FibGVDaGlsZHJlbiAobm9kZSkge1xuICAgIHJldHVybiAkJChGT0NVU0FCTEVfRUxFTUVOVFMuam9pbignLCcpLCBub2RlKS5maWx0ZXIoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICByZXR1cm4gISEoY2hpbGQub2Zmc2V0V2lkdGggfHwgY2hpbGQub2Zmc2V0SGVpZ2h0IHx8IGNoaWxkLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFwIHRoZSBmb2N1cyBpbnNpZGUgdGhlIGdpdmVuIGVsZW1lbnRcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAqL1xuICBmdW5jdGlvbiB0cmFwVGFiS2V5IChub2RlLCBldmVudCkge1xuICAgIHZhciBmb2N1c2FibGVDaGlsZHJlbiA9IGdldEZvY3VzYWJsZUNoaWxkcmVuKG5vZGUpO1xuICAgIHZhciBmb2N1c2VkSXRlbUluZGV4ID0gZm9jdXNhYmxlQ2hpbGRyZW4uaW5kZXhPZihkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcblxuICAgIC8vIElmIHRoZSBTSElGVCBrZXkgaXMgYmVpbmcgcHJlc3NlZCB3aGlsZSB0YWJiaW5nIChtb3ZpbmcgYmFja3dhcmRzKSBhbmRcbiAgICAvLyB0aGUgY3VycmVudGx5IGZvY3VzZWQgaXRlbSBpcyB0aGUgZmlyc3Qgb25lLCBtb3ZlIHRoZSBmb2N1cyB0byB0aGUgbGFzdFxuICAgIC8vIGZvY3VzYWJsZSBpdGVtIGZyb20gdGhlIGRpYWxvZyBlbGVtZW50XG4gICAgaWYgKGV2ZW50LnNoaWZ0S2V5ICYmIGZvY3VzZWRJdGVtSW5kZXggPT09IDApIHtcbiAgICAgIGZvY3VzYWJsZUNoaWxkcmVuW2ZvY3VzYWJsZUNoaWxkcmVuLmxlbmd0aCAtIDFdLmZvY3VzKCk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIC8vIElmIHRoZSBTSElGVCBrZXkgaXMgbm90IGJlaW5nIHByZXNzZWQgKG1vdmluZyBmb3J3YXJkcykgYW5kIHRoZSBjdXJyZW50bHlcbiAgICAvLyBmb2N1c2VkIGl0ZW0gaXMgdGhlIGxhc3Qgb25lLCBtb3ZlIHRoZSBmb2N1cyB0byB0aGUgZmlyc3QgZm9jdXNhYmxlIGl0ZW1cbiAgICAvLyBmcm9tIHRoZSBkaWFsb2cgZWxlbWVudFxuICAgIH0gZWxzZSBpZiAoIWV2ZW50LnNoaWZ0S2V5ICYmIGZvY3VzZWRJdGVtSW5kZXggPT09IGZvY3VzYWJsZUNoaWxkcmVuLmxlbmd0aCAtIDEpIHtcbiAgICAgIGZvY3VzYWJsZUNoaWxkcmVuWzBdLmZvY3VzKCk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBzaWJsaW5ncyBmcm9tIGdpdmVuIGVsZW1lbnRcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlXG4gICAqIEByZXR1cm4ge0FycmF5PEVsZW1lbnQ+fVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0U2libGluZ3MgKG5vZGUpIHtcbiAgICB2YXIgbm9kZXMgPSB0b0FycmF5KG5vZGUucGFyZW50Tm9kZS5jaGlsZE5vZGVzKTtcbiAgICB2YXIgc2libGluZ3MgPSBub2Rlcy5maWx0ZXIoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09PSAxO1xuICAgIH0pO1xuXG4gICAgc2libGluZ3Muc3BsaWNlKHNpYmxpbmdzLmluZGV4T2Yobm9kZSksIDEpO1xuXG4gICAgcmV0dXJuIHNpYmxpbmdzO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IEExMXlEaWFsb2c7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKCdBMTF5RGlhbG9nJywgW10sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBBMTF5RGlhbG9nO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgPT09ICdvYmplY3QnKSB7XG4gICAgZ2xvYmFsLkExMXlEaWFsb2cgPSBBMTF5RGlhbG9nO1xuICB9XG59KHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogd2luZG93KSk7XG5cbi8vIHRoZSBzZW1pLWNvbG9uIGJlZm9yZSBmdW5jdGlvbiBpbnZvY2F0aW9uIGlzIGEgc2FmZXR5IG5ldCBhZ2FpbnN0IGNvbmNhdGVuYXRlZFxuLy8gc2NyaXB0cyBhbmQvb3Igb3RoZXIgcGx1Z2lucyB3aGljaCBtYXkgbm90IGJlIGNsb3NlZCBwcm9wZXJseS5cbjtcbiggZnVuY3Rpb24oICQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCApIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIHVuZGVmaW5lZCBpcyB1c2VkIGhlcmUgYXMgdGhlIHVuZGVmaW5lZCBnbG9iYWwgdmFyaWFibGUgaW4gRUNNQVNjcmlwdCAzIGlzXG4gICAgLy8gbXV0YWJsZSAoaWUuIGl0IGNhbiBiZSBjaGFuZ2VkIGJ5IHNvbWVvbmUgZWxzZSkuIHVuZGVmaW5lZCBpc24ndCByZWFsbHkgYmVpbmdcbiAgICAvLyBwYXNzZWQgaW4gc28gd2UgY2FuIGVuc3VyZSB0aGUgdmFsdWUgb2YgaXQgaXMgdHJ1bHkgdW5kZWZpbmVkLiBJbiBFUzUsIHVuZGVmaW5lZFxuICAgIC8vIGNhbiBubyBsb25nZXIgYmUgbW9kaWZpZWQuXG5cbiAgICAvLyB3aW5kb3cgYW5kIGRvY3VtZW50IGFyZSBwYXNzZWQgdGhyb3VnaCBhcyBsb2NhbCB2YXJpYWJsZXMgcmF0aGVyIHRoYW4gZ2xvYmFsXG4gICAgLy8gYXMgdGhpcyAoc2xpZ2h0bHkpIHF1aWNrZW5zIHRoZSByZXNvbHV0aW9uIHByb2Nlc3MgYW5kIGNhbiBiZSBtb3JlIGVmZmljaWVudGx5XG4gICAgLy8gbWluaWZpZWQgKGVzcGVjaWFsbHkgd2hlbiBib3RoIGFyZSByZWd1bGFybHkgcmVmZXJlbmNlZCBpbiB5b3VyIHBsdWdpbikuXG5cbiAgICAvLyBDcmVhdGUgdGhlIGRlZmF1bHRzIG9uY2VcbiAgICB2YXIgcGx1Z2luTmFtZSA9ICdTVUlBY2NvcmRpb24nLFxuICAgICAgICBkZWZhdWx0cyA9IHt9O1xuXG4gICAgLy8gVGhlIGFjdHVhbCBwbHVnaW4gY29uc3RydWN0b3JcbiAgICBmdW5jdGlvbiBTVUlBY2NvcmRpb24oIGVsZW1lbnQsIG9wdGlvbnMgKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkKCB0aGlzLmVsZW1lbnQgKTtcblxuXG4gICAgICAgIC8vIGpRdWVyeSBoYXMgYW4gZXh0ZW5kIG1ldGhvZCB3aGljaCBtZXJnZXMgdGhlIGNvbnRlbnRzIG9mIHR3byBvclxuICAgICAgICAvLyBtb3JlIG9iamVjdHMsIHN0b3JpbmcgdGhlIHJlc3VsdCBpbiB0aGUgZmlyc3Qgb2JqZWN0LiBUaGUgZmlyc3Qgb2JqZWN0XG4gICAgICAgIC8vIGlzIGdlbmVyYWxseSBlbXB0eSBhcyB3ZSBkb24ndCB3YW50IHRvIGFsdGVyIHRoZSBkZWZhdWx0IG9wdGlvbnMgZm9yXG4gICAgICAgIC8vIGZ1dHVyZSBpbnN0YW5jZXMgb2YgdGhlIHBsdWdpblxuICAgICAgICB0aGlzLnNldHRpbmdzID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zICk7XG4gICAgICAgIHRoaXMuX2RlZmF1bHRzID0gZGVmYXVsdHM7XG4gICAgICAgIHRoaXMuX25hbWUgPSBwbHVnaW5OYW1lO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICAvLyBBdm9pZCBQbHVnaW4ucHJvdG90eXBlIGNvbmZsaWN0c1xuICAgICQuZXh0ZW5kKCBTVUlBY2NvcmRpb24ucHJvdG90eXBlLCB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvLyBuYW1lc3BhY2VkIGV2ZW50XG4gICAgICAgICAgICB0aGlzLiRlbGVtZW50Lm9uKCAnY2xpY2suc3VpLmFjY29yZGlvbicsICcuc3VpLWFjY29yZGlvbi1pdGVtJywgZnVuY3Rpb24oIGV2ZW50ICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGdldFBhcmVudEl0ZW0gPSAkKCB0aGlzICkuY2xvc2VzdCggJy5zdWktYWNjb3JkaW9uLWl0ZW0nICksXG4gICAgICAgICAgICAgICAgICAgIGdldE5leHRBZGRpdGlvbmFsQ29udGVudFJvdyA9IGdldFBhcmVudEl0ZW0ubmV4dFVudGlsKCAnLnN1aS1hY2NvcmRpb24taXRlbScgKS5maWx0ZXIoICcuc3VpLWFjY29yZGlvbi1pdGVtLWNvbnRlbnQnICk7XG5cbiAgICAgICAgICAgICAgICBnZXROZXh0QWRkaXRpb25hbENvbnRlbnRSb3cudG9nZ2xlQ2xhc3MoICdzdWktYWNjb3JkaW9uLWl0ZW0tLW9wZW4nICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIGdldE5leHRBZGRpdGlvbmFsQ29udGVudFJvdy5oYXNDbGFzcyggJ3N1aS1hY2NvcmRpb24taXRlbS0tb3BlbicgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0UGFyZW50SXRlbS5hZGRDbGFzcyggJ3N1aS1hY2NvcmRpb24taXRlbS0tb3BlbicgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBnZXRQYXJlbnRJdGVtLnJlbW92ZUNsYXNzKCAnc3VpLWFjY29yZGlvbi1pdGVtLS1vcGVuJyApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEEgcmVhbGx5IGxpZ2h0d2VpZ2h0IHBsdWdpbiB3cmFwcGVyIGFyb3VuZCB0aGUgY29uc3RydWN0b3IsXG4gICAgLy8gcHJldmVudGluZyBhZ2FpbnN0IG11bHRpcGxlIGluc3RhbnRpYXRpb25zXG4gICAgJC5mblsgcGx1Z2luTmFtZSBdID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvLyBpbnN0YW5jZSBvZiBTVUlBY2NvcmRpb24gY2FuIGJlIGNhbGxlZCB3aXRoICQoZWxlbWVudCkuZGF0YSgnU1VJQWNjb3JkaW9uJylcbiAgICAgICAgICAgIGlmICggISAkLmRhdGEoIHRoaXMsIHBsdWdpbk5hbWUgKSApIHtcbiAgICAgICAgICAgICAgICAkLmRhdGEoIHRoaXMsIHBsdWdpbk5hbWUsIG5ldyBTVUlBY2NvcmRpb24oIHRoaXMsIG9wdGlvbnMgKSApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG59KCBqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQgKSApO1xuXG4oIGZ1bmN0aW9uKCAkICkge1xuXG4gICAgLy8gRW5hYmxlIHN0cmljdCBtb2RlLlxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIERlZmluZSBnbG9iYWwgU1VJIG9iamVjdCBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgIGlmICggJ29iamVjdCcgIT09IHR5cGVvZiB3aW5kb3cuU1VJICkge1xuICAgICAgICB3aW5kb3cuU1VJID0ge307XG4gICAgfVxuXG4gICAgU1VJLnN1aUFjY29yZGlvbiA9IGZ1bmN0aW9uKCBlbCApIHtcbiAgICAgICAgdmFyIGFjY29yZGlvblRhYmxlID0gJCggZWwgKTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICAgICAgYWNjb3JkaW9uVGFibGUuU1VJQWNjb3JkaW9uKHt9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGluaXQoKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLy8gd2FpdCBkb2N1bWVudCByZWFkeSBmaXJzdFxuICAgICQoIGRvY3VtZW50ICkucmVhZHkoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8vIENvbnZlcnQgYWxsIGFjY29yZGlvbnMuXG4gICAgICAgICQoICcuc3VpLTItMi00IC5zdWktYWNjb3JkaW9uJyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvLyBiYWNrd2FyZCBjb21wYXQgb2YgaW5zdGFudGlhdGUgbmV3IGFjY29yZGlvblxuICAgICAgICAgICAgU1VJLnN1aUFjY29yZGlvbiggdGhpcyApO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxufSggalF1ZXJ5ICkgKTtcblxuLyoqXG4gKiBjbGlwYm9hcmQuanMgdjEuNy4xXG4gKiBodHRwczovL3plbm9yb2NoYS5naXRodWIuaW8vY2xpcGJvYXJkLmpzXG4gKlxuICogTGljZW5zZWQgTUlUIMKpIFplbm8gUm9jaGFcbiAqL1xuKGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09XCJvYmplY3RcIiYmdHlwZW9mIG1vZHVsZSE9PVwidW5kZWZpbmVkXCIpe21vZHVsZS5leHBvcnRzPWYoKX1lbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT1cImZ1bmN0aW9uXCImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiKXtnPXdpbmRvd31lbHNlIGlmKHR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiKXtnPWdsb2JhbH1lbHNlIGlmKHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuQ2xpcGJvYXJkSlMgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgRE9DVU1FTlRfTk9ERV9UWVBFID0gOTtcblxuLyoqXG4gKiBBIHBvbHlmaWxsIGZvciBFbGVtZW50Lm1hdGNoZXMoKVxuICovXG5pZiAodHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmICFFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzKSB7XG5cdHZhciBwcm90byA9IEVsZW1lbnQucHJvdG90eXBlO1xuXG5cdHByb3RvLm1hdGNoZXMgPSBwcm90by5tYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRcdFx0XHRwcm90by5tb3pNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRcdFx0XHRwcm90by5tc01hdGNoZXNTZWxlY3RvciB8fFxuXHRcdFx0XHRcdHByb3RvLm9NYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRcdFx0XHRwcm90by53ZWJraXRNYXRjaGVzU2VsZWN0b3I7XG59XG5cbi8qKlxuICogRmluZHMgdGhlIGNsb3Nlc3QgcGFyZW50IHRoYXQgbWF0Y2hlcyBhIHNlbGVjdG9yLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gY2xvc2VzdChlbGVtZW50LCBzZWxlY3Rvcikge1xuXHR3aGlsZSAoZWxlbWVudCAmJiBlbGVtZW50Lm5vZGVUeXBlICE9PSBET0NVTUVOVF9OT0RFX1RZUEUpIHtcblx0XHRpZiAodHlwZW9mIGVsZW1lbnQubWF0Y2hlcyA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdFx0ZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSkge1xuXHRcdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdFx0fVxuXHRcdGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjbG9zZXN0O1xuXG59LHt9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBjbG9zZXN0ID0gcmVxdWlyZSgnLi9jbG9zZXN0Jyk7XG5cbi8qKlxuICogRGVsZWdhdGVzIGV2ZW50IHRvIGEgc2VsZWN0b3IuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtCb29sZWFufSB1c2VDYXB0dXJlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGRlbGVnYXRlKGVsZW1lbnQsIHNlbGVjdG9yLCB0eXBlLCBjYWxsYmFjaywgdXNlQ2FwdHVyZSkge1xuXHR2YXIgbGlzdGVuZXJGbiA9IGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cblx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyRm4sIHVzZUNhcHR1cmUpO1xuXG5cdHJldHVybiB7XG5cdFx0ZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdFx0XHRlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXJGbiwgdXNlQ2FwdHVyZSk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogRmluZHMgY2xvc2VzdCBtYXRjaCBhbmQgaW52b2tlcyBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gbGlzdGVuZXIoZWxlbWVudCwgc2VsZWN0b3IsIHR5cGUsIGNhbGxiYWNrKSB7XG5cdHJldHVybiBmdW5jdGlvbihlKSB7XG5cdFx0ZS5kZWxlZ2F0ZVRhcmdldCA9IGNsb3Nlc3QoZS50YXJnZXQsIHNlbGVjdG9yKTtcblxuXHRcdGlmIChlLmRlbGVnYXRlVGFyZ2V0KSB7XG5cdFx0XHRjYWxsYmFjay5jYWxsKGVsZW1lbnQsIGUpO1xuXHRcdH1cblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlbGVnYXRlO1xuXG59LHtcIi4vY2xvc2VzdFwiOjF9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qKlxuICogQ2hlY2sgaWYgYXJndW1lbnQgaXMgYSBIVE1MIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLm5vZGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZFxuXHRcdCYmIHZhbHVlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnRcblx0XHQmJiB2YWx1ZS5ub2RlVHlwZSA9PT0gMTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYXJndW1lbnQgaXMgYSBsaXN0IG9mIEhUTUwgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLm5vZGVMaXN0ID0gZnVuY3Rpb24odmFsdWUpIHtcblx0dmFyIHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXG5cdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkXG5cdFx0JiYgKHR5cGUgPT09ICdbb2JqZWN0IE5vZGVMaXN0XScgfHwgdHlwZSA9PT0gJ1tvYmplY3QgSFRNTENvbGxlY3Rpb25dJylcblx0XHQmJiAoJ2xlbmd0aCcgaW4gdmFsdWUpXG5cdFx0JiYgKHZhbHVlLmxlbmd0aCA9PT0gMCB8fCBleHBvcnRzLm5vZGUodmFsdWVbMF0pKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYXJndW1lbnQgaXMgYSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLnN0cmluZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnXG5cdFx0fHwgdmFsdWUgaW5zdGFuY2VvZiBTdHJpbmc7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGFyZ3VtZW50IGlzIGEgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLmZuID0gZnVuY3Rpb24odmFsdWUpIHtcblx0dmFyIHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXG5cdHJldHVybiB0eXBlID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufTtcblxufSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgaXMgPSByZXF1aXJlKCcuL2lzJyk7XG52YXIgZGVsZWdhdGUgPSByZXF1aXJlKCdkZWxlZ2F0ZScpO1xuXG4vKipcbiAqIFZhbGlkYXRlcyBhbGwgcGFyYW1zIGFuZCBjYWxscyB0aGUgcmlnaHRcbiAqIGxpc3RlbmVyIGZ1bmN0aW9uIGJhc2VkIG9uIGl0cyB0YXJnZXQgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xIVE1MRWxlbWVudHxIVE1MQ29sbGVjdGlvbnxOb2RlTGlzdH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gbGlzdGVuKHRhcmdldCwgdHlwZSwgY2FsbGJhY2spIHtcblx0aWYgKCF0YXJnZXQgJiYgIXR5cGUgJiYgIWNhbGxiYWNrKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkIGFyZ3VtZW50cycpO1xuXHR9XG5cblx0aWYgKCFpcy5zdHJpbmcodHlwZSkpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdTZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBhIFN0cmluZycpO1xuXHR9XG5cblx0aWYgKCFpcy5mbihjYWxsYmFjaykpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGlyZCBhcmd1bWVudCBtdXN0IGJlIGEgRnVuY3Rpb24nKTtcblx0fVxuXG5cdGlmIChpcy5ub2RlKHRhcmdldCkpIHtcblx0XHRyZXR1cm4gbGlzdGVuTm9kZSh0YXJnZXQsIHR5cGUsIGNhbGxiYWNrKTtcblx0fVxuXHRlbHNlIGlmIChpcy5ub2RlTGlzdCh0YXJnZXQpKSB7XG5cdFx0cmV0dXJuIGxpc3Rlbk5vZGVMaXN0KHRhcmdldCwgdHlwZSwgY2FsbGJhY2spO1xuXHR9XG5cdGVsc2UgaWYgKGlzLnN0cmluZyh0YXJnZXQpKSB7XG5cdFx0cmV0dXJuIGxpc3RlblNlbGVjdG9yKHRhcmdldCwgdHlwZSwgY2FsbGJhY2spO1xuXHR9XG5cdGVsc2Uge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBTdHJpbmcsIEhUTUxFbGVtZW50LCBIVE1MQ29sbGVjdGlvbiwgb3IgTm9kZUxpc3QnKTtcblx0fVxufVxuXG4vKipcbiAqIEFkZHMgYW4gZXZlbnQgbGlzdGVuZXIgdG8gYSBIVE1MIGVsZW1lbnRcbiAqIGFuZCByZXR1cm5zIGEgcmVtb3ZlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGVcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBsaXN0ZW5Ob2RlKG5vZGUsIHR5cGUsIGNhbGxiYWNrKSB7XG5cdG5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjayk7XG5cblx0cmV0dXJuIHtcblx0XHRkZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHRcdG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjayk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGEgbGlzdCBvZiBIVE1MIGVsZW1lbnRzXG4gKiBhbmQgcmV0dXJucyBhIHJlbW92ZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge05vZGVMaXN0fEhUTUxDb2xsZWN0aW9ufSBub2RlTGlzdFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGxpc3Rlbk5vZGVMaXN0KG5vZGVMaXN0LCB0eXBlLCBjYWxsYmFjaykge1xuXHRBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG5vZGVMaXN0LCBmdW5jdGlvbihub2RlKSB7XG5cdFx0bm9kZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrKTtcblx0fSk7XG5cblx0cmV0dXJuIHtcblx0XHRkZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwobm9kZUxpc3QsIGZ1bmN0aW9uKG5vZGUpIHtcblx0XHRcdFx0bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIEFkZCBhbiBldmVudCBsaXN0ZW5lciB0byBhIHNlbGVjdG9yXG4gKiBhbmQgcmV0dXJucyBhIHJlbW92ZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBsaXN0ZW5TZWxlY3RvcihzZWxlY3RvciwgdHlwZSwgY2FsbGJhY2spIHtcblx0cmV0dXJuIGRlbGVnYXRlKGRvY3VtZW50LmJvZHksIHNlbGVjdG9yLCB0eXBlLCBjYWxsYmFjayk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbGlzdGVuO1xuXG59LHtcIi4vaXNcIjozLFwiZGVsZWdhdGVcIjoyfV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5mdW5jdGlvbiBzZWxlY3QoZWxlbWVudCkge1xuXHR2YXIgc2VsZWN0ZWRUZXh0O1xuXG5cdGlmIChlbGVtZW50Lm5vZGVOYW1lID09PSAnU0VMRUNUJykge1xuXHRcdGVsZW1lbnQuZm9jdXMoKTtcblxuXHRcdHNlbGVjdGVkVGV4dCA9IGVsZW1lbnQudmFsdWU7XG5cdH1cblx0ZWxzZSBpZiAoZWxlbWVudC5ub2RlTmFtZSA9PT0gJ0lOUFVUJyB8fCBlbGVtZW50Lm5vZGVOYW1lID09PSAnVEVYVEFSRUEnKSB7XG5cdFx0dmFyIGlzUmVhZE9ubHkgPSBlbGVtZW50Lmhhc0F0dHJpYnV0ZSgncmVhZG9ubHknKTtcblxuXHRcdGlmICghaXNSZWFkT25seSkge1xuXHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JywgJycpO1xuXHRcdH1cblxuXHRcdGVsZW1lbnQuc2VsZWN0KCk7XG5cdFx0ZWxlbWVudC5zZXRTZWxlY3Rpb25SYW5nZSgwLCBlbGVtZW50LnZhbHVlLmxlbmd0aCk7XG5cblx0XHRpZiAoIWlzUmVhZE9ubHkpIHtcblx0XHRcdGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdyZWFkb25seScpO1xuXHRcdH1cblxuXHRcdHNlbGVjdGVkVGV4dCA9IGVsZW1lbnQudmFsdWU7XG5cdH1cblx0ZWxzZSB7XG5cdFx0aWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKSkge1xuXHRcdFx0ZWxlbWVudC5mb2N1cygpO1xuXHRcdH1cblxuXHRcdHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0dmFyIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcblxuXHRcdHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhlbGVtZW50KTtcblx0XHRzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG5cdFx0c2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTtcblxuXHRcdHNlbGVjdGVkVGV4dCA9IHNlbGVjdGlvbi50b1N0cmluZygpO1xuXHR9XG5cblx0cmV0dXJuIHNlbGVjdGVkVGV4dDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZWxlY3Q7XG5cbn0se31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuZnVuY3Rpb24gRSAoKSB7XG5cdC8vIEtlZXAgdGhpcyBlbXB0eSBzbyBpdCdzIGVhc2llciB0byBpbmhlcml0IGZyb21cblx0Ly8gKHZpYSBodHRwczovL2dpdGh1Yi5jb20vbGlwc21hY2sgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRjb3JnYW4vdGlueS1lbWl0dGVyL2lzc3Vlcy8zKVxufVxuXG5FLnByb3RvdHlwZSA9IHtcblx0b246IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaywgY3R4KSB7XG5cdHZhciBlID0gdGhpcy5lIHx8ICh0aGlzLmUgPSB7fSk7XG5cblx0KGVbbmFtZV0gfHwgKGVbbmFtZV0gPSBbXSkpLnB1c2goe1xuXHRcdGZuOiBjYWxsYmFjayxcblx0XHRjdHg6IGN0eFxuXHR9KTtcblxuXHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRvbmNlOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2ssIGN0eCkge1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdGZ1bmN0aW9uIGxpc3RlbmVyICgpIHtcblx0XHRzZWxmLm9mZihuYW1lLCBsaXN0ZW5lcik7XG5cdFx0Y2FsbGJhY2suYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xuXHR9O1xuXG5cdGxpc3RlbmVyLl8gPSBjYWxsYmFja1xuXHRyZXR1cm4gdGhpcy5vbihuYW1lLCBsaXN0ZW5lciwgY3R4KTtcblx0fSxcblxuXHRlbWl0OiBmdW5jdGlvbiAobmFtZSkge1xuXHR2YXIgZGF0YSA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblx0dmFyIGV2dEFyciA9ICgodGhpcy5lIHx8ICh0aGlzLmUgPSB7fSkpW25hbWVdIHx8IFtdKS5zbGljZSgpO1xuXHR2YXIgaSA9IDA7XG5cdHZhciBsZW4gPSBldnRBcnIubGVuZ3RoO1xuXG5cdGZvciAoaTsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0ZXZ0QXJyW2ldLmZuLmFwcGx5KGV2dEFycltpXS5jdHgsIGRhdGEpO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0b2ZmOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHtcblx0dmFyIGUgPSB0aGlzLmUgfHwgKHRoaXMuZSA9IHt9KTtcblx0dmFyIGV2dHMgPSBlW25hbWVdO1xuXHR2YXIgbGl2ZUV2ZW50cyA9IFtdO1xuXG5cdGlmIChldnRzICYmIGNhbGxiYWNrKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIGxlbiA9IGV2dHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRpZiAoZXZ0c1tpXS5mbiAhPT0gY2FsbGJhY2sgJiYgZXZ0c1tpXS5mbi5fICE9PSBjYWxsYmFjaylcblx0XHRcdGxpdmVFdmVudHMucHVzaChldnRzW2ldKTtcblx0XHR9XG5cdH1cblxuXHQvLyBSZW1vdmUgZXZlbnQgZnJvbSBxdWV1ZSB0byBwcmV2ZW50IG1lbW9yeSBsZWFrXG5cdC8vIFN1Z2dlc3RlZCBieSBodHRwczovL2dpdGh1Yi5jb20vbGF6ZFxuXHQvLyBSZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGNvcmdhbi90aW55LWVtaXR0ZXIvY29tbWl0L2M2ZWJmYWE5YmM5NzNiMzNkMTEwYTg0YTMwNzc0MmI3Y2Y5NGM5NTMjY29tbWl0Y29tbWVudC01MDI0OTEwXG5cblx0KGxpdmVFdmVudHMubGVuZ3RoKVxuXHRcdD8gZVtuYW1lXSA9IGxpdmVFdmVudHNcblx0XHQ6IGRlbGV0ZSBlW25hbWVdO1xuXG5cdHJldHVybiB0aGlzO1xuXHR9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEU7XG5cbn0se31dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKFsnbW9kdWxlJywgJ3NlbGVjdCddLCBmYWN0b3J5KTtcblx0fSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdGZhY3RvcnkobW9kdWxlLCByZXF1aXJlKCdzZWxlY3QnKSk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIG1vZCA9IHtcblx0XHRcdGV4cG9ydHM6IHt9XG5cdFx0fTtcblx0XHRmYWN0b3J5KG1vZCwgZ2xvYmFsLnNlbGVjdCk7XG5cdFx0Z2xvYmFsLmNsaXBib2FyZEFjdGlvbiA9IG1vZC5leHBvcnRzO1xuXHR9XG59KSh0aGlzLCBmdW5jdGlvbiAobW9kdWxlLCBfc2VsZWN0KSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgX3NlbGVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWxlY3QpO1xuXG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdFx0cmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHtcblx0XHRcdGRlZmF1bHQ6IG9ialxuXHRcdH07XG5cdH1cblxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuXHRcdHJldHVybiB0eXBlb2Ygb2JqO1xuXHR9IDogZnVuY3Rpb24gKG9iaikge1xuXHRcdHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0XHRpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0XHR9XG5cdH1cblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHRcdGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuXHRcdFx0XHRkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG5cdFx0XHRcdGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcblx0XHRcdFx0aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdFx0XHRpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuXHRcdFx0aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG5cdFx0XHRyZXR1cm4gQ29uc3RydWN0b3I7XG5cdFx0fTtcblx0fSgpO1xuXG5cdHZhciBDbGlwYm9hcmRKU0FjdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHQvKipcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIENsaXBib2FyZEpTQWN0aW9uKG9wdGlvbnMpIHtcblx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbGlwYm9hcmRKU0FjdGlvbik7XG5cblx0XHRcdHRoaXMucmVzb2x2ZU9wdGlvbnMob3B0aW9ucyk7XG5cdFx0XHR0aGlzLmluaXRTZWxlY3Rpb24oKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIGJhc2UgcHJvcGVydGllcyBwYXNzZWQgZnJvbSBjb25zdHJ1Y3Rvci5cblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHRcdCAqL1xuXG5cblx0XHRfY3JlYXRlQ2xhc3MoQ2xpcGJvYXJkSlNBY3Rpb24sIFt7XG5cdFx0XHRrZXk6ICdyZXNvbHZlT3B0aW9ucycsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZU9wdGlvbnMoKSB7XG5cdFx0XHRcdHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuXHRcdFx0XHR0aGlzLmFjdGlvbiA9IG9wdGlvbnMuYWN0aW9uO1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lciA9IG9wdGlvbnMuY29udGFpbmVyO1xuXHRcdFx0XHR0aGlzLmVtaXR0ZXIgPSBvcHRpb25zLmVtaXR0ZXI7XG5cdFx0XHRcdHRoaXMudGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQ7XG5cdFx0XHRcdHRoaXMudGV4dCA9IG9wdGlvbnMudGV4dDtcblx0XHRcdFx0dGhpcy50cmlnZ2VyID0gb3B0aW9ucy50cmlnZ2VyO1xuXG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWRUZXh0ID0gJyc7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnaW5pdFNlbGVjdGlvbicsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gaW5pdFNlbGVjdGlvbigpIHtcblx0XHRcdFx0aWYgKHRoaXMudGV4dCkge1xuXHRcdFx0XHRcdHRoaXMuc2VsZWN0RmFrZSgpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMudGFyZ2V0KSB7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RUYXJnZXQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ3NlbGVjdEZha2UnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHNlbGVjdEZha2UoKSB7XG5cdFx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRcdFx0dmFyIGlzUlRMID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGlyJykgPT0gJ3J0bCc7XG5cblx0XHRcdFx0dGhpcy5yZW1vdmVGYWtlKCk7XG5cblx0XHRcdFx0dGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHJldHVybiBfdGhpcy5yZW1vdmVGYWtlKCk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdHRoaXMuZmFrZUhhbmRsZXIgPSB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZmFrZUhhbmRsZXJDYWxsYmFjaykgfHwgdHJ1ZTtcblxuXHRcdFx0XHR0aGlzLmZha2VFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcblx0XHRcdFx0Ly8gUHJldmVudCB6b29taW5nIG9uIGlPU1xuXHRcdFx0XHR0aGlzLmZha2VFbGVtLnN0eWxlLmZvbnRTaXplID0gJzEycHQnO1xuXHRcdFx0XHQvLyBSZXNldCBib3ggbW9kZWxcblx0XHRcdFx0dGhpcy5mYWtlRWxlbS5zdHlsZS5ib3JkZXIgPSAnMCc7XG5cdFx0XHRcdHRoaXMuZmFrZUVsZW0uc3R5bGUucGFkZGluZyA9ICcwJztcblx0XHRcdFx0dGhpcy5mYWtlRWxlbS5zdHlsZS5tYXJnaW4gPSAnMCc7XG5cdFx0XHRcdC8vIE1vdmUgZWxlbWVudCBvdXQgb2Ygc2NyZWVuIGhvcml6b250YWxseVxuXHRcdFx0XHR0aGlzLmZha2VFbGVtLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0XHRcdFx0dGhpcy5mYWtlRWxlbS5zdHlsZVtpc1JUTCA/ICdyaWdodCcgOiAnbGVmdCddID0gJy05OTk5cHgnO1xuXHRcdFx0XHQvLyBNb3ZlIGVsZW1lbnQgdG8gdGhlIHNhbWUgcG9zaXRpb24gdmVydGljYWxseVxuXHRcdFx0XHR2YXIgeVBvc2l0aW9uID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG5cdFx0XHRcdHRoaXMuZmFrZUVsZW0uc3R5bGUudG9wID0geVBvc2l0aW9uICsgJ3B4JztcblxuXHRcdFx0XHR0aGlzLmZha2VFbGVtLnNldEF0dHJpYnV0ZSgncmVhZG9ubHknLCAnJyk7XG5cdFx0XHRcdHRoaXMuZmFrZUVsZW0udmFsdWUgPSB0aGlzLnRleHQ7XG5cblx0XHRcdFx0dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5mYWtlRWxlbSk7XG5cblx0XHRcdFx0dGhpcy5zZWxlY3RlZFRleHQgPSAoMCwgX3NlbGVjdDIuZGVmYXVsdCkodGhpcy5mYWtlRWxlbSk7XG5cdFx0XHRcdHRoaXMuY29weVRleHQoKTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdyZW1vdmVGYWtlJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiByZW1vdmVGYWtlKCkge1xuXHRcdFx0XHRpZiAodGhpcy5mYWtlSGFuZGxlcikge1xuXHRcdFx0XHRcdHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrKTtcblx0XHRcdFx0XHR0aGlzLmZha2VIYW5kbGVyID0gbnVsbDtcblx0XHRcdFx0XHR0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2sgPSBudWxsO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHRoaXMuZmFrZUVsZW0pIHtcblx0XHRcdFx0XHR0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLmZha2VFbGVtKTtcblx0XHRcdFx0XHR0aGlzLmZha2VFbGVtID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ3NlbGVjdFRhcmdldCcsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gc2VsZWN0VGFyZ2V0KCkge1xuXHRcdFx0XHR0aGlzLnNlbGVjdGVkVGV4dCA9ICgwLCBfc2VsZWN0Mi5kZWZhdWx0KSh0aGlzLnRhcmdldCk7XG5cdFx0XHRcdHRoaXMuY29weVRleHQoKTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdjb3B5VGV4dCcsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gY29weVRleHQoKSB7XG5cdFx0XHRcdHZhciBzdWNjZWVkZWQgPSB2b2lkIDA7XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRzdWNjZWVkZWQgPSBkb2N1bWVudC5leGVjQ29tbWFuZCh0aGlzLmFjdGlvbik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdHN1Y2NlZWRlZCA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5oYW5kbGVSZXN1bHQoc3VjY2VlZGVkKTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdoYW5kbGVSZXN1bHQnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVJlc3VsdChzdWNjZWVkZWQpIHtcblx0XHRcdFx0dGhpcy5lbWl0dGVyLmVtaXQoc3VjY2VlZGVkID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJywge1xuXHRcdFx0XHRcdGFjdGlvbjogdGhpcy5hY3Rpb24sXG5cdFx0XHRcdFx0dGV4dDogdGhpcy5zZWxlY3RlZFRleHQsXG5cdFx0XHRcdFx0dHJpZ2dlcjogdGhpcy50cmlnZ2VyLFxuXHRcdFx0XHRcdGNsZWFyU2VsZWN0aW9uOiB0aGlzLmNsZWFyU2VsZWN0aW9uLmJpbmQodGhpcylcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnY2xlYXJTZWxlY3Rpb24nLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uKCkge1xuXHRcdFx0XHRpZiAodGhpcy50cmlnZ2VyKSB7XG5cdFx0XHRcdFx0dGhpcy50cmlnZ2VyLmZvY3VzKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnZGVzdHJveScsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRcdFx0dGhpcy5yZW1vdmVGYWtlKCk7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnYWN0aW9uJyxcblx0XHRcdHNldDogZnVuY3Rpb24gc2V0KCkge1xuXHRcdFx0XHR2YXIgYWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnY29weSc7XG5cblx0XHRcdFx0dGhpcy5fYWN0aW9uID0gYWN0aW9uO1xuXG5cdFx0XHRcdGlmICh0aGlzLl9hY3Rpb24gIT09ICdjb3B5JyAmJiB0aGlzLl9hY3Rpb24gIT09ICdjdXQnKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFwiYWN0aW9uXCIgdmFsdWUsIHVzZSBlaXRoZXIgXCJjb3B5XCIgb3IgXCJjdXRcIicpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0Z2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9hY3Rpb247XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAndGFyZ2V0Jyxcblx0XHRcdHNldDogZnVuY3Rpb24gc2V0KHRhcmdldCkge1xuXHRcdFx0XHRpZiAodGFyZ2V0ICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRpZiAodGFyZ2V0ICYmICh0eXBlb2YgdGFyZ2V0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih0YXJnZXQpKSA9PT0gJ29iamVjdCcgJiYgdGFyZ2V0Lm5vZGVUeXBlID09PSAxKSB7XG5cdFx0XHRcdFx0XHRpZiAodGhpcy5hY3Rpb24gPT09ICdjb3B5JyAmJiB0YXJnZXQuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG5cdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignSW52YWxpZCBcInRhcmdldFwiIGF0dHJpYnV0ZS4gUGxlYXNlIHVzZSBcInJlYWRvbmx5XCIgaW5zdGVhZCBvZiBcImRpc2FibGVkXCIgYXR0cmlidXRlJyk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmICh0aGlzLmFjdGlvbiA9PT0gJ2N1dCcgJiYgKHRhcmdldC5oYXNBdHRyaWJ1dGUoJ3JlYWRvbmx5JykgfHwgdGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkpIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFwidGFyZ2V0XCIgYXR0cmlidXRlLiBZb3UgY2FuXFwndCBjdXQgdGV4dCBmcm9tIGVsZW1lbnRzIHdpdGggXCJyZWFkb25seVwiIG9yIFwiZGlzYWJsZWRcIiBhdHRyaWJ1dGVzJyk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHRoaXMuX3RhcmdldCA9IHRhcmdldDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFwidGFyZ2V0XCIgdmFsdWUsIHVzZSBhIHZhbGlkIEVsZW1lbnQnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX3RhcmdldDtcblx0XHRcdH1cblx0XHR9XSk7XG5cblx0XHRyZXR1cm4gQ2xpcGJvYXJkSlNBY3Rpb247XG5cdH0oKTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IENsaXBib2FyZEpTQWN0aW9uO1xufSk7XG5cbn0se1wic2VsZWN0XCI6NX1dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKFsnbW9kdWxlJywgJy4vY2xpcGJvYXJkLWFjdGlvbicsICd0aW55LWVtaXR0ZXInLCAnZ29vZC1saXN0ZW5lciddLCBmYWN0b3J5KTtcblx0fSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdGZhY3RvcnkobW9kdWxlLCByZXF1aXJlKCcuL2NsaXBib2FyZC1hY3Rpb24nKSwgcmVxdWlyZSgndGlueS1lbWl0dGVyJyksIHJlcXVpcmUoJ2dvb2QtbGlzdGVuZXInKSk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIG1vZCA9IHtcblx0XHRcdGV4cG9ydHM6IHt9XG5cdFx0fTtcblx0XHRmYWN0b3J5KG1vZCwgZ2xvYmFsLmNsaXBib2FyZEFjdGlvbiwgZ2xvYmFsLnRpbnlFbWl0dGVyLCBnbG9iYWwuZ29vZExpc3RlbmVyKTtcblx0XHRnbG9iYWwuY2xpcGJvYXJkID0gbW9kLmV4cG9ydHM7XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uIChtb2R1bGUsIF9jbGlwYm9hcmRBY3Rpb24sIF90aW55RW1pdHRlciwgX2dvb2RMaXN0ZW5lcikge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIF9jbGlwYm9hcmRBY3Rpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xpcGJvYXJkQWN0aW9uKTtcblxuXHR2YXIgX3RpbnlFbWl0dGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RpbnlFbWl0dGVyKTtcblxuXHR2YXIgX2dvb2RMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nb29kTGlzdGVuZXIpO1xuXG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdFx0cmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHtcblx0XHRcdGRlZmF1bHQ6IG9ialxuXHRcdH07XG5cdH1cblxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuXHRcdHJldHVybiB0eXBlb2Ygb2JqO1xuXHR9IDogZnVuY3Rpb24gKG9iaikge1xuXHRcdHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0XHRpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0XHR9XG5cdH1cblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHRcdGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuXHRcdFx0XHRkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG5cdFx0XHRcdGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcblx0XHRcdFx0aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdFx0XHRpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuXHRcdFx0aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG5cdFx0XHRyZXR1cm4gQ29uc3RydWN0b3I7XG5cdFx0fTtcblx0fSgpO1xuXG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcblx0XHRpZiAoIXNlbGYpIHtcblx0XHRcdHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHRcdGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpO1xuXHRcdH1cblxuXHRcdHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuXHRcdFx0Y29uc3RydWN0b3I6IHtcblx0XHRcdFx0dmFsdWU6IHN1YkNsYXNzLFxuXHRcdFx0XHRlbnVtZXJhYmxlOiBmYWxzZSxcblx0XHRcdFx0d3JpdGFibGU6IHRydWUsXG5cdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXG5cdHZhciBDbGlwYm9hcmRKUyA9IGZ1bmN0aW9uIChfRW1pdHRlcikge1xuXHRcdF9pbmhlcml0cyhDbGlwYm9hcmRKUywgX0VtaXR0ZXIpO1xuXG5cdFx0LyoqXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd8SFRNTEVsZW1lbnR8SFRNTENvbGxlY3Rpb258Tm9kZUxpc3R9IHRyaWdnZXJcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIENsaXBib2FyZEpTKHRyaWdnZXIsIG9wdGlvbnMpIHtcblx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbGlwYm9hcmRKUyk7XG5cblx0XHRcdHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDbGlwYm9hcmRKUy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENsaXBib2FyZEpTKSkuY2FsbCh0aGlzKSk7XG5cblx0XHRcdF90aGlzLnJlc29sdmVPcHRpb25zKG9wdGlvbnMpO1xuXHRcdFx0X3RoaXMubGlzdGVuQ2xpY2sodHJpZ2dlcik7XG5cdFx0XHRyZXR1cm4gX3RoaXM7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyBpZiBhdHRyaWJ1dGVzIHdvdWxkIGJlIHJlc29sdmVkIHVzaW5nIGludGVybmFsIHNldHRlciBmdW5jdGlvbnNcblx0XHQgKiBvciBjdXN0b20gZnVuY3Rpb25zIHRoYXQgd2VyZSBwYXNzZWQgaW4gdGhlIGNvbnN0cnVjdG9yLlxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdFx0ICovXG5cblxuXHRcdF9jcmVhdGVDbGFzcyhDbGlwYm9hcmRKUywgW3tcblx0XHRcdGtleTogJ3Jlc29sdmVPcHRpb25zJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiByZXNvbHZlT3B0aW9ucygpIHtcblx0XHRcdFx0dmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG5cdFx0XHRcdHRoaXMuYWN0aW9uID0gdHlwZW9mIG9wdGlvbnMuYWN0aW9uID09PSAnZnVuY3Rpb24nID8gb3B0aW9ucy5hY3Rpb24gOiB0aGlzLmRlZmF1bHRBY3Rpb247XG5cdFx0XHRcdHRoaXMudGFyZ2V0ID0gdHlwZW9mIG9wdGlvbnMudGFyZ2V0ID09PSAnZnVuY3Rpb24nID8gb3B0aW9ucy50YXJnZXQgOiB0aGlzLmRlZmF1bHRUYXJnZXQ7XG5cdFx0XHRcdHRoaXMudGV4dCA9IHR5cGVvZiBvcHRpb25zLnRleHQgPT09ICdmdW5jdGlvbicgPyBvcHRpb25zLnRleHQgOiB0aGlzLmRlZmF1bHRUZXh0O1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lciA9IF90eXBlb2Yob3B0aW9ucy5jb250YWluZXIpID09PSAnb2JqZWN0JyA/IG9wdGlvbnMuY29udGFpbmVyIDogZG9jdW1lbnQuYm9keTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdsaXN0ZW5DbGljaycsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gbGlzdGVuQ2xpY2sodHJpZ2dlcikge1xuXHRcdFx0XHR2YXIgX3RoaXMyID0gdGhpcztcblxuXHRcdFx0XHR0aGlzLmxpc3RlbmVyID0gKDAsIF9nb29kTGlzdGVuZXIyLmRlZmF1bHQpKHRyaWdnZXIsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0cmV0dXJuIF90aGlzMi5vbkNsaWNrKGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdvbkNsaWNrJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcblx0XHRcdFx0dmFyIHRyaWdnZXIgPSBlLmRlbGVnYXRlVGFyZ2V0IHx8IGUuY3VycmVudFRhcmdldDtcblxuXHRcdFx0XHRpZiAodGhpcy5jbGlwYm9hcmRBY3Rpb24pIHtcblx0XHRcdFx0XHR0aGlzLmNsaXBib2FyZEFjdGlvbiA9IG51bGw7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLmNsaXBib2FyZEFjdGlvbiA9IG5ldyBfY2xpcGJvYXJkQWN0aW9uMi5kZWZhdWx0KHtcblx0XHRcdFx0XHRhY3Rpb246IHRoaXMuYWN0aW9uKHRyaWdnZXIpLFxuXHRcdFx0XHRcdHRhcmdldDogdGhpcy50YXJnZXQodHJpZ2dlciksXG5cdFx0XHRcdFx0dGV4dDogdGhpcy50ZXh0KHRyaWdnZXIpLFxuXHRcdFx0XHRcdGNvbnRhaW5lcjogdGhpcy5jb250YWluZXIsXG5cdFx0XHRcdFx0dHJpZ2dlcjogdHJpZ2dlcixcblx0XHRcdFx0XHRlbWl0dGVyOiB0aGlzXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ2RlZmF1bHRBY3Rpb24nLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGRlZmF1bHRBY3Rpb24odHJpZ2dlcikge1xuXHRcdFx0XHRyZXR1cm4gZ2V0QXR0cmlidXRlVmFsdWUoJ2FjdGlvbicsIHRyaWdnZXIpO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ2RlZmF1bHRUYXJnZXQnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGRlZmF1bHRUYXJnZXQodHJpZ2dlcikge1xuXHRcdFx0XHR2YXIgc2VsZWN0b3IgPSBnZXRBdHRyaWJ1dGVWYWx1ZSgndGFyZ2V0JywgdHJpZ2dlcik7XG5cblx0XHRcdFx0aWYgKHNlbGVjdG9yKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnZGVmYXVsdFRleHQnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGRlZmF1bHRUZXh0KHRyaWdnZXIpIHtcblx0XHRcdFx0cmV0dXJuIGdldEF0dHJpYnV0ZVZhbHVlKCd0ZXh0JywgdHJpZ2dlcik7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnZGVzdHJveScsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRcdFx0dGhpcy5saXN0ZW5lci5kZXN0cm95KCk7XG5cblx0XHRcdFx0aWYgKHRoaXMuY2xpcGJvYXJkQWN0aW9uKSB7XG5cdFx0XHRcdFx0dGhpcy5jbGlwYm9hcmRBY3Rpb24uZGVzdHJveSgpO1xuXHRcdFx0XHRcdHRoaXMuY2xpcGJvYXJkQWN0aW9uID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1dLCBbe1xuXHRcdFx0a2V5OiAnaXNTdXBwb3J0ZWQnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkge1xuXHRcdFx0XHR2YXIgYWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbJ2NvcHknLCAnY3V0J107XG5cblx0XHRcdFx0dmFyIGFjdGlvbnMgPSB0eXBlb2YgYWN0aW9uID09PSAnc3RyaW5nJyA/IFthY3Rpb25dIDogYWN0aW9uO1xuXHRcdFx0XHR2YXIgc3VwcG9ydCA9ICEhZG9jdW1lbnQucXVlcnlDb21tYW5kU3VwcG9ydGVkO1xuXG5cdFx0XHRcdGFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uKSB7XG5cdFx0XHRcdFx0c3VwcG9ydCA9IHN1cHBvcnQgJiYgISFkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoYWN0aW9uKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0cmV0dXJuIHN1cHBvcnQ7XG5cdFx0XHR9XG5cdFx0fV0pO1xuXG5cdFx0cmV0dXJuIENsaXBib2FyZEpTO1xuXHR9KF90aW55RW1pdHRlcjIuZGVmYXVsdCk7XG5cblx0LyoqXG5cdCAqIEhlbHBlciBmdW5jdGlvbiB0byByZXRyaWV2ZSBhdHRyaWJ1dGUgdmFsdWUuXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdWZmaXhcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRBdHRyaWJ1dGVWYWx1ZShzdWZmaXgsIGVsZW1lbnQpIHtcblx0XHR2YXIgYXR0cmlidXRlID0gJ2RhdGEtY2xpcGJvYXJkLScgKyBzdWZmaXg7XG5cblx0XHRpZiAoIWVsZW1lbnQuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZSkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRyZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTtcblx0fVxuXG5cdG1vZHVsZS5leHBvcnRzID0gQ2xpcGJvYXJkSlM7XG59KTtcblxufSx7XCIuL2NsaXBib2FyZC1hY3Rpb25cIjo3LFwiZ29vZC1saXN0ZW5lclwiOjQsXCJ0aW55LWVtaXR0ZXJcIjo2fV19LHt9LFs4XSkoOClcbn0pO1xuXG4oIGZ1bmN0aW9uKCAkICkge1xuXG5cdCQoICcuc3VpLTItMi00IC5zdWktY29kZS1zbmlwcGV0Om5vdCguc3VpLW5vLWNvcHkpJyApLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdHZhciBpZCA9ICdzdWktY29kZS1zbmlwcGV0LScgKyBpLFxuXHRcdFx0YnV0dG9uID0gJzxidXR0b24gY2xhc3M9XCJzdWktYnV0dG9uXCIgZGF0YS1jbGlwYm9hcmQtdGFyZ2V0PVwiIycgKyBpZCArICdcIj5Db3B5PC9idXR0b24+JztcblxuXHRcdCQoIHRoaXMgKS53cmFwKCAnPGRpdiBjbGFzcz1cInN1aS1jb2RlLXNuaXBwZXQtd3JhcHBlclwiPjwvZGl2PicgKTtcblx0XHQkKCB0aGlzICkuYXR0ciggJ2lkJywgaWQgKS5hZnRlciggYnV0dG9uICk7XG5cdH0pO1xuXG5cdCQoIGRvY3VtZW50ICkucmVhZHkoIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBidG5zID0gJCggJ1tkYXRhLWNsaXBib2FyZC10YXJnZXRdJyApO1xuXHRcdHZhciBjbGlwYm9hcmQgPSBuZXcgQ2xpcGJvYXJkSlMoICdbZGF0YS1jbGlwYm9hcmQtdGFyZ2V0XScgKTtcblxuXHRcdGlmICggYnRucy5sZW5ndGggKSB7XG5cblx0XHRcdGNsaXBib2FyZC5vbiggJ3N1Y2Nlc3MnLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0ZS5jbGVhclNlbGVjdGlvbigpO1xuXHRcdFx0XHRzaG93VG9vbHRpcCggZS50cmlnZ2VyLCAnQ29waWVkIScgKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRidG5zLm1vdXNlbGVhdmUoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlQ2xhc3MoICdzdWktdG9vbHRpcCcgKTtcblx0XHRcdFx0JCggdGhpcyApLnJlbW92ZUF0dHIoICdhcmlhLWxhYmVsJyApO1xuXHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlQXR0ciggJ2RhdGEtdG9vbHRpcCcgKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRmdW5jdGlvbiBzaG93VG9vbHRpcCggZSwgbXNnICkge1xuXHRcdFx0XHQkKCBlICkuYWRkQ2xhc3MoICdzdWktdG9vbHRpcCcgKTtcblx0XHRcdFx0JCggZSApLmF0dHIoICdhcmlhLWxhYmVsJywgbXNnICk7XG5cdFx0XHRcdCQoIGUgKS5hdHRyKCAnZGF0YS10b29sdGlwJywgbXNnICk7XG5cdFx0XHR9XG5cblx0XHR9XG5cblx0fSk7XG5cbn0oIGpRdWVyeSApICk7XG5cbiggZnVuY3Rpb24oICQgKSB7XG5cblx0Ly8gRW5hYmxlIHN0cmljdCBtb2RlLlxuXHQndXNlIHN0cmljdCc7XG5cblx0Ly8gRGVmaW5lIGdsb2JhbCBTVUkgb2JqZWN0IGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG5cdGlmICggJ29iamVjdCcgIT09IHR5cGVvZiB3aW5kb3cuU1VJICkge1xuXHRcdHdpbmRvdy5TVUkgPSB7fTtcblx0fVxuXG5cdFNVSS5saW5rRHJvcGRvd24gPSBmdW5jdGlvbigpIHtcblxuXHRcdGZ1bmN0aW9uIGNsb3NlQWxsRHJvcGRvd25zKCAkZXhjZXB0ICkge1xuXHRcdFx0dmFyICRkcm9wZG93bnMgPSAkKCAnLnN1aS0yLTItNCAuc3VpLWRyb3Bkb3duJyApO1xuXG5cdFx0XHRpZiAoICRleGNlcHQgKSB7XG5cdFx0XHRcdCRkcm9wZG93bnMgPSAkZHJvcGRvd25zLm5vdCggJGV4Y2VwdCApO1xuXHRcdFx0fVxuXG5cdFx0XHQkZHJvcGRvd25zLnJlbW92ZUNsYXNzKCAnb3BlbicgKTtcblx0XHR9XG5cblx0XHQkKCAnYm9keScgKS5jbGljayggZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHR2YXIgJHRoaXMgPSAkKCBlLnRhcmdldCApLFxuXHRcdFx0XHQkZWwgPSAkdGhpcy5jbG9zZXN0KCAnLnN1aS1kcm9wZG93bicgKTtcblxuXHRcdFx0aWYgKCAwID09ICRlbC5sZW5ndGggKSB7XG5cdFx0XHRcdGNsb3NlQWxsRHJvcGRvd25zKCk7XG5cdFx0XHR9IGVsc2UgaWYgKCAkdGhpcy5pcyggJ2EnICkgKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHRjbG9zZUFsbERyb3Bkb3ducyggJGVsICk7XG5cblx0XHRcdFx0JGVsLnRvZ2dsZUNsYXNzKCAnb3BlbicgKTtcblx0XHRcdH1cblxuXHRcdH0pO1xuXG5cdH07XG5cblx0U1VJLmxpbmtEcm9wZG93bigpO1xuXG59KCBqUXVlcnkgKSApO1xuXG4oIGZ1bmN0aW9uKCAkICkge1xuXG5cdC8vIEVuYWJsZSBzdHJpY3QgbW9kZS5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdC8vIERlZmluZSBnbG9iYWwgU1VJIG9iamVjdCBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuXHRpZiAoICdvYmplY3QnICE9PSB0eXBlb2Ygd2luZG93LlNVSSApIHtcblx0XHR3aW5kb3cuU1VJID0ge307XG5cdH1cblxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtYWluRWwgPSAkKCAnLnN1aS13cmFwJyApO1xuXHRcdFNVSS5kaWFsb2dzID0ge307XG5cblx0XHQvLyBJbml0IHRoZSBkaWFsb2cgZWxlbWVudHMuXG5cdFx0JCggJy5zdWktZGlhbG9nJyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0U1VJLmRpYWxvZ3NbdGhpcy5pZF0gPSBuZXcgQTExeURpYWxvZyggdGhpcywgbWFpbkVsICk7XG5cdFx0fSk7XG5cblx0fSk7XG5cbn0oIGpRdWVyeSApICk7XG5cbiggZnVuY3Rpb24oICQgKSB7XG5cblx0Ly8gVGhpcyB3aWxsIGF1dG8gaGlkZSB0aGUgdG9wIG5vdGljZSBpZiB0aGUgY2xhc3NlcyAuc3VpLWNhbi1kaXNtaXNzIG9yIC5zdWktY2FudC1kaXNtaXNzIGFyZW4ndCBwcmVzZW50LlxuXHQkKCAnLnN1aS0yLTItNCAuc3VpLW5vdGljZS10b3A6bm90KC5zdWktY2FuLWRpc21pc3MsIC5zdWktY2FudC1kaXNtaXNzKScgKS5kZWxheSggMzAwMCApLnNsaWRlVXAoICdzbG93JyApO1xuXG5cdCQoICcuc3VpLTItMi00IC5zdWktbm90aWNlLWRpc21pc3MnICkuY2xpY2soIGZ1bmN0aW9uKCBlICkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAkKCB0aGlzICkucGFyZW50KCkuc3RvcCgpLnNsaWRlVXAoICdzbG93JyApO1xuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblxufSggalF1ZXJ5ICkgKTtcblxuKCBmdW5jdGlvbiggJCApIHtcblxuXHQvLyBFbmFibGUgc3RyaWN0IG1vZGUuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvLyBEZWZpbmUgZ2xvYmFsIFNVSSBvYmplY3QgaWYgaXQgZG9lc24ndCBleGlzdC5cblx0aWYgKCAnb2JqZWN0JyAhPT0gdHlwZW9mIHdpbmRvdy5TVUkgKSB7XG5cdFx0d2luZG93LlNVSSA9IHt9O1xuXHR9XG5cblx0U1VJLnNob3dIaWRlUGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblxuXHRcdCQoICcuc3VpLTItMi00IC5zdWktcGFzc3dvcmQtZ3JvdXAnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgJHRoaXMgPSAkKCB0aGlzICksXG5cdFx0XHRcdCRpbnB1dCA9ICR0aGlzLmZpbmQoICdpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nICksXG5cdFx0XHRcdCRidXR0b24gPSAkdGhpcy5maW5kKCAnLnN1aS1wYXNzd29yZC10b2dnbGUnICk7XG5cblx0XHRcdCRidXR0b24ub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgJGlucHV0VHlwZSA9ICcnLFxuXHRcdFx0XHRcdCRyZXBJbnB1dCA9ICcnO1xuXG5cdFx0XHRcdCQoIHRoaXMgKS50b2dnbGVDbGFzcyggJ2lzLXZpc2libGUnICk7XG5cblx0XHRcdFx0aWYgKCAkaW5wdXQuaGFzQ2xhc3MoICdpcy12aXNpYmxlJyApICkge1xuXHRcdFx0XHRcdCRpbnB1dC5yZW1vdmVDbGFzcyggJ2lzLXZpc2libGUnICkuYWRkQ2xhc3MoICdpcy1oaWRkZW4nICk7XG5cdFx0XHRcdFx0JGlucHV0VHlwZSA9ICdwYXNzd29yZCc7XG5cdFx0XHRcdFx0JGJ1dHRvbi5maW5kKCAnPiAuc3VpLXNjcmVlbi1yZWFkZXItdGV4dCcgKS50ZXh0KCAnU2hvdyBQYXNzd29yZCcgKTtcblx0XHRcdFx0XHQkYnV0dG9uLmZpbmQoICc+IGknICkucmVtb3ZlQ2xhc3MoICdzdWktaWNvLWV5ZS1oaWRlJyApLmFkZENsYXNzKCAnc3VpLWljby1leWUnICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGlucHV0LnJlbW92ZUNsYXNzKCAnaXMtaGlkZGVuJyApLmFkZENsYXNzKCAnaXMtdmlzaWJsZScgKTtcblx0XHRcdFx0XHQkaW5wdXRUeXBlID0gJ3RleHQnO1xuXHRcdFx0XHRcdCRidXR0b24uZmluZCggJz4gLnN1aS1zY3JlZW4tcmVhZGVyLXRleHQnICkudGV4dCggJ0hpZGUgUGFzc3dvcmQnICk7XG5cdFx0XHRcdFx0JGJ1dHRvbi5maW5kKCAnPiBpJyApLnJlbW92ZUNsYXNzKCAnc3VpLWljby1leWUnICkuYWRkQ2xhc3MoICdzdWktaWNvLWV5ZS1oaWRlJyApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JHJlcElucHV0ID0gJCggJzxpbnB1dCB0eXBlPScgKyAkaW5wdXRUeXBlICsgJyAvPicgKVxuXHRcdFx0XHRcdC5hdHRyKCAnaWQnLCAkaW5wdXQuYXR0ciggJ2lkJyApIClcblx0XHRcdFx0XHQuYXR0ciggJ25hbWUnLCAkaW5wdXQuYXR0ciggJ25hbWUnICkgKVxuXHRcdFx0XHRcdC5hdHRyKCAnY2xhc3MnLCAkaW5wdXQuYXR0ciggJ2NsYXNzJyApIClcblx0XHRcdFx0XHQudmFsKCAkaW5wdXQudmFsKCkgKVxuXHRcdFx0XHRcdC5pbnNlcnRCZWZvcmUoICRpbnB1dCApO1xuXG5cdFx0XHRcdCRpbnB1dC5yZW1vdmUoKTtcblx0XHRcdFx0JGlucHV0ID0gJHJlcElucHV0O1xuXHRcdFx0XHQkaW5wdXQuZm9jdXMoKTtcblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9O1xuXG5cdFNVSS5zaG93SGlkZVBhc3N3b3JkKCk7XG5cbn0oIGpRdWVyeSApICk7XG5cbiggZnVuY3Rpb24oICQgKSB7XG5cbiAgICAvLyBFbmFibGUgc3RyaWN0IG1vZGUuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gRGVmaW5lIGdsb2JhbCBTVUkgb2JqZWN0IGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgaWYgKCAnb2JqZWN0JyAhPT0gdHlwZW9mIHdpbmRvdy5TVUkgKSB7XG4gICAgICAgIHdpbmRvdy5TVUkgPSB7fTtcbiAgICB9XG5cbiAgICBTVUkubG9hZENpcmNsZVNjb3JlID0gZnVuY3Rpb24oIGVsICkge1xuXHRcdHZhciBkaWFsICAgICAgICAgID0gJCggZWwgKS5maW5kKCAnc3ZnIGNpcmNsZTpsYXN0LWNoaWxkJyApLFxuXHRcdFx0c2NvcmUgICAgICAgICA9ICQoIGVsICkuZGF0YSggJ3Njb3JlJyApLFxuXHRcdFx0cmFkaXVzICAgICAgICA9IDQyLFxuXHRcdFx0Y2lyY3VtZmVyZW5jZSA9IDIgKiBNYXRoLlBJICogcmFkaXVzLFxuXHRcdFx0ZGFzaExlbmd0aCAgICA9ICggY2lyY3VtZmVyZW5jZSAvIDEwMCApICogc2NvcmUsXG5cdFx0XHRnYXBMZW5ndGggICAgID0gZGFzaExlbmd0aCAqIDEwMCAtIHNjb3JlLFxuXHRcdFx0c3ZnICAgICAgICAgICA9XG5cdFx0XHRcdCc8c3ZnIHZpZXdib3g9XCIwIDAgMTAwIDEwMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cXG4nICtcblx0XHRcdFx0XHQnPGNpcmNsZSBzdHJva2Utd2lkdGg9XCIxNlwiIGN4PVwiNTBcIiBjeT1cIjUwXCIgcj1cIjQyXCIgLz5cXG4nICtcblx0XHRcdFx0XHQnPGNpcmNsZSBzdHJva2Utd2lkdGg9XCIxNlwiIGN4PVwiNTBcIiBjeT1cIjUwXCIgcj1cIjQyXCIgc3Ryb2tlLWRhc2hhcnJheT1cIjAsJyArIGdhcExlbmd0aCArICdcIiAvPlxcbicgK1xuXHRcdFx0XHQnPC9zdmc+XFxuJyArXG5cdFx0XHRcdCc8c3BhbiBjbGFzcz1cInN1aS1jaXJjbGUtc2NvcmUtbGFiZWxcIj4nICsgc2NvcmUgKyAnPC9zcGFuPlxcbic7XG5cblx0XHQvLyBBZGQgc3ZnIHRvIHNjb3JlIGVsZW1lbnQsIGFkZCBsb2FkZWQgY2xhc3MsICYgY2hhbmdlIHN0cm9rZS1kYXNoYXJyYXkgdG8gcmVwcmVzZW50IHRhcmdldCBzY29yZS9wZXJjZW50YWdlLlxuXHRcdCQoIGVsICkucHJlcGVuZCggc3ZnICkuYWRkQ2xhc3MoICdsb2FkZWQnICkuZmluZCggJ2NpcmNsZTpsYXN0LWNoaWxkJyApLmNzcyggJ2FuaW1hdGlvbicsICdzdWknICsgc2NvcmUgKyAnIDNzIGZvcndhcmRzJyApO1xuXHR9O1xuXG5cdCQoICcuc3VpLTItMi00IC5zdWktY2lyY2xlLXNjb3JlJyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFNVSS5sb2FkQ2lyY2xlU2NvcmUoIHRoaXMgKTtcblx0fSk7XG5cbn0oIGpRdWVyeSApICk7XG5cbiggZnVuY3Rpb24oICQgKSB7XG5cbiAgICAvLyBFbmFibGUgc3RyaWN0IG1vZGUuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gRGVmaW5lIGdsb2JhbCBTVUkgb2JqZWN0IGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgaWYgKCAnb2JqZWN0JyAhPT0gdHlwZW9mIHdpbmRvdy5TVUkgKSB7XG4gICAgICAgIHdpbmRvdy5TVUkgPSB7fTtcbiAgICB9XG5cbiAgICBTVUkuc3VpU2VsZWN0ID0gZnVuY3Rpb24oIGVsICkge1xuXHRcdHZhciBqcSA9ICQoIGVsICksXG5cdFx0XHR3cmFwLCBoYW5kbGUsIGxpc3QsIHZhbHVlLCBpdGVtcztcblxuXHRcdGlmICggISBqcS5pcyggJ3NlbGVjdCcgKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIGpxLmNsb3Nlc3QoICcuc2VsZWN0LWNvbnRhaW5lcicgKS5sZW5ndGggfHwganEuZGF0YSggJ3NlbGVjdDInICkgfHwganEuaXMoICcuc3VpLXNlbGVjdCcgKSAgfHwganEuaXMoICcubm9uZS1zdWknICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHRoZSBET00gZWxlbWVudHMgdG8gc3R5bGUgdGhlIHNlbGVjdCBsaXN0LlxuXHRcdGZ1bmN0aW9uIHNldHVwRWxlbWVudCgpIHtcblx0XHRcdGpxLndyYXAoICc8ZGl2IGNsYXNzPVwic2VsZWN0LWNvbnRhaW5lclwiPicgKTtcblx0XHRcdGpxLmhpZGUoKTtcblxuXHRcdFx0d3JhcCA9IGpxLnBhcmVudCgpO1xuXHRcdFx0aGFuZGxlID0gJCggJzxzcGFuIGNsYXNzPVwiZHJvcGRvd24taGFuZGxlXCI+PGkgY2xhc3M9XCJzdWktaWNvbi1jaGV2cm9uLWRvd25cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9zcGFuPicgKS5wcmVwZW5kVG8oIHdyYXAgKTtcblx0XHRcdGxpc3QgPSAkKCAnPGRpdiBjbGFzcz1cInNlbGVjdC1saXN0LWNvbnRhaW5lclwiPjwvZGl2PicgKS5hcHBlbmRUbyggd3JhcCApO1xuXHRcdFx0dmFsdWUgPSAkKCAnPGRpdiBjbGFzcz1cImxpc3QtdmFsdWVcIj4mbmJzcDs8L2Rpdj4nICkuYXBwZW5kVG8oIGxpc3QgKTtcblx0XHRcdGl0ZW1zID0gJCggJzx1bCBjbGFzcz1cImxpc3QtcmVzdWx0c1wiPjwvdWw+JyApLmFwcGVuZFRvKCBsaXN0ICk7XG5cblx0XHRcdHdyYXAuYWRkQ2xhc3MoIGpxLmF0dHIoICdjbGFzcycgKSApO1xuXHRcdH1cblxuXHRcdC8vIFdoZW4gY2hhbmdpbmcgc2VsZWN0aW9uIHVzaW5nIEpTLCB5b3UgbmVlZCB0byB0cmlnZ2VyIGEgJ3N1aTpjaGFuZ2UnIGV2ZW50XG5cdFx0Ly8gZWc6ICQoJ3NlbGVjdCcpLnZhbCgnNCcpLnRyaWdnZXIoJ3N1aTpjaGFuZ2UnKVxuXHRcdGZ1bmN0aW9uIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSgpIHtcblx0XHRcdGpxLm9uKCAnc3VpOmNoYW5nZScsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIFdlIG5lZWQgdG8gcmUtcG9wdWxhdGVMaXN0IHRvIGhhbmRsZSBkeW5hbWljIHNlbGVjdCBvcHRpb25zIGFkZGVkIHZpYSBKUy9hamF4LlxuXHRcdFx0XHRwb3B1bGF0ZUxpc3QoKTtcblx0XHRcdFx0aXRlbXMuZmluZCggJ2xpJyApLm5vdCggJy5vcHRncm91cC1sYWJlbCcgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24gb25JdGVtQ2xpY2soIGV2ICkge1xuXHRcdFx0XHRcdHZhciBvcHQgPSAkKCBldi50YXJnZXQgKTtcblx0XHRcdFx0XHRzZWxlY3RJdGVtKCBvcHQsIGZhbHNlICk7XG5cdFx0XHRcdFx0aGFuZGxlVmFsdWUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyBBZGQgYWxsIHRoZSBvcHRpb25zIHRvIHRoZSBuZXcgRE9NIGVsZW1lbnRzLlxuXHRcdGZ1bmN0aW9uIHBvcHVsYXRlTGlzdCgpIHtcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IGpxLmNoaWxkcmVuKCk7XG5cdFx0XHRpdGVtcy5lbXB0eSgpO1xuICAgICAgICAgICAgY2hpbGRyZW4uZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdCA9ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbSxcblx0XHRcdFx0XHRvcHRncm91cCA9ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0R3JvdXBJdGVtLFxuICAgICAgICAgICAgICAgICAgICAkbGFiZWw7XG4gICAgICAgICAgICAgICAgaWYgKCAnT1BUSU9OJyA9PSAkKCB0aGlzICkucHJvcCAoICd0YWdOYW1lJyApICkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtID0gJCggJzxsaT48L2xpPicgKS5hcHBlbmRUbyggaXRlbXMgKTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS50ZXh0KCBvcHQudGV4dCgpICk7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uZGF0YSggJ3ZhbHVlJywgb3B0LnZhbCgpICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBvcHQudmFsKCkgPT0ganEudmFsKCkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RJdGVtKCBpdGVtLCB0cnVlICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvcHRHcm91cEl0ZW0gPSAkKCAnPHVsPjwvdWw+JyApLmFwcGVuZFRvKCBpdGVtcyApO1xuICAgICAgICAgICAgICAgICAgICAkbGFiZWwgPSAkKCAnPGxpIGNsYXNzPVwib3B0Z3JvdXAtbGFiZWxcIj48L2xpPicgKS50ZXh0KCBvcHRncm91cC5wcm9wKCAnbGFiZWwnICkgKTtcblxuICAgICAgICAgICAgICAgICAgICBvcHRHcm91cEl0ZW0uaHRtbCggJGxhYmVsICk7XG4gICAgICAgICAgICAgICAgICAgIG9wdEdyb3VwSXRlbS5hZGRDbGFzcyggJ29wdGdyb3VwJyApO1xuXG4gICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwLmZpbmQoICdvcHRpb24nICkuZWFjaCggZnVuY3Rpb24gb25Qb3B1bGF0ZUxvb3AoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0ID0gJCggdGhpcyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gJCggJzxsaT48L2xpPicgKS5hcHBlbmRUbyggb3B0R3JvdXBJdGVtICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnRleHQoIG9wdC50ZXh0KCkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZGF0YSggJ3ZhbHVlJywgb3B0LnZhbCgpICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggb3B0LnZhbCgpID09IGpxLnZhbCgpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEl0ZW0oIGl0ZW0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblx0XHR9XG5cblx0XHQvLyBDaGVja3MgdGhlIG9wdGlvbiB2YWx1ZSBmb3IgYSBsaW5rLlxuXHRcdGZ1bmN0aW9uIGhhbmRsZVZhbHVlKCkge1xuXHRcdFx0dmFyIHZhbCA9IGpxWzBdLnZhbHVlO1xuXG5cdFx0XHQvLyBJZiBvcHRpb24gaXMgbGluaywgbmF2aWdhdGUgdG8gaXQuXG5cdFx0XHRpZiAoIHZhbC5tYXRjaCggJ15odHRwcz86XFwvXFwvfCMnICkgKSB7XG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdmFsO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFRvZ2dsZSB0aGUgZHJvcGRvd24gc3RhdGUgYmV0d2VlbiBvcGVuL2Nsb3NlZC5cblx0XHRmdW5jdGlvbiBzdGF0ZVRvZ2dsZSgpIHtcblx0XHRcdGlmICggd3JhcC5maW5kKCAnc2VsZWN0JyApLmlzKCAnOmRpc2FibGVkJyApICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZiAoICEgd3JhcC5oYXNDbGFzcyggJ2FjdGl2ZScgKSApIHtcblx0XHRcdFx0c3RhdGVPcGVuKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzdGF0ZUNsb3NlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2xvc2UgdGhlIGRyb3Bkb3duIGxpc3QuXG5cdFx0ZnVuY3Rpb24gc3RhdGVDbG9zZSggaXRlbSApIHtcblx0XHRcdGlmICggISBpdGVtICkge1xuXHRcdFx0XHRpdGVtID0gd3JhcDtcblx0XHRcdH1cblxuXHRcdFx0aXRlbS5yZW1vdmVDbGFzcyggJ2FjdGl2ZScgKTtcblx0XHRcdGl0ZW0uY2xvc2VzdCggJ3RyJyApLnJlbW92ZUNsYXNzKCAnc2VsZWN0LW9wZW4nICk7XG5cdFx0fVxuXG5cdFx0Ly8gT3BlbiB0aGUgZHJvcGRvd24gbGlzdC5cblx0XHRmdW5jdGlvbiBzdGF0ZU9wZW4oKSB7XG5cdFx0XHQkKCAnLnNlbGVjdC1jb250YWluZXIuYWN0aXZlJyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzdGF0ZUNsb3NlKCAkKCB0aGlzICkgKTtcblx0XHRcdH0pO1xuXG5cdFx0XHR3cmFwLmFkZENsYXNzKCAnYWN0aXZlJyApO1xuXHRcdFx0d3JhcC5jbG9zZXN0KCAndHInICkuYWRkQ2xhc3MoICdzZWxlY3Qtb3BlbicgKTtcblx0XHR9XG5cblx0XHQvLyBWaXN1YWxseSBtYXJrIHRoZSBzcGVjaWZpZWQgb3B0aW9uIGFzIFwic2VsZWN0ZWRcIi5cblx0XHRmdW5jdGlvbiBzZWxlY3RJdGVtKCBvcHQsIGlzSW5pdCApIHtcblx0XHRcdGlzSW5pdCA9ICd1bmRlZmluZWQnID09PSB0eXBlb2YgaXNJbml0ID8gZmFsc2UgOiBpc0luaXQ7XG5cdFx0XHR2YWx1ZS50ZXh0KCBvcHQudGV4dCgpICk7XG5cdFx0XHQkKCAnLmN1cnJlbnQnLCBpdGVtcyApLnJlbW92ZUNsYXNzKCAnY3VycmVudCcgKTtcblx0XHRcdG9wdC5hZGRDbGFzcyggJ2N1cnJlbnQnICk7XG5cdFx0XHRzdGF0ZUNsb3NlKCk7XG5cblx0XHRcdC8vIEFsc28gdXBkYXRlIHRoZSBzZWxlY3QgbGlzdCB2YWx1ZS5cblx0XHRcdGpxLnZhbCggb3B0LmRhdGEoICd2YWx1ZScgKSApO1xuXG5cdFx0XHRpZiAoICEgaXNJbml0ICkge1xuXHRcdFx0XHRqcS50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0Ly8gRWxlbWVudCBjb25zdHJ1Y3Rvci5cblx0XHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdFx0dmFyIHNlbGVjdElEO1xuXG5cdFx0XHRzZXR1cEVsZW1lbnQoKTtcblx0XHRcdHBvcHVsYXRlTGlzdCgpO1xuXHRcdFx0aGFuZGxlU2VsZWN0aW9uQ2hhbmdlKCk7XG5cblx0XHRcdGl0ZW1zLmZpbmQoICdsaScgKS5ub3QoICcub3B0Z3JvdXAtbGFiZWwnICkub24oICdjbGljaycsIGZ1bmN0aW9uIG9uSXRlbUNsaWNrKCBldiApIHtcblx0XHRcdFx0dmFyIG9wdCA9ICQoIGV2LnRhcmdldCApO1xuXHRcdFx0XHRzZWxlY3RJdGVtKCBvcHQsIGZhbHNlICk7XG5cdFx0XHRcdGhhbmRsZVZhbHVlKCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0aGFuZGxlLm9uKCAnY2xpY2snLCBzdGF0ZVRvZ2dsZSApO1xuXHRcdFx0dmFsdWUub24oICdjbGljaycsIHN0YXRlVG9nZ2xlICk7XG5cdFx0XHRqcS5vbiggJ2ZvY3VzJywgc3RhdGVPcGVuICk7XG5cblx0XHRcdCQoIGRvY3VtZW50ICkuY2xpY2soIGZ1bmN0aW9uIG9uT3V0c2lkZUNsaWNrKCBldiApIHtcblx0XHRcdFx0dmFyIGpxID0gJCggZXYudGFyZ2V0ICksXG5cdFx0XHRcdFx0c2VsZWN0SUQ7XG5cblx0XHRcdFx0aWYgKCBqcS5jbG9zZXN0KCAnLnNlbGVjdC1jb250YWluZXInICkubGVuZ3RoICkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICgganEuaXMoICdsYWJlbCcgKSAmJiBqcS5hdHRyKCAnZm9yJyApICkge1xuXHRcdFx0XHRcdHNlbGVjdElEID0ganEuYXR0ciggJ2ZvcicgKTtcblxuXHRcdFx0XHRcdGlmICggJCggJ3NlbGVjdCMnICsgc2VsZWN0SUQgKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0c3RhdGVDbG9zZSgpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHNlbGVjdElEID0ganEuYXR0ciggJ2lkJyApO1xuXG5cdFx0XHRpZiAoIHNlbGVjdElEICkge1xuXHRcdFx0XHQkKCAnbGFiZWxbZm9yPScgKyBzZWxlY3RJRCArICddJyApLm9uKCAnY2xpY2snLCBzdGF0ZU9wZW4gKTtcblx0XHRcdH1cblxuXHRcdFx0anEuYWRkQ2xhc3MoICdzdWktc3R5bGVkJyApO1xuXHRcdH1cblxuXHRcdGluaXQoKTtcblxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8vIENvbnZlcnQgYWxsIHNlbGVjdCBsaXN0cyB0byBmYW5jeSBzdWkgU2VsZWN0IGxpc3RzLlxuXHQkKCAnLnN1aS0yLTItNCBzZWxlY3QnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0U1VJLnN1aVNlbGVjdCggdGhpcyApO1xuXHR9KTtcblxufSggalF1ZXJ5ICkgKTtcblxuLyohXG4gKiBTZWxlY3QyIDQuMC41XG4gKiBodHRwczovL3NlbGVjdDIuZ2l0aHViLmlvXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwczovL2dpdGh1Yi5jb20vc2VsZWN0Mi9zZWxlY3QyL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWRcbiAqXG4gKiBNb2RpZmllZCBsb2dpYy9mdW5jdGlvbixldGMgYmVzaWRlcyBmb3JtYXR0aW5nIHNob3VsZCBiZSBtYXJrZWQgd2l0aCAvL1NVSS1TRUxFQ1QyXG4gKiBGb3IgZWFzeSBkZWJ1Z2dpbmcgcHJvY2VzcyBvciB1cGRhdGUgdXBzdHJlYW0gb2Ygc2VsZWN0XG4gKi9cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIC8vIFNVSS1TRUxFQ1QyIGRpc2FibGUgQU1EIGFuZCBtb2R1bGUgZXhwb3J0c1xuICAgIGlmIChmYWxzZSAmJiB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmIChmYWxzZSAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICAvLyBOb2RlL0NvbW1vbkpTXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHJvb3QsIGpRdWVyeSkge1xuICAgICAgICAgICAgaWYgKGpRdWVyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVxdWlyZSgnalF1ZXJ5JykgcmV0dXJucyBhIGZhY3RvcnkgdGhhdCByZXF1aXJlcyB3aW5kb3cgdG9cbiAgICAgICAgICAgICAgICAvLyBidWlsZCBhIGpRdWVyeSBpbnN0YW5jZSwgd2Ugbm9ybWFsaXplIGhvdyB3ZSB1c2UgbW9kdWxlc1xuICAgICAgICAgICAgICAgIC8vIHRoYXQgcmVxdWlyZSB0aGlzIHBhdHRlcm4gYnV0IHRoZSB3aW5kb3cgcHJvdmlkZWQgaXMgYSBub29wXG4gICAgICAgICAgICAgICAgLy8gaWYgaXQncyBkZWZpbmVkIChob3cganF1ZXJ5IHdvcmtzKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkgPSByZXF1aXJlKCdqcXVlcnknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSA9IHJlcXVpcmUoJ2pxdWVyeScpKHJvb3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZhY3RvcnkoalF1ZXJ5KTtcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnk7XG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgICAgIGZhY3RvcnkoalF1ZXJ5KTtcbiAgICB9XG59IChmdW5jdGlvbiAoalF1ZXJ5KSB7XG4gICAgLy8gVGhpcyBpcyBuZWVkZWQgc28gd2UgY2FuIGNhdGNoIHRoZSBBTUQgbG9hZGVyIGNvbmZpZ3VyYXRpb24gYW5kIHVzZSBpdFxuICAgIC8vIFRoZSBpbm5lciBmaWxlIHNob3VsZCBiZSB3cmFwcGVkIChieSBgYmFubmVyLnN0YXJ0LmpzYCkgaW4gYSBmdW5jdGlvbiB0aGF0XG4gICAgLy8gcmV0dXJucyB0aGUgQU1EIGxvYWRlciByZWZlcmVuY2VzLlxuICAgIHZhciBTMiA9KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gUmVzdG9yZSB0aGUgU2VsZWN0MiBBTUQgbG9hZGVyIHNvIGl0IGNhbiBiZSB1c2VkXG4gICAgICAgIC8vIE5lZWRlZCBtb3N0bHkgaW4gdGhlIGxhbmd1YWdlIGZpbGVzLCB3aGVyZSB0aGUgbG9hZGVyIGlzIG5vdCBpbnNlcnRlZFxuICAgICAgICBpZiAoalF1ZXJ5ICYmIGpRdWVyeS5mbiAmJiBqUXVlcnkuZm4uc2VsZWN0MiAmJiBqUXVlcnkuZm4uc2VsZWN0Mi5hbWQpIHtcbiAgICAgICAgICAgIHZhciBTMiA9IGpRdWVyeS5mbi5zZWxlY3QyLmFtZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgUzI7KGZ1bmN0aW9uICgpIHsgaWYgKCFTMiB8fCAhUzIucmVxdWlyZWpzKSB7XG4gICAgICAgICAgICBpZiAoIVMyKSB7IFMyID0ge307IH0gZWxzZSB7IHJlcXVpcmUgPSBTMjsgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAbGljZW5zZSBhbG1vbmQgMC4zLjMgQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMuXG4gICAgICAgICAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSwgaHR0cDovL2dpdGh1Yi5jb20vcmVxdWlyZWpzL2FsbW9uZC9MSUNFTlNFXG4gICAgICAgICAgICAgKi9cbi8vR29pbmcgc2xvcHB5IHRvIGF2b2lkICd1c2Ugc3RyaWN0JyBzdHJpbmcgY29zdCwgYnV0IHN0cmljdCBwcmFjdGljZXMgc2hvdWxkXG4vL2JlIGZvbGxvd2VkLlxuICAgICAgICAgICAgLypnbG9iYWwgc2V0VGltZW91dDogZmFsc2UgKi9cblxuICAgICAgICAgICAgdmFyIHJlcXVpcmVqcywgcmVxdWlyZSwgZGVmaW5lO1xuICAgICAgICAgICAgKGZ1bmN0aW9uICh1bmRlZikge1xuICAgICAgICAgICAgICAgIHZhciBtYWluLCByZXEsIG1ha2VNYXAsIGhhbmRsZXJzLFxuICAgICAgICAgICAgICAgICAgICBkZWZpbmVkID0ge30sXG4gICAgICAgICAgICAgICAgICAgIHdhaXRpbmcgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnID0ge30sXG4gICAgICAgICAgICAgICAgICAgIGRlZmluaW5nID0ge30sXG4gICAgICAgICAgICAgICAgICAgIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksXG4gICAgICAgICAgICAgICAgICAgIGFwcyA9IFtdLnNsaWNlLFxuICAgICAgICAgICAgICAgICAgICBqc1N1ZmZpeFJlZ0V4cCA9IC9cXC5qcyQvO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaGFzUHJvcChvYmosIHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc093bi5jYWxsKG9iaiwgcHJvcCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR2l2ZW4gYSByZWxhdGl2ZSBtb2R1bGUgbmFtZSwgbGlrZSAuL3NvbWV0aGluZywgbm9ybWFsaXplIGl0IHRvXG4gICAgICAgICAgICAgICAgICogYSByZWFsIG5hbWUgdGhhdCBjYW4gYmUgbWFwcGVkIHRvIGEgcGF0aC5cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgcmVsYXRpdmUgbmFtZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlTmFtZSBhIHJlYWwgbmFtZSB0aGF0IHRoZSBuYW1lIGFyZyBpcyByZWxhdGl2ZVxuICAgICAgICAgICAgICAgICAqIHRvLlxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IG5vcm1hbGl6ZWQgbmFtZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZShuYW1lLCBiYXNlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZVBhcnRzLCBuYW1lU2VnbWVudCwgbWFwVmFsdWUsIGZvdW5kTWFwLCBsYXN0SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZEksIGZvdW5kU3Rhck1hcCwgc3RhckksIGksIGosIHBhcnQsIG5vcm1hbGl6ZWRCYXNlUGFydHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlUGFydHMgPSBiYXNlTmFtZSAmJiBiYXNlTmFtZS5zcGxpdChcIi9cIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAgPSBjb25maWcubWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3Rhck1hcCA9IChtYXAgJiYgbWFwWycqJ10pIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vQWRqdXN0IGFueSByZWxhdGl2ZSBwYXRocy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSBuYW1lLmxlbmd0aCAtIDE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdhbnRpbmcgbm9kZSBJRCBjb21wYXRpYmlsaXR5LCBzdHJpcCAuanMgZnJvbSBlbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIElEcy4gSGF2ZSB0byBkbyB0aGlzIGhlcmUsIGFuZCBub3QgaW4gbmFtZVRvVXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIG5vZGUgYWxsb3dzIGVpdGhlciAuanMgb3Igbm9uIC5qcyB0byBtYXBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIHNhbWUgZmlsZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcubm9kZUlkQ29tcGF0ICYmIGpzU3VmZml4UmVnRXhwLnRlc3QobmFtZVtsYXN0SW5kZXhdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVbbGFzdEluZGV4XSA9IG5hbWVbbGFzdEluZGV4XS5yZXBsYWNlKGpzU3VmZml4UmVnRXhwLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0YXJ0cyB3aXRoIGEgJy4nIHNvIG5lZWQgdGhlIGJhc2VOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZVswXS5jaGFyQXQoMCkgPT09ICcuJyAmJiBiYXNlUGFydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0NvbnZlcnQgYmFzZU5hbWUgdG8gYXJyYXksIGFuZCBsb3Agb2ZmIHRoZSBsYXN0IHBhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zbyB0aGF0IC4gbWF0Y2hlcyB0aGF0ICdkaXJlY3RvcnknIGFuZCBub3QgbmFtZSBvZiB0aGUgYmFzZU5hbWUnc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbW9kdWxlLiBGb3IgaW5zdGFuY2UsIGJhc2VOYW1lIG9mICdvbmUvdHdvL3RocmVlJywgbWFwcyB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJ29uZS90d28vdGhyZWUuanMnLCBidXQgd2Ugd2FudCB0aGUgZGlyZWN0b3J5LCAnb25lL3R3bycgZm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzIG5vcm1hbGl6YXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZEJhc2VQYXJ0cyA9IGJhc2VQYXJ0cy5zbGljZSgwLCBiYXNlUGFydHMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5vcm1hbGl6ZWRCYXNlUGFydHMuY29uY2F0KG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3N0YXJ0IHRyaW1Eb3RzXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbmFtZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQgPSBuYW1lW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0ID09PSAnLicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQgPT09ICcuLicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYXQgdGhlIHN0YXJ0LCBvciBwcmV2aW91cyB2YWx1ZSBpcyBzdGlsbCAuLixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8ga2VlcCB0aGVtIHNvIHRoYXQgd2hlbiBjb252ZXJ0ZWQgdG8gYSBwYXRoIGl0IG1heVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGlsbCB3b3JrIHdoZW4gY29udmVydGVkIHRvIGEgcGF0aCwgZXZlbiB0aG91Z2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXMgYW4gSUQgaXQgaXMgbGVzcyB0aGFuIGlkZWFsLiBJbiBsYXJnZXIgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVsZWFzZXMsIG1heSBiZSBiZXR0ZXIgdG8ganVzdCBraWNrIG91dCBhbiBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgKGkgPT09IDEgJiYgbmFtZVsyXSA9PT0gJy4uJykgfHwgbmFtZVtpIC0gMV0gPT09ICcuLicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLnNwbGljZShpIC0gMSwgMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpIC09IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2VuZCB0cmltRG90c1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5qb2luKCcvJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL0FwcGx5IG1hcCBjb25maWcgaWYgYXZhaWxhYmxlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoKGJhc2VQYXJ0cyB8fCBzdGFyTWFwKSAmJiBtYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVQYXJ0cyA9IG5hbWUuc3BsaXQoJy8nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gbmFtZVBhcnRzLmxlbmd0aDsgaSA+IDA7IGkgLT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVTZWdtZW50ID0gbmFtZVBhcnRzLnNsaWNlKDAsIGkpLmpvaW4oXCIvXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VQYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ZpbmQgdGhlIGxvbmdlc3QgYmFzZU5hbWUgc2VnbWVudCBtYXRjaCBpbiB0aGUgY29uZmlnLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NvLCBkbyBqb2lucyBvbiB0aGUgYmlnZ2VzdCB0byBzbWFsbGVzdCBsZW5ndGhzIG9mIGJhc2VQYXJ0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gYmFzZVBhcnRzLmxlbmd0aDsgaiA+IDA7IGogLT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwVmFsdWUgPSBtYXBbYmFzZVBhcnRzLnNsaWNlKDAsIGopLmpvaW4oJy8nKV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYmFzZU5hbWUgc2VnbWVudCBoYXMgIGNvbmZpZywgZmluZCBpZiBpdCBoYXMgb25lIGZvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzIG5hbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBWYWx1ZSA9IG1hcFZhbHVlW25hbWVTZWdtZW50XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXRjaCwgdXBkYXRlIG5hbWUgdG8gdGhlIG5ldyB2YWx1ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRNYXAgPSBtYXBWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRJID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQ2hlY2sgZm9yIGEgc3RhciBtYXAgbWF0Y2gsIGJ1dCBqdXN0IGhvbGQgb24gdG8gaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGVyZSBpcyBhIHNob3J0ZXIgc2VnbWVudCBtYXRjaCBsYXRlciBpbiBhIG1hdGNoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25maWcsIHRoZW4gZmF2b3Igb3ZlciB0aGlzIHN0YXIgbWFwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRTdGFyTWFwICYmIHN0YXJNYXAgJiYgc3Rhck1hcFtuYW1lU2VnbWVudF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRTdGFyTWFwID0gc3Rhck1hcFtuYW1lU2VnbWVudF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJJID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRNYXAgJiYgZm91bmRTdGFyTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRNYXAgPSBmb3VuZFN0YXJNYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRJID0gc3Rhckk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZE1hcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVQYXJ0cy5zcGxpY2UoMCwgZm91bmRJLCBmb3VuZE1hcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWVQYXJ0cy5qb2luKCcvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtYWtlUmVxdWlyZShyZWxOYW1lLCBmb3JjZVN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQSB2ZXJzaW9uIG9mIGEgcmVxdWlyZSBmdW5jdGlvbiB0aGF0IHBhc3NlcyBhIG1vZHVsZU5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFsdWUgZm9yIGl0ZW1zIHRoYXQgbWF5IG5lZWQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbG9vayB1cCBwYXRocyByZWxhdGl2ZSB0byB0aGUgbW9kdWxlTmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcHMuY2FsbChhcmd1bWVudHMsIDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lmIGZpcnN0IGFyZyBpcyBub3QgcmVxdWlyZSgnc3RyaW5nJyksIGFuZCB0aGVyZSBpcyBvbmx5XG4gICAgICAgICAgICAgICAgICAgICAgICAvL29uZSBhcmcsIGl0IGlzIHRoZSBhcnJheSBmb3JtIHdpdGhvdXQgYSBjYWxsYmFjay4gSW5zZXJ0XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2EgbnVsbCBzbyB0aGF0IHRoZSBmb2xsb3dpbmcgY29uY2F0IGlzIGNvcnJlY3QuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gIT09ICdzdHJpbmcnICYmIGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5wdXNoKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcS5hcHBseSh1bmRlZiwgYXJncy5jb25jYXQoW3JlbE5hbWUsIGZvcmNlU3luY10pKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtYWtlTm9ybWFsaXplKHJlbE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplKG5hbWUsIHJlbE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1ha2VMb2FkKGRlcE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lZFtkZXBOYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNhbGxEZXAobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzUHJvcCh3YWl0aW5nLCBuYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB3YWl0aW5nW25hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHdhaXRpbmdbbmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmluZ1tuYW1lXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYWluLmFwcGx5KHVuZGVmLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzUHJvcChkZWZpbmVkLCBuYW1lKSAmJiAhaGFzUHJvcChkZWZpbmluZywgbmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gJyArIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZpbmVkW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vVHVybnMgYSBwbHVnaW4hcmVzb3VyY2UgdG8gW3BsdWdpbiwgcmVzb3VyY2VdXG4gICAgICAgICAgICAgICAgLy93aXRoIHRoZSBwbHVnaW4gYmVpbmcgdW5kZWZpbmVkIGlmIHRoZSBuYW1lXG4gICAgICAgICAgICAgICAgLy9kaWQgbm90IGhhdmUgYSBwbHVnaW4gcHJlZml4LlxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNwbGl0UHJlZml4KG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZWZpeCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gbmFtZSA/IG5hbWUuaW5kZXhPZignIScpIDogLTE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSBuYW1lLnN1YnN0cmluZygwLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoaW5kZXggKyAxLCBuYW1lLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtwcmVmaXgsIG5hbWVdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vQ3JlYXRlcyBhIHBhcnRzIGFycmF5IGZvciBhIHJlbE5hbWUgd2hlcmUgZmlyc3QgcGFydCBpcyBwbHVnaW4gSUQsXG4gICAgICAgICAgICAgICAgLy9zZWNvbmQgcGFydCBpcyByZXNvdXJjZSBJRC4gQXNzdW1lcyByZWxOYW1lIGhhcyBhbHJlYWR5IGJlZW4gbm9ybWFsaXplZC5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtYWtlUmVsUGFydHMocmVsTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVsTmFtZSA/IHNwbGl0UHJlZml4KHJlbE5hbWUpIDogW107XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogTWFrZXMgYSBuYW1lIG1hcCwgbm9ybWFsaXppbmcgdGhlIG5hbWUsIGFuZCB1c2luZyBhIHBsdWdpblxuICAgICAgICAgICAgICAgICAqIGZvciBub3JtYWxpemF0aW9uIGlmIG5lY2Vzc2FyeS4gR3JhYnMgYSByZWYgdG8gcGx1Z2luXG4gICAgICAgICAgICAgICAgICogdG9vLCBhcyBhbiBvcHRpbWl6YXRpb24uXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgbWFrZU1hcCA9IGZ1bmN0aW9uIChuYW1lLCByZWxQYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGx1Z2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydHMgPSBzcGxpdFByZWZpeChuYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCA9IHBhcnRzWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVsUmVzb3VyY2VOYW1lID0gcmVsUGFydHNbMV07XG5cbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHBhcnRzWzFdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmVmaXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCA9IG5vcm1hbGl6ZShwcmVmaXgsIHJlbFJlc291cmNlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4gPSBjYWxsRGVwKHByZWZpeCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL05vcm1hbGl6ZSBhY2NvcmRpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZWZpeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsdWdpbiAmJiBwbHVnaW4ubm9ybWFsaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHBsdWdpbi5ub3JtYWxpemUobmFtZSwgbWFrZU5vcm1hbGl6ZShyZWxSZXNvdXJjZU5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5vcm1hbGl6ZShuYW1lLCByZWxSZXNvdXJjZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5vcm1hbGl6ZShuYW1lLCByZWxSZXNvdXJjZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFydHMgPSBzcGxpdFByZWZpeChuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCA9IHBhcnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHBhcnRzWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZWZpeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbiA9IGNhbGxEZXAocHJlZml4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vVXNpbmcgcmlkaWN1bG91cyBwcm9wZXJ0eSBuYW1lcyBmb3Igc3BhY2UgcmVhc29uc1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZjogcHJlZml4ID8gcHJlZml4ICsgJyEnICsgbmFtZSA6IG5hbWUsIC8vZnVsbE5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIG46IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcjogcHJlZml4LFxuICAgICAgICAgICAgICAgICAgICAgICAgcDogcGx1Z2luXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1ha2VDb25maWcobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChjb25maWcgJiYgY29uZmlnLmNvbmZpZyAmJiBjb25maWcuY29uZmlnW25hbWVdKSB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBoYW5kbGVycyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYWtlUmVxdWlyZShuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXhwb3J0czogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gZGVmaW5lZFtuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChkZWZpbmVkW25hbWVdID0ge30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtb2R1bGU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVyaTogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0czogZGVmaW5lZFtuYW1lXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IG1ha2VDb25maWcobmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgbWFpbiA9IGZ1bmN0aW9uIChuYW1lLCBkZXBzLCBjYWxsYmFjaywgcmVsTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2pzTW9kdWxlLCBkZXBOYW1lLCByZXQsIG1hcCwgaSwgcmVsUGFydHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzID0gW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja1R5cGUgPSB0eXBlb2YgY2FsbGJhY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2luZ0V4cG9ydHM7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9Vc2UgbmFtZSBpZiBubyByZWxOYW1lXG4gICAgICAgICAgICAgICAgICAgIHJlbE5hbWUgPSByZWxOYW1lIHx8IG5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHJlbFBhcnRzID0gbWFrZVJlbFBhcnRzKHJlbE5hbWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vQ2FsbCB0aGUgY2FsbGJhY2sgdG8gZGVmaW5lIHRoZSBtb2R1bGUsIGlmIG5lY2Vzc2FyeS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrVHlwZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY2FsbGJhY2tUeXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1B1bGwgb3V0IHRoZSBkZWZpbmVkIGRlcGVuZGVuY2llcyBhbmQgcGFzcyB0aGUgb3JkZXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy92YWx1ZXMgdG8gdGhlIGNhbGxiYWNrLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy9EZWZhdWx0IHRvIFtyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGVdIGlmIG5vIGRlcHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcHMgPSAhZGVwcy5sZW5ndGggJiYgY2FsbGJhY2subGVuZ3RoID8gWydyZXF1aXJlJywgJ2V4cG9ydHMnLCAnbW9kdWxlJ10gOiBkZXBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRlcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXAgPSBtYWtlTWFwKGRlcHNbaV0sIHJlbFBhcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXBOYW1lID0gbWFwLmY7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0Zhc3QgcGF0aCBDb21tb25KUyBzdGFuZGFyZCBkZXBlbmRlbmNpZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlcE5hbWUgPT09IFwicmVxdWlyZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBoYW5kbGVycy5yZXF1aXJlKG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVwTmFtZSA9PT0gXCJleHBvcnRzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9Db21tb25KUyBtb2R1bGUgc3BlYyAxLjFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1tpXSA9IGhhbmRsZXJzLmV4cG9ydHMobmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzaW5nRXhwb3J0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZXBOYW1lID09PSBcIm1vZHVsZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29tbW9uSlMgbW9kdWxlIHNwZWMgMS4xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNqc01vZHVsZSA9IGFyZ3NbaV0gPSBoYW5kbGVycy5tb2R1bGUobmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNQcm9wKGRlZmluZWQsIGRlcE5hbWUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNQcm9wKHdhaXRpbmcsIGRlcE5hbWUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNQcm9wKGRlZmluaW5nLCBkZXBOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzW2ldID0gY2FsbERlcChkZXBOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hcC5wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5wLmxvYWQobWFwLm4sIG1ha2VSZXF1aXJlKHJlbE5hbWUsIHRydWUpLCBtYWtlTG9hZChkZXBOYW1lKSwge30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzW2ldID0gZGVmaW5lZFtkZXBOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobmFtZSArICcgbWlzc2luZyAnICsgZGVwTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBjYWxsYmFjayA/IGNhbGxiYWNrLmFwcGx5KGRlZmluZWRbbmFtZV0sIGFyZ3MpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vSWYgc2V0dGluZyBleHBvcnRzIHZpYSBcIm1vZHVsZVwiIGlzIGluIHBsYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9mYXZvciB0aGF0IG92ZXIgcmV0dXJuIHZhbHVlIGFuZCBleHBvcnRzLiBBZnRlciB0aGF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZmF2b3IgYSBub24tdW5kZWZpbmVkIHJldHVybiB2YWx1ZSBvdmVyIGV4cG9ydHMgdXNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjanNNb2R1bGUgJiYgY2pzTW9kdWxlLmV4cG9ydHMgIT09IHVuZGVmICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNqc01vZHVsZS5leHBvcnRzICE9PSBkZWZpbmVkW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWRbbmFtZV0gPSBjanNNb2R1bGUuZXhwb3J0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJldCAhPT0gdW5kZWYgfHwgIXVzaW5nRXhwb3J0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1VzZSB0aGUgcmV0dXJuIHZhbHVlIGZyb20gdGhlIGZ1bmN0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkW25hbWVdID0gcmV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL01heSBqdXN0IGJlIGFuIG9iamVjdCBkZWZpbml0aW9uIGZvciB0aGUgbW9kdWxlLiBPbmx5XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3dvcnJ5IGFib3V0IGRlZmluaW5nIGlmIGhhdmUgYSBtb2R1bGUgbmFtZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWRbbmFtZV0gPSBjYWxsYmFjaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXF1aXJlanMgPSByZXF1aXJlID0gcmVxID0gZnVuY3Rpb24gKGRlcHMsIGNhbGxiYWNrLCByZWxOYW1lLCBmb3JjZVN5bmMsIGFsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRlcHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyc1tkZXBzXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY2FsbGJhY2sgaW4gdGhpcyBjYXNlIGlzIHJlYWxseSByZWxOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJzW2RlcHNdKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSnVzdCByZXR1cm4gdGhlIG1vZHVsZSB3YW50ZWQuIEluIHRoaXMgc2NlbmFyaW8sIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9kZXBzIGFyZyBpcyB0aGUgbW9kdWxlIG5hbWUsIGFuZCBzZWNvbmQgYXJnIChpZiBwYXNzZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lzIGp1c3QgdGhlIHJlbE5hbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL05vcm1hbGl6ZSBtb2R1bGUgbmFtZSwgaWYgaXQgY29udGFpbnMgLiBvciAuLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxEZXAobWFrZU1hcChkZXBzLCBtYWtlUmVsUGFydHMoY2FsbGJhY2spKS5mKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghZGVwcy5zcGxpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZGVwcyBpcyBhIGNvbmZpZyBvYmplY3QsIG5vdCBhbiBhcnJheS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IGRlcHM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmRlcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEoY29uZmlnLmRlcHMsIGNvbmZpZy5jYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2suc3BsaWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jYWxsYmFjayBpcyBhbiBhcnJheSwgd2hpY2ggbWVhbnMgaXQgaXMgYSBkZXBlbmRlbmN5IGxpc3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9BZGp1c3QgYXJncyBpZiB0aGVyZSBhcmUgZGVwZW5kZW5jaWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwcyA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gcmVsTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxOYW1lID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwcyA9IHVuZGVmO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy9TdXBwb3J0IHJlcXVpcmUoWydhJ10pXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkge307XG5cbiAgICAgICAgICAgICAgICAgICAgLy9JZiByZWxOYW1lIGlzIGEgZnVuY3Rpb24sIGl0IGlzIGFuIGVycmJhY2sgaGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgLy9zbyByZW1vdmUgaXQuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVsTmFtZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVsTmFtZSA9IGZvcmNlU3luYztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmNlU3luYyA9IGFsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vU2ltdWxhdGUgYXN5bmMgY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JjZVN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW4odW5kZWYsIGRlcHMsIGNhbGxiYWNrLCByZWxOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vVXNpbmcgYSBub24temVybyB2YWx1ZSBiZWNhdXNlIG9mIGNvbmNlcm4gZm9yIHdoYXQgb2xkIGJyb3dzZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2RvLCBhbmQgbGF0ZXN0IGJyb3dzZXJzIFwidXBncmFkZVwiIHRvIDQgaWYgbG93ZXIgdmFsdWUgaXMgdXNlZDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvdGltZXJzLmh0bWwjZG9tLXdpbmRvd3RpbWVycy1zZXR0aW1lb3V0OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy9JZiB3YW50IGEgdmFsdWUgaW1tZWRpYXRlbHksIHVzZSByZXF1aXJlKCdpZCcpIGluc3RlYWQgLS0gc29tZXRoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3RoYXQgd29ya3MgaW4gYWxtb25kIG9uIHRoZSBnbG9iYWwgbGV2ZWwsIGJ1dCBub3QgZ3VhcmFudGVlZCBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdW5saWtlbHkgdG8gd29yayBpbiBvdGhlciBBTUQgaW1wbGVtZW50YXRpb25zLlxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbih1bmRlZiwgZGVwcywgY2FsbGJhY2ssIHJlbE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBKdXN0IGRyb3BzIHRoZSBjb25maWcgb24gdGhlIGZsb29yLCBidXQgcmV0dXJucyByZXEgaW4gY2FzZVxuICAgICAgICAgICAgICAgICAqIHRoZSBjb25maWcgcmV0dXJuIHZhbHVlIGlzIHVzZWQuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgcmVxLmNvbmZpZyA9IGZ1bmN0aW9uIChjZmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcShjZmcpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFeHBvc2UgbW9kdWxlIHJlZ2lzdHJ5IGZvciBkZWJ1Z2dpbmcgYW5kIHRvb2xpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICByZXF1aXJlanMuX2RlZmluZWQgPSBkZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgZGVmaW5lID0gZnVuY3Rpb24gKG5hbWUsIGRlcHMsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU2VlIGFsbW9uZCBSRUFETUU6IGluY29ycmVjdCBtb2R1bGUgYnVpbGQsIG5vIG1vZHVsZSBuYW1lJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL1RoaXMgbW9kdWxlIG1heSBub3QgaGF2ZSBkZXBlbmRlbmNpZXNcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkZXBzLnNwbGljZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9kZXBzIGlzIG5vdCBhbiBhcnJheSwgc28gcHJvYmFibHkgbWVhbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYW4gb2JqZWN0IGxpdGVyYWwgb3IgZmFjdG9yeSBmdW5jdGlvbiBmb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhlIHZhbHVlLiBBZGp1c3QgYXJncy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gZGVwcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzUHJvcChkZWZpbmVkLCBuYW1lKSAmJiAhaGFzUHJvcCh3YWl0aW5nLCBuYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FpdGluZ1tuYW1lXSA9IFtuYW1lLCBkZXBzLCBjYWxsYmFja107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgZGVmaW5lLmFtZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5OiB0cnVlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0oKSk7XG5cbiAgICAgICAgICAgIFMyLnJlcXVpcmVqcyA9IHJlcXVpcmVqcztTMi5yZXF1aXJlID0gcmVxdWlyZTtTMi5kZWZpbmUgPSBkZWZpbmU7XG4gICAgICAgIH1cbiAgICAgICAgfSgpKTtcbiAgICAgICAgUzIuZGVmaW5lKFwiYWxtb25kXCIsIGZ1bmN0aW9uKCl7fSk7XG5cbiAgICAgICAgLyogZ2xvYmFsIGpRdWVyeTpmYWxzZSwgJDpmYWxzZSAqL1xuICAgICAgICBTMi5kZWZpbmUoJ2pxdWVyeScsW10sZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF8kID0galF1ZXJ5IHx8ICQ7XG5cbiAgICAgICAgICAgIGlmIChfJCA9PSBudWxsICYmIGNvbnNvbGUgJiYgY29uc29sZS5lcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICdTZWxlY3QyOiBBbiBpbnN0YW5jZSBvZiBqUXVlcnkgb3IgYSBqUXVlcnktY29tcGF0aWJsZSBsaWJyYXJ5IHdhcyBub3QgJyArXG4gICAgICAgICAgICAgICAgICAgICdmb3VuZC4gTWFrZSBzdXJlIHRoYXQgeW91IGFyZSBpbmNsdWRpbmcgalF1ZXJ5IGJlZm9yZSBTZWxlY3QyIG9uIHlvdXIgJyArXG4gICAgICAgICAgICAgICAgICAgICd3ZWIgcGFnZS4nXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIF8kO1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvdXRpbHMnLFtcbiAgICAgICAgICAgICdqcXVlcnknXG4gICAgICAgIF0sIGZ1bmN0aW9uICgkKSB7XG4gICAgICAgICAgICB2YXIgVXRpbHMgPSB7fTtcblxuICAgICAgICAgICAgVXRpbHMuRXh0ZW5kID0gZnVuY3Rpb24gKENoaWxkQ2xhc3MsIFN1cGVyQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBCYXNlQ29uc3RydWN0b3IgKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yID0gQ2hpbGRDbGFzcztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gU3VwZXJDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX19oYXNQcm9wLmNhbGwoU3VwZXJDbGFzcywga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ2hpbGRDbGFzc1trZXldID0gU3VwZXJDbGFzc1trZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgQmFzZUNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IFN1cGVyQ2xhc3MucHJvdG90eXBlO1xuICAgICAgICAgICAgICAgIENoaWxkQ2xhc3MucHJvdG90eXBlID0gbmV3IEJhc2VDb25zdHJ1Y3RvcigpO1xuICAgICAgICAgICAgICAgIENoaWxkQ2xhc3MuX19zdXBlcl9fID0gU3VwZXJDbGFzcy5wcm90b3R5cGU7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gQ2hpbGRDbGFzcztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE1ldGhvZHMgKHRoZUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3RvID0gdGhlQ2xhc3MucHJvdG90eXBlO1xuXG4gICAgICAgICAgICAgICAgdmFyIG1ldGhvZHMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIG1ldGhvZE5hbWUgaW4gcHJvdG8pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBwcm90b1ttZXRob2ROYW1lXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZE5hbWUgPT09ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kcy5wdXNoKG1ldGhvZE5hbWUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBtZXRob2RzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBVdGlscy5EZWNvcmF0ZSA9IGZ1bmN0aW9uIChTdXBlckNsYXNzLCBEZWNvcmF0b3JDbGFzcykge1xuICAgICAgICAgICAgICAgIHZhciBkZWNvcmF0ZWRNZXRob2RzID0gZ2V0TWV0aG9kcyhEZWNvcmF0b3JDbGFzcyk7XG4gICAgICAgICAgICAgICAgdmFyIHN1cGVyTWV0aG9kcyA9IGdldE1ldGhvZHMoU3VwZXJDbGFzcyk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBEZWNvcmF0ZWRDbGFzcyAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1bnNoaWZ0ID0gQXJyYXkucHJvdG90eXBlLnVuc2hpZnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ0NvdW50ID0gRGVjb3JhdG9yQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGVkQ29uc3RydWN0b3IgPSBTdXBlckNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvcjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnQ291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bnNoaWZ0LmNhbGwoYXJndW1lbnRzLCBTdXBlckNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlZENvbnN0cnVjdG9yID0gRGVjb3JhdG9yQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY2FsbGVkQ29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBEZWNvcmF0b3JDbGFzcy5kaXNwbGF5TmFtZSA9IFN1cGVyQ2xhc3MuZGlzcGxheU5hbWU7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjdHIgKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yID0gRGVjb3JhdGVkQ2xhc3M7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgRGVjb3JhdGVkQ2xhc3MucHJvdG90eXBlID0gbmV3IGN0cigpO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCBzdXBlck1ldGhvZHMubGVuZ3RoOyBtKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1cGVyTWV0aG9kID0gc3VwZXJNZXRob2RzW21dO1xuXG4gICAgICAgICAgICAgICAgICAgIERlY29yYXRlZENsYXNzLnByb3RvdHlwZVtzdXBlck1ldGhvZF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgU3VwZXJDbGFzcy5wcm90b3R5cGVbc3VwZXJNZXRob2RdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBjYWxsZWRNZXRob2QgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTdHViIG91dCB0aGUgb3JpZ2luYWwgbWV0aG9kIGlmIGl0J3Mgbm90IGRlY29yYXRpbmcgYW4gYWN0dWFsIG1ldGhvZFxuICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxNZXRob2QgPSBmdW5jdGlvbiAoKSB7fTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kTmFtZSBpbiBEZWNvcmF0ZWRDbGFzcy5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsTWV0aG9kID0gRGVjb3JhdGVkQ2xhc3MucHJvdG90eXBlW21ldGhvZE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlY29yYXRlZE1ldGhvZCA9IERlY29yYXRvckNsYXNzLnByb3RvdHlwZVttZXRob2ROYW1lXTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVuc2hpZnQgPSBBcnJheS5wcm90b3R5cGUudW5zaGlmdDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zaGlmdC5jYWxsKGFyZ3VtZW50cywgb3JpZ2luYWxNZXRob2QpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVjb3JhdGVkTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGVjb3JhdGVkTWV0aG9kcy5sZW5ndGg7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVjb3JhdGVkTWV0aG9kID0gZGVjb3JhdGVkTWV0aG9kc1tkXTtcblxuICAgICAgICAgICAgICAgICAgICBEZWNvcmF0ZWRDbGFzcy5wcm90b3R5cGVbZGVjb3JhdGVkTWV0aG9kXSA9IGNhbGxlZE1ldGhvZChkZWNvcmF0ZWRNZXRob2QpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBEZWNvcmF0ZWRDbGFzcztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBPYnNlcnZhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzID0ge307XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50IGluIHRoaXMubGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50XS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0gPSBbY2FsbGJhY2tdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIE9ic2VydmFibGUucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMgfHwge307XG5cbiAgICAgICAgICAgICAgICAvLyBQYXJhbXMgc2hvdWxkIGFsd2F5cyBjb21lIGluIGFzIGFuIGFycmF5XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IFtdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBhcmd1bWVudHMgdG8gdGhlIGV2ZW50LCB1c2UgYSB0ZW1wb3Jhcnkgb2JqZWN0XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goe30pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgYF90eXBlYCBvZiB0aGUgZmlyc3Qgb2JqZWN0IHRvIHRoZSBldmVudFxuICAgICAgICAgICAgICAgIHBhcmFtc1swXS5fdHlwZSA9IGV2ZW50O1xuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50IGluIHRoaXMubGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW52b2tlKHRoaXMubGlzdGVuZXJzW2V2ZW50XSwgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoJyonIGluIHRoaXMubGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW52b2tlKHRoaXMubGlzdGVuZXJzWycqJ10sIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuaW52b2tlID0gZnVuY3Rpb24gKGxpc3RlbmVycywgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBVdGlscy5PYnNlcnZhYmxlID0gT2JzZXJ2YWJsZTtcblxuICAgICAgICAgICAgVXRpbHMuZ2VuZXJhdGVDaGFycyA9IGZ1bmN0aW9uIChsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hhcnMgPSAnJztcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhbmRvbUNoYXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzNik7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJzICs9IHJhbmRvbUNoYXIudG9TdHJpbmcoMzYpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBjaGFycztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFV0aWxzLmJpbmQgPSBmdW5jdGlvbiAoZnVuYywgY29udGV4dCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVXRpbHMuX2NvbnZlcnREYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBvcmlnaW5hbEtleSBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlzID0gb3JpZ2luYWxLZXkuc3BsaXQoJy0nKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YUxldmVsID0gZGF0YTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBrZXlzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1trXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTG93ZXJjYXNlIHRoZSBmaXJzdCBsZXR0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJ5IGRlZmF1bHQsIGRhc2gtc2VwYXJhdGVkIGJlY29tZXMgY2FtZWxDYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBrZXkuc3Vic3RyaW5nKDAsIDEpLnRvTG93ZXJDYXNlKCkgKyBrZXkuc3Vic3RyaW5nKDEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gZGF0YUxldmVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFMZXZlbFtrZXldID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09IGtleXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFMZXZlbFtrZXldID0gZGF0YVtvcmlnaW5hbEtleV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFMZXZlbCA9IGRhdGFMZXZlbFtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGRhdGFbb3JpZ2luYWxLZXldO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVXRpbHMuaGFzU2Nyb2xsID0gZnVuY3Rpb24gKGluZGV4LCBlbCkge1xuICAgICAgICAgICAgICAgIC8vIEFkYXB0ZWQgZnJvbSB0aGUgZnVuY3Rpb24gY3JlYXRlZCBieSBAU2hhZG93U2NyaXB0ZXJcbiAgICAgICAgICAgICAgICAvLyBhbmQgYWRhcHRlZCBieSBAQmlsbEJhcnJ5IG9uIHRoZSBTdGFjayBFeGNoYW5nZSBDb2RlIFJldmlldyB3ZWJzaXRlLlxuICAgICAgICAgICAgICAgIC8vIFRoZSBvcmlnaW5hbCBjb2RlIGNhbiBiZSBmb3VuZCBhdFxuICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9jb2RlcmV2aWV3LnN0YWNrZXhjaGFuZ2UuY29tL3EvMTMzMzhcbiAgICAgICAgICAgICAgICAvLyBhbmQgd2FzIGRlc2lnbmVkIHRvIGJlIHVzZWQgd2l0aCB0aGUgU2l6emxlIHNlbGVjdG9yIGVuZ2luZS5cblxuICAgICAgICAgICAgICAgIHZhciAkZWwgPSAkKGVsKTtcbiAgICAgICAgICAgICAgICB2YXIgb3ZlcmZsb3dYID0gZWwuc3R5bGUub3ZlcmZsb3dYO1xuICAgICAgICAgICAgICAgIHZhciBvdmVyZmxvd1kgPSBlbC5zdHlsZS5vdmVyZmxvd1k7XG5cbiAgICAgICAgICAgICAgICAvL0NoZWNrIGJvdGggeCBhbmQgeSBkZWNsYXJhdGlvbnNcbiAgICAgICAgICAgICAgICBpZiAob3ZlcmZsb3dYID09PSBvdmVyZmxvd1kgJiZcbiAgICAgICAgICAgICAgICAgICAgKG92ZXJmbG93WSA9PT0gJ2hpZGRlbicgfHwgb3ZlcmZsb3dZID09PSAndmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAob3ZlcmZsb3dYID09PSAnc2Nyb2xsJyB8fCBvdmVyZmxvd1kgPT09ICdzY3JvbGwnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiAoJGVsLmlubmVySGVpZ2h0KCkgPCBlbC5zY3JvbGxIZWlnaHQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbC5pbm5lcldpZHRoKCkgPCBlbC5zY3JvbGxXaWR0aCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBVdGlscy5lc2NhcGVNYXJrdXAgPSBmdW5jdGlvbiAobWFya3VwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VNYXAgPSB7XG4gICAgICAgICAgICAgICAgICAgICdcXFxcJzogJyYjOTI7JyxcbiAgICAgICAgICAgICAgICAgICAgJyYnOiAnJmFtcDsnLFxuICAgICAgICAgICAgICAgICAgICAnPCc6ICcmbHQ7JyxcbiAgICAgICAgICAgICAgICAgICAgJz4nOiAnJmd0OycsXG4gICAgICAgICAgICAgICAgICAgICdcIic6ICcmcXVvdDsnLFxuICAgICAgICAgICAgICAgICAgICAnXFwnJzogJyYjMzk7JyxcbiAgICAgICAgICAgICAgICAgICAgJy8nOiAnJiM0NzsnXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8vIERvIG5vdCB0cnkgdG8gZXNjYXBlIHRoZSBtYXJrdXAgaWYgaXQncyBub3QgYSBzdHJpbmdcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1hcmt1cCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcmt1cDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKG1hcmt1cCkucmVwbGFjZSgvWyY8PlwiJ1xcL1xcXFxdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVwbGFjZU1hcFttYXRjaF07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBBcHBlbmQgYW4gYXJyYXkgb2YgalF1ZXJ5IG5vZGVzIHRvIGEgZ2l2ZW4gZWxlbWVudC5cbiAgICAgICAgICAgIFV0aWxzLmFwcGVuZE1hbnkgPSBmdW5jdGlvbiAoJGVsZW1lbnQsICRub2Rlcykge1xuICAgICAgICAgICAgICAgIC8vIGpRdWVyeSAxLjcueCBkb2VzIG5vdCBzdXBwb3J0ICQuZm4uYXBwZW5kKCkgd2l0aCBhbiBhcnJheVxuICAgICAgICAgICAgICAgIC8vIEZhbGwgYmFjayB0byBhIGpRdWVyeSBvYmplY3QgY29sbGVjdGlvbiB1c2luZyAkLmZuLmFkZCgpXG4gICAgICAgICAgICAgICAgaWYgKCQuZm4uanF1ZXJ5LnN1YnN0cigwLCAzKSA9PT0gJzEuNycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRqcU5vZGVzID0gJCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICQubWFwKCRub2RlcywgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRqcU5vZGVzID0gJGpxTm9kZXMuYWRkKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAkbm9kZXMgPSAkanFOb2RlcztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkZWxlbWVudC5hcHBlbmQoJG5vZGVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBVdGlscztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL3Jlc3VsdHMnLFtcbiAgICAgICAgICAgICdqcXVlcnknLFxuICAgICAgICAgICAgJy4vdXRpbHMnXG4gICAgICAgIF0sIGZ1bmN0aW9uICgkLCBVdGlscykge1xuICAgICAgICAgICAgZnVuY3Rpb24gUmVzdWx0cyAoJGVsZW1lbnQsIG9wdGlvbnMsIGRhdGFBZGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudCA9ICRlbGVtZW50O1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGFBZGFwdGVyO1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICAgICAgICAgICAgICBSZXN1bHRzLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBVdGlscy5FeHRlbmQoUmVzdWx0cywgVXRpbHMuT2JzZXJ2YWJsZSk7XG5cbiAgICAgICAgICAgIFJlc3VsdHMucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHJlc3VsdHMgPSAkKFxuICAgICAgICAgICAgICAgICAgICAnPHVsIGNsYXNzPVwic2VsZWN0Mi1yZXN1bHRzX19vcHRpb25zXCIgcm9sZT1cInRyZWVcIj48L3VsPidcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ211bHRpcGxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgJHJlc3VsdHMuYXR0cignYXJpYS1tdWx0aXNlbGVjdGFibGUnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuJHJlc3VsdHMgPSAkcmVzdWx0cztcblxuICAgICAgICAgICAgICAgIHJldHVybiAkcmVzdWx0cztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFJlc3VsdHMucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHJlc3VsdHMuZW1wdHkoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFJlc3VsdHMucHJvdG90eXBlLmRpc3BsYXlNZXNzYWdlID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgICAgIHZhciBlc2NhcGVNYXJrdXAgPSB0aGlzLm9wdGlvbnMuZ2V0KCdlc2NhcGVNYXJrdXAnKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVMb2FkaW5nKCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgJG1lc3NhZ2UgPSAkKFxuICAgICAgICAgICAgICAgICAgICAnPGxpIHJvbGU9XCJ0cmVlaXRlbVwiIGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiJyArXG4gICAgICAgICAgICAgICAgICAgICcgY2xhc3M9XCJzZWxlY3QyLXJlc3VsdHNfX29wdGlvblwiPjwvbGk+J1xuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHRoaXMub3B0aW9ucy5nZXQoJ3RyYW5zbGF0aW9ucycpLmdldChwYXJhbXMubWVzc2FnZSk7XG5cbiAgICAgICAgICAgICAgICAkbWVzc2FnZS5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgIGVzY2FwZU1hcmt1cChcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UocGFyYW1zLmFyZ3MpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgJG1lc3NhZ2VbMF0uY2xhc3NOYW1lICs9ICcgc2VsZWN0Mi1yZXN1bHRzX19tZXNzYWdlJztcblxuICAgICAgICAgICAgICAgIHRoaXMuJHJlc3VsdHMuYXBwZW5kKCRtZXNzYWdlKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFJlc3VsdHMucHJvdG90eXBlLmhpZGVNZXNzYWdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRyZXN1bHRzLmZpbmQoJy5zZWxlY3QyLXJlc3VsdHNfX21lc3NhZ2UnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFJlc3VsdHMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlTG9hZGluZygpO1xuXG4gICAgICAgICAgICAgICAgdmFyICRvcHRpb25zID0gW107XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZXN1bHRzID09IG51bGwgfHwgZGF0YS5yZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4kcmVzdWx0cy5jaGlsZHJlbigpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdyZXN1bHRzOm1lc3NhZ2UnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ25vUmVzdWx0cydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRhdGEucmVzdWx0cyA9IHRoaXMuc29ydChkYXRhLnJlc3VsdHMpO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBkYXRhLnJlc3VsdHMubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBkYXRhLnJlc3VsdHNbZF07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyICRvcHRpb24gPSB0aGlzLm9wdGlvbihpdGVtKTtcblxuICAgICAgICAgICAgICAgICAgICAkb3B0aW9ucy5wdXNoKCRvcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuJHJlc3VsdHMuYXBwZW5kKCRvcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFJlc3VsdHMucHJvdG90eXBlLnBvc2l0aW9uID0gZnVuY3Rpb24gKCRyZXN1bHRzLCAkZHJvcGRvd24pIHtcbiAgICAgICAgICAgICAgICB2YXIgJHJlc3VsdHNDb250YWluZXIgPSAkZHJvcGRvd24uZmluZCgnLnNlbGVjdDItcmVzdWx0cycpO1xuICAgICAgICAgICAgICAgICRyZXN1bHRzQ29udGFpbmVyLmFwcGVuZCgkcmVzdWx0cyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBSZXN1bHRzLnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgc29ydGVyID0gdGhpcy5vcHRpb25zLmdldCgnc29ydGVyJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc29ydGVyKGRhdGEpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgUmVzdWx0cy5wcm90b3R5cGUuaGlnaGxpZ2h0Rmlyc3RJdGVtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkb3B0aW9ucyA9IHRoaXMuJHJlc3VsdHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5zZWxlY3QyLXJlc3VsdHNfX29wdGlvblthcmlhLXNlbGVjdGVkXScpO1xuXG4gICAgICAgICAgICAgICAgdmFyICRzZWxlY3RlZCA9ICRvcHRpb25zLmZpbHRlcignW2FyaWEtc2VsZWN0ZWQ9dHJ1ZV0nKTtcblxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGFyZSBhbnkgc2VsZWN0ZWQgb3B0aW9uc1xuICAgICAgICAgICAgICAgIGlmICgkc2VsZWN0ZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgc2VsZWN0ZWQgb3B0aW9ucywgaGlnaGxpZ2h0IHRoZSBmaXJzdFxuICAgICAgICAgICAgICAgICAgICAkc2VsZWN0ZWQuZmlyc3QoKS50cmlnZ2VyKCdtb3VzZWVudGVyJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIHNlbGVjdGVkIG9wdGlvbnMsIGhpZ2hsaWdodCB0aGUgZmlyc3Qgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIGluIHRoZSBkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAkb3B0aW9ucy5maXJzdCgpLnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVuc3VyZUhpZ2hsaWdodFZpc2libGUoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFJlc3VsdHMucHJvdG90eXBlLnNldENsYXNzZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLmN1cnJlbnQoZnVuY3Rpb24gKHNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZElkcyA9ICQubWFwKHNlbGVjdGVkLCBmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuaWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyICRvcHRpb25zID0gc2VsZi4kcmVzdWx0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5zZWxlY3QyLXJlc3VsdHNfX29wdGlvblthcmlhLXNlbGVjdGVkXScpO1xuXG4gICAgICAgICAgICAgICAgICAgICRvcHRpb25zLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRvcHRpb24gPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9ICQuZGF0YSh0aGlzLCAnZGF0YScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZCBuZWVkcyB0byBiZSBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcgd2hlbiBjb21wYXJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9ICcnICsgaXRlbS5pZDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChpdGVtLmVsZW1lbnQgIT0gbnVsbCAmJiBpdGVtLmVsZW1lbnQuc2VsZWN0ZWQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGl0ZW0uZWxlbWVudCA9PSBudWxsICYmICQuaW5BcnJheShpZCwgc2VsZWN0ZWRJZHMpID4gLTEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJG9wdGlvbi5hdHRyKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJG9wdGlvbi5hdHRyKCdhcmlhLXNlbGVjdGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBSZXN1bHRzLnByb3RvdHlwZS5zaG93TG9hZGluZyA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVMb2FkaW5nKCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbG9hZGluZ01vcmUgPSB0aGlzLm9wdGlvbnMuZ2V0KCd0cmFuc2xhdGlvbnMnKS5nZXQoJ3NlYXJjaGluZycpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGxvYWRpbmcgPSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBsb2FkaW5nTW9yZShwYXJhbXMpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgJGxvYWRpbmcgPSB0aGlzLm9wdGlvbihsb2FkaW5nKTtcbiAgICAgICAgICAgICAgICAkbG9hZGluZy5jbGFzc05hbWUgKz0gJyBsb2FkaW5nLXJlc3VsdHMnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kcmVzdWx0cy5wcmVwZW5kKCRsb2FkaW5nKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFJlc3VsdHMucHJvdG90eXBlLmhpZGVMb2FkaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHJlc3VsdHMuZmluZCgnLmxvYWRpbmctcmVzdWx0cycpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgUmVzdWx0cy5wcm90b3R5cGUub3B0aW9uID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgICAgICBvcHRpb24uY2xhc3NOYW1lID0gJ3NlbGVjdDItcmVzdWx0c19fb3B0aW9uJztcblxuICAgICAgICAgICAgICAgIHZhciBhdHRycyA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ3JvbGUnOiAndHJlZWl0ZW0nLFxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1zZWxlY3RlZCc6ICdmYWxzZSdcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF0dHJzWydhcmlhLXNlbGVjdGVkJ107XG4gICAgICAgICAgICAgICAgICAgIGF0dHJzWydhcmlhLWRpc2FibGVkJ10gPSAndHJ1ZSc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuaWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXR0cnNbJ2FyaWEtc2VsZWN0ZWQnXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5fcmVzdWx0SWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb24uaWQgPSBkYXRhLl9yZXN1bHRJZDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS50aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb24udGl0bGUgPSBkYXRhLnRpdGxlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJzLnJvbGUgPSAnZ3JvdXAnO1xuICAgICAgICAgICAgICAgICAgICBhdHRyc1snYXJpYS1sYWJlbCddID0gZGF0YS50ZXh0O1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXR0cnNbJ2FyaWEtc2VsZWN0ZWQnXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhdHRyIGluIGF0dHJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBhdHRyc1thdHRyXTtcblxuICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2V0QXR0cmlidXRlKGF0dHIsIHZhbCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRvcHRpb24gPSAkKG9wdGlvbik7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3Ryb25nJyk7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsLmNsYXNzTmFtZSA9ICdzZWxlY3QyLXJlc3VsdHNfX2dyb3VwJztcblxuICAgICAgICAgICAgICAgICAgICB2YXIgJGxhYmVsID0gJChsYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGUoZGF0YSwgbGFiZWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkY2hpbGRyZW4gPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGRhdGEuY2hpbGRyZW4ubGVuZ3RoOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGRhdGEuY2hpbGRyZW5bY107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkY2hpbGQgPSB0aGlzLm9wdGlvbihjaGlsZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRjaGlsZHJlbi5wdXNoKCRjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgJGNoaWxkcmVuQ29udGFpbmVyID0gJCgnPHVsPjwvdWw+Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ3NlbGVjdDItcmVzdWx0c19fb3B0aW9ucyBzZWxlY3QyLXJlc3VsdHNfX29wdGlvbnMtLW5lc3RlZCdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJGNoaWxkcmVuQ29udGFpbmVyLmFwcGVuZCgkY2hpbGRyZW4pO1xuXG4gICAgICAgICAgICAgICAgICAgICRvcHRpb24uYXBwZW5kKGxhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgJG9wdGlvbi5hcHBlbmQoJGNoaWxkcmVuQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlKGRhdGEsIG9wdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJC5kYXRhKG9wdGlvbiwgJ2RhdGEnLCBkYXRhKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb247XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBSZXN1bHRzLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGNvbnRhaW5lciwgJGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgICAgIHZhciBpZCA9IGNvbnRhaW5lci5pZCArICctcmVzdWx0cyc7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRyZXN1bHRzLmF0dHIoJ2lkJywgaWQpO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdyZXN1bHRzOmFsbCcsIGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jbGVhcigpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmFwcGVuZChwYXJhbXMuZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5pc09wZW4oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRDbGFzc2VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZ2hsaWdodEZpcnN0SXRlbSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6YXBwZW5kJywgZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmFwcGVuZChwYXJhbXMuZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5pc09wZW4oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRDbGFzc2VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5vbigncXVlcnknLCBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZU1lc3NhZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd0xvYWRpbmcocGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5vbignc2VsZWN0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5lci5pc09wZW4oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRDbGFzc2VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGlnaGxpZ2h0Rmlyc3RJdGVtKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ3Vuc2VsZWN0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5lci5pc09wZW4oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRDbGFzc2VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGlnaGxpZ2h0Rmlyc3RJdGVtKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ29wZW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIGRyb3Bkb3duIGlzIG9wZW4sIGFyaWEtZXhwZW5kZWQ9XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kcmVzdWx0cy5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kcmVzdWx0cy5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0Q2xhc3NlcygpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmVuc3VyZUhpZ2hsaWdodFZpc2libGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIGRyb3Bkb3duIGlzIGNsb3NlZCwgYXJpYS1leHBlbmRlZD1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kcmVzdWx0cy5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJHJlc3VsdHMuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRyZXN1bHRzLnJlbW92ZUF0dHIoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdyZXN1bHRzOnRvZ2dsZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRoaWdobGlnaHRlZCA9IHNlbGYuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCRoaWdobGlnaHRlZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICRoaWdobGlnaHRlZC50cmlnZ2VyKCdtb3VzZXVwJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6c2VsZWN0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGhpZ2hsaWdodGVkID0gc2VsZi5nZXRIaWdobGlnaHRlZFJlc3VsdHMoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoJGhpZ2hsaWdodGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkaGlnaGxpZ2h0ZWQuZGF0YSgnZGF0YScpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkaGlnaGxpZ2h0ZWQuYXR0cignYXJpYS1zZWxlY3RlZCcpID09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdjbG9zZScsIHt9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcignc2VsZWN0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6cHJldmlvdXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkaGlnaGxpZ2h0ZWQgPSBzZWxmLmdldEhpZ2hsaWdodGVkUmVzdWx0cygpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkb3B0aW9ucyA9IHNlbGYuJHJlc3VsdHMuZmluZCgnW2FyaWEtc2VsZWN0ZWRdJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9ICRvcHRpb25zLmluZGV4KCRoaWdobGlnaHRlZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgYXJlIGFscmVhZHkgYXQgdGUgdG9wLCBkb24ndCBtb3ZlIGZ1cnRoZXJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCAtIDE7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgbm9uZSBhcmUgaGlnaGxpZ2h0ZWQsIGhpZ2hsaWdodCB0aGUgZmlyc3RcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRoaWdobGlnaHRlZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgJG5leHQgPSAkb3B0aW9ucy5lcShuZXh0SW5kZXgpO1xuXG4gICAgICAgICAgICAgICAgICAgICRuZXh0LnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudE9mZnNldCA9IHNlbGYuJHJlc3VsdHMub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dFRvcCA9ICRuZXh0Lm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRPZmZzZXQgPSBzZWxmLiRyZXN1bHRzLnNjcm9sbFRvcCgpICsgKG5leHRUb3AgLSBjdXJyZW50T2Zmc2V0KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dEluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiRyZXN1bHRzLnNjcm9sbFRvcCgwKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuZXh0VG9wIC0gY3VycmVudE9mZnNldCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJHJlc3VsdHMuc2Nyb2xsVG9wKG5leHRPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6bmV4dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRoaWdobGlnaHRlZCA9IHNlbGYuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyICRvcHRpb25zID0gc2VsZi4kcmVzdWx0cy5maW5kKCdbYXJpYS1zZWxlY3RlZF0nKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gJG9wdGlvbnMuaW5kZXgoJGhpZ2hsaWdodGVkKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dEluZGV4ID0gY3VycmVudEluZGV4ICsgMTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBhcmUgYXQgdGhlIGxhc3Qgb3B0aW9uLCBzdGF5IHRoZXJlXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0SW5kZXggPj0gJG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgJG5leHQgPSAkb3B0aW9ucy5lcShuZXh0SW5kZXgpO1xuXG4gICAgICAgICAgICAgICAgICAgICRuZXh0LnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudE9mZnNldCA9IHNlbGYuJHJlc3VsdHMub2Zmc2V0KCkudG9wICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiRyZXN1bHRzLm91dGVySGVpZ2h0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRCb3R0b20gPSAkbmV4dC5vZmZzZXQoKS50b3AgKyAkbmV4dC5vdXRlckhlaWdodChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXh0T2Zmc2V0ID0gc2VsZi4kcmVzdWx0cy5zY3JvbGxUb3AoKSArIG5leHRCb3R0b20gLSBjdXJyZW50T2Zmc2V0O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0SW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJHJlc3VsdHMuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5leHRCb3R0b20gPiBjdXJyZW50T2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiRyZXN1bHRzLnNjcm9sbFRvcChuZXh0T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdyZXN1bHRzOmZvY3VzJywgZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXMuZWxlbWVudC5hZGRDbGFzcygnc2VsZWN0Mi1yZXN1bHRzX19vcHRpb24tLWhpZ2hsaWdodGVkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6bWVzc2FnZScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXNwbGF5TWVzc2FnZShwYXJhbXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCQuZm4ubW91c2V3aGVlbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZXN1bHRzLm9uKCdtb3VzZXdoZWVsJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSBzZWxmLiRyZXN1bHRzLnNjcm9sbFRvcCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm90dG9tID0gc2VsZi4kcmVzdWx0cy5nZXQoMCkuc2Nyb2xsSGVpZ2h0IC0gdG9wICsgZS5kZWx0YVk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0F0VG9wID0gZS5kZWx0YVkgPiAwICYmIHRvcCAtIGUuZGVsdGFZIDw9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNBdEJvdHRvbSA9IGUuZGVsdGFZIDwgMCAmJiBib3R0b20gPD0gc2VsZi4kcmVzdWx0cy5oZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXRUb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiRyZXN1bHRzLnNjcm9sbFRvcCgwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0F0Qm90dG9tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4kcmVzdWx0cy5zY3JvbGxUb3AoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJHJlc3VsdHMuZ2V0KDApLnNjcm9sbEhlaWdodCAtIHNlbGYuJHJlc3VsdHMuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuJHJlc3VsdHMub24oJ21vdXNldXAnLCAnLnNlbGVjdDItcmVzdWx0c19fb3B0aW9uW2FyaWEtc2VsZWN0ZWRdJyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkdGhpcy5kYXRhKCdkYXRhJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5hdHRyKCdhcmlhLXNlbGVjdGVkJykgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLm9wdGlvbnMuZ2V0KCdtdWx0aXBsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcigndW5zZWxlY3QnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcignY2xvc2UnLCB7fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRyaWdnZXIoJ3NlbGVjdCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kcmVzdWx0cy5vbignbW91c2VlbnRlcicsICcuc2VsZWN0Mi1yZXN1bHRzX19vcHRpb25bYXJpYS1zZWxlY3RlZF0nLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YSgnZGF0YScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmdldEhpZ2hsaWdodGVkUmVzdWx0cygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzZWxlY3QyLXJlc3VsdHNfX29wdGlvbi0taGlnaGxpZ2h0ZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdyZXN1bHRzOmZvY3VzJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogJCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgUmVzdWx0cy5wcm90b3R5cGUuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkaGlnaGxpZ2h0ZWQgPSB0aGlzLiRyZXN1bHRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnLnNlbGVjdDItcmVzdWx0c19fb3B0aW9uLS1oaWdobGlnaHRlZCcpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICRoaWdobGlnaHRlZDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFJlc3VsdHMucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kcmVzdWx0cy5yZW1vdmUoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFJlc3VsdHMucHJvdG90eXBlLmVuc3VyZUhpZ2hsaWdodFZpc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRoaWdobGlnaHRlZCA9IHRoaXMuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJGhpZ2hsaWdodGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyICRvcHRpb25zID0gdGhpcy4kcmVzdWx0cy5maW5kKCdbYXJpYS1zZWxlY3RlZF0nKTtcblxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SW5kZXggPSAkb3B0aW9ucy5pbmRleCgkaGlnaGxpZ2h0ZWQpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRPZmZzZXQgPSB0aGlzLiRyZXN1bHRzLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dFRvcCA9ICRoaWdobGlnaHRlZC5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRPZmZzZXQgPSB0aGlzLiRyZXN1bHRzLnNjcm9sbFRvcCgpICsgKG5leHRUb3AgLSBjdXJyZW50T2Zmc2V0KTtcblxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXREZWx0YSA9IG5leHRUb3AgLSBjdXJyZW50T2Zmc2V0O1xuICAgICAgICAgICAgICAgIG5leHRPZmZzZXQgLT0gJGhpZ2hsaWdodGVkLm91dGVySGVpZ2h0KGZhbHNlKSAqIDI7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEluZGV4IDw9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVzdWx0cy5zY3JvbGxUb3AoMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvZmZzZXREZWx0YSA+IHRoaXMuJHJlc3VsdHMub3V0ZXJIZWlnaHQoKSB8fCBvZmZzZXREZWx0YSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVzdWx0cy5zY3JvbGxUb3AobmV4dE9mZnNldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgUmVzdWx0cy5wcm90b3R5cGUudGVtcGxhdGUgPSBmdW5jdGlvbiAocmVzdWx0LCBjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLm9wdGlvbnMuZ2V0KCd0ZW1wbGF0ZVJlc3VsdCcpO1xuICAgICAgICAgICAgICAgIHZhciBlc2NhcGVNYXJrdXAgPSB0aGlzLm9wdGlvbnMuZ2V0KCdlc2NhcGVNYXJrdXAnKTtcblxuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGVtcGxhdGUocmVzdWx0LCBjb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gZXNjYXBlTWFya3VwKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoY29udGFpbmVyKS5hcHBlbmQoY29udGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdHM7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFMyLmRlZmluZSgnc2VsZWN0Mi9rZXlzJyxbXG5cbiAgICAgICAgXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIEtFWVMgPSB7XG4gICAgICAgICAgICAgICAgQkFDS1NQQUNFOiA4LFxuICAgICAgICAgICAgICAgIFRBQjogOSxcbiAgICAgICAgICAgICAgICBFTlRFUjogMTMsXG4gICAgICAgICAgICAgICAgU0hJRlQ6IDE2LFxuICAgICAgICAgICAgICAgIENUUkw6IDE3LFxuICAgICAgICAgICAgICAgIEFMVDogMTgsXG4gICAgICAgICAgICAgICAgRVNDOiAyNyxcbiAgICAgICAgICAgICAgICBTUEFDRTogMzIsXG4gICAgICAgICAgICAgICAgUEFHRV9VUDogMzMsXG4gICAgICAgICAgICAgICAgUEFHRV9ET1dOOiAzNCxcbiAgICAgICAgICAgICAgICBFTkQ6IDM1LFxuICAgICAgICAgICAgICAgIEhPTUU6IDM2LFxuICAgICAgICAgICAgICAgIExFRlQ6IDM3LFxuICAgICAgICAgICAgICAgIFVQOiAzOCxcbiAgICAgICAgICAgICAgICBSSUdIVDogMzksXG4gICAgICAgICAgICAgICAgRE9XTjogNDAsXG4gICAgICAgICAgICAgICAgREVMRVRFOiA0NlxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIEtFWVM7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFMyLmRlZmluZSgnc2VsZWN0Mi9zZWxlY3Rpb24vYmFzZScsW1xuICAgICAgICAgICAgJ2pxdWVyeScsXG4gICAgICAgICAgICAnLi4vdXRpbHMnLFxuICAgICAgICAgICAgJy4uL2tleXMnXG4gICAgICAgIF0sIGZ1bmN0aW9uICgkLCBVdGlscywgS0VZUykge1xuICAgICAgICAgICAgZnVuY3Rpb24gQmFzZVNlbGVjdGlvbiAoJGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgICAgICAgICAgICAgIEJhc2VTZWxlY3Rpb24uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFV0aWxzLkV4dGVuZChCYXNlU2VsZWN0aW9uLCBVdGlscy5PYnNlcnZhYmxlKTtcblxuICAgICAgICAgICAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0aW9uID0gJChcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwic2VsZWN0Mi1zZWxlY3Rpb25cIiByb2xlPVwiY29tYm9ib3hcIiAnICtcbiAgICAgICAgICAgICAgICAgICAgJyBhcmlhLWhhc3BvcHVwPVwidHJ1ZVwiIGFyaWEtZXhwYW5kZWQ9XCJmYWxzZVwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPidcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fdGFiaW5kZXggPSAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuJGVsZW1lbnQuZGF0YSgnb2xkLXRhYmluZGV4JykgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90YWJpbmRleCA9IHRoaXMuJGVsZW1lbnQuZGF0YSgnb2xkLXRhYmluZGV4Jyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLiRlbGVtZW50LmF0dHIoJ3RhYmluZGV4JykgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90YWJpbmRleCA9IHRoaXMuJGVsZW1lbnQuYXR0cigndGFiaW5kZXgnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2VsZWN0aW9uLmF0dHIoJ3RpdGxlJywgdGhpcy4kZWxlbWVudC5hdHRyKCd0aXRsZScpKTtcbiAgICAgICAgICAgICAgICAkc2VsZWN0aW9uLmF0dHIoJ3RhYmluZGV4JywgdGhpcy5fdGFiaW5kZXgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kc2VsZWN0aW9uID0gJHNlbGVjdGlvbjtcblxuICAgICAgICAgICAgICAgIHJldHVybiAkc2VsZWN0aW9uO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChjb250YWluZXIsICRjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBjb250YWluZXIuaWQgKyAnLWNvbnRhaW5lcic7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdHNJZCA9IGNvbnRhaW5lci5pZCArICctcmVzdWx0cyc7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblxuICAgICAgICAgICAgICAgIHRoaXMuJHNlbGVjdGlvbi5vbignZm9jdXMnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcignZm9jdXMnLCBldnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kc2VsZWN0aW9uLm9uKCdibHVyJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9oYW5kbGVCbHVyKGV2dCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcigna2V5cHJlc3MnLCBldnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChldnQud2hpY2ggPT09IEtFWVMuU1BBQ0UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6Zm9jdXMnLCBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJHNlbGVjdGlvbi5hdHRyKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnLCBwYXJhbXMuZGF0YS5fcmVzdWx0SWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdzZWxlY3Rpb246dXBkYXRlJywgZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnVwZGF0ZShwYXJhbXMuZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ29wZW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIGRyb3Bkb3duIGlzIG9wZW4sIGFyaWEtZXhwYW5kZWQ9XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VsZWN0aW9uLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRzZWxlY3Rpb24uYXR0cignYXJpYS1vd25zJywgcmVzdWx0c0lkKTtcblxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9hdHRhY2hDbG9zZUhhbmRsZXIoY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIGRyb3Bkb3duIGlzIGNsb3NlZCwgYXJpYS1leHBhbmRlZD1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VsZWN0aW9uLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VsZWN0aW9uLnJlbW92ZUF0dHIoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRzZWxlY3Rpb24ucmVtb3ZlQXR0cignYXJpYS1vd25zJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VsZWN0aW9uLmZvY3VzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGV0YWNoQ2xvc2VIYW5kbGVyKGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ2VuYWJsZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VsZWN0aW9uLmF0dHIoJ3RhYmluZGV4Jywgc2VsZi5fdGFiaW5kZXgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdkaXNhYmxlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRzZWxlY3Rpb24uYXR0cigndGFiaW5kZXgnLCAnLTEnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEJhc2VTZWxlY3Rpb24ucHJvdG90eXBlLl9oYW5kbGVCbHVyID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgICAgIC8vIFRoaXMgbmVlZHMgdG8gYmUgZGVsYXllZCBhcyB0aGUgYWN0aXZlIGVsZW1lbnQgaXMgdGhlIGJvZHkgd2hlbiB0aGUgdGFiXG4gICAgICAgICAgICAgICAgLy8ga2V5IGlzIHByZXNzZWQsIHBvc3NpYmx5IGFsb25nIHdpdGggb3RoZXJzLlxuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgdHJpZ2dlciBgYmx1cmAgaWYgdGhlIGZvY3VzIGlzIHN0aWxsIGluIHRoZSBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT0gc2VsZi4kc2VsZWN0aW9uWzBdKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKCQuY29udGFpbnMoc2VsZi4kc2VsZWN0aW9uWzBdLCBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSlcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzZWxmLnRyaWdnZXIoJ2JsdXInLCBldnQpO1xuICAgICAgICAgICAgICAgIH0sIDEpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUuX2F0dGFjaENsb3NlSGFuZGxlciA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9uKCdtb3VzZWRvd24uc2VsZWN0Mi4nICsgY29udGFpbmVyLmlkLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJHRhcmdldCA9ICQoZS50YXJnZXQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0ID0gJHRhcmdldC5jbG9zZXN0KCcuc2VsZWN0MicpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkYWxsID0gJCgnLnNlbGVjdDIuc2VsZWN0Mi1jb250YWluZXItLW9wZW4nKTtcblxuICAgICAgICAgICAgICAgICAgICAkYWxsLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMgPT0gJHNlbGVjdFswXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRlbGVtZW50ID0gJHRoaXMuZGF0YSgnZWxlbWVudCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTVUktU0VMRUNUMiByZW5hbWVkIGZ1bmN0aW9uIHRvIFNVSXNlbGVjdDJcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LlNVSXNlbGVjdDIoJ2Nsb3NlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkZWxlbWVudC5zZWxlY3QyKCdjbG9zZScpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEJhc2VTZWxlY3Rpb24ucHJvdG90eXBlLl9kZXRhY2hDbG9zZUhhbmRsZXIgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5vZmYoJ21vdXNlZG93bi5zZWxlY3QyLicgKyBjb250YWluZXIuaWQpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUucG9zaXRpb24gPSBmdW5jdGlvbiAoJHNlbGVjdGlvbiwgJGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0aW9uQ29udGFpbmVyID0gJGNvbnRhaW5lci5maW5kKCcuc2VsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgJHNlbGVjdGlvbkNvbnRhaW5lci5hcHBlbmQoJHNlbGVjdGlvbik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBCYXNlU2VsZWN0aW9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2RldGFjaENsb3NlSGFuZGxlcih0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBCYXNlU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGB1cGRhdGVgIG1ldGhvZCBtdXN0IGJlIGRlZmluZWQgaW4gY2hpbGQgY2xhc3Nlcy4nKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBCYXNlU2VsZWN0aW9uO1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL3NpbmdsZScsW1xuICAgICAgICAgICAgJ2pxdWVyeScsXG4gICAgICAgICAgICAnLi9iYXNlJyxcbiAgICAgICAgICAgICcuLi91dGlscycsXG4gICAgICAgICAgICAnLi4va2V5cydcbiAgICAgICAgXSwgZnVuY3Rpb24gKCQsIEJhc2VTZWxlY3Rpb24sIFV0aWxzLCBLRVlTKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBTaW5nbGVTZWxlY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIFNpbmdsZVNlbGVjdGlvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgVXRpbHMuRXh0ZW5kKFNpbmdsZVNlbGVjdGlvbiwgQmFzZVNlbGVjdGlvbik7XG5cbiAgICAgICAgICAgIFNpbmdsZVNlbGVjdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0aW9uID0gU2luZ2xlU2VsZWN0aW9uLl9fc3VwZXJfXy5yZW5kZXIuY2FsbCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICRzZWxlY3Rpb24uYWRkQ2xhc3MoJ3NlbGVjdDItc2VsZWN0aW9uLS1zaW5nbGUnKTtcblxuICAgICAgICAgICAgICAgICRzZWxlY3Rpb24uaHRtbChcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwic2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkXCI+PC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJzZWxlY3QyLXNlbGVjdGlvbl9fYXJyb3dcIiByb2xlPVwicHJlc2VudGF0aW9uXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICc8YiByb2xlPVwicHJlc2VudGF0aW9uXCI+PC9iPicgK1xuICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPidcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICRzZWxlY3Rpb247XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTaW5nbGVTZWxlY3Rpb24ucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCAkY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgU2luZ2xlU2VsZWN0aW9uLl9fc3VwZXJfXy5iaW5kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBjb250YWluZXIuaWQgKyAnLWNvbnRhaW5lcic7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpLmF0dHIoJ2lkJywgaWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuJHNlbGVjdGlvbi5hdHRyKCdhcmlhLWxhYmVsbGVkYnknLCBpZCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ21vdXNlZG93bicsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSByZXNwb25kIHRvIGxlZnQgY2xpY2tzXG4gICAgICAgICAgICAgICAgICAgIGlmIChldnQud2hpY2ggIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcigndG9nZ2xlJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZ0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kc2VsZWN0aW9uLm9uKCdmb2N1cycsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlciBmb2N1c2VzIG9uIHRoZSBjb250YWluZXJcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuJHNlbGVjdGlvbi5vbignYmx1cicsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlciBleGl0cyB0aGUgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ2ZvY3VzJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5lci5pc09wZW4oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VsZWN0aW9uLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5vbignc2VsZWN0aW9uOnVwZGF0ZScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi51cGRhdGUocGFyYW1zLmRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2luZ2xlU2VsZWN0aW9uLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpLmVtcHR5KCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTaW5nbGVTZWxlY3Rpb24ucHJvdG90eXBlLmRpc3BsYXkgPSBmdW5jdGlvbiAoZGF0YSwgY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gdGhpcy5vcHRpb25zLmdldCgndGVtcGxhdGVTZWxlY3Rpb24nKTtcbiAgICAgICAgICAgICAgICB2YXIgZXNjYXBlTWFya3VwID0gdGhpcy5vcHRpb25zLmdldCgnZXNjYXBlTWFya3VwJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZXNjYXBlTWFya3VwKHRlbXBsYXRlKGRhdGEsIGNvbnRhaW5lcikpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2luZ2xlU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3Rpb25Db250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQoJzxzcGFuPjwvc3Bhbj4nKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNpbmdsZVNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGRhdGFbMF07XG5cbiAgICAgICAgICAgICAgICB2YXIgJHJlbmRlcmVkID0gdGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgZm9ybWF0dGVkID0gdGhpcy5kaXNwbGF5KHNlbGVjdGlvbiwgJHJlbmRlcmVkKTtcblxuICAgICAgICAgICAgICAgICRyZW5kZXJlZC5lbXB0eSgpLmFwcGVuZChmb3JtYXR0ZWQpO1xuICAgICAgICAgICAgICAgICRyZW5kZXJlZC5wcm9wKCd0aXRsZScsIHNlbGVjdGlvbi50aXRsZSB8fCBzZWxlY3Rpb24udGV4dCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gU2luZ2xlU2VsZWN0aW9uO1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL211bHRpcGxlJyxbXG4gICAgICAgICAgICAnanF1ZXJ5JyxcbiAgICAgICAgICAgICcuL2Jhc2UnLFxuICAgICAgICAgICAgJy4uL3V0aWxzJ1xuICAgICAgICBdLCBmdW5jdGlvbiAoJCwgQmFzZVNlbGVjdGlvbiwgVXRpbHMpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIE11bHRpcGxlU2VsZWN0aW9uICgkZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIE11bHRpcGxlU2VsZWN0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBVdGlscy5FeHRlbmQoTXVsdGlwbGVTZWxlY3Rpb24sIEJhc2VTZWxlY3Rpb24pO1xuXG4gICAgICAgICAgICBNdWx0aXBsZVNlbGVjdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0aW9uID0gTXVsdGlwbGVTZWxlY3Rpb24uX19zdXBlcl9fLnJlbmRlci5jYWxsKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgJHNlbGVjdGlvbi5hZGRDbGFzcygnc2VsZWN0Mi1zZWxlY3Rpb24tLW11bHRpcGxlJyk7XG5cbiAgICAgICAgICAgICAgICAkc2VsZWN0aW9uLmh0bWwoXG4gICAgICAgICAgICAgICAgICAgICc8dWwgY2xhc3M9XCJzZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWRcIj48L3VsPidcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICRzZWxlY3Rpb247XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBNdWx0aXBsZVNlbGVjdGlvbi5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChjb250YWluZXIsICRjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICBNdWx0aXBsZVNlbGVjdGlvbi5fX3N1cGVyX18uYmluZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kc2VsZWN0aW9uLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCd0b2dnbGUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldnRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb24ub24oXG4gICAgICAgICAgICAgICAgICAgICdjbGljaycsXG4gICAgICAgICAgICAgICAgICAgICcuc2VsZWN0Mi1zZWxlY3Rpb25fX2Nob2ljZV9fcmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIHRoZSBldmVudCBpZiBpdCBpcyBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5nZXQoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkcmVtb3ZlID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0aW9uID0gJHJlbW92ZS5wYXJlbnQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkc2VsZWN0aW9uLmRhdGEoJ2RhdGEnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCd1bnNlbGVjdCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgTXVsdGlwbGVTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHNlbGVjdGlvbi5maW5kKCcuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkJykuZW1wdHkoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIE11bHRpcGxlU2VsZWN0aW9uLnByb3RvdHlwZS5kaXNwbGF5ID0gZnVuY3Rpb24gKGRhdGEsIGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IHRoaXMub3B0aW9ucy5nZXQoJ3RlbXBsYXRlU2VsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgdmFyIGVzY2FwZU1hcmt1cCA9IHRoaXMub3B0aW9ucy5nZXQoJ2VzY2FwZU1hcmt1cCcpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVzY2FwZU1hcmt1cCh0ZW1wbGF0ZShkYXRhLCBjb250YWluZXIpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIE11bHRpcGxlU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3Rpb25Db250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRjb250YWluZXIgPSAkKFxuICAgICAgICAgICAgICAgICAgICAnPGxpIGNsYXNzPVwic2VsZWN0Mi1zZWxlY3Rpb25fX2Nob2ljZVwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJzZWxlY3QyLXNlbGVjdGlvbl9fY2hvaWNlX19yZW1vdmVcIiByb2xlPVwicHJlc2VudGF0aW9uXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICcmdGltZXM7JyArXG4gICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgICAgICc8L2xpPidcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICRjb250YWluZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBNdWx0aXBsZVNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0aW9ucyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBkYXRhLmxlbmd0aDsgZCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBkYXRhW2RdO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0aW9uID0gdGhpcy5zZWxlY3Rpb25Db250YWluZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdHRlZCA9IHRoaXMuZGlzcGxheShzZWxlY3Rpb24sICRzZWxlY3Rpb24pO1xuXG4gICAgICAgICAgICAgICAgICAgICRzZWxlY3Rpb24uYXBwZW5kKGZvcm1hdHRlZCk7XG4gICAgICAgICAgICAgICAgICAgICRzZWxlY3Rpb24ucHJvcCgndGl0bGUnLCBzZWxlY3Rpb24udGl0bGUgfHwgc2VsZWN0aW9uLnRleHQpO1xuXG4gICAgICAgICAgICAgICAgICAgICRzZWxlY3Rpb24uZGF0YSgnZGF0YScsIHNlbGVjdGlvbik7XG5cbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdGlvbnMucHVzaCgkc2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgJHJlbmRlcmVkID0gdGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKTtcblxuICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZE1hbnkoJHJlbmRlcmVkLCAkc2VsZWN0aW9ucyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gTXVsdGlwbGVTZWxlY3Rpb247XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFMyLmRlZmluZSgnc2VsZWN0Mi9zZWxlY3Rpb24vcGxhY2Vob2xkZXInLFtcbiAgICAgICAgICAgICcuLi91dGlscydcbiAgICAgICAgXSwgZnVuY3Rpb24gKFV0aWxzKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBQbGFjZWhvbGRlciAoZGVjb3JhdGVkLCAkZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLm5vcm1hbGl6ZVBsYWNlaG9sZGVyKG9wdGlvbnMuZ2V0KCdwbGFjZWhvbGRlcicpKTtcblxuICAgICAgICAgICAgICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlbGVtZW50LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgUGxhY2Vob2xkZXIucHJvdG90eXBlLm5vcm1hbGl6ZVBsYWNlaG9sZGVyID0gZnVuY3Rpb24gKF8sIHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwbGFjZWhvbGRlciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwbGFjZWhvbGRlclxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBwbGFjZWhvbGRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFBsYWNlaG9sZGVyLnByb3RvdHlwZS5jcmVhdGVQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgdmFyICRwbGFjZWhvbGRlciA9IHRoaXMuc2VsZWN0aW9uQ29udGFpbmVyKCk7XG5cbiAgICAgICAgICAgICAgICAkcGxhY2Vob2xkZXIuaHRtbCh0aGlzLmRpc3BsYXkocGxhY2Vob2xkZXIpKTtcbiAgICAgICAgICAgICAgICAkcGxhY2Vob2xkZXIuYWRkQ2xhc3MoJ3NlbGVjdDItc2VsZWN0aW9uX19wbGFjZWhvbGRlcicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzZWxlY3QyLXNlbGVjdGlvbl9fY2hvaWNlJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJHBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgUGxhY2Vob2xkZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2luZ2xlUGxhY2Vob2xkZXIgPSAoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEubGVuZ3RoID09IDEgJiYgZGF0YVswXS5pZCAhPSB0aGlzLnBsYWNlaG9sZGVyLmlkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB2YXIgbXVsdGlwbGVTZWxlY3Rpb25zID0gZGF0YS5sZW5ndGggPiAxO1xuXG4gICAgICAgICAgICAgICAgaWYgKG11bHRpcGxlU2VsZWN0aW9ucyB8fCBzaW5nbGVQbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVjb3JhdGVkLmNhbGwodGhpcywgZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICAgICAgICAgICAgdmFyICRwbGFjZWhvbGRlciA9IHRoaXMuY3JlYXRlUGxhY2Vob2xkZXIodGhpcy5wbGFjZWhvbGRlcik7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpLmFwcGVuZCgkcGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFBsYWNlaG9sZGVyO1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL2FsbG93Q2xlYXInLFtcbiAgICAgICAgICAgICdqcXVlcnknLFxuICAgICAgICAgICAgJy4uL2tleXMnXG4gICAgICAgIF0sIGZ1bmN0aW9uICgkLCBLRVlTKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBBbGxvd0NsZWFyICgpIHsgfVxuXG4gICAgICAgICAgICBBbGxvd0NsZWFyLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ2RlYnVnJykgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU2VsZWN0MjogVGhlIGBhbGxvd0NsZWFyYCBvcHRpb24gc2hvdWxkIGJlIHVzZWQgaW4gY29tYmluYXRpb24gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dpdGggdGhlIGBwbGFjZWhvbGRlcmAgb3B0aW9uLidcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ21vdXNlZG93bicsICcuc2VsZWN0Mi1zZWxlY3Rpb25fX2NsZWFyJyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5faGFuZGxlQ2xlYXIoZXZ0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ2tleXByZXNzJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9oYW5kbGVLZXlib2FyZENsZWFyKGV2dCwgY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEFsbG93Q2xlYXIucHJvdG90eXBlLl9oYW5kbGVDbGVhciA9IGZ1bmN0aW9uIChfLCBldnQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmUgdGhlIGV2ZW50IGlmIGl0IGlzIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciAkY2xlYXIgPSB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19jbGVhcicpO1xuXG4gICAgICAgICAgICAgICAgLy8gSWdub3JlIHRoZSBldmVudCBpZiBub3RoaW5nIGhhcyBiZWVuIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgaWYgKCRjbGVhci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJGNsZWFyLmRhdGEoJ2RhdGEnKTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdW5zZWxlY3REYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVtkXVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIGB1bnNlbGVjdGAgZXZlbnQsIHNvIHBlb3BsZSBjYW4gcHJldmVudCBpdCBmcm9tIGJlaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIGNsZWFyZWQuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigndW5zZWxlY3QnLCB1bnNlbGVjdERhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBldmVudCB3YXMgcHJldmVudGVkLCBkb24ndCBjbGVhciBpdCBvdXQuXG4gICAgICAgICAgICAgICAgICAgIGlmICh1bnNlbGVjdERhdGEucHJldmVudGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LnZhbCh0aGlzLnBsYWNlaG9sZGVyLmlkKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigndG9nZ2xlJywge30pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgQWxsb3dDbGVhci5wcm90b3R5cGUuX2hhbmRsZUtleWJvYXJkQ2xlYXIgPSBmdW5jdGlvbiAoXywgZXZ0LCBjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyLmlzT3BlbigpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZXZ0LndoaWNoID09IEtFWVMuREVMRVRFIHx8IGV2dC53aGljaCA9PSBLRVlTLkJBQ0tTUEFDRSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVDbGVhcihldnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEFsbG93Q2xlYXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBkYXRhKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19wbGFjZWhvbGRlcicpLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciAkcmVtb3ZlID0gJChcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwic2VsZWN0Mi1zZWxlY3Rpb25fX2NsZWFyXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICcmdGltZXM7JyArXG4gICAgICAgICAgICAgICAgICAgICc8L3NwYW4+J1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgJHJlbW92ZS5kYXRhKCdkYXRhJywgZGF0YSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpLnByZXBlbmQoJHJlbW92ZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gQWxsb3dDbGVhcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL3NlbGVjdGlvbi9zZWFyY2gnLFtcbiAgICAgICAgICAgICdqcXVlcnknLFxuICAgICAgICAgICAgJy4uL3V0aWxzJyxcbiAgICAgICAgICAgICcuLi9rZXlzJ1xuICAgICAgICBdLCBmdW5jdGlvbiAoJCwgVXRpbHMsIEtFWVMpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIFNlYXJjaCAoZGVjb3JhdGVkLCAkZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlbGVtZW50LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoZGVjb3JhdGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyICRzZWFyY2ggPSAkKFxuICAgICAgICAgICAgICAgICAgICAnPGxpIGNsYXNzPVwic2VsZWN0Mi1zZWFyY2ggc2VsZWN0Mi1zZWFyY2gtLWlubGluZVwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPGlucHV0IGNsYXNzPVwic2VsZWN0Mi1zZWFyY2hfX2ZpZWxkXCIgdHlwZT1cInNlYXJjaFwiIHRhYmluZGV4PVwiLTFcIicgK1xuICAgICAgICAgICAgICAgICAgICAnIGF1dG9jb21wbGV0ZT1cIm9mZlwiIGF1dG9jb3JyZWN0PVwib2ZmXCIgYXV0b2NhcGl0YWxpemU9XCJub25lXCInICtcbiAgICAgICAgICAgICAgICAgICAgJyBzcGVsbGNoZWNrPVwiZmFsc2VcIiByb2xlPVwidGV4dGJveFwiIGFyaWEtYXV0b2NvbXBsZXRlPVwibGlzdFwiIC8+JyArXG4gICAgICAgICAgICAgICAgICAgICc8L2xpPidcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kc2VhcmNoQ29udGFpbmVyID0gJHNlYXJjaDtcbiAgICAgICAgICAgICAgICB0aGlzLiRzZWFyY2ggPSAkc2VhcmNoLmZpbmQoJ2lucHV0Jyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgJHJlbmRlcmVkID0gZGVjb3JhdGVkLmNhbGwodGhpcyk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl90cmFuc2ZlclRhYkluZGV4KCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJHJlbmRlcmVkO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcblxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5vbignb3BlbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VhcmNoLnRyaWdnZXIoJ2ZvY3VzJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRzZWFyY2gudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VhcmNoLnJlbW92ZUF0dHIoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRzZWFyY2gudHJpZ2dlcignZm9jdXMnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5vbignZW5hYmxlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRzZWFyY2gucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fdHJhbnNmZXJUYWJJbmRleCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdkaXNhYmxlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRzZWFyY2gucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5vbignZm9jdXMnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJHNlYXJjaC50cmlnZ2VyKCdmb2N1cycpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdyZXN1bHRzOmZvY3VzJywgZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRzZWFyY2guYXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50JywgcGFyYW1zLmlkKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuJHNlbGVjdGlvbi5vbignZm9jdXNpbicsICcuc2VsZWN0Mi1zZWFyY2gtLWlubGluZScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdmb2N1cycsIGV2dCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2ZvY3Vzb3V0JywgJy5zZWxlY3QyLXNlYXJjaC0taW5saW5lJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9oYW5kbGVCbHVyKGV2dCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2tleWRvd24nLCAnLnNlbGVjdDItc2VhcmNoLS1pbmxpbmUnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICBzZWxmLnRyaWdnZXIoJ2tleXByZXNzJywgZXZ0KTtcblxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9rZXlVcFByZXZlbnRlZCA9IGV2dC5pc0RlZmF1bHRQcmV2ZW50ZWQoKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gZXZ0LndoaWNoO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IEtFWVMuQkFDS1NQQUNFICYmIHNlbGYuJHNlYXJjaC52YWwoKSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkcHJldmlvdXNDaG9pY2UgPSBzZWxmLiRzZWFyY2hDb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnByZXYoJy5zZWxlY3QyLXNlbGVjdGlvbl9fY2hvaWNlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkcHJldmlvdXNDaG9pY2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gJHByZXZpb3VzQ2hvaWNlLmRhdGEoJ2RhdGEnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VhcmNoUmVtb3ZlQ2hvaWNlKGl0ZW0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFRyeSB0byBkZXRlY3QgdGhlIElFIHZlcnNpb24gc2hvdWxkIHRoZSBgZG9jdW1lbnRNb2RlYCBwcm9wZXJ0eSB0aGF0XG4gICAgICAgICAgICAgICAgLy8gaXMgc3RvcmVkIG9uIHRoZSBkb2N1bWVudC4gVGhpcyBpcyBvbmx5IGltcGxlbWVudGVkIGluIElFIGFuZCBpc1xuICAgICAgICAgICAgICAgIC8vIHNsaWdodGx5IGNsZWFuZXIgdGhhbiBkb2luZyBhIHVzZXIgYWdlbnQgY2hlY2suXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwcm9wZXJ0eSBpcyBub3QgYXZhaWxhYmxlIGluIEVkZ2UsIGJ1dCBFZGdlIGFsc28gZG9lc24ndCBoYXZlXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBidWcuXG4gICAgICAgICAgICAgICAgdmFyIG1zaWUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XG4gICAgICAgICAgICAgICAgdmFyIGRpc2FibGVJbnB1dEV2ZW50cyA9IG1zaWUgJiYgbXNpZSA8PSAxMTtcblxuICAgICAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGJyb3dzZXJzIHdoaWNoIGRvIG5vdCBzdXBwb3J0IHRoZSBgaW5wdXRgIGV2ZW50XG4gICAgICAgICAgICAgICAgLy8gVGhpcyB3aWxsIHByZXZlbnQgZG91YmxlLXRyaWdnZXJpbmcgb2YgZXZlbnRzIGZvciBicm93c2VycyB3aGljaCBzdXBwb3J0XG4gICAgICAgICAgICAgICAgLy8gYm90aCB0aGUgYGtleXVwYCBhbmQgYGlucHV0YCBldmVudHMuXG4gICAgICAgICAgICAgICAgdGhpcy4kc2VsZWN0aW9uLm9uKFxuICAgICAgICAgICAgICAgICAgICAnaW5wdXQuc2VhcmNoY2hlY2snLFxuICAgICAgICAgICAgICAgICAgICAnLnNlbGVjdDItc2VhcmNoLS1pbmxpbmUnLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJRSB3aWxsIHRyaWdnZXIgdGhlIGBpbnB1dGAgZXZlbnQgd2hlbiBhIHBsYWNlaG9sZGVyIGlzIHVzZWQgb24gYVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGJveC4gVG8gZ2V0IGFyb3VuZCB0aGlzIGlzc3VlLCB3ZSBhcmUgZm9yY2VkIHRvIGlnbm9yZSBhbGxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGBpbnB1dGAgZXZlbnRzIGluIElFIGFuZCBrZWVwIHVzaW5nIGBrZXl1cGAuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzYWJsZUlucHV0RXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VsZWN0aW9uLm9mZignaW5wdXQuc2VhcmNoIGlucHV0LnNlYXJjaGNoZWNrJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmJpbmQgdGhlIGR1cGxpY2F0ZWQgYGtleXVwYCBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VsZWN0aW9uLm9mZigna2V5dXAuc2VhcmNoJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kc2VsZWN0aW9uLm9uKFxuICAgICAgICAgICAgICAgICAgICAna2V5dXAuc2VhcmNoIGlucHV0LnNlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgICcuc2VsZWN0Mi1zZWFyY2gtLWlubGluZScsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElFIHdpbGwgdHJpZ2dlciB0aGUgYGlucHV0YCBldmVudCB3aGVuIGEgcGxhY2Vob2xkZXIgaXMgdXNlZCBvbiBhXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggYm94LiBUbyBnZXQgYXJvdW5kIHRoaXMgaXNzdWUsIHdlIGFyZSBmb3JjZWQgdG8gaWdub3JlIGFsbFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYGlucHV0YCBldmVudHMgaW4gSUUgYW5kIGtlZXAgdXNpbmcgYGtleXVwYC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXNhYmxlSW5wdXRFdmVudHMgJiYgZXZ0LnR5cGUgPT09ICdpbnB1dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiRzZWxlY3Rpb24ub2ZmKCdpbnB1dC5zZWFyY2ggaW5wdXQuc2VhcmNoY2hlY2snKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBldnQud2hpY2g7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGNhbiBmcmVlbHkgaWdub3JlIGV2ZW50cyBmcm9tIG1vZGlmaWVyIGtleXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gS0VZUy5TSElGVCB8fCBrZXkgPT0gS0VZUy5DVFJMIHx8IGtleSA9PSBLRVlTLkFMVCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGFiYmluZyB3aWxsIGJlIGhhbmRsZWQgZHVyaW5nIHRoZSBga2V5ZG93bmAgcGhhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gS0VZUy5UQUIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlU2VhcmNoKGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIHRyYW5zZmVyIHRoZSB0YWJpbmRleCBhdHRyaWJ1dGUgZnJvbSB0aGUgcmVuZGVyZWRcbiAgICAgICAgICAgICAqIHNlbGVjdGlvbiB0byB0aGUgc2VhcmNoIGJveC4gVGhpcyBhbGxvd3MgZm9yIHRoZSBzZWFyY2ggYm94IHRvIGJlIHVzZWQgYXNcbiAgICAgICAgICAgICAqIHRoZSBwcmltYXJ5IGZvY3VzIGluc3RlYWQgb2YgdGhlIHNlbGVjdGlvbiBjb250YWluZXIuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5fdHJhbnNmZXJUYWJJbmRleCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRzZWFyY2guYXR0cigndGFiaW5kZXgnLCB0aGlzLiRzZWxlY3Rpb24uYXR0cigndGFiaW5kZXgnKSk7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2VsZWN0aW9uLmF0dHIoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTZWFyY2gucHJvdG90eXBlLmNyZWF0ZVBsYWNlaG9sZGVyID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgcGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRzZWFyY2guYXR0cigncGxhY2Vob2xkZXInLCBwbGFjZWhvbGRlci50ZXh0KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlYXJjaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBzZWFyY2hIYWRGb2N1cyA9IHRoaXMuJHNlYXJjaFswXSA9PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kc2VhcmNoLmF0dHIoJ3BsYWNlaG9sZGVyJywgJycpO1xuXG4gICAgICAgICAgICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgZGF0YSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQodGhpcy4kc2VhcmNoQ29udGFpbmVyKTtcblxuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplU2VhcmNoKCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlYXJjaEhhZEZvY3VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHNlYXJjaC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlYXJjaC5wcm90b3R5cGUuaGFuZGxlU2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplU2VhcmNoKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2tleVVwUHJldmVudGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMuJHNlYXJjaC52YWwoKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3F1ZXJ5Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVybTogaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5fa2V5VXBQcmV2ZW50ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlYXJjaC5wcm90b3R5cGUuc2VhcmNoUmVtb3ZlQ2hvaWNlID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgaXRlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigndW5zZWxlY3QnLCB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGl0ZW1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuJHNlYXJjaC52YWwoaXRlbS50ZXh0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNlYXJjaCgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5yZXNpemVTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2VhcmNoLmNzcygnd2lkdGgnLCAnMjVweCcpO1xuXG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gJyc7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kc2VhcmNoLmF0dHIoJ3BsYWNlaG9sZGVyJykgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gdGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKS5pbm5lcldpZHRoKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbmltdW1XaWR0aCA9IHRoaXMuJHNlYXJjaC52YWwoKS5sZW5ndGggKyAxO1xuXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gKG1pbmltdW1XaWR0aCAqIDAuNzUpICsgJ2VtJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWFyY2guY3NzKCd3aWR0aCcsIHdpZHRoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBTZWFyY2g7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFMyLmRlZmluZSgnc2VsZWN0Mi9zZWxlY3Rpb24vZXZlbnRSZWxheScsW1xuICAgICAgICAgICAgJ2pxdWVyeSdcbiAgICAgICAgXSwgZnVuY3Rpb24gKCQpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIEV2ZW50UmVsYXkgKCkgeyB9XG5cbiAgICAgICAgICAgIEV2ZW50UmVsYXkucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIsICRjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIHJlbGF5RXZlbnRzID0gW1xuICAgICAgICAgICAgICAgICAgICAnb3BlbicsICdvcGVuaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgJ2Nsb3NlJywgJ2Nsb3NpbmcnLFxuICAgICAgICAgICAgICAgICAgICAnc2VsZWN0JywgJ3NlbGVjdGluZycsXG4gICAgICAgICAgICAgICAgICAgICd1bnNlbGVjdCcsICd1bnNlbGVjdGluZydcbiAgICAgICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICAgICAgdmFyIHByZXZlbnRhYmxlRXZlbnRzID0gWydvcGVuaW5nJywgJ2Nsb3NpbmcnLCAnc2VsZWN0aW5nJywgJ3Vuc2VsZWN0aW5nJ107XG5cbiAgICAgICAgICAgICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBjb250YWluZXIsICRjb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCcqJywgZnVuY3Rpb24gKG5hbWUsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZXZlbnRzIHRoYXQgc2hvdWxkIG5vdCBiZSByZWxheWVkXG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmluQXJyYXkobmFtZSwgcmVsYXlFdmVudHMpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHBhcmFtZXRlcnMgc2hvdWxkIGFsd2F5cyBiZSBhbiBvYmplY3RcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zID0gcGFyYW1zIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIHRoZSBqUXVlcnkgZXZlbnQgZm9yIHRoZSBTZWxlY3QyIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgIHZhciBldnQgPSAkLkV2ZW50KCdzZWxlY3QyOicgKyBuYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBzZWxmLiRlbGVtZW50LnRyaWdnZXIoZXZ0KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGhhbmRsZSBwcmV2ZW50YWJsZSBldmVudHMgaWYgaXQgd2FzIG9uZVxuICAgICAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KG5hbWUsIHByZXZlbnRhYmxlRXZlbnRzKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5wcmV2ZW50ZWQgPSBldnQuaXNEZWZhdWx0UHJldmVudGVkKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gRXZlbnRSZWxheTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL3RyYW5zbGF0aW9uJyxbXG4gICAgICAgICAgICAnanF1ZXJ5JyxcbiAgICAgICAgICAgICdyZXF1aXJlJ1xuICAgICAgICBdLCBmdW5jdGlvbiAoJCwgcmVxdWlyZSkge1xuICAgICAgICAgICAgZnVuY3Rpb24gVHJhbnNsYXRpb24gKGRpY3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpY3QgPSBkaWN0IHx8IHt9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBUcmFuc2xhdGlvbi5wcm90b3R5cGUuYWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBUcmFuc2xhdGlvbi5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpY3Rba2V5XTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFRyYW5zbGF0aW9uLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiAodHJhbnNsYXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpY3QgPSAkLmV4dGVuZCh7fSwgdHJhbnNsYXRpb24uYWxsKCksIHRoaXMuZGljdCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBTdGF0aWMgZnVuY3Rpb25zXG5cbiAgICAgICAgICAgIFRyYW5zbGF0aW9uLl9jYWNoZSA9IHt9O1xuXG4gICAgICAgICAgICBUcmFuc2xhdGlvbi5sb2FkUGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocGF0aCBpbiBUcmFuc2xhdGlvbi5fY2FjaGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGlvbnMgPSByZXF1aXJlKHBhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIFRyYW5zbGF0aW9uLl9jYWNoZVtwYXRoXSA9IHRyYW5zbGF0aW9ucztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRyYW5zbGF0aW9uKFRyYW5zbGF0aW9uLl9jYWNoZVtwYXRoXSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gVHJhbnNsYXRpb247XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFMyLmRlZmluZSgnc2VsZWN0Mi9kaWFjcml0aWNzJyxbXG5cbiAgICAgICAgXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRpYWNyaXRpY3MgPSB7XG4gICAgICAgICAgICAgICAgJ1xcdTI0QjYnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdUZGMjEnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwQzAnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwQzEnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwQzInOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQTYnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQTQnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQUEnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQTgnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwQzMnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMDAnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMDInOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQjAnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQUUnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQjQnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQjInOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMjYnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRTAnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwQzQnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxREUnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQTInOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwQzUnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRkEnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxQ0QnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMDAnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMDInOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQTAnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQUMnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQjYnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMDAnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMDQnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTAyM0EnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdTJDNkYnOiAnQScsXG4gICAgICAgICAgICAgICAgJ1xcdUE3MzInOiAnQUEnLFxuICAgICAgICAgICAgICAgICdcXHUwMEM2JzogJ0FFJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFGQyc6ICdBRScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRTInOiAnQUUnLFxuICAgICAgICAgICAgICAgICdcXHVBNzM0JzogJ0FPJyxcbiAgICAgICAgICAgICAgICAnXFx1QTczNic6ICdBVScsXG4gICAgICAgICAgICAgICAgJ1xcdUE3MzgnOiAnQVYnLFxuICAgICAgICAgICAgICAgICdcXHVBNzNBJzogJ0FWJyxcbiAgICAgICAgICAgICAgICAnXFx1QTczQyc6ICdBWScsXG4gICAgICAgICAgICAgICAgJ1xcdTI0QjcnOiAnQicsXG4gICAgICAgICAgICAgICAgJ1xcdUZGMjInOiAnQicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMDInOiAnQicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMDQnOiAnQicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMDYnOiAnQicsXG4gICAgICAgICAgICAgICAgJ1xcdTAyNDMnOiAnQicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxODInOiAnQicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxODEnOiAnQicsXG4gICAgICAgICAgICAgICAgJ1xcdTI0QjgnOiAnQycsXG4gICAgICAgICAgICAgICAgJ1xcdUZGMjMnOiAnQycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMDYnOiAnQycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMDgnOiAnQycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMEEnOiAnQycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMEMnOiAnQycsXG4gICAgICAgICAgICAgICAgJ1xcdTAwQzcnOiAnQycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMDgnOiAnQycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxODcnOiAnQycsXG4gICAgICAgICAgICAgICAgJ1xcdTAyM0InOiAnQycsXG4gICAgICAgICAgICAgICAgJ1xcdUE3M0UnOiAnQycsXG4gICAgICAgICAgICAgICAgJ1xcdTI0QjknOiAnRCcsXG4gICAgICAgICAgICAgICAgJ1xcdUZGMjQnOiAnRCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMEEnOiAnRCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMEUnOiAnRCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMEMnOiAnRCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMTAnOiAnRCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMTInOiAnRCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMEUnOiAnRCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMTAnOiAnRCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxOEInOiAnRCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxOEEnOiAnRCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxODknOiAnRCcsXG4gICAgICAgICAgICAgICAgJ1xcdUE3NzknOiAnRCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRjEnOiAnRFonLFxuICAgICAgICAgICAgICAgICdcXHUwMUM0JzogJ0RaJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFGMic6ICdEeicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxQzUnOiAnRHonLFxuICAgICAgICAgICAgICAgICdcXHUyNEJBJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHVGRjI1JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMEM4JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMEM5JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMENBJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUMwJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUJFJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUM0JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUMyJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUJDJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMTEyJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUxRTE0JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUxRTE2JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMTE0JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMTE2JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMENCJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUJBJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMTFBJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMjA0JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMjA2JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUI4JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUM2JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMjI4JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUxRTFDJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMTE4JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUxRTE4JzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUxRTFBJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMTkwJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUwMThFJzogJ0UnLFxuICAgICAgICAgICAgICAgICdcXHUyNEJCJzogJ0YnLFxuICAgICAgICAgICAgICAgICdcXHVGRjI2JzogJ0YnLFxuICAgICAgICAgICAgICAgICdcXHUxRTFFJzogJ0YnLFxuICAgICAgICAgICAgICAgICdcXHUwMTkxJzogJ0YnLFxuICAgICAgICAgICAgICAgICdcXHVBNzdCJzogJ0YnLFxuICAgICAgICAgICAgICAgICdcXHUyNEJDJzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHVGRjI3JzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHUwMUY0JzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHUwMTFDJzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHUxRTIwJzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHUwMTFFJzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHUwMTIwJzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHUwMUU2JzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHUwMTIyJzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHUwMUU0JzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHUwMTkzJzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHVBN0EwJzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHVBNzdEJzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHVBNzdFJzogJ0cnLFxuICAgICAgICAgICAgICAgICdcXHUyNEJEJzogJ0gnLFxuICAgICAgICAgICAgICAgICdcXHVGRjI4JzogJ0gnLFxuICAgICAgICAgICAgICAgICdcXHUwMTI0JzogJ0gnLFxuICAgICAgICAgICAgICAgICdcXHUxRTIyJzogJ0gnLFxuICAgICAgICAgICAgICAgICdcXHUxRTI2JzogJ0gnLFxuICAgICAgICAgICAgICAgICdcXHUwMjFFJzogJ0gnLFxuICAgICAgICAgICAgICAgICdcXHUxRTI0JzogJ0gnLFxuICAgICAgICAgICAgICAgICdcXHUxRTI4JzogJ0gnLFxuICAgICAgICAgICAgICAgICdcXHUxRTJBJzogJ0gnLFxuICAgICAgICAgICAgICAgICdcXHUwMTI2JzogJ0gnLFxuICAgICAgICAgICAgICAgICdcXHUyQzY3JzogJ0gnLFxuICAgICAgICAgICAgICAgICdcXHUyQzc1JzogJ0gnLFxuICAgICAgICAgICAgICAgICdcXHVBNzhEJzogJ0gnLFxuICAgICAgICAgICAgICAgICdcXHUyNEJFJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHVGRjI5JzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUwMENDJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUwMENEJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUwMENFJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUwMTI4JzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUwMTJBJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUwMTJDJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUwMTMwJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUwMENGJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUxRTJFJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUxRUM4JzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUwMUNGJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUwMjA4JzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUwMjBBJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUxRUNBJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUwMTJFJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUxRTJDJzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUwMTk3JzogJ0knLFxuICAgICAgICAgICAgICAgICdcXHUyNEJGJzogJ0onLFxuICAgICAgICAgICAgICAgICdcXHVGRjJBJzogJ0onLFxuICAgICAgICAgICAgICAgICdcXHUwMTM0JzogJ0onLFxuICAgICAgICAgICAgICAgICdcXHUwMjQ4JzogJ0onLFxuICAgICAgICAgICAgICAgICdcXHUyNEMwJzogJ0snLFxuICAgICAgICAgICAgICAgICdcXHVGRjJCJzogJ0snLFxuICAgICAgICAgICAgICAgICdcXHUxRTMwJzogJ0snLFxuICAgICAgICAgICAgICAgICdcXHUwMUU4JzogJ0snLFxuICAgICAgICAgICAgICAgICdcXHUxRTMyJzogJ0snLFxuICAgICAgICAgICAgICAgICdcXHUwMTM2JzogJ0snLFxuICAgICAgICAgICAgICAgICdcXHUxRTM0JzogJ0snLFxuICAgICAgICAgICAgICAgICdcXHUwMTk4JzogJ0snLFxuICAgICAgICAgICAgICAgICdcXHUyQzY5JzogJ0snLFxuICAgICAgICAgICAgICAgICdcXHVBNzQwJzogJ0snLFxuICAgICAgICAgICAgICAgICdcXHVBNzQyJzogJ0snLFxuICAgICAgICAgICAgICAgICdcXHVBNzQ0JzogJ0snLFxuICAgICAgICAgICAgICAgICdcXHVBN0EyJzogJ0snLFxuICAgICAgICAgICAgICAgICdcXHUyNEMxJzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHVGRjJDJzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHUwMTNGJzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHUwMTM5JzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHUwMTNEJzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHUxRTM2JzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHUxRTM4JzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHUwMTNCJzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHUxRTNDJzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHUxRTNBJzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHUwMTQxJzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHUwMjNEJzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHUyQzYyJzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHUyQzYwJzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHVBNzQ4JzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHVBNzQ2JzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHVBNzgwJzogJ0wnLFxuICAgICAgICAgICAgICAgICdcXHUwMUM3JzogJ0xKJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFDOCc6ICdMaicsXG4gICAgICAgICAgICAgICAgJ1xcdTI0QzInOiAnTScsXG4gICAgICAgICAgICAgICAgJ1xcdUZGMkQnOiAnTScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFM0UnOiAnTScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNDAnOiAnTScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNDInOiAnTScsXG4gICAgICAgICAgICAgICAgJ1xcdTJDNkUnOiAnTScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxOUMnOiAnTScsXG4gICAgICAgICAgICAgICAgJ1xcdTI0QzMnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdUZGMkUnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRjgnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNDMnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdTAwRDEnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNDQnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNDcnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNDYnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNDUnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNEEnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNDgnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMjAnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxOUQnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdUE3OTAnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdUE3QTQnOiAnTicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxQ0EnOiAnTkonLFxuICAgICAgICAgICAgICAgICdcXHUwMUNCJzogJ05qJyxcbiAgICAgICAgICAgICAgICAnXFx1MjRDNCc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1RkYyRic6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDBEMic6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDBEMyc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDBENCc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUVEMic6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUVEMCc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUVENic6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUVENCc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDBENSc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU0Qyc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDIyQyc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU0RSc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE0Qyc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU1MCc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU1Mic6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE0RSc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDIyRSc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDIzMCc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDBENic6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDIyQSc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUVDRSc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE1MCc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFEMSc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDIwQyc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDIwRSc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFBMCc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUVEQyc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUVEQSc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUVFMCc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUVERSc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUVFMic6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUVDQyc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MUVEOCc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFFQSc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFFQyc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDBEOCc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFGRSc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE4Nic6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE5Ric6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1QTc0QSc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1QTc0Qyc6ICdPJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFBMic6ICdPSScsXG4gICAgICAgICAgICAgICAgJ1xcdUE3NEUnOiAnT08nLFxuICAgICAgICAgICAgICAgICdcXHUwMjIyJzogJ09VJyxcbiAgICAgICAgICAgICAgICAnXFx1MjRDNSc6ICdQJyxcbiAgICAgICAgICAgICAgICAnXFx1RkYzMCc6ICdQJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU1NCc6ICdQJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU1Nic6ICdQJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFBNCc6ICdQJyxcbiAgICAgICAgICAgICAgICAnXFx1MkM2Myc6ICdQJyxcbiAgICAgICAgICAgICAgICAnXFx1QTc1MCc6ICdQJyxcbiAgICAgICAgICAgICAgICAnXFx1QTc1Mic6ICdQJyxcbiAgICAgICAgICAgICAgICAnXFx1QTc1NCc6ICdQJyxcbiAgICAgICAgICAgICAgICAnXFx1MjRDNic6ICdRJyxcbiAgICAgICAgICAgICAgICAnXFx1RkYzMSc6ICdRJyxcbiAgICAgICAgICAgICAgICAnXFx1QTc1Nic6ICdRJyxcbiAgICAgICAgICAgICAgICAnXFx1QTc1OCc6ICdRJyxcbiAgICAgICAgICAgICAgICAnXFx1MDI0QSc6ICdRJyxcbiAgICAgICAgICAgICAgICAnXFx1MjRDNyc6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1RkYzMic6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE1NCc6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU1OCc6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE1OCc6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1MDIxMCc6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1MDIxMic6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU1QSc6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU1Qyc6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE1Nic6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU1RSc6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1MDI0Qyc6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1MkM2NCc6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1QTc1QSc6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1QTdBNic6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1QTc4Mic6ICdSJyxcbiAgICAgICAgICAgICAgICAnXFx1MjRDOCc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1RkYzMyc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU5RSc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE1QSc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU2NCc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE1Qyc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU2MCc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE2MCc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU2Nic6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU2Mic6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU2OCc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1MDIxOCc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE1RSc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1MkM3RSc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1QTdBOCc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1QTc4NCc6ICdTJyxcbiAgICAgICAgICAgICAgICAnXFx1MjRDOSc6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1RkYzNCc6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU2QSc6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE2NCc6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU2Qyc6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1MDIxQSc6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE2Mic6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU3MCc6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU2RSc6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE2Nic6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFBQyc6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFBRSc6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1MDIzRSc6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1QTc4Nic6ICdUJyxcbiAgICAgICAgICAgICAgICAnXFx1QTcyOCc6ICdUWicsXG4gICAgICAgICAgICAgICAgJ1xcdTI0Q0EnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdUZGMzUnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwRDknOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwREEnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwREInOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNjgnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNzgnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNkEnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFN0EnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNkMnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwREMnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxREInOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRDcnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRDUnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRDknOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRTYnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNkUnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNzAnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRDMnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMTQnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMTYnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxQUYnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRUEnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRTgnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRUUnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRUMnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRjAnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRTQnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNzInOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNzInOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNzYnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNzQnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTAyNDQnOiAnVScsXG4gICAgICAgICAgICAgICAgJ1xcdTI0Q0InOiAnVicsXG4gICAgICAgICAgICAgICAgJ1xcdUZGMzYnOiAnVicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFN0MnOiAnVicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFN0UnOiAnVicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxQjInOiAnVicsXG4gICAgICAgICAgICAgICAgJ1xcdUE3NUUnOiAnVicsXG4gICAgICAgICAgICAgICAgJ1xcdTAyNDUnOiAnVicsXG4gICAgICAgICAgICAgICAgJ1xcdUE3NjAnOiAnVlknLFxuICAgICAgICAgICAgICAgICdcXHUyNENDJzogJ1cnLFxuICAgICAgICAgICAgICAgICdcXHVGRjM3JzogJ1cnLFxuICAgICAgICAgICAgICAgICdcXHUxRTgwJzogJ1cnLFxuICAgICAgICAgICAgICAgICdcXHUxRTgyJzogJ1cnLFxuICAgICAgICAgICAgICAgICdcXHUwMTc0JzogJ1cnLFxuICAgICAgICAgICAgICAgICdcXHUxRTg2JzogJ1cnLFxuICAgICAgICAgICAgICAgICdcXHUxRTg0JzogJ1cnLFxuICAgICAgICAgICAgICAgICdcXHUxRTg4JzogJ1cnLFxuICAgICAgICAgICAgICAgICdcXHUyQzcyJzogJ1cnLFxuICAgICAgICAgICAgICAgICdcXHUyNENEJzogJ1gnLFxuICAgICAgICAgICAgICAgICdcXHVGRjM4JzogJ1gnLFxuICAgICAgICAgICAgICAgICdcXHUxRThBJzogJ1gnLFxuICAgICAgICAgICAgICAgICdcXHUxRThDJzogJ1gnLFxuICAgICAgICAgICAgICAgICdcXHUyNENFJzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHVGRjM5JzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHUxRUYyJzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHUwMEREJzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHUwMTc2JzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHUxRUY4JzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHUwMjMyJzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHUxRThFJzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHUwMTc4JzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHUxRUY2JzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHUxRUY0JzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHUwMUIzJzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHUwMjRFJzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHUxRUZFJzogJ1knLFxuICAgICAgICAgICAgICAgICdcXHUyNENGJzogJ1onLFxuICAgICAgICAgICAgICAgICdcXHVGRjNBJzogJ1onLFxuICAgICAgICAgICAgICAgICdcXHUwMTc5JzogJ1onLFxuICAgICAgICAgICAgICAgICdcXHUxRTkwJzogJ1onLFxuICAgICAgICAgICAgICAgICdcXHUwMTdCJzogJ1onLFxuICAgICAgICAgICAgICAgICdcXHUwMTdEJzogJ1onLFxuICAgICAgICAgICAgICAgICdcXHUxRTkyJzogJ1onLFxuICAgICAgICAgICAgICAgICdcXHUxRTk0JzogJ1onLFxuICAgICAgICAgICAgICAgICdcXHUwMUI1JzogJ1onLFxuICAgICAgICAgICAgICAgICdcXHUwMjI0JzogJ1onLFxuICAgICAgICAgICAgICAgICdcXHUyQzdGJzogJ1onLFxuICAgICAgICAgICAgICAgICdcXHUyQzZCJzogJ1onLFxuICAgICAgICAgICAgICAgICdcXHVBNzYyJzogJ1onLFxuICAgICAgICAgICAgICAgICdcXHUyNEQwJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHVGRjQxJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRTlBJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMEUwJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMEUxJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMEUyJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRUE3JzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRUE1JzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRUFCJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRUE5JzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMEUzJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMTAxJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMTAzJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRUIxJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRUFGJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRUI1JzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRUIzJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMjI3JzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMUUxJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMEU0JzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMURGJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRUEzJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMEU1JzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMUZCJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMUNFJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMjAxJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMjAzJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRUExJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRUFEJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRUI3JzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUxRTAxJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMTA1JzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUyQzY1JzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHUwMjUwJzogJ2EnLFxuICAgICAgICAgICAgICAgICdcXHVBNzMzJzogJ2FhJyxcbiAgICAgICAgICAgICAgICAnXFx1MDBFNic6ICdhZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRkQnOiAnYWUnLFxuICAgICAgICAgICAgICAgICdcXHUwMUUzJzogJ2FlJyxcbiAgICAgICAgICAgICAgICAnXFx1QTczNSc6ICdhbycsXG4gICAgICAgICAgICAgICAgJ1xcdUE3MzcnOiAnYXUnLFxuICAgICAgICAgICAgICAgICdcXHVBNzM5JzogJ2F2JyxcbiAgICAgICAgICAgICAgICAnXFx1QTczQic6ICdhdicsXG4gICAgICAgICAgICAgICAgJ1xcdUE3M0QnOiAnYXknLFxuICAgICAgICAgICAgICAgICdcXHUyNEQxJzogJ2InLFxuICAgICAgICAgICAgICAgICdcXHVGRjQyJzogJ2InLFxuICAgICAgICAgICAgICAgICdcXHUxRTAzJzogJ2InLFxuICAgICAgICAgICAgICAgICdcXHUxRTA1JzogJ2InLFxuICAgICAgICAgICAgICAgICdcXHUxRTA3JzogJ2InLFxuICAgICAgICAgICAgICAgICdcXHUwMTgwJzogJ2InLFxuICAgICAgICAgICAgICAgICdcXHUwMTgzJzogJ2InLFxuICAgICAgICAgICAgICAgICdcXHUwMjUzJzogJ2InLFxuICAgICAgICAgICAgICAgICdcXHUyNEQyJzogJ2MnLFxuICAgICAgICAgICAgICAgICdcXHVGRjQzJzogJ2MnLFxuICAgICAgICAgICAgICAgICdcXHUwMTA3JzogJ2MnLFxuICAgICAgICAgICAgICAgICdcXHUwMTA5JzogJ2MnLFxuICAgICAgICAgICAgICAgICdcXHUwMTBCJzogJ2MnLFxuICAgICAgICAgICAgICAgICdcXHUwMTBEJzogJ2MnLFxuICAgICAgICAgICAgICAgICdcXHUwMEU3JzogJ2MnLFxuICAgICAgICAgICAgICAgICdcXHUxRTA5JzogJ2MnLFxuICAgICAgICAgICAgICAgICdcXHUwMTg4JzogJ2MnLFxuICAgICAgICAgICAgICAgICdcXHUwMjNDJzogJ2MnLFxuICAgICAgICAgICAgICAgICdcXHVBNzNGJzogJ2MnLFxuICAgICAgICAgICAgICAgICdcXHUyMTg0JzogJ2MnLFxuICAgICAgICAgICAgICAgICdcXHUyNEQzJzogJ2QnLFxuICAgICAgICAgICAgICAgICdcXHVGRjQ0JzogJ2QnLFxuICAgICAgICAgICAgICAgICdcXHUxRTBCJzogJ2QnLFxuICAgICAgICAgICAgICAgICdcXHUwMTBGJzogJ2QnLFxuICAgICAgICAgICAgICAgICdcXHUxRTBEJzogJ2QnLFxuICAgICAgICAgICAgICAgICdcXHUxRTExJzogJ2QnLFxuICAgICAgICAgICAgICAgICdcXHUxRTEzJzogJ2QnLFxuICAgICAgICAgICAgICAgICdcXHUxRTBGJzogJ2QnLFxuICAgICAgICAgICAgICAgICdcXHUwMTExJzogJ2QnLFxuICAgICAgICAgICAgICAgICdcXHUwMThDJzogJ2QnLFxuICAgICAgICAgICAgICAgICdcXHUwMjU2JzogJ2QnLFxuICAgICAgICAgICAgICAgICdcXHUwMjU3JzogJ2QnLFxuICAgICAgICAgICAgICAgICdcXHVBNzdBJzogJ2QnLFxuICAgICAgICAgICAgICAgICdcXHUwMUYzJzogJ2R6JyxcbiAgICAgICAgICAgICAgICAnXFx1MDFDNic6ICdkeicsXG4gICAgICAgICAgICAgICAgJ1xcdTI0RDQnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdUZGNDUnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwRTgnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwRTknOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwRUEnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQzEnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQkYnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQzUnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQzMnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQkQnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMTMnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMTUnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMTcnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMTUnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMTcnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAwRUInOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQkInOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMUInOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMDUnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMDcnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQjknOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQzcnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMjknOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMUQnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMTknOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMTknOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMUInOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAyNDcnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAyNUInOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTAxREQnOiAnZScsXG4gICAgICAgICAgICAgICAgJ1xcdTI0RDUnOiAnZicsXG4gICAgICAgICAgICAgICAgJ1xcdUZGNDYnOiAnZicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMUYnOiAnZicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxOTInOiAnZicsXG4gICAgICAgICAgICAgICAgJ1xcdUE3N0MnOiAnZicsXG4gICAgICAgICAgICAgICAgJ1xcdTI0RDYnOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdUZGNDcnOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRjUnOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMUQnOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMjEnOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMUYnOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMjEnOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRTcnOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMjMnOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRTUnOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdTAyNjAnOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdUE3QTEnOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdTFENzknOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdUE3N0YnOiAnZycsXG4gICAgICAgICAgICAgICAgJ1xcdTI0RDcnOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdUZGNDgnOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMjUnOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMjMnOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMjcnOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMUYnOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMjUnOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMjknOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFMkInOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFOTYnOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxMjcnOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdTJDNjgnOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdTJDNzYnOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAyNjUnOiAnaCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxOTUnOiAnaHYnLFxuICAgICAgICAgICAgICAgICdcXHUyNEQ4JzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHVGRjQ5JzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUwMEVDJzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUwMEVEJzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUwMEVFJzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUwMTI5JzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUwMTJCJzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUwMTJEJzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUwMEVGJzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUxRTJGJzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUxRUM5JzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUwMUQwJzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUwMjA5JzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUwMjBCJzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUxRUNCJzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUwMTJGJzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUxRTJEJzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUwMjY4JzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUwMTMxJzogJ2knLFxuICAgICAgICAgICAgICAgICdcXHUyNEQ5JzogJ2onLFxuICAgICAgICAgICAgICAgICdcXHVGRjRBJzogJ2onLFxuICAgICAgICAgICAgICAgICdcXHUwMTM1JzogJ2onLFxuICAgICAgICAgICAgICAgICdcXHUwMUYwJzogJ2onLFxuICAgICAgICAgICAgICAgICdcXHUwMjQ5JzogJ2onLFxuICAgICAgICAgICAgICAgICdcXHUyNERBJzogJ2snLFxuICAgICAgICAgICAgICAgICdcXHVGRjRCJzogJ2snLFxuICAgICAgICAgICAgICAgICdcXHUxRTMxJzogJ2snLFxuICAgICAgICAgICAgICAgICdcXHUwMUU5JzogJ2snLFxuICAgICAgICAgICAgICAgICdcXHUxRTMzJzogJ2snLFxuICAgICAgICAgICAgICAgICdcXHUwMTM3JzogJ2snLFxuICAgICAgICAgICAgICAgICdcXHUxRTM1JzogJ2snLFxuICAgICAgICAgICAgICAgICdcXHUwMTk5JzogJ2snLFxuICAgICAgICAgICAgICAgICdcXHUyQzZBJzogJ2snLFxuICAgICAgICAgICAgICAgICdcXHVBNzQxJzogJ2snLFxuICAgICAgICAgICAgICAgICdcXHVBNzQzJzogJ2snLFxuICAgICAgICAgICAgICAgICdcXHVBNzQ1JzogJ2snLFxuICAgICAgICAgICAgICAgICdcXHVBN0EzJzogJ2snLFxuICAgICAgICAgICAgICAgICdcXHUyNERCJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHVGRjRDJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUwMTQwJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUwMTNBJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUwMTNFJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUxRTM3JzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUxRTM5JzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUwMTNDJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUxRTNEJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUxRTNCJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUwMTdGJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUwMTQyJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUwMTlBJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUwMjZCJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUyQzYxJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHVBNzQ5JzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHVBNzgxJzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHVBNzQ3JzogJ2wnLFxuICAgICAgICAgICAgICAgICdcXHUwMUM5JzogJ2xqJyxcbiAgICAgICAgICAgICAgICAnXFx1MjREQyc6ICdtJyxcbiAgICAgICAgICAgICAgICAnXFx1RkY0RCc6ICdtJyxcbiAgICAgICAgICAgICAgICAnXFx1MUUzRic6ICdtJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU0MSc6ICdtJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU0Myc6ICdtJyxcbiAgICAgICAgICAgICAgICAnXFx1MDI3MSc6ICdtJyxcbiAgICAgICAgICAgICAgICAnXFx1MDI2Ric6ICdtJyxcbiAgICAgICAgICAgICAgICAnXFx1MjRERCc6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1RkY0RSc6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFGOSc6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE0NCc6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1MDBGMSc6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU0NSc6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE0OCc6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU0Nyc6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE0Nic6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU0Qic6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1MUU0OSc6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE5RSc6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1MDI3Mic6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1MDE0OSc6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1QTc5MSc6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1QTdBNSc6ICduJyxcbiAgICAgICAgICAgICAgICAnXFx1MDFDQyc6ICduaicsXG4gICAgICAgICAgICAgICAgJ1xcdTI0REUnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdUZGNEYnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAwRjInOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAwRjMnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAwRjQnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRDMnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRDEnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRDcnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRDUnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAwRjUnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNEQnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMkQnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNEYnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNEQnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNTEnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNTMnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNEYnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMkYnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMzEnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAwRjYnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMkInOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQ0YnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNTEnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRDInOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMEQnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMEYnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxQTEnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFREQnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFREInOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRTEnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFREYnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRTMnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFQ0QnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFRDknOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRUInOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRUQnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAwRjgnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxRkYnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAyNTQnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdUE3NEInOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdUE3NEQnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAyNzUnOiAnbycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxQTMnOiAnb2knLFxuICAgICAgICAgICAgICAgICdcXHUwMjIzJzogJ291JyxcbiAgICAgICAgICAgICAgICAnXFx1QTc0Ric6ICdvbycsXG4gICAgICAgICAgICAgICAgJ1xcdTI0REYnOiAncCcsXG4gICAgICAgICAgICAgICAgJ1xcdUZGNTAnOiAncCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNTUnOiAncCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNTcnOiAncCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxQTUnOiAncCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFEN0QnOiAncCcsXG4gICAgICAgICAgICAgICAgJ1xcdUE3NTEnOiAncCcsXG4gICAgICAgICAgICAgICAgJ1xcdUE3NTMnOiAncCcsXG4gICAgICAgICAgICAgICAgJ1xcdUE3NTUnOiAncCcsXG4gICAgICAgICAgICAgICAgJ1xcdTI0RTAnOiAncScsXG4gICAgICAgICAgICAgICAgJ1xcdUZGNTEnOiAncScsXG4gICAgICAgICAgICAgICAgJ1xcdTAyNEInOiAncScsXG4gICAgICAgICAgICAgICAgJ1xcdUE3NTcnOiAncScsXG4gICAgICAgICAgICAgICAgJ1xcdUE3NTknOiAncScsXG4gICAgICAgICAgICAgICAgJ1xcdTI0RTEnOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdUZGNTInOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNTUnOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNTknOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNTknOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMTEnOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMTMnOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNUInOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNUQnOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNTcnOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNUYnOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdTAyNEQnOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdTAyN0QnOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdUE3NUInOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdUE3QTcnOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdUE3ODMnOiAncicsXG4gICAgICAgICAgICAgICAgJ1xcdTI0RTInOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdUZGNTMnOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTAwREYnOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNUInOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNjUnOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNUQnOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNjEnOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNjEnOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNjcnOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNjMnOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNjknOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMTknOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNUYnOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTAyM0YnOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdUE3QTknOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdUE3ODUnOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTFFOUInOiAncycsXG4gICAgICAgICAgICAgICAgJ1xcdTI0RTMnOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdUZGNTQnOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNkInOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFOTcnOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNjUnOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNkQnOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAyMUInOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNjMnOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNzEnOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdTFFNkYnOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxNjcnOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAxQUQnOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdTAyODgnOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdTJDNjYnOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdUE3ODcnOiAndCcsXG4gICAgICAgICAgICAgICAgJ1xcdUE3MjknOiAndHonLFxuICAgICAgICAgICAgICAgICdcXHUyNEU0JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHVGRjU1JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMEY5JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMEZBJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMEZCJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMTY5JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUxRTc5JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMTZCJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUxRTdCJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMTZEJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMEZDJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMURDJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMUQ4JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMUQ2JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMURBJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUU3JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMTZGJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMTcxJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMUQ0JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMjE1JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMjE3JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMUIwJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUVCJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUU5JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUVGJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUVEJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUYxJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUxRUU1JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUxRTczJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMTczJzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUxRTc3JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUxRTc1JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUwMjg5JzogJ3UnLFxuICAgICAgICAgICAgICAgICdcXHUyNEU1JzogJ3YnLFxuICAgICAgICAgICAgICAgICdcXHVGRjU2JzogJ3YnLFxuICAgICAgICAgICAgICAgICdcXHUxRTdEJzogJ3YnLFxuICAgICAgICAgICAgICAgICdcXHUxRTdGJzogJ3YnLFxuICAgICAgICAgICAgICAgICdcXHUwMjhCJzogJ3YnLFxuICAgICAgICAgICAgICAgICdcXHVBNzVGJzogJ3YnLFxuICAgICAgICAgICAgICAgICdcXHUwMjhDJzogJ3YnLFxuICAgICAgICAgICAgICAgICdcXHVBNzYxJzogJ3Z5JyxcbiAgICAgICAgICAgICAgICAnXFx1MjRFNic6ICd3JyxcbiAgICAgICAgICAgICAgICAnXFx1RkY1Nyc6ICd3JyxcbiAgICAgICAgICAgICAgICAnXFx1MUU4MSc6ICd3JyxcbiAgICAgICAgICAgICAgICAnXFx1MUU4Myc6ICd3JyxcbiAgICAgICAgICAgICAgICAnXFx1MDE3NSc6ICd3JyxcbiAgICAgICAgICAgICAgICAnXFx1MUU4Nyc6ICd3JyxcbiAgICAgICAgICAgICAgICAnXFx1MUU4NSc6ICd3JyxcbiAgICAgICAgICAgICAgICAnXFx1MUU5OCc6ICd3JyxcbiAgICAgICAgICAgICAgICAnXFx1MUU4OSc6ICd3JyxcbiAgICAgICAgICAgICAgICAnXFx1MkM3Myc6ICd3JyxcbiAgICAgICAgICAgICAgICAnXFx1MjRFNyc6ICd4JyxcbiAgICAgICAgICAgICAgICAnXFx1RkY1OCc6ICd4JyxcbiAgICAgICAgICAgICAgICAnXFx1MUU4Qic6ICd4JyxcbiAgICAgICAgICAgICAgICAnXFx1MUU4RCc6ICd4JyxcbiAgICAgICAgICAgICAgICAnXFx1MjRFOCc6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1RkY1OSc6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MUVGMyc6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MDBGRCc6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MDE3Nyc6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MUVGOSc6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MDIzMyc6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MUU4Ric6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MDBGRic6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MUVGNyc6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MUU5OSc6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MUVGNSc6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MDFCNCc6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MDI0Ric6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MUVGRic6ICd5JyxcbiAgICAgICAgICAgICAgICAnXFx1MjRFOSc6ICd6JyxcbiAgICAgICAgICAgICAgICAnXFx1RkY1QSc6ICd6JyxcbiAgICAgICAgICAgICAgICAnXFx1MDE3QSc6ICd6JyxcbiAgICAgICAgICAgICAgICAnXFx1MUU5MSc6ICd6JyxcbiAgICAgICAgICAgICAgICAnXFx1MDE3Qyc6ICd6JyxcbiAgICAgICAgICAgICAgICAnXFx1MDE3RSc6ICd6JyxcbiAgICAgICAgICAgICAgICAnXFx1MUU5Myc6ICd6JyxcbiAgICAgICAgICAgICAgICAnXFx1MUU5NSc6ICd6JyxcbiAgICAgICAgICAgICAgICAnXFx1MDFCNic6ICd6JyxcbiAgICAgICAgICAgICAgICAnXFx1MDIyNSc6ICd6JyxcbiAgICAgICAgICAgICAgICAnXFx1MDI0MCc6ICd6JyxcbiAgICAgICAgICAgICAgICAnXFx1MkM2Qyc6ICd6JyxcbiAgICAgICAgICAgICAgICAnXFx1QTc2Myc6ICd6JyxcbiAgICAgICAgICAgICAgICAnXFx1MDM4Nic6ICdcXHUwMzkxJyxcbiAgICAgICAgICAgICAgICAnXFx1MDM4OCc6ICdcXHUwMzk1JyxcbiAgICAgICAgICAgICAgICAnXFx1MDM4OSc6ICdcXHUwMzk3JyxcbiAgICAgICAgICAgICAgICAnXFx1MDM4QSc6ICdcXHUwMzk5JyxcbiAgICAgICAgICAgICAgICAnXFx1MDNBQSc6ICdcXHUwMzk5JyxcbiAgICAgICAgICAgICAgICAnXFx1MDM4Qyc6ICdcXHUwMzlGJyxcbiAgICAgICAgICAgICAgICAnXFx1MDM4RSc6ICdcXHUwM0E1JyxcbiAgICAgICAgICAgICAgICAnXFx1MDNBQic6ICdcXHUwM0E1JyxcbiAgICAgICAgICAgICAgICAnXFx1MDM4Ric6ICdcXHUwM0E5JyxcbiAgICAgICAgICAgICAgICAnXFx1MDNBQyc6ICdcXHUwM0IxJyxcbiAgICAgICAgICAgICAgICAnXFx1MDNBRCc6ICdcXHUwM0I1JyxcbiAgICAgICAgICAgICAgICAnXFx1MDNBRSc6ICdcXHUwM0I3JyxcbiAgICAgICAgICAgICAgICAnXFx1MDNBRic6ICdcXHUwM0I5JyxcbiAgICAgICAgICAgICAgICAnXFx1MDNDQSc6ICdcXHUwM0I5JyxcbiAgICAgICAgICAgICAgICAnXFx1MDM5MCc6ICdcXHUwM0I5JyxcbiAgICAgICAgICAgICAgICAnXFx1MDNDQyc6ICdcXHUwM0JGJyxcbiAgICAgICAgICAgICAgICAnXFx1MDNDRCc6ICdcXHUwM0M1JyxcbiAgICAgICAgICAgICAgICAnXFx1MDNDQic6ICdcXHUwM0M1JyxcbiAgICAgICAgICAgICAgICAnXFx1MDNCMCc6ICdcXHUwM0M1JyxcbiAgICAgICAgICAgICAgICAnXFx1MDNDOSc6ICdcXHUwM0M5JyxcbiAgICAgICAgICAgICAgICAnXFx1MDNDMic6ICdcXHUwM0MzJ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIGRpYWNyaXRpY3M7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFMyLmRlZmluZSgnc2VsZWN0Mi9kYXRhL2Jhc2UnLFtcbiAgICAgICAgICAgICcuLi91dGlscydcbiAgICAgICAgXSwgZnVuY3Rpb24gKFV0aWxzKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBCYXNlQWRhcHRlciAoJGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBCYXNlQWRhcHRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgVXRpbHMuRXh0ZW5kKEJhc2VBZGFwdGVyLCBVdGlscy5PYnNlcnZhYmxlKTtcblxuICAgICAgICAgICAgQmFzZUFkYXB0ZXIucHJvdG90eXBlLmN1cnJlbnQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBgY3VycmVudGAgbWV0aG9kIG11c3QgYmUgZGVmaW5lZCBpbiBjaGlsZCBjbGFzc2VzLicpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgQmFzZUFkYXB0ZXIucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBgcXVlcnlgIG1ldGhvZCBtdXN0IGJlIGRlZmluZWQgaW4gY2hpbGQgY2xhc3Nlcy4nKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEJhc2VBZGFwdGVyLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGNvbnRhaW5lciwgJGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIC8vIENhbiBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBCYXNlQWRhcHRlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBDYW4gYmUgaW1wbGVtZW50ZWQgaW4gc3ViY2xhc3Nlc1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgQmFzZUFkYXB0ZXIucHJvdG90eXBlLmdlbmVyYXRlUmVzdWx0SWQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gY29udGFpbmVyLmlkICsgJy1yZXN1bHQtJztcblxuICAgICAgICAgICAgICAgIGlkICs9IFV0aWxzLmdlbmVyYXRlQ2hhcnMoNCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5pZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlkICs9ICctJyArIGRhdGEuaWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZCArPSAnLScgKyBVdGlscy5nZW5lcmF0ZUNoYXJzKDQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gaWQ7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gQmFzZUFkYXB0ZXI7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFMyLmRlZmluZSgnc2VsZWN0Mi9kYXRhL3NlbGVjdCcsW1xuICAgICAgICAgICAgJy4vYmFzZScsXG4gICAgICAgICAgICAnLi4vdXRpbHMnLFxuICAgICAgICAgICAgJ2pxdWVyeSdcbiAgICAgICAgXSwgZnVuY3Rpb24gKEJhc2VBZGFwdGVyLCBVdGlscywgJCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gU2VsZWN0QWRhcHRlciAoJGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgICAgICAgICAgICAgIFNlbGVjdEFkYXB0ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFV0aWxzLkV4dGVuZChTZWxlY3RBZGFwdGVyLCBCYXNlQWRhcHRlcik7XG5cbiAgICAgICAgICAgIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLmN1cnJlbnQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuZmluZCgnOnNlbGVjdGVkJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkb3B0aW9uID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gc2VsZi5pdGVtKCRvcHRpb24pO1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChvcHRpb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgICAgIGRhdGEuc2VsZWN0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgLy8gSWYgZGF0YS5lbGVtZW50IGlzIGEgRE9NIG5vZGUsIHVzZSBpdCBpbnN0ZWFkXG4gICAgICAgICAgICAgICAgaWYgKCQoZGF0YS5lbGVtZW50KS5pcygnb3B0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5lbGVtZW50LnNlbGVjdGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2NoYW5nZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kZWxlbWVudC5wcm9wKCdtdWx0aXBsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudChmdW5jdGlvbiAoY3VycmVudERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IFtkYXRhXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaC5hcHBseShkYXRhLCBjdXJyZW50RGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IGRhdGFbZF0uaWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KGlkLCB2YWwpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwucHVzaChpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiRlbGVtZW50LnZhbCh2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4kZWxlbWVudC50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IGRhdGEuaWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudC52YWwodmFsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS51bnNlbGVjdCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLiRlbGVtZW50LnByb3AoJ211bHRpcGxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRhdGEuc2VsZWN0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGlmICgkKGRhdGEuZWxlbWVudCkuaXMoJ29wdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZWxlbWVudC5zZWxlY3RlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcignY2hhbmdlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudChmdW5jdGlvbiAoY3VycmVudERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgY3VycmVudERhdGEubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IGN1cnJlbnREYXRhW2RdLmlkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWQgIT09IGRhdGEuaWQgJiYgJC5pbkFycmF5KGlkLCB2YWwpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbC5wdXNoKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJGVsZW1lbnQudmFsKHZhbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kZWxlbWVudC50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCAkY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ3NlbGVjdCcsIGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3QocGFyYW1zLmRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCd1bnNlbGVjdCcsIGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi51bnNlbGVjdChwYXJhbXMuZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbnl0aGluZyBhZGRlZCB0byBjaGlsZCBlbGVtZW50c1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuZmluZCgnKicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYW55IGN1c3RvbSBkYXRhIHNldCBieSBTZWxlY3QyXG4gICAgICAgICAgICAgICAgICAgICQucmVtb3ZlRGF0YSh0aGlzLCAnZGF0YScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VsZWN0QWRhcHRlci5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgdmFyICRvcHRpb25zID0gdGhpcy4kZWxlbWVudC5jaGlsZHJlbigpO1xuXG4gICAgICAgICAgICAgICAgJG9wdGlvbnMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkb3B0aW9uID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoISRvcHRpb24uaXMoJ29wdGlvbicpICYmICEkb3B0aW9uLmlzKCdvcHRncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gc2VsZi5pdGVtKCRvcHRpb24pO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gc2VsZi5tYXRjaGVzKHBhcmFtcywgb3B0aW9uKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKG1hdGNoZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IGRhdGFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLmFkZE9wdGlvbnMgPSBmdW5jdGlvbiAoJG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRNYW55KHRoaXMuJGVsZW1lbnQsICRvcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLm9wdGlvbiA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbjtcblxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGdyb3VwJyk7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5sYWJlbCA9IGRhdGEudGV4dDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uLnRleHRDb250ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IGRhdGEudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSBkYXRhLnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGRhdGEuaWQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi50aXRsZSA9IGRhdGEudGl0bGU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyICRvcHRpb24gPSAkKG9wdGlvbik7XG5cbiAgICAgICAgICAgICAgICB2YXIgbm9ybWFsaXplZERhdGEgPSB0aGlzLl9ub3JtYWxpemVJdGVtKGRhdGEpO1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWREYXRhLmVsZW1lbnQgPSBvcHRpb247XG5cbiAgICAgICAgICAgICAgICAvLyBPdmVycmlkZSB0aGUgb3B0aW9uJ3MgZGF0YSB3aXRoIHRoZSBjb21iaW5lZCBkYXRhXG4gICAgICAgICAgICAgICAgJC5kYXRhKG9wdGlvbiwgJ2RhdGEnLCBub3JtYWxpemVkRGF0YSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJG9wdGlvbjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLml0ZW0gPSBmdW5jdGlvbiAoJG9wdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG5cbiAgICAgICAgICAgICAgICBkYXRhID0gJC5kYXRhKCRvcHRpb25bMF0sICdkYXRhJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICgkb3B0aW9uLmlzKCdvcHRpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICRvcHRpb24udmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAkb3B0aW9uLnRleHQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAkb3B0aW9uLnByb3AoJ2Rpc2FibGVkJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogJG9wdGlvbi5wcm9wKCdzZWxlY3RlZCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICRvcHRpb24ucHJvcCgndGl0bGUnKVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJG9wdGlvbi5pcygnb3B0Z3JvdXAnKSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJG9wdGlvbi5wcm9wKCdsYWJlbCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICRvcHRpb24ucHJvcCgndGl0bGUnKVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkY2hpbGRyZW4gPSAkb3B0aW9uLmNoaWxkcmVuKCdvcHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCAkY2hpbGRyZW4ubGVuZ3RoOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkY2hpbGQgPSAkKCRjaGlsZHJlbltjXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHRoaXMuaXRlbSgkY2hpbGQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5fbm9ybWFsaXplSXRlbShkYXRhKTtcbiAgICAgICAgICAgICAgICBkYXRhLmVsZW1lbnQgPSAkb3B0aW9uWzBdO1xuXG4gICAgICAgICAgICAgICAgJC5kYXRhKCRvcHRpb25bMF0sICdkYXRhJywgZGF0YSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLl9ub3JtYWxpemVJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoISQuaXNQbGFpbk9iamVjdChpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBpdGVtXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaXRlbSA9ICQuZXh0ZW5kKHt9LCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgICAgICAgICAgfSwgaXRlbSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5pZCA9IGl0ZW0uaWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50ZXh0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS50ZXh0ID0gaXRlbS50ZXh0LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uX3Jlc3VsdElkID09IG51bGwgJiYgaXRlbS5pZCAmJiB0aGlzLmNvbnRhaW5lciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uX3Jlc3VsdElkID0gdGhpcy5nZW5lcmF0ZVJlc3VsdElkKHRoaXMuY29udGFpbmVyLCBpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBpdGVtKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAocGFyYW1zLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoZXIgPSB0aGlzLm9wdGlvbnMuZ2V0KCdtYXRjaGVyJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlcihwYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFNlbGVjdEFkYXB0ZXI7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFMyLmRlZmluZSgnc2VsZWN0Mi9kYXRhL2FycmF5JyxbXG4gICAgICAgICAgICAnLi9zZWxlY3QnLFxuICAgICAgICAgICAgJy4uL3V0aWxzJyxcbiAgICAgICAgICAgICdqcXVlcnknXG4gICAgICAgIF0sIGZ1bmN0aW9uIChTZWxlY3RBZGFwdGVyLCBVdGlscywgJCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gQXJyYXlBZGFwdGVyICgkZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gb3B0aW9ucy5nZXQoJ2RhdGEnKSB8fCBbXTtcblxuICAgICAgICAgICAgICAgIEFycmF5QWRhcHRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmFkZE9wdGlvbnModGhpcy5jb252ZXJ0VG9PcHRpb25zKGRhdGEpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgVXRpbHMuRXh0ZW5kKEFycmF5QWRhcHRlciwgU2VsZWN0QWRhcHRlcik7XG5cbiAgICAgICAgICAgIEFycmF5QWRhcHRlci5wcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgJG9wdGlvbiA9IHRoaXMuJGVsZW1lbnQuZmluZCgnb3B0aW9uJykuZmlsdGVyKGZ1bmN0aW9uIChpLCBlbG0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsbS52YWx1ZSA9PSBkYXRhLmlkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJG9wdGlvbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJG9wdGlvbiA9IHRoaXMub3B0aW9uKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkT3B0aW9ucygkb3B0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBBcnJheUFkYXB0ZXIuX19zdXBlcl9fLnNlbGVjdC5jYWxsKHRoaXMsIGRhdGEpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgQXJyYXlBZGFwdGVyLnByb3RvdHlwZS5jb252ZXJ0VG9PcHRpb25zID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICB2YXIgJGV4aXN0aW5nID0gdGhpcy4kZWxlbWVudC5maW5kKCdvcHRpb24nKTtcbiAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdJZHMgPSAkZXhpc3RpbmcubWFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuaXRlbSgkKHRoaXMpKS5pZDtcbiAgICAgICAgICAgICAgICB9KS5nZXQoKTtcblxuICAgICAgICAgICAgICAgIHZhciAkb3B0aW9ucyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBhbGwgaXRlbXMgZXhjZXB0IGZvciB0aGUgb25lIHBhc3NlZCBpbiB0aGUgYXJndW1lbnRcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbmx5SXRlbSAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQodGhpcykudmFsKCkgPT0gaXRlbS5pZDtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBkID0gMDsgZCA8IGRhdGEubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLl9ub3JtYWxpemVJdGVtKGRhdGFbZF0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNraXAgaXRlbXMgd2hpY2ggd2VyZSBwcmUtbG9hZGVkLCBvbmx5IG1lcmdlIHRoZSBkYXRhXG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmluQXJyYXkoaXRlbS5pZCwgZXhpc3RpbmdJZHMpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZXhpc3RpbmdPcHRpb24gPSAkZXhpc3RpbmcuZmlsdGVyKG9ubHlJdGVtKGl0ZW0pKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nRGF0YSA9IHRoaXMuaXRlbSgkZXhpc3RpbmdPcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0RhdGEgPSAkLmV4dGVuZCh0cnVlLCB7fSwgaXRlbSwgZXhpc3RpbmdEYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRuZXdPcHRpb24gPSB0aGlzLm9wdGlvbihuZXdEYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJGV4aXN0aW5nT3B0aW9uLnJlcGxhY2VXaXRoKCRuZXdPcHRpb24pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkb3B0aW9uID0gdGhpcy5vcHRpb24oaXRlbSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkY2hpbGRyZW4gPSB0aGlzLmNvbnZlcnRUb09wdGlvbnMoaXRlbS5jaGlsZHJlbik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZE1hbnkoJG9wdGlvbiwgJGNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICRvcHRpb25zLnB1c2goJG9wdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuICRvcHRpb25zO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIEFycmF5QWRhcHRlcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvYWpheCcsW1xuICAgICAgICAgICAgJy4vYXJyYXknLFxuICAgICAgICAgICAgJy4uL3V0aWxzJyxcbiAgICAgICAgICAgICdqcXVlcnknXG4gICAgICAgIF0sIGZ1bmN0aW9uIChBcnJheUFkYXB0ZXIsIFV0aWxzLCAkKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBBamF4QWRhcHRlciAoJGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFqYXhPcHRpb25zID0gdGhpcy5fYXBwbHlEZWZhdWx0cyhvcHRpb25zLmdldCgnYWpheCcpKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFqYXhPcHRpb25zLnByb2Nlc3NSZXN1bHRzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVzdWx0cyA9IHRoaXMuYWpheE9wdGlvbnMucHJvY2Vzc1Jlc3VsdHM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgQWpheEFkYXB0ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBVdGlscy5FeHRlbmQoQWpheEFkYXB0ZXIsIEFycmF5QWRhcHRlcik7XG5cbiAgICAgICAgICAgIEFqYXhBZGFwdGVyLnByb3RvdHlwZS5fYXBwbHlEZWZhdWx0cyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJC5leHRlbmQoe30sIHBhcmFtcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHE6IHBhcmFtcy50ZXJtXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0OiBmdW5jdGlvbiAocGFyYW1zLCBzdWNjZXNzLCBmYWlsdXJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHJlcXVlc3QgPSAkLmFqYXgocGFyYW1zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHJlcXVlc3QudGhlbihzdWNjZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyZXF1ZXN0LmZhaWwoZmFpbHVyZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcmVxdWVzdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zLCB0cnVlKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEFqYXhBZGFwdGVyLnByb3RvdHlwZS5wcm9jZXNzUmVzdWx0cyA9IGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBBamF4QWRhcHRlci5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlcXVlc3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBKU09OUCByZXF1ZXN0cyBjYW5ub3QgYWx3YXlzIGJlIGFib3J0ZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQuaXNGdW5jdGlvbih0aGlzLl9yZXF1ZXN0LmFib3J0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVxdWVzdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnXG4gICAgICAgICAgICAgICAgfSwgdGhpcy5hamF4T3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMudXJsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudXJsID0gb3B0aW9ucy51cmwuY2FsbCh0aGlzLiRlbGVtZW50LCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kYXRhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IG9wdGlvbnMuZGF0YS5jYWxsKHRoaXMuJGVsZW1lbnQsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVxdWVzdCAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkcmVxdWVzdCA9IG9wdGlvbnMudHJhbnNwb3J0KG9wdGlvbnMsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IHNlbGYucHJvY2Vzc1Jlc3VsdHMoZGF0YSwgcGFyYW1zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5nZXQoJ2RlYnVnJykgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSByZXNwb25zZSBpbmNsdWRlZCBhIGByZXN1bHRzYCBrZXkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHRzIHx8ICFyZXN1bHRzLnJlc3VsdHMgfHwgISQuaXNBcnJheShyZXN1bHRzLnJlc3VsdHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU2VsZWN0MjogVGhlIEFKQVggcmVzdWx0cyBkaWQgbm90IHJldHVybiBhbiBhcnJheSBpbiB0aGUgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYHJlc3VsdHNgIGtleSBvZiB0aGUgcmVzcG9uc2UuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gZGV0ZWN0IGlmIGEgcmVxdWVzdCB3YXMgYWJvcnRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3b3JrcyBpZiB0aGUgdHJhbnNwb3J0IGV4cG9zZXMgYSBzdGF0dXMgcHJvcGVydHlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkcmVxdWVzdC5zdGF0dXMgJiYgJHJlcXVlc3Quc3RhdHVzID09PSAnMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czptZXNzYWdlJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdlcnJvckxvYWRpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVxdWVzdCA9ICRyZXF1ZXN0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFqYXhPcHRpb25zLmRlbGF5ICYmIHBhcmFtcy50ZXJtICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3F1ZXJ5VGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9xdWVyeVRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcXVlcnlUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQocmVxdWVzdCwgdGhpcy5hamF4T3B0aW9ucy5kZWxheSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBBamF4QWRhcHRlcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvdGFncycsW1xuICAgICAgICAgICAgJ2pxdWVyeSdcbiAgICAgICAgXSwgZnVuY3Rpb24gKCQpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIFRhZ3MgKGRlY29yYXRlZCwgJGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFncyA9IG9wdGlvbnMuZ2V0KCd0YWdzJyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgY3JlYXRlVGFnID0gb3B0aW9ucy5nZXQoJ2NyZWF0ZVRhZycpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNyZWF0ZVRhZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVGFnID0gY3JlYXRlVGFnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBpbnNlcnRUYWcgPSBvcHRpb25zLmdldCgnaW5zZXJ0VGFnJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0VGFnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRUYWcgPSBpbnNlcnRUYWc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCQuaXNBcnJheSh0YWdzKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHRhZ3MubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSB0YWdzW3RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLl9ub3JtYWxpemVJdGVtKHRhZyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkb3B0aW9uID0gdGhpcy5vcHRpb24oaXRlbSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuYXBwZW5kKCRvcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBUYWdzLnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIHBhcmFtcywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVPbGRUYWdzKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLnRlcm0gPT0gbnVsbCB8fCBwYXJhbXMucGFnZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIHBhcmFtcywgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gd3JhcHBlciAob2JqLCBjaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IG9iai5yZXN1bHRzO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IGRhdGFbaV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGVja0NoaWxkcmVuID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5jaGlsZHJlbiAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIXdyYXBwZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzOiBvcHRpb24uY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvblRleHQgPSAob3B0aW9uLnRleHQgfHwgJycpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zVGVybSA9IChwYXJhbXMudGVybSB8fCAnJykudG9VcHBlckNhc2UoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrVGV4dCA9IG9wdGlvblRleHQgPT09IHBhcmFtc1Rlcm07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja1RleHQgfHwgY2hlY2tDaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG9iaik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHNlbGYuY3JlYXRlVGFnKHBhcmFtcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhZyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJG9wdGlvbiA9IHNlbGYub3B0aW9uKHRhZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkb3B0aW9uLmF0dHIoJ2RhdGEtc2VsZWN0Mi10YWcnLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGRPcHRpb25zKFskb3B0aW9uXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW5zZXJ0VGFnKGRhdGEsIHRhZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBvYmoucmVzdWx0cyA9IGRhdGE7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sob2JqKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBwYXJhbXMsIHdyYXBwZXIpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVGFncy5wcm90b3R5cGUuY3JlYXRlVGFnID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlcm0gPSAkLnRyaW0ocGFyYW1zLnRlcm0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRlcm0gPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0ZXJtLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0ZXJtXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFRhZ3MucHJvdG90eXBlLmluc2VydFRhZyA9IGZ1bmN0aW9uIChfLCBkYXRhLCB0YWcpIHtcbiAgICAgICAgICAgICAgICBkYXRhLnVuc2hpZnQodGFnKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFRhZ3MucHJvdG90eXBlLl9yZW1vdmVPbGRUYWdzID0gZnVuY3Rpb24gKF8pIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFnID0gdGhpcy5fbGFzdFRhZztcblxuICAgICAgICAgICAgICAgIHZhciAkb3B0aW9ucyA9IHRoaXMuJGVsZW1lbnQuZmluZCgnb3B0aW9uW2RhdGEtc2VsZWN0Mi10YWddJyk7XG5cbiAgICAgICAgICAgICAgICAkb3B0aW9ucy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gVGFncztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvdG9rZW5pemVyJyxbXG4gICAgICAgICAgICAnanF1ZXJ5J1xuICAgICAgICBdLCBmdW5jdGlvbiAoJCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gVG9rZW5pemVyIChkZWNvcmF0ZWQsICRlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRva2VuaXplciA9IG9wdGlvbnMuZ2V0KCd0b2tlbml6ZXInKTtcblxuICAgICAgICAgICAgICAgIGlmICh0b2tlbml6ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRva2VuaXplciA9IHRva2VuaXplcjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFRva2VuaXplci5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGNvbnRhaW5lciwgJGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGNvbnRhaW5lciwgJGNvbnRhaW5lcik7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWFyY2ggPSAgY29udGFpbmVyLmRyb3Bkb3duLiRzZWFyY2ggfHwgY29udGFpbmVyLnNlbGVjdGlvbi4kc2VhcmNoIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjb250YWluZXIuZmluZCgnLnNlbGVjdDItc2VhcmNoX19maWVsZCcpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVG9rZW5pemVyLnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIHBhcmFtcywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVBbmRTZWxlY3QgKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTm9ybWFsaXplIHRoZSBkYXRhIG9iamVjdCBzbyB3ZSBjYW4gdXNlIGl0IGZvciBjaGVja3NcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBzZWxmLl9ub3JtYWxpemVJdGVtKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBkYXRhIG9iamVjdCBhbHJlYWR5IGV4aXN0cyBhcyBhIHRhZ1xuICAgICAgICAgICAgICAgICAgICAvLyBTZWxlY3QgaXQgaWYgaXQgZG9lc24ndFxuICAgICAgICAgICAgICAgICAgICB2YXIgJGV4aXN0aW5nT3B0aW9ucyA9IHNlbGYuJGVsZW1lbnQuZmluZCgnb3B0aW9uJykuZmlsdGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnZhbCgpID09PSBpdGVtLmlkO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbiBleGlzdGluZyBvcHRpb24gd2Fzbid0IGZvdW5kIGZvciBpdCwgY3JlYXRlIHRoZSBvcHRpb25cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkZXhpc3RpbmdPcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRvcHRpb24gPSBzZWxmLm9wdGlvbihpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRvcHRpb24uYXR0cignZGF0YS1zZWxlY3QyLXRhZycsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZW1vdmVPbGRUYWdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZE9wdGlvbnMoWyRvcHRpb25dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgaXRlbSwgbm93IHRoYXQgd2Uga25vdyB0aGVyZSBpcyBhbiBvcHRpb24gZm9yIGl0XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZWxlY3QgKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdzZWxlY3QnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHBhcmFtcy50ZXJtID0gcGFyYW1zLnRlcm0gfHwgJyc7XG5cbiAgICAgICAgICAgICAgICB2YXIgdG9rZW5EYXRhID0gdGhpcy50b2tlbml6ZXIocGFyYW1zLCB0aGlzLm9wdGlvbnMsIGNyZWF0ZUFuZFNlbGVjdCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodG9rZW5EYXRhLnRlcm0gIT09IHBhcmFtcy50ZXJtKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIHNlYXJjaCB0ZXJtIGlmIHdlIGhhdmUgdGhlIHNlYXJjaCBib3hcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJHNlYXJjaC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNlYXJjaC52YWwodG9rZW5EYXRhLnRlcm0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2VhcmNoLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBwYXJhbXMudGVybSA9IHRva2VuRGF0YS50ZXJtO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIHBhcmFtcywgY2FsbGJhY2spO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVG9rZW5pemVyLnByb3RvdHlwZS50b2tlbml6ZXIgPSBmdW5jdGlvbiAoXywgcGFyYW1zLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHZhciBzZXBhcmF0b3JzID0gb3B0aW9ucy5nZXQoJ3Rva2VuU2VwYXJhdG9ycycpIHx8IFtdO1xuICAgICAgICAgICAgICAgIHZhciB0ZXJtID0gcGFyYW1zLnRlcm07XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNyZWF0ZVRhZyA9IHRoaXMuY3JlYXRlVGFnIHx8IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBwYXJhbXMudGVybSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHBhcmFtcy50ZXJtXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgdGVybS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1DaGFyID0gdGVybVtpXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KHRlcm1DaGFyLCBzZXBhcmF0b3JzKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydCA9IHRlcm0uc3Vic3RyKDAsIGkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydFBhcmFtcyA9ICQuZXh0ZW5kKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlcm06IHBhcnRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBjcmVhdGVUYWcocGFydFBhcmFtcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdGVybSB0byBub3QgaW5jbHVkZSB0aGUgdG9rZW5pemVkIHBvcnRpb25cbiAgICAgICAgICAgICAgICAgICAgdGVybSA9IHRlcm0uc3Vic3RyKGkgKyAxKSB8fCAnJztcbiAgICAgICAgICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdGVybTogdGVybVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gVG9rZW5pemVyO1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS9taW5pbXVtSW5wdXRMZW5ndGgnLFtcblxuICAgICAgICBdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBNaW5pbXVtSW5wdXRMZW5ndGggKGRlY29yYXRlZCwgJGUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1pbmltdW1JbnB1dExlbmd0aCA9IG9wdGlvbnMuZ2V0KCdtaW5pbXVtSW5wdXRMZW5ndGgnKTtcblxuICAgICAgICAgICAgICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgTWluaW11bUlucHV0TGVuZ3RoLnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIHBhcmFtcywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMudGVybSA9IHBhcmFtcy50ZXJtIHx8ICcnO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy50ZXJtLmxlbmd0aCA8IHRoaXMubWluaW11bUlucHV0TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigncmVzdWx0czptZXNzYWdlJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2lucHV0VG9vU2hvcnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IHRoaXMubWluaW11bUlucHV0TGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBwYXJhbXMudGVybSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgcGFyYW1zLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gTWluaW11bUlucHV0TGVuZ3RoO1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS9tYXhpbXVtSW5wdXRMZW5ndGgnLFtcblxuICAgICAgICBdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBNYXhpbXVtSW5wdXRMZW5ndGggKGRlY29yYXRlZCwgJGUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1heGltdW1JbnB1dExlbmd0aCA9IG9wdGlvbnMuZ2V0KCdtYXhpbXVtSW5wdXRMZW5ndGgnKTtcblxuICAgICAgICAgICAgICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgTWF4aW11bUlucHV0TGVuZ3RoLnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIHBhcmFtcywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMudGVybSA9IHBhcmFtcy50ZXJtIHx8ICcnO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWF4aW11bUlucHV0TGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICBwYXJhbXMudGVybS5sZW5ndGggPiB0aGlzLm1heGltdW1JbnB1dExlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3Jlc3VsdHM6bWVzc2FnZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpbnB1dFRvb0xvbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IHRoaXMubWF4aW11bUlucHV0TGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBwYXJhbXMudGVybSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgcGFyYW1zLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gTWF4aW11bUlucHV0TGVuZ3RoO1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS9tYXhpbXVtU2VsZWN0aW9uTGVuZ3RoJyxbXG5cbiAgICAgICAgXSwgZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICBmdW5jdGlvbiBNYXhpbXVtU2VsZWN0aW9uTGVuZ3RoIChkZWNvcmF0ZWQsICRlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhpbXVtU2VsZWN0aW9uTGVuZ3RoID0gb3B0aW9ucy5nZXQoJ21heGltdW1TZWxlY3Rpb25MZW5ndGgnKTtcblxuICAgICAgICAgICAgICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgTWF4aW11bVNlbGVjdGlvbkxlbmd0aC5wcm90b3R5cGUucXVlcnkgPVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkZWNvcmF0ZWQsIHBhcmFtcywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudChmdW5jdGlvbiAoY3VycmVudERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IGN1cnJlbnREYXRhICE9IG51bGwgPyBjdXJyZW50RGF0YS5sZW5ndGggOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYubWF4aW11bVNlbGVjdGlvbkxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA+PSBzZWxmLm1heGltdW1TZWxlY3Rpb25MZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRyaWdnZXIoJ3Jlc3VsdHM6bWVzc2FnZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ21heGltdW1TZWxlY3RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IHNlbGYubWF4aW11bVNlbGVjdGlvbkxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVjb3JhdGVkLmNhbGwoc2VsZiwgcGFyYW1zLCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBNYXhpbXVtU2VsZWN0aW9uTGVuZ3RoO1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24nLFtcbiAgICAgICAgICAgICdqcXVlcnknLFxuICAgICAgICAgICAgJy4vdXRpbHMnXG4gICAgICAgIF0sIGZ1bmN0aW9uICgkLCBVdGlscykge1xuICAgICAgICAgICAgZnVuY3Rpb24gRHJvcGRvd24gKCRlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudCA9ICRlbGVtZW50O1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICAgICAgICAgICAgICBEcm9wZG93bi5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgVXRpbHMuRXh0ZW5kKERyb3Bkb3duLCBVdGlscy5PYnNlcnZhYmxlKTtcblxuICAgICAgICAgICAgRHJvcGRvd24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGRyb3Bkb3duID0gJChcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwic2VsZWN0Mi1kcm9wZG93blwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJzZWxlY3QyLXJlc3VsdHNcIj48L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgICAgICc8L3NwYW4+J1xuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAkZHJvcGRvd24uYXR0cignZGlyJywgdGhpcy5vcHRpb25zLmdldCgnZGlyJykpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kZHJvcGRvd24gPSAkZHJvcGRvd247XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJGRyb3Bkb3duO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgRHJvcGRvd24ucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gU2hvdWxkIGJlIGltcGxlbWVudGVkIGluIHN1YmNsYXNzZXNcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIERyb3Bkb3duLnByb3RvdHlwZS5wb3NpdGlvbiA9IGZ1bmN0aW9uICgkZHJvcGRvd24sICRjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBTaG91bGQgYmUgaW1wbG1lbnRlZCBpbiBzdWJjbGFzc2VzXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBEcm9wZG93bi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGRyb3Bkb3duIGZyb20gdGhlIERPTVxuICAgICAgICAgICAgICAgIHRoaXMuJGRyb3Bkb3duLnJlbW92ZSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIERyb3Bkb3duO1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24vc2VhcmNoJyxbXG4gICAgICAgICAgICAnanF1ZXJ5JyxcbiAgICAgICAgICAgICcuLi91dGlscydcbiAgICAgICAgXSwgZnVuY3Rpb24gKCQsIFV0aWxzKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBTZWFyY2ggKCkgeyB9XG5cbiAgICAgICAgICAgIFNlYXJjaC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGRlY29yYXRlZCkge1xuICAgICAgICAgICAgICAgIHZhciAkcmVuZGVyZWQgPSBkZWNvcmF0ZWQuY2FsbCh0aGlzKTtcblxuICAgICAgICAgICAgICAgIHZhciAkc2VhcmNoID0gJChcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwic2VsZWN0Mi1zZWFyY2ggc2VsZWN0Mi1zZWFyY2gtLWRyb3Bkb3duXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICc8aW5wdXQgY2xhc3M9XCJzZWxlY3QyLXNlYXJjaF9fZmllbGRcIiB0eXBlPVwic2VhcmNoXCIgdGFiaW5kZXg9XCItMVwiJyArXG4gICAgICAgICAgICAgICAgICAgICcgYXV0b2NvbXBsZXRlPVwib2ZmXCIgYXV0b2NvcnJlY3Q9XCJvZmZcIiBhdXRvY2FwaXRhbGl6ZT1cIm5vbmVcIicgK1xuICAgICAgICAgICAgICAgICAgICAnIHNwZWxsY2hlY2s9XCJmYWxzZVwiIHJvbGU9XCJ0ZXh0Ym94XCIgLz4nICtcbiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuJHNlYXJjaENvbnRhaW5lciA9ICRzZWFyY2g7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2VhcmNoID0gJHNlYXJjaC5maW5kKCdpbnB1dCcpO1xuXG4gICAgICAgICAgICAgICAgJHJlbmRlcmVkLnByZXBlbmQoJHNlYXJjaCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJHJlbmRlcmVkO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuJHNlYXJjaC5vbigna2V5ZG93bicsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdrZXlwcmVzcycsIGV2dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fa2V5VXBQcmV2ZW50ZWQgPSBldnQuaXNEZWZhdWx0UHJldmVudGVkKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBicm93c2VycyB3aGljaCBkbyBub3Qgc3VwcG9ydCB0aGUgYGlucHV0YCBldmVudFxuICAgICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBwcmV2ZW50IGRvdWJsZS10cmlnZ2VyaW5nIG9mIGV2ZW50cyBmb3IgYnJvd3NlcnMgd2hpY2ggc3VwcG9ydFxuICAgICAgICAgICAgICAgIC8vIGJvdGggdGhlIGBrZXl1cGAgYW5kIGBpbnB1dGAgZXZlbnRzLlxuICAgICAgICAgICAgICAgIHRoaXMuJHNlYXJjaC5vbignaW5wdXQnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVuYmluZCB0aGUgZHVwbGljYXRlZCBga2V5dXBgIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykub2ZmKCdrZXl1cCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kc2VhcmNoLm9uKCdrZXl1cCBpbnB1dCcsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVTZWFyY2goZXZ0KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5vbignb3BlbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VhcmNoLmF0dHIoJ3RhYmluZGV4JywgMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VhcmNoLmZvY3VzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VhcmNoLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdjbG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VhcmNoLmF0dHIoJ3RhYmluZGV4JywgLTEpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJHNlYXJjaC52YWwoJycpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250YWluZXIuaXNPcGVuKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJHNlYXJjaC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6YWxsJywgZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1zLnF1ZXJ5LnRlcm0gPT0gbnVsbCB8fCBwYXJhbXMucXVlcnkudGVybSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaG93U2VhcmNoID0gc2VsZi5zaG93U2VhcmNoKHBhcmFtcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG93U2VhcmNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2VhcmNoQ29udGFpbmVyLnJlbW92ZUNsYXNzKCdzZWxlY3QyLXNlYXJjaC0taGlkZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiRzZWFyY2hDb250YWluZXIuYWRkQ2xhc3MoJ3NlbGVjdDItc2VhcmNoLS1oaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlYXJjaC5wcm90b3R5cGUuaGFuZGxlU2VhcmNoID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fa2V5VXBQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy4kc2VhcmNoLnZhbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigncXVlcnknLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXJtOiBpbnB1dFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9rZXlVcFByZXZlbnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5zaG93U2VhcmNoID0gZnVuY3Rpb24gKF8sIHBhcmFtcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFNlYXJjaDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2Ryb3Bkb3duL2hpZGVQbGFjZWhvbGRlcicsW1xuXG4gICAgICAgIF0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIEhpZGVQbGFjZWhvbGRlciAoZGVjb3JhdGVkLCAkZWxlbWVudCwgb3B0aW9ucywgZGF0YUFkYXB0ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5ub3JtYWxpemVQbGFjZWhvbGRlcihvcHRpb25zLmdldCgncGxhY2Vob2xkZXInKSk7XG5cbiAgICAgICAgICAgICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucywgZGF0YUFkYXB0ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBIaWRlUGxhY2Vob2xkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBkYXRhLnJlc3VsdHMgPSB0aGlzLnJlbW92ZVBsYWNlaG9sZGVyKGRhdGEucmVzdWx0cyk7XG5cbiAgICAgICAgICAgICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBkYXRhKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEhpZGVQbGFjZWhvbGRlci5wcm90b3R5cGUubm9ybWFsaXplUGxhY2Vob2xkZXIgPSBmdW5jdGlvbiAoXywgcGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBsYWNlaG9sZGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgSGlkZVBsYWNlaG9sZGVyLnByb3RvdHlwZS5yZW1vdmVQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIChfLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vZGlmaWVkRGF0YSA9IGRhdGEuc2xpY2UoMCk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBkID0gZGF0YS5sZW5ndGggLSAxOyBkID49IDA7IGQtLSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRhdGFbZF07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGxhY2Vob2xkZXIuaWQgPT09IGl0ZW0uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWVkRGF0YS5zcGxpY2UoZCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kaWZpZWREYXRhO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIEhpZGVQbGFjZWhvbGRlcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2Ryb3Bkb3duL2luZmluaXRlU2Nyb2xsJyxbXG4gICAgICAgICAgICAnanF1ZXJ5J1xuICAgICAgICBdLCBmdW5jdGlvbiAoJCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gSW5maW5pdGVTY3JvbGwgKGRlY29yYXRlZCwgJGVsZW1lbnQsIG9wdGlvbnMsIGRhdGFBZGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0UGFyYW1zID0ge307XG5cbiAgICAgICAgICAgICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucywgZGF0YUFkYXB0ZXIpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kbG9hZGluZ01vcmUgPSB0aGlzLmNyZWF0ZUxvYWRpbmdNb3JlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEluZmluaXRlU2Nyb2xsLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kbG9hZGluZ01vcmUucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBkYXRhKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dMb2FkaW5nTW9yZShkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZXN1bHRzLmFwcGVuZCh0aGlzLiRsb2FkaW5nTW9yZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgSW5maW5pdGVTY3JvbGwucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIsICRjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBjb250YWluZXIsICRjb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdxdWVyeScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0UGFyYW1zID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdxdWVyeTphcHBlbmQnLCBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubGFzdFBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuJHJlc3VsdHMub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzTG9hZE1vcmVWaXNpYmxlID0gJC5jb250YWlucyhcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJGxvYWRpbmdNb3JlWzBdXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYubG9hZGluZyB8fCAhaXNMb2FkTW9yZVZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50T2Zmc2V0ID0gc2VsZi4kcmVzdWx0cy5vZmZzZXQoKS50b3AgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJHJlc3VsdHMub3V0ZXJIZWlnaHQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9hZGluZ01vcmVPZmZzZXQgPSBzZWxmLiRsb2FkaW5nTW9yZS5vZmZzZXQoKS50b3AgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiRsb2FkaW5nTW9yZS5vdXRlckhlaWdodChmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRPZmZzZXQgKyA1MCA+PSBsb2FkaW5nTW9yZU9mZnNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkTW9yZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBJbmZpbml0ZVNjcm9sbC5wcm90b3R5cGUubG9hZE1vcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSAkLmV4dGVuZCh7fSwge3BhZ2U6IDF9LCB0aGlzLmxhc3RQYXJhbXMpO1xuXG4gICAgICAgICAgICAgICAgcGFyYW1zLnBhZ2UrKztcblxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigncXVlcnk6YXBwZW5kJywgcGFyYW1zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEluZmluaXRlU2Nyb2xsLnByb3RvdHlwZS5zaG93TG9hZGluZ01vcmUgPSBmdW5jdGlvbiAoXywgZGF0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLnBhZ2luYXRpb24gJiYgZGF0YS5wYWdpbmF0aW9uLm1vcmU7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBJbmZpbml0ZVNjcm9sbC5wcm90b3R5cGUuY3JlYXRlTG9hZGluZ01vcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRvcHRpb24gPSAkKFxuICAgICAgICAgICAgICAgICAgICAnPGxpICcgK1xuICAgICAgICAgICAgICAgICAgICAnY2xhc3M9XCJzZWxlY3QyLXJlc3VsdHNfX29wdGlvbiBzZWxlY3QyLXJlc3VsdHNfX29wdGlvbi0tbG9hZC1tb3JlXCInICtcbiAgICAgICAgICAgICAgICAgICAgJ3JvbGU9XCJ0cmVlaXRlbVwiIGFyaWEtZGlzYWJsZWQ9XCJ0cnVlXCI+PC9saT4nXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5vcHRpb25zLmdldCgndHJhbnNsYXRpb25zJykuZ2V0KCdsb2FkaW5nTW9yZScpO1xuXG4gICAgICAgICAgICAgICAgJG9wdGlvbi5odG1sKG1lc3NhZ2UodGhpcy5sYXN0UGFyYW1zKSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJG9wdGlvbjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBJbmZpbml0ZVNjcm9sbDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2Ryb3Bkb3duL2F0dGFjaEJvZHknLFtcbiAgICAgICAgICAgICdqcXVlcnknLFxuICAgICAgICAgICAgJy4uL3V0aWxzJ1xuICAgICAgICBdLCBmdW5jdGlvbiAoJCwgVXRpbHMpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIEF0dGFjaEJvZHkgKGRlY29yYXRlZCwgJGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRkcm9wZG93blBhcmVudCA9IG9wdGlvbnMuZ2V0KCdkcm9wZG93blBhcmVudCcpIHx8ICQoZG9jdW1lbnQuYm9keSk7XG5cbiAgICAgICAgICAgICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEF0dGFjaEJvZHkucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIsICRjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2V0dXBSZXN1bHRzRXZlbnRzID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBjb250YWluZXIsICRjb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdvcGVuJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9zaG93RHJvcGRvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYXR0YWNoUG9zaXRpb25pbmdIYW5kbGVyKGNvbnRhaW5lcik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXR1cFJlc3VsdHNFdmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwUmVzdWx0c0V2ZW50cyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5vbigncmVzdWx0czphbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcG9zaXRpb25Ecm9wZG93bigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3Jlc2l6ZURyb3Bkb3duKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdyZXN1bHRzOmFwcGVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wb3NpdGlvbkRyb3Bkb3duKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVzaXplRHJvcGRvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9oaWRlRHJvcGRvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGV0YWNoUG9zaXRpb25pbmdIYW5kbGVyKGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRkcm9wZG93bkNvbnRhaW5lci5vbignbW91c2Vkb3duJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBBdHRhY2hCb2R5LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGRlY29yYXRlZCkge1xuICAgICAgICAgICAgICAgIGRlY29yYXRlZC5jYWxsKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kZHJvcGRvd25Db250YWluZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBBdHRhY2hCb2R5LnByb3RvdHlwZS5wb3NpdGlvbiA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsICRkcm9wZG93biwgJGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIC8vIENsb25lIGFsbCBvZiB0aGUgY29udGFpbmVyIGNsYXNzZXNcbiAgICAgICAgICAgICAgICAkZHJvcGRvd24uYXR0cignY2xhc3MnLCAkY29udGFpbmVyLmF0dHIoJ2NsYXNzJykpO1xuXG4gICAgICAgICAgICAgICAgJGRyb3Bkb3duLnJlbW92ZUNsYXNzKCdzZWxlY3QyJyk7XG4gICAgICAgICAgICAgICAgJGRyb3Bkb3duLmFkZENsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tb3BlbicpO1xuXG4gICAgICAgICAgICAgICAgJGRyb3Bkb3duLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IC05OTk5OTlcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRhaW5lciA9ICRjb250YWluZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBBdHRhY2hCb2R5LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoZGVjb3JhdGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyICRjb250YWluZXIgPSAkKCc8c3Bhbj48L3NwYW4+Jyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgJGRyb3Bkb3duID0gZGVjb3JhdGVkLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lci5hcHBlbmQoJGRyb3Bkb3duKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuJGRyb3Bkb3duQ29udGFpbmVyID0gJGNvbnRhaW5lcjtcblxuICAgICAgICAgICAgICAgIHJldHVybiAkY29udGFpbmVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgQXR0YWNoQm9keS5wcm90b3R5cGUuX2hpZGVEcm9wZG93biA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRkcm9wZG93bkNvbnRhaW5lci5kZXRhY2goKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEF0dGFjaEJvZHkucHJvdG90eXBlLl9hdHRhY2hQb3NpdGlvbmluZ0hhbmRsZXIgPVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbEV2ZW50ID0gJ3Njcm9sbC5zZWxlY3QyLicgKyBjb250YWluZXIuaWQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNpemVFdmVudCA9ICdyZXNpemUuc2VsZWN0Mi4nICsgY29udGFpbmVyLmlkO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZW50YXRpb25FdmVudCA9ICdvcmllbnRhdGlvbmNoYW5nZS5zZWxlY3QyLicgKyBjb250YWluZXIuaWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyICR3YXRjaGVycyA9IHRoaXMuJGNvbnRhaW5lci5wYXJlbnRzKCkuZmlsdGVyKFV0aWxzLmhhc1Njcm9sbCk7XG4gICAgICAgICAgICAgICAgICAgICR3YXRjaGVycy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZGF0YSgnc2VsZWN0Mi1zY3JvbGwtcG9zaXRpb24nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogJCh0aGlzKS5zY3JvbGxMZWZ0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogJCh0aGlzKS5zY3JvbGxUb3AoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICR3YXRjaGVycy5vbihzY3JvbGxFdmVudCwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSAkKHRoaXMpLmRhdGEoJ3NlbGVjdDItc2Nyb2xsLXBvc2l0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNjcm9sbFRvcChwb3NpdGlvbi55KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCh3aW5kb3cpLm9uKHNjcm9sbEV2ZW50ICsgJyAnICsgcmVzaXplRXZlbnQgKyAnICcgKyBvcmllbnRhdGlvbkV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wb3NpdGlvbkRyb3Bkb3duKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVzaXplRHJvcGRvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEF0dGFjaEJvZHkucHJvdG90eXBlLl9kZXRhY2hQb3NpdGlvbmluZ0hhbmRsZXIgPVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsRXZlbnQgPSAnc2Nyb2xsLnNlbGVjdDIuJyArIGNvbnRhaW5lci5pZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc2l6ZUV2ZW50ID0gJ3Jlc2l6ZS5zZWxlY3QyLicgKyBjb250YWluZXIuaWQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmllbnRhdGlvbkV2ZW50ID0gJ29yaWVudGF0aW9uY2hhbmdlLnNlbGVjdDIuJyArIGNvbnRhaW5lci5pZDtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgJHdhdGNoZXJzID0gdGhpcy4kY29udGFpbmVyLnBhcmVudHMoKS5maWx0ZXIoVXRpbHMuaGFzU2Nyb2xsKTtcbiAgICAgICAgICAgICAgICAgICAgJHdhdGNoZXJzLm9mZihzY3JvbGxFdmVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCh3aW5kb3cpLm9mZihzY3JvbGxFdmVudCArICcgJyArIHJlc2l6ZUV2ZW50ICsgJyAnICsgb3JpZW50YXRpb25FdmVudCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgQXR0YWNoQm9keS5wcm90b3R5cGUuX3Bvc2l0aW9uRHJvcGRvd24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICR3aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgaXNDdXJyZW50bHlBYm92ZSA9IHRoaXMuJGRyb3Bkb3duLmhhc0NsYXNzKCdzZWxlY3QyLWRyb3Bkb3duLS1hYm92ZScpO1xuICAgICAgICAgICAgICAgIHZhciBpc0N1cnJlbnRseUJlbG93ID0gdGhpcy4kZHJvcGRvd24uaGFzQ2xhc3MoJ3NlbGVjdDItZHJvcGRvd24tLWJlbG93Jyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbmV3RGlyZWN0aW9uID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLiRjb250YWluZXIub2Zmc2V0KCk7XG5cbiAgICAgICAgICAgICAgICBvZmZzZXQuYm90dG9tID0gb2Zmc2V0LnRvcCArIHRoaXMuJGNvbnRhaW5lci5vdXRlckhlaWdodChmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0ge1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuJGNvbnRhaW5lci5vdXRlckhlaWdodChmYWxzZSlcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLnRvcCA9IG9mZnNldC50b3A7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmJvdHRvbSA9IG9mZnNldC50b3AgKyBjb250YWluZXIuaGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgdmFyIGRyb3Bkb3duID0ge1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuJGRyb3Bkb3duLm91dGVySGVpZ2h0KGZhbHNlKVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgdmlld3BvcnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogJHdpbmRvdy5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAkd2luZG93LnNjcm9sbFRvcCgpICsgJHdpbmRvdy5oZWlnaHQoKVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgZW5vdWdoUm9vbUFib3ZlID0gdmlld3BvcnQudG9wIDwgKG9mZnNldC50b3AgLSBkcm9wZG93bi5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHZhciBlbm91Z2hSb29tQmVsb3cgPSB2aWV3cG9ydC5ib3R0b20gPiAob2Zmc2V0LmJvdHRvbSArIGRyb3Bkb3duLmhlaWdodCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgY3NzID0ge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBvZmZzZXQubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBjb250YWluZXIuYm90dG9tXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8vIERldGVybWluZSB3aGF0IHRoZSBwYXJlbnQgZWxlbWVudCBpcyB0byB1c2UgZm9yIGNhbGNpdWxhdGluZyB0aGUgb2Zmc2V0XG4gICAgICAgICAgICAgICAgdmFyICRvZmZzZXRQYXJlbnQgPSB0aGlzLiRkcm9wZG93blBhcmVudDtcblxuICAgICAgICAgICAgICAgIC8vIEZvciBzdGF0aWNhbGx5IHBvc2l0b25lZCBlbGVtZW50cywgd2UgbmVlZCB0byBnZXQgdGhlIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGlzIGRldGVybWluaW5nIHRoZSBvZmZzZXRcbiAgICAgICAgICAgICAgICBpZiAoJG9mZnNldFBhcmVudC5jc3MoJ3Bvc2l0aW9uJykgPT09ICdzdGF0aWMnKSB7XG4gICAgICAgICAgICAgICAgICAgICRvZmZzZXRQYXJlbnQgPSAkb2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRPZmZzZXQgPSAkb2Zmc2V0UGFyZW50Lm9mZnNldCgpO1xuXG4gICAgICAgICAgICAgICAgY3NzLnRvcCAtPSBwYXJlbnRPZmZzZXQudG9wO1xuICAgICAgICAgICAgICAgIGNzcy5sZWZ0IC09IHBhcmVudE9mZnNldC5sZWZ0O1xuXG4gICAgICAgICAgICAgICAgaWYgKCFpc0N1cnJlbnRseUFib3ZlICYmICFpc0N1cnJlbnRseUJlbG93KSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0RpcmVjdGlvbiA9ICdiZWxvdyc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFlbm91Z2hSb29tQmVsb3cgJiYgZW5vdWdoUm9vbUFib3ZlICYmICFpc0N1cnJlbnRseUFib3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0RpcmVjdGlvbiA9ICdhYm92ZSc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghZW5vdWdoUm9vbUFib3ZlICYmIGVub3VnaFJvb21CZWxvdyAmJiBpc0N1cnJlbnRseUFib3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0RpcmVjdGlvbiA9ICdiZWxvdyc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG5ld0RpcmVjdGlvbiA9PSAnYWJvdmUnIHx8XG4gICAgICAgICAgICAgICAgICAgIChpc0N1cnJlbnRseUFib3ZlICYmIG5ld0RpcmVjdGlvbiAhPT0gJ2JlbG93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3NzLnRvcCA9IGNvbnRhaW5lci50b3AgLSBwYXJlbnRPZmZzZXQudG9wIC0gZHJvcGRvd24uaGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChuZXdEaXJlY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzZWxlY3QyLWRyb3Bkb3duLS1iZWxvdyBzZWxlY3QyLWRyb3Bkb3duLS1hYm92ZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NlbGVjdDItZHJvcGRvd24tLScgKyBuZXdEaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRjb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWJlbG93IHNlbGVjdDItY29udGFpbmVyLS1hYm92ZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NlbGVjdDItY29udGFpbmVyLS0nICsgbmV3RGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRkcm9wZG93bkNvbnRhaW5lci5jc3MoY3NzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEF0dGFjaEJvZHkucHJvdG90eXBlLl9yZXNpemVEcm9wZG93biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3NzID0ge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy4kY29udGFpbmVyLm91dGVyV2lkdGgoZmFsc2UpICsgJ3B4J1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmdldCgnZHJvcGRvd25BdXRvV2lkdGgnKSkge1xuICAgICAgICAgICAgICAgICAgICBjc3MubWluV2lkdGggPSBjc3Mud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGNzcy5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICAgICAgICAgIGNzcy53aWR0aCA9ICdhdXRvJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRkcm9wZG93bi5jc3MoY3NzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEF0dGFjaEJvZHkucHJvdG90eXBlLl9zaG93RHJvcGRvd24gPSBmdW5jdGlvbiAoZGVjb3JhdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZHJvcGRvd25Db250YWluZXIuYXBwZW5kVG8odGhpcy4kZHJvcGRvd25QYXJlbnQpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fcG9zaXRpb25Ecm9wZG93bigpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2l6ZURyb3Bkb3duKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gQXR0YWNoQm9keTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2Ryb3Bkb3duL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoJyxbXG5cbiAgICAgICAgXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gY291bnRSZXN1bHRzIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRhdGFbZF07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IGNvdW50UmVzdWx0cyhpdGVtLmNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIE1pbmltdW1SZXN1bHRzRm9yU2VhcmNoIChkZWNvcmF0ZWQsICRlbGVtZW50LCBvcHRpb25zLCBkYXRhQWRhcHRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMubWluaW11bVJlc3VsdHNGb3JTZWFyY2ggPSBvcHRpb25zLmdldCgnbWluaW11bVJlc3VsdHNGb3JTZWFyY2gnKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoID0gSW5maW5pdHk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMsIGRhdGFBZGFwdGVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgTWluaW11bVJlc3VsdHNGb3JTZWFyY2gucHJvdG90eXBlLnNob3dTZWFyY2ggPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoY291bnRSZXN1bHRzKHBhcmFtcy5kYXRhLnJlc3VsdHMpIDwgdGhpcy5taW5pbXVtUmVzdWx0c0ZvclNlYXJjaCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlY29yYXRlZC5jYWxsKHRoaXMsIHBhcmFtcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gTWluaW11bVJlc3VsdHNGb3JTZWFyY2g7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFMyLmRlZmluZSgnc2VsZWN0Mi9kcm9wZG93bi9zZWxlY3RPbkNsb3NlJyxbXG5cbiAgICAgICAgXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gU2VsZWN0T25DbG9zZSAoKSB7IH1cblxuICAgICAgICAgICAgU2VsZWN0T25DbG9zZS5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGNvbnRhaW5lciwgJGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGNvbnRhaW5lciwgJGNvbnRhaW5lcik7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ2Nsb3NlJywgZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9oYW5kbGVTZWxlY3RPbkNsb3NlKHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTZWxlY3RPbkNsb3NlLnByb3RvdHlwZS5faGFuZGxlU2VsZWN0T25DbG9zZSA9IGZ1bmN0aW9uIChfLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5vcmlnaW5hbFNlbGVjdDJFdmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBldmVudCA9IHBhcmFtcy5vcmlnaW5hbFNlbGVjdDJFdmVudDtcblxuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBzZWxlY3QgYW4gaXRlbSBpZiB0aGUgY2xvc2UgZXZlbnQgd2FzIHRyaWdnZXJlZCBmcm9tIGEgc2VsZWN0IG9yXG4gICAgICAgICAgICAgICAgICAgIC8vIHVuc2VsZWN0IGV2ZW50XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5fdHlwZSA9PT0gJ3NlbGVjdCcgfHwgZXZlbnQuX3R5cGUgPT09ICd1bnNlbGVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciAkaGlnaGxpZ2h0ZWRSZXN1bHRzID0gdGhpcy5nZXRIaWdobGlnaHRlZFJlc3VsdHMoKTtcblxuICAgICAgICAgICAgICAgIC8vIE9ubHkgc2VsZWN0IGhpZ2hsaWdodGVkIHJlc3VsdHNcbiAgICAgICAgICAgICAgICBpZiAoJGhpZ2hsaWdodGVkUmVzdWx0cy5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICRoaWdobGlnaHRlZFJlc3VsdHMuZGF0YSgnZGF0YScpO1xuXG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgcmUtc2VsZWN0IGFscmVhZHkgc2VsZWN0ZWQgcmVzdWx0ZVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgKGRhdGEuZWxlbWVudCAhPSBudWxsICYmIGRhdGEuZWxlbWVudC5zZWxlY3RlZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGRhdGEuZWxlbWVudCA9PSBudWxsICYmIGRhdGEuc2VsZWN0ZWQpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3NlbGVjdCcsIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFNlbGVjdE9uQ2xvc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFMyLmRlZmluZSgnc2VsZWN0Mi9kcm9wZG93bi9jbG9zZU9uU2VsZWN0JyxbXG5cbiAgICAgICAgXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gQ2xvc2VPblNlbGVjdCAoKSB7IH1cblxuICAgICAgICAgICAgQ2xvc2VPblNlbGVjdC5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGNvbnRhaW5lciwgJGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGNvbnRhaW5lciwgJGNvbnRhaW5lcik7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ3NlbGVjdCcsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fc2VsZWN0VHJpZ2dlcmVkKGV2dCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIub24oJ3Vuc2VsZWN0JywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZWxlY3RUcmlnZ2VyZWQoZXZ0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIENsb3NlT25TZWxlY3QucHJvdG90eXBlLl9zZWxlY3RUcmlnZ2VyZWQgPSBmdW5jdGlvbiAoXywgZXZ0KSB7XG4gICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsRXZlbnQgPSBldnQub3JpZ2luYWxFdmVudDtcblxuICAgICAgICAgICAgICAgIC8vIERvbid0IGNsb3NlIGlmIHRoZSBjb250cm9sIGtleSBpcyBiZWluZyBoZWxkXG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsRXZlbnQgJiYgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2Nsb3NlJywge1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBvcmlnaW5hbEV2ZW50LFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFNlbGVjdDJFdmVudDogZXZ0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gQ2xvc2VPblNlbGVjdDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2kxOG4vZW4nLFtdLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIEVuZ2xpc2hcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZXJyb3JMb2FkaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnVGhlIHJlc3VsdHMgY291bGQgbm90IGJlIGxvYWRlZC4nO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5wdXRUb29Mb25nOiBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3ZlckNoYXJzID0gYXJncy5pbnB1dC5sZW5ndGggLSBhcmdzLm1heGltdW07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSAnUGxlYXNlIGRlbGV0ZSAnICsgb3ZlckNoYXJzICsgJyBjaGFyYWN0ZXInO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdmVyQ2hhcnMgIT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSArPSAncyc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlucHV0VG9vU2hvcnQ6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmdDaGFycyA9IGFyZ3MubWluaW11bSAtIGFyZ3MuaW5wdXQubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gJ1BsZWFzZSBlbnRlciAnICsgcmVtYWluaW5nQ2hhcnMgKyAnIG9yIG1vcmUgY2hhcmFjdGVycyc7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsb2FkaW5nTW9yZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0xvYWRpbmcgbW9yZSByZXN1bHRz4oCmJztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1heGltdW1TZWxlY3RlZDogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSAnWW91IGNhbiBvbmx5IHNlbGVjdCAnICsgYXJncy5tYXhpbXVtICsgJyBpdGVtJztcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5tYXhpbXVtICE9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gJ3MnO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBub1Jlc3VsdHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdObyByZXN1bHRzIGZvdW5kJztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNlYXJjaGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1NlYXJjaGluZ+KApic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2RlZmF1bHRzJyxbXG4gICAgICAgICAgICAnanF1ZXJ5JyxcbiAgICAgICAgICAgICdyZXF1aXJlJyxcblxuICAgICAgICAgICAgJy4vcmVzdWx0cycsXG5cbiAgICAgICAgICAgICcuL3NlbGVjdGlvbi9zaW5nbGUnLFxuICAgICAgICAgICAgJy4vc2VsZWN0aW9uL211bHRpcGxlJyxcbiAgICAgICAgICAgICcuL3NlbGVjdGlvbi9wbGFjZWhvbGRlcicsXG4gICAgICAgICAgICAnLi9zZWxlY3Rpb24vYWxsb3dDbGVhcicsXG4gICAgICAgICAgICAnLi9zZWxlY3Rpb24vc2VhcmNoJyxcbiAgICAgICAgICAgICcuL3NlbGVjdGlvbi9ldmVudFJlbGF5JyxcblxuICAgICAgICAgICAgJy4vdXRpbHMnLFxuICAgICAgICAgICAgJy4vdHJhbnNsYXRpb24nLFxuICAgICAgICAgICAgJy4vZGlhY3JpdGljcycsXG5cbiAgICAgICAgICAgICcuL2RhdGEvc2VsZWN0JyxcbiAgICAgICAgICAgICcuL2RhdGEvYXJyYXknLFxuICAgICAgICAgICAgJy4vZGF0YS9hamF4JyxcbiAgICAgICAgICAgICcuL2RhdGEvdGFncycsXG4gICAgICAgICAgICAnLi9kYXRhL3Rva2VuaXplcicsXG4gICAgICAgICAgICAnLi9kYXRhL21pbmltdW1JbnB1dExlbmd0aCcsXG4gICAgICAgICAgICAnLi9kYXRhL21heGltdW1JbnB1dExlbmd0aCcsXG4gICAgICAgICAgICAnLi9kYXRhL21heGltdW1TZWxlY3Rpb25MZW5ndGgnLFxuXG4gICAgICAgICAgICAnLi9kcm9wZG93bicsXG4gICAgICAgICAgICAnLi9kcm9wZG93bi9zZWFyY2gnLFxuICAgICAgICAgICAgJy4vZHJvcGRvd24vaGlkZVBsYWNlaG9sZGVyJyxcbiAgICAgICAgICAgICcuL2Ryb3Bkb3duL2luZmluaXRlU2Nyb2xsJyxcbiAgICAgICAgICAgICcuL2Ryb3Bkb3duL2F0dGFjaEJvZHknLFxuICAgICAgICAgICAgJy4vZHJvcGRvd24vbWluaW11bVJlc3VsdHNGb3JTZWFyY2gnLFxuICAgICAgICAgICAgJy4vZHJvcGRvd24vc2VsZWN0T25DbG9zZScsXG4gICAgICAgICAgICAnLi9kcm9wZG93bi9jbG9zZU9uU2VsZWN0JyxcblxuICAgICAgICAgICAgJy4vaTE4bi9lbidcbiAgICAgICAgXSwgZnVuY3Rpb24gKCQsIHJlcXVpcmUsXG5cbiAgICAgICAgICAgIFJlc3VsdHNMaXN0LFxuXG4gICAgICAgICAgICBTaW5nbGVTZWxlY3Rpb24sIE11bHRpcGxlU2VsZWN0aW9uLCBQbGFjZWhvbGRlciwgQWxsb3dDbGVhcixcbiAgICAgICAgICAgIFNlbGVjdGlvblNlYXJjaCwgRXZlbnRSZWxheSxcblxuICAgICAgICAgICAgVXRpbHMsIFRyYW5zbGF0aW9uLCBESUFDUklUSUNTLFxuXG4gICAgICAgICAgICBTZWxlY3REYXRhLCBBcnJheURhdGEsIEFqYXhEYXRhLCBUYWdzLCBUb2tlbml6ZXIsXG4gICAgICAgICAgICBNaW5pbXVtSW5wdXRMZW5ndGgsIE1heGltdW1JbnB1dExlbmd0aCwgTWF4aW11bVNlbGVjdGlvbkxlbmd0aCxcblxuICAgICAgICAgICAgRHJvcGRvd24sIERyb3Bkb3duU2VhcmNoLCBIaWRlUGxhY2Vob2xkZXIsIEluZmluaXRlU2Nyb2xsLFxuICAgICAgICAgICAgQXR0YWNoQm9keSwgTWluaW11bVJlc3VsdHNGb3JTZWFyY2gsIFNlbGVjdE9uQ2xvc2UsIENsb3NlT25TZWxlY3QsXG5cbiAgICAgICAgICAgIEVuZ2xpc2hUcmFuc2xhdGlvbikge1xuICAgICAgICAgICAgZnVuY3Rpb24gRGVmYXVsdHMgKCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgRGVmYXVsdHMucHJvdG90eXBlLmFwcGx5ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIHRoaXMuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGF0YUFkYXB0ZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hamF4ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBBamF4RGF0YTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmRhdGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IEFycmF5RGF0YTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBTZWxlY3REYXRhO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubWluaW11bUlucHV0TGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW11bUlucHV0TGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubWF4aW11bUlucHV0TGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF4aW11bUlucHV0TGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubWF4aW11bVNlbGVjdGlvbkxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1heGltdW1TZWxlY3Rpb25MZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50YWdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUob3B0aW9ucy5kYXRhQWRhcHRlciwgVGFncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50b2tlblNlcGFyYXRvcnMgIT0gbnVsbCB8fCBvcHRpb25zLnRva2VuaXplciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUb2tlbml6ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5xdWVyeSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgUXVlcnkgPSByZXF1aXJlKG9wdGlvbnMuYW1kQmFzZSArICdjb21wYXQvcXVlcnknKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUXVlcnlcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pbml0U2VsZWN0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBJbml0U2VsZWN0aW9uID0gcmVxdWlyZShvcHRpb25zLmFtZEJhc2UgKyAnY29tcGF0L2luaXRTZWxlY3Rpb24nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5pdFNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJlc3VsdHNBZGFwdGVyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXN1bHRzQWRhcHRlciA9IFJlc3VsdHNMaXN0O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFqYXggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXN1bHRzQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVzdWx0c0FkYXB0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5maW5pdGVTY3JvbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5wbGFjZWhvbGRlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnJlc3VsdHNBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXN1bHRzQWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIaWRlUGxhY2Vob2xkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zZWxlY3RPbkNsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnJlc3VsdHNBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXN1bHRzQWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3RPbkNsb3NlXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyID0gRHJvcGRvd247XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgU2VhcmNoYWJsZURyb3Bkb3duID0gVXRpbHMuRGVjb3JhdGUoRHJvcGRvd24sIERyb3Bkb3duU2VhcmNoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIgPSBTZWFyY2hhYmxlRHJvcGRvd247XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5taW5pbXVtUmVzdWx0c0ZvclNlYXJjaCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRyb3Bkb3duQWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbXVtUmVzdWx0c0ZvclNlYXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNsb3NlT25TZWxlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2xvc2VPblNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZHJvcGRvd25Dc3NDbGFzcyAhPSBudWxsIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRyb3Bkb3duQ3NzICE9IG51bGwgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuYWRhcHREcm9wZG93bkNzc0NsYXNzICE9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgRHJvcGRvd25DU1MgPSByZXF1aXJlKG9wdGlvbnMuYW1kQmFzZSArICdjb21wYXQvZHJvcGRvd25Dc3MnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRyb3Bkb3duQWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93bkNTU1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRyb3Bkb3duQWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFjaEJvZHlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlciA9IE11bHRpcGxlU2VsZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyID0gU2luZ2xlU2VsZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBwbGFjZWhvbGRlciBtaXhpbiBpZiBhIHBsYWNlaG9sZGVyIHdhcyBzcGVjaWZpZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucGxhY2Vob2xkZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWxsb3dDbGVhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdGlvblNlYXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29udGFpbmVyQ3NzQ2xhc3MgIT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jb250YWluZXJDc3MgIT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5hZGFwdENvbnRhaW5lckNzc0NsYXNzICE9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgQ29udGFpbmVyQ1NTID0gcmVxdWlyZShvcHRpb25zLmFtZEJhc2UgKyAnY29tcGF0L2NvbnRhaW5lckNzcycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGFpbmVyQ1NTXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBFdmVudFJlbGF5XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmxhbmd1YWdlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgbGFuZ3VhZ2UgaXMgc3BlY2lmaWVkIHdpdGggYSByZWdpb25cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubGFuZ3VhZ2UuaW5kZXhPZignLScpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCB0aGUgcmVnaW9uIGluZm9ybWF0aW9uIGlmIGl0IGlzIGluY2x1ZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFuZ3VhZ2VQYXJ0cyA9IG9wdGlvbnMubGFuZ3VhZ2Uuc3BsaXQoJy0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYXNlTGFuZ3VhZ2UgPSBsYW5ndWFnZVBhcnRzWzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmxhbmd1YWdlID0gW29wdGlvbnMubGFuZ3VhZ2UsIGJhc2VMYW5ndWFnZV07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmxhbmd1YWdlID0gW29wdGlvbnMubGFuZ3VhZ2VdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCQuaXNBcnJheShvcHRpb25zLmxhbmd1YWdlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGFuZ3VhZ2VzID0gbmV3IFRyYW5zbGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMubGFuZ3VhZ2UucHVzaCgnZW4nKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFuZ3VhZ2VOYW1lcyA9IG9wdGlvbnMubGFuZ3VhZ2U7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCBsYW5ndWFnZU5hbWVzLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGxhbmd1YWdlTmFtZXNbbF07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFuZ3VhZ2UgPSB7fTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnkgdG8gbG9hZCBpdCB3aXRoIHRoZSBvcmlnaW5hbCBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSBUcmFuc2xhdGlvbi5sb2FkUGF0aChuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBjb3VsZG4ndCBsb2FkIGl0LCBjaGVjayBpZiBpdCB3YXNuJ3QgdGhlIGZ1bGwgcGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gdGhpcy5kZWZhdWx0cy5hbWRMYW5ndWFnZUJhc2UgKyBuYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZSA9IFRyYW5zbGF0aW9uLmxvYWRQYXRoKG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSB0cmFuc2xhdGlvbiBjb3VsZCBub3QgYmUgbG9hZGVkIGF0IGFsbC4gU29tZXRpbWVzIHRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVjYXVzZSBvZiBhIGNvbmZpZ3VyYXRpb24gcHJvYmxlbSwgb3RoZXIgdGltZXMgdGhpcyBjYW4gYmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVjYXVzZSBvZiBob3cgU2VsZWN0MiBoZWxwcyBsb2FkIGFsbCBwb3NzaWJsZSB0cmFuc2xhdGlvbiBmaWxlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVidWcgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NlbGVjdDI6IFRoZSBsYW5ndWFnZSBmaWxlIGZvciBcIicgKyBuYW1lICsgJ1wiIGNvdWxkIG5vdCBiZSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXV0b21hdGljYWxseSBsb2FkZWQuIEEgZmFsbGJhY2sgd2lsbCBiZSB1c2VkIGluc3RlYWQuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VzLmV4dGVuZChsYW5ndWFnZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnRyYW5zbGF0aW9ucyA9IGxhbmd1YWdlcztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZVRyYW5zbGF0aW9uID0gVHJhbnNsYXRpb24ubG9hZFBhdGgoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRzLmFtZExhbmd1YWdlQmFzZSArICdlbidcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1c3RvbVRyYW5zbGF0aW9uID0gbmV3IFRyYW5zbGF0aW9uKG9wdGlvbnMubGFuZ3VhZ2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbVRyYW5zbGF0aW9uLmV4dGVuZChiYXNlVHJhbnNsYXRpb24pO1xuXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudHJhbnNsYXRpb25zID0gY3VzdG9tVHJhbnNsYXRpb247XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBEZWZhdWx0cy5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc3RyaXBEaWFjcml0aWNzICh0ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZWQgJ3VuaSByYW5nZSArIG5hbWVkIGZ1bmN0aW9uJyBmcm9tIGh0dHA6Ly9qc3BlcmYuY29tL2RpYWNyaXRpY3MvMThcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbWF0Y2goYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJQUNSSVRJQ1NbYV0gfHwgYTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoL1teXFx1MDAwMC1cXHUwMDdFXS9nLCBtYXRjaCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gbWF0Y2hlciAocGFyYW1zLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFsd2F5cyByZXR1cm4gdGhlIG9iamVjdCBpZiB0aGVyZSBpcyBub3RoaW5nIHRvIGNvbXBhcmVcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQudHJpbShwYXJhbXMudGVybSkgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIERvIGEgcmVjdXJzaXZlIGNoZWNrIGZvciBvcHRpb25zIHdpdGggY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY2hpbGRyZW4gJiYgZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbG9uZSB0aGUgZGF0YSBvYmplY3QgaWYgdGhlcmUgYXJlIGNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHJlcXVpcmVkIGFzIHdlIG1vZGlmeSB0aGUgb2JqZWN0IHRvIHJlbW92ZSBhbnkgbm9uLW1hdGNoZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9ICQuZXh0ZW5kKHRydWUsIHt9LCBkYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgZWFjaCBjaGlsZCBvZiB0aGUgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gZGF0YS5jaGlsZHJlbi5sZW5ndGggLSAxOyBjID49IDA7IGMtLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGRhdGEuY2hpbGRyZW5bY107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IG1hdGNoZXIocGFyYW1zLCBjaGlsZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSB3YXNuJ3QgYSBtYXRjaCwgcmVtb3ZlIHRoZSBvYmplY3QgaW4gdGhlIGFycmF5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaC5jaGlsZHJlbi5zcGxpY2UoYywgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbnkgY2hpbGRyZW4gbWF0Y2hlZCwgcmV0dXJuIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2guY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgd2VyZSBubyBtYXRjaGluZyBjaGlsZHJlbiwgY2hlY2sganVzdCB0aGUgcGxhaW4gb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlcihwYXJhbXMsIG1hdGNoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbCA9IHN0cmlwRGlhY3JpdGljcyhkYXRhLnRleHQpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZXJtID0gc3RyaXBEaWFjcml0aWNzKHBhcmFtcy50ZXJtKS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB0ZXh0IGNvbnRhaW5zIHRoZSB0ZXJtXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbC5pbmRleE9mKHRlcm0pID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQgZG9lc24ndCBjb250YWluIHRoZSB0ZXJtLCBkb24ndCByZXR1cm4gYW55dGhpbmdcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgYW1kQmFzZTogJy4vJyxcbiAgICAgICAgICAgICAgICAgICAgYW1kTGFuZ3VhZ2VCYXNlOiAnLi9pMThuLycsXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlT25TZWxlY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25BdXRvV2lkdGg6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlc2NhcGVNYXJrdXA6IFV0aWxzLmVzY2FwZU1hcmt1cCxcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IEVuZ2xpc2hUcmFuc2xhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcjogbWF0Y2hlcixcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bUlucHV0TGVuZ3RoOiAwLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtSW5wdXRMZW5ndGg6IDAsXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW1TZWxlY3Rpb25MZW5ndGg6IDAsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiAwLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RPbkNsb3NlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgc29ydGVyOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVzdWx0OiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlU2VsZWN0aW9uOiBmdW5jdGlvbiAoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uLnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRoZW1lOiAnZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAncmVzb2x2ZSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgRGVmYXVsdHMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhbWVsS2V5ID0gJC5jYW1lbENhc2Uoa2V5KTtcblxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgICAgICAgICAgZGF0YVtjYW1lbEtleV0gPSB2YWx1ZTtcblxuICAgICAgICAgICAgICAgIHZhciBjb252ZXJ0ZWREYXRhID0gVXRpbHMuX2NvbnZlcnREYXRhKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgJC5leHRlbmQodGhpcy5kZWZhdWx0cywgY29udmVydGVkRGF0YSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgZGVmYXVsdHMgPSBuZXcgRGVmYXVsdHMoKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRzO1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvb3B0aW9ucycsW1xuICAgICAgICAgICAgJ3JlcXVpcmUnLFxuICAgICAgICAgICAgJ2pxdWVyeScsXG4gICAgICAgICAgICAnLi9kZWZhdWx0cycsXG4gICAgICAgICAgICAnLi91dGlscydcbiAgICAgICAgXSwgZnVuY3Rpb24gKHJlcXVpcmUsICQsIERlZmF1bHRzLCBVdGlscykge1xuICAgICAgICAgICAgZnVuY3Rpb24gT3B0aW9ucyAob3B0aW9ucywgJGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRlbGVtZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mcm9tRWxlbWVudCgkZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gRGVmYXVsdHMuYXBwbHkodGhpcy5vcHRpb25zKTtcblxuICAgICAgICAgICAgICAgIGlmICgkZWxlbWVudCAmJiAkZWxlbWVudC5pcygnaW5wdXQnKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgSW5wdXRDb21wYXQgPSByZXF1aXJlKHRoaXMuZ2V0KCdhbWRCYXNlJykgKyAnY29tcGF0L2lucHV0RGF0YScpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kYXRhQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRhdGFBZGFwdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgSW5wdXRDb21wYXRcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIE9wdGlvbnMucHJvdG90eXBlLmZyb21FbGVtZW50ID0gZnVuY3Rpb24gKCRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV4Y2x1ZGVkRGF0YSA9IFsnc2VsZWN0MiddO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tdWx0aXBsZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5tdWx0aXBsZSA9ICRlLnByb3AoJ211bHRpcGxlJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9ICRlLnByb3AoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5sYW5ndWFnZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkZS5wcm9wKCdsYW5nJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5sYW5ndWFnZSA9ICRlLnByb3AoJ2xhbmcnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCRlLmNsb3Nlc3QoJ1tsYW5nXScpLnByb3AoJ2xhbmcnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmxhbmd1YWdlID0gJGUuY2xvc2VzdCgnW2xhbmddJykucHJvcCgnbGFuZycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJGUucHJvcCgnZGlyJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kaXIgPSAkZS5wcm9wKCdkaXInKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkZS5jbG9zZXN0KCdbZGlyXScpLnByb3AoJ2RpcicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGlyID0gJGUuY2xvc2VzdCgnW2Rpcl0nKS5wcm9wKCdkaXInKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kaXIgPSAnbHRyJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRlLnByb3AoJ2Rpc2FibGVkJywgdGhpcy5vcHRpb25zLmRpc2FibGVkKTtcbiAgICAgICAgICAgICAgICAkZS5wcm9wKCdtdWx0aXBsZScsIHRoaXMub3B0aW9ucy5tdWx0aXBsZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJGUuZGF0YSgnc2VsZWN0MlRhZ3MnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRlYnVnICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUud2Fybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTZWxlY3QyOiBUaGUgYGRhdGEtc2VsZWN0Mi10YWdzYCBhdHRyaWJ1dGUgaGFzIGJlZW4gY2hhbmdlZCB0byAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndXNlIHRoZSBgZGF0YS1kYXRhYCBhbmQgYGRhdGEtdGFncz1cInRydWVcImAgYXR0cmlidXRlcyBhbmQgd2lsbCBiZSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncmVtb3ZlZCBpbiBmdXR1cmUgdmVyc2lvbnMgb2YgU2VsZWN0Mi4nXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJGUuZGF0YSgnZGF0YScsICRlLmRhdGEoJ3NlbGVjdDJUYWdzJykpO1xuICAgICAgICAgICAgICAgICAgICAkZS5kYXRhKCd0YWdzJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCRlLmRhdGEoJ2FqYXhVcmwnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRlYnVnICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUud2Fybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTZWxlY3QyOiBUaGUgYGRhdGEtYWpheC11cmxgIGF0dHJpYnV0ZSBoYXMgYmVlbiBjaGFuZ2VkIHRvICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdgZGF0YS1hamF4LS11cmxgIGFuZCBzdXBwb3J0IGZvciB0aGUgb2xkIGF0dHJpYnV0ZSB3aWxsIGJlIHJlbW92ZWQnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIGluIGZ1dHVyZSB2ZXJzaW9ucyBvZiBTZWxlY3QyLidcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkZS5hdHRyKCdhamF4LS11cmwnLCAkZS5kYXRhKCdhamF4VXJsJykpO1xuICAgICAgICAgICAgICAgICAgICAkZS5kYXRhKCdhamF4LS11cmwnLCAkZS5kYXRhKCdhamF4VXJsJykpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBkYXRhc2V0ID0ge307XG5cbiAgICAgICAgICAgICAgICAvLyBQcmVmZXIgdGhlIGVsZW1lbnQncyBgZGF0YXNldGAgYXR0cmlidXRlIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgICAgIC8vIGpRdWVyeSAxLnggZG9lcyBub3QgY29ycmVjdGx5IGhhbmRsZSBkYXRhIGF0dHJpYnV0ZXMgd2l0aCBtdWx0aXBsZSBkYXNoZXNcbiAgICAgICAgICAgICAgICBpZiAoJC5mbi5qcXVlcnkgJiYgJC5mbi5qcXVlcnkuc3Vic3RyKDAsIDIpID09ICcxLicgJiYgJGVbMF0uZGF0YXNldCkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0ID0gJC5leHRlbmQodHJ1ZSwge30sICRlWzBdLmRhdGFzZXQsICRlLmRhdGEoKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YXNldCA9ICRlLmRhdGEoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICQuZXh0ZW5kKHRydWUsIHt9LCBkYXRhc2V0KTtcblxuICAgICAgICAgICAgICAgIGRhdGEgPSBVdGlscy5fY29udmVydERhdGEoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KGtleSwgZXhjbHVkZWREYXRhKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmlzUGxhaW5PYmplY3QodGhpcy5vcHRpb25zW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLmV4dGVuZCh0aGlzLm9wdGlvbnNba2V5XSwgZGF0YVtrZXldKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uc1trZXldID0gZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBPcHRpb25zLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1trZXldO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgT3B0aW9ucy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zW2tleV0gPSB2YWw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gT3B0aW9ucztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2NvcmUnLFtcbiAgICAgICAgICAgICdqcXVlcnknLFxuICAgICAgICAgICAgJy4vb3B0aW9ucycsXG4gICAgICAgICAgICAnLi91dGlscycsXG4gICAgICAgICAgICAnLi9rZXlzJ1xuICAgICAgICBdLCBmdW5jdGlvbiAoJCwgT3B0aW9ucywgVXRpbHMsIEtFWVMpIHtcbiAgICAgICAgICAgIHZhciBTZWxlY3QyID0gZnVuY3Rpb24gKCRlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRlbGVtZW50LmRhdGEoJ3NlbGVjdDInKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoJ3NlbGVjdDInKS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudCA9ICRlbGVtZW50O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5pZCA9IHRoaXMuX2dlbmVyYXRlSWQoJGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBuZXcgT3B0aW9ucyhvcHRpb25zLCAkZWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICBTZWxlY3QyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgLy8gU2V0IHVwIHRoZSB0YWJpbmRleFxuXG4gICAgICAgICAgICAgICAgdmFyIHRhYmluZGV4ID0gJGVsZW1lbnQuYXR0cigndGFiaW5kZXgnKSB8fCAwO1xuICAgICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoJ29sZC10YWJpbmRleCcsIHRhYmluZGV4KTtcbiAgICAgICAgICAgICAgICAkZWxlbWVudC5hdHRyKCd0YWJpbmRleCcsICctMScpO1xuXG4gICAgICAgICAgICAgICAgLy8gU2V0IHVwIGNvbnRhaW5lcnMgYW5kIGFkYXB0ZXJzXG5cbiAgICAgICAgICAgICAgICB2YXIgRGF0YUFkYXB0ZXIgPSB0aGlzLm9wdGlvbnMuZ2V0KCdkYXRhQWRhcHRlcicpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YUFkYXB0ZXIgPSBuZXcgRGF0YUFkYXB0ZXIoJGVsZW1lbnQsIHRoaXMub3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgJGNvbnRhaW5lciA9IHRoaXMucmVuZGVyKCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9wbGFjZUNvbnRhaW5lcigkY29udGFpbmVyKTtcblxuICAgICAgICAgICAgICAgIHZhciBTZWxlY3Rpb25BZGFwdGVyID0gdGhpcy5vcHRpb25zLmdldCgnc2VsZWN0aW9uQWRhcHRlcicpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uID0gbmV3IFNlbGVjdGlvbkFkYXB0ZXIoJGVsZW1lbnQsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2VsZWN0aW9uID0gdGhpcy5zZWxlY3Rpb24ucmVuZGVyKCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wb3NpdGlvbih0aGlzLiRzZWxlY3Rpb24sICRjb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgdmFyIERyb3Bkb3duQWRhcHRlciA9IHRoaXMub3B0aW9ucy5nZXQoJ2Ryb3Bkb3duQWRhcHRlcicpO1xuICAgICAgICAgICAgICAgIHRoaXMuZHJvcGRvd24gPSBuZXcgRHJvcGRvd25BZGFwdGVyKCRlbGVtZW50LCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGRyb3Bkb3duID0gdGhpcy5kcm9wZG93bi5yZW5kZXIoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZHJvcGRvd24ucG9zaXRpb24odGhpcy4kZHJvcGRvd24sICRjb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgdmFyIFJlc3VsdHNBZGFwdGVyID0gdGhpcy5vcHRpb25zLmdldCgncmVzdWx0c0FkYXB0ZXInKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdHMgPSBuZXcgUmVzdWx0c0FkYXB0ZXIoJGVsZW1lbnQsIHRoaXMub3B0aW9ucywgdGhpcy5kYXRhQWRhcHRlcik7XG4gICAgICAgICAgICAgICAgdGhpcy4kcmVzdWx0cyA9IHRoaXMucmVzdWx0cy5yZW5kZXIoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0cy5wb3NpdGlvbih0aGlzLiRyZXN1bHRzLCB0aGlzLiRkcm9wZG93bik7XG5cbiAgICAgICAgICAgICAgICAvLyBCaW5kIGV2ZW50c1xuXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgLy8gQmluZCB0aGUgY29udGFpbmVyIHRvIGFsbCBvZiB0aGUgYWRhcHRlcnNcbiAgICAgICAgICAgICAgICB0aGlzLl9iaW5kQWRhcHRlcnMoKTtcblxuICAgICAgICAgICAgICAgIC8vIFJlZ2lzdGVyIGFueSBET00gZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWdpc3RlckRvbUV2ZW50cygpO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVnaXN0ZXIgYW55IGludGVybmFsIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVnaXN0ZXJEYXRhRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVnaXN0ZXJTZWxlY3Rpb25FdmVudHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWdpc3RlckRyb3Bkb3duRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVnaXN0ZXJSZXN1bHRzRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVnaXN0ZXJFdmVudHMoKTtcblxuICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YUFkYXB0ZXIuY3VycmVudChmdW5jdGlvbiAoaW5pdGlhbERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdzZWxlY3Rpb246dXBkYXRlJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5pdGlhbERhdGFcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBIaWRlIHRoZSBvcmlnaW5hbCBzZWxlY3RcbiAgICAgICAgICAgICAgICAkZWxlbWVudC5hZGRDbGFzcygnc2VsZWN0Mi1oaWRkZW4tYWNjZXNzaWJsZScpO1xuICAgICAgICAgICAgICAgICRlbGVtZW50LmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcblxuICAgICAgICAgICAgICAgIC8vIFN5bmNocm9uaXplIGFueSBtb25pdG9yZWQgYXR0cmlidXRlc1xuICAgICAgICAgICAgICAgIHRoaXMuX3N5bmNBdHRyaWJ1dGVzKCk7XG5cbiAgICAgICAgICAgICAgICAkZWxlbWVudC5kYXRhKCdzZWxlY3QyJywgdGhpcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBVdGlscy5FeHRlbmQoU2VsZWN0MiwgVXRpbHMuT2JzZXJ2YWJsZSk7XG5cbiAgICAgICAgICAgIFNlbGVjdDIucHJvdG90eXBlLl9nZW5lcmF0ZUlkID0gZnVuY3Rpb24gKCRlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gJyc7XG5cbiAgICAgICAgICAgICAgICBpZiAoJGVsZW1lbnQuYXR0cignaWQnKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlkID0gJGVsZW1lbnQuYXR0cignaWQnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCRlbGVtZW50LmF0dHIoJ25hbWUnKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlkID0gJGVsZW1lbnQuYXR0cignbmFtZScpICsgJy0nICsgVXRpbHMuZ2VuZXJhdGVDaGFycygyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZCA9IFV0aWxzLmdlbmVyYXRlQ2hhcnMoNCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWQgPSBpZC5yZXBsYWNlKC8oOnxcXC58XFxbfFxcXXwsKS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgaWQgPSAnc2VsZWN0Mi0nICsgaWQ7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gaWQ7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTZWxlY3QyLnByb3RvdHlwZS5fcGxhY2VDb250YWluZXIgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICRjb250YWluZXIuaW5zZXJ0QWZ0ZXIodGhpcy4kZWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLl9yZXNvbHZlV2lkdGgodGhpcy4kZWxlbWVudCwgdGhpcy5vcHRpb25zLmdldCgnd2lkdGgnKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAod2lkdGggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAkY29udGFpbmVyLmNzcygnd2lkdGgnLCB3aWR0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VsZWN0Mi5wcm90b3R5cGUuX3Jlc29sdmVXaWR0aCA9IGZ1bmN0aW9uICgkZWxlbWVudCwgbWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgdmFyIFdJRFRIID0gL153aWR0aDooKFstK10/KFswLTldKlxcLik/WzAtOV0rKShweHxlbXxleHwlfGlufGNtfG1tfHB0fHBjKSkvaTtcblxuICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT0gJ3Jlc29sdmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHlsZVdpZHRoID0gdGhpcy5fcmVzb2x2ZVdpZHRoKCRlbGVtZW50LCAnc3R5bGUnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGVXaWR0aCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGVXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXNvbHZlV2lkdGgoJGVsZW1lbnQsICdlbGVtZW50Jyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG1ldGhvZCA9PSAnZWxlbWVudCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRXaWR0aCA9ICRlbGVtZW50Lm91dGVyV2lkdGgoZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50V2lkdGggPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdhdXRvJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT0gJ3N0eWxlJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSAkZWxlbWVudC5hdHRyKCdzdHlsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yoc3R5bGUpICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cnMgPSBzdHlsZS5zcGxpdCgnOycpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSA9IGkgKyAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXR0ciA9IGF0dHJzW2ldLnJlcGxhY2UoL1xccy9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IGF0dHIubWF0Y2goV0lEVEgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcyAhPT0gbnVsbCAmJiBtYXRjaGVzLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXNbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbWV0aG9kO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VsZWN0Mi5wcm90b3R5cGUuX2JpbmRBZGFwdGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFBZGFwdGVyLmJpbmQodGhpcywgdGhpcy4kY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5iaW5kKHRoaXMsIHRoaXMuJGNvbnRhaW5lcik7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRyb3Bkb3duLmJpbmQodGhpcywgdGhpcy4kY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdHMuYmluZCh0aGlzLCB0aGlzLiRjb250YWluZXIpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VsZWN0Mi5wcm90b3R5cGUuX3JlZ2lzdGVyRG9tRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQub24oJ2NoYW5nZS5zZWxlY3QyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmRhdGFBZGFwdGVyLmN1cnJlbnQoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcignc2VsZWN0aW9uOnVwZGF0ZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50Lm9uKCdmb2N1cy5zZWxlY3QyJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnRyaWdnZXIoJ2ZvY3VzJywgZXZ0KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuX3N5bmNBID0gVXRpbHMuYmluZCh0aGlzLl9zeW5jQXR0cmlidXRlcywgdGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3luY1MgPSBVdGlscy5iaW5kKHRoaXMuX3N5bmNTdWJ0cmVlLCB0aGlzKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLiRlbGVtZW50WzBdLmF0dGFjaEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnRbMF0uYXR0YWNoRXZlbnQoJ29ucHJvcGVydHljaGFuZ2UnLCB0aGlzLl9zeW5jQSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG9ic2VydmVyID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlciB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5Nb3pNdXRhdGlvbk9ic2VydmVyXG4gICAgICAgICAgICAgICAgO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9ic2VydmVyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb2JzZXJ2ZXIgPSBuZXcgb2JzZXJ2ZXIoZnVuY3Rpb24gKG11dGF0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKG11dGF0aW9ucywgc2VsZi5fc3luY0EpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKG11dGF0aW9ucywgc2VsZi5fc3luY1MpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLiRlbGVtZW50WzBdLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidHJlZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLiRlbGVtZW50WzBdLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudFswXS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0RPTUF0dHJNb2RpZmllZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zeW5jQSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnRbMF0uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAgICAgICAgICdET01Ob2RlSW5zZXJ0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fc3luY1MsXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50WzBdLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAnRE9NTm9kZVJlbW92ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fc3luY1MsXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlbGVjdDIucHJvdG90eXBlLl9yZWdpc3RlckRhdGFFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhQWRhcHRlci5vbignKicsIGZ1bmN0aW9uIChuYW1lLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKG5hbWUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTZWxlY3QyLnByb3RvdHlwZS5fcmVnaXN0ZXJTZWxlY3Rpb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciBub25SZWxheUV2ZW50cyA9IFsndG9nZ2xlJywgJ2ZvY3VzJ107XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5vbigndG9nZ2xlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnRvZ2dsZURyb3Bkb3duKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5vbignZm9jdXMnLCBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZm9jdXMocGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLm9uKCcqJywgZnVuY3Rpb24gKG5hbWUsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KG5hbWUsIG5vblJlbGF5RXZlbnRzKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcihuYW1lLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VsZWN0Mi5wcm90b3R5cGUuX3JlZ2lzdGVyRHJvcGRvd25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wZG93bi5vbignKicsIGZ1bmN0aW9uIChuYW1lLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKG5hbWUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTZWxlY3QyLnByb3RvdHlwZS5fcmVnaXN0ZXJSZXN1bHRzRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0cy5vbignKicsIGZ1bmN0aW9uIChuYW1lLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKG5hbWUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTZWxlY3QyLnByb3RvdHlwZS5fcmVnaXN0ZXJFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5vbignb3BlbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kY29udGFpbmVyLmFkZENsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tb3BlbicpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJGNvbnRhaW5lci5yZW1vdmVDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLW9wZW4nKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMub24oJ2VuYWJsZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kY29udGFpbmVyLnJlbW92ZUNsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMub24oJ2Rpc2FibGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJGNvbnRhaW5lci5hZGRDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWRpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRjb250YWluZXIucmVtb3ZlQ2xhc3MoJ3NlbGVjdDItY29udGFpbmVyLS1mb2N1cycpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5vbigncXVlcnknLCBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5pc09wZW4oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdvcGVuJywge30pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhQWRhcHRlci5xdWVyeShwYXJhbXMsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRyaWdnZXIoJ3Jlc3VsdHM6YWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5vbigncXVlcnk6YXBwZW5kJywgZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFBZGFwdGVyLnF1ZXJ5KHBhcmFtcywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czphcHBlbmQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeTogcGFyYW1zXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGV2dC53aGljaDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc09wZW4oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gS0VZUy5FU0MgfHwga2V5ID09PSBLRVlTLlRBQiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChrZXkgPT09IEtFWVMuVVAgJiYgZXZ0LmFsdEtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBLRVlTLkVOVEVSKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdyZXN1bHRzOnNlbGVjdCcsIHt9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoa2V5ID09PSBLRVlTLlNQQUNFICYmIGV2dC5jdHJsS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czp0b2dnbGUnLCB7fSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBLRVlTLlVQKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdyZXN1bHRzOnByZXZpb3VzJywge30pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gS0VZUy5ET1dOKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdyZXN1bHRzOm5leHQnLCB7fSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IEtFWVMuRU5URVIgfHwga2V5ID09PSBLRVlTLlNQQUNFIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGtleSA9PT0gS0VZUy5ET1dOICYmIGV2dC5hbHRLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vcGVuKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VsZWN0Mi5wcm90b3R5cGUuX3N5bmNBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zZXQoJ2Rpc2FibGVkJywgdGhpcy4kZWxlbWVudC5wcm9wKCdkaXNhYmxlZCcpKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0KCdkaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzT3BlbigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2Rpc2FibGUnLCB7fSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdlbmFibGUnLCB7fSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VsZWN0Mi5wcm90b3R5cGUuX3N5bmNTdWJ0cmVlID0gZnVuY3Rpb24gKGV2dCwgbXV0YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYW55IG11dGF0aW9uIGV2ZW50cyByYWlzZWQgZm9yIGVsZW1lbnRzIHRoYXQgYXJlbid0IG9wdGlvbnMgb3JcbiAgICAgICAgICAgICAgICAvLyBvcHRncm91cHMuIFRoaXMgaGFuZGxlcyB0aGUgY2FzZSB3aGVuIHRoZSBzZWxlY3QgZWxlbWVudCBpcyBkZXN0cm95ZWRcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGV2dCAmJiBldnQudGFyZ2V0ICYmIChcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnRhcmdldC5ub2RlTmFtZSAhPT0gJ09QVElPTicgJiYgZXZ0LnRhcmdldC5ub2RlTmFtZSAhPT0gJ09QVEdST1VQJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFtdXRhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgbXV0YXRpb24gZXZlbnRzIGFyZW4ndCBzdXBwb3J0ZWQsIHRoZW4gd2UgY2FuIG9ubHkgYXNzdW1lIHRoYXQgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoYW5nZSBhZmZlY3RlZCB0aGUgc2VsZWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG11dGF0aW9ucy5hZGRlZE5vZGVzICYmIG11dGF0aW9ucy5hZGRlZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBtdXRhdGlvbnMuYWRkZWROb2Rlcy5sZW5ndGg7IG4rKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBtdXRhdGlvbnMuYWRkZWROb2Rlc1tuXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobXV0YXRpb25zLnJlbW92ZWROb2RlcyAmJiBtdXRhdGlvbnMucmVtb3ZlZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gT25seSByZS1wdWxsIHRoZSBkYXRhIGlmIHdlIHRoaW5rIHRoZXJlIGlzIGEgY2hhbmdlXG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhQWRhcHRlci5jdXJyZW50KGZ1bmN0aW9uIChjdXJyZW50RGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdzZWxlY3Rpb246dXBkYXRlJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN1cnJlbnREYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBPdmVycmlkZSB0aGUgdHJpZ2dlciBtZXRob2QgdG8gYXV0b21hdGljYWxseSB0cmlnZ2VyIHByZS1ldmVudHMgd2hlblxuICAgICAgICAgICAgICogdGhlcmUgYXJlIGV2ZW50cyB0aGF0IGNhbiBiZSBwcmV2ZW50ZWQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFNlbGVjdDIucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAobmFtZSwgYXJncykge1xuICAgICAgICAgICAgICAgIHZhciBhY3R1YWxUcmlnZ2VyID0gU2VsZWN0Mi5fX3N1cGVyX18udHJpZ2dlcjtcbiAgICAgICAgICAgICAgICB2YXIgcHJlVHJpZ2dlck1hcCA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ29wZW4nOiAnb3BlbmluZycsXG4gICAgICAgICAgICAgICAgICAgICdjbG9zZSc6ICdjbG9zaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgJ3NlbGVjdCc6ICdzZWxlY3RpbmcnLFxuICAgICAgICAgICAgICAgICAgICAndW5zZWxlY3QnOiAndW5zZWxlY3RpbmcnXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmIChhcmdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IHt9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChuYW1lIGluIHByZVRyaWdnZXJNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZVRyaWdnZXJOYW1lID0gcHJlVHJpZ2dlck1hcFtuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZVRyaWdnZXJBcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiBhcmdzXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsVHJpZ2dlci5jYWxsKHRoaXMsIHByZVRyaWdnZXJOYW1lLCBwcmVUcmlnZ2VyQXJncyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZVRyaWdnZXJBcmdzLnByZXZlbnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5wcmV2ZW50ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBhY3R1YWxUcmlnZ2VyLmNhbGwodGhpcywgbmFtZSwgYXJncyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTZWxlY3QyLnByb3RvdHlwZS50b2dnbGVEcm9wZG93biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmdldCgnZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlbGVjdDIucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigncXVlcnknLCB7fSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTZWxlY3QyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNPcGVuKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignY2xvc2UnLCB7fSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBTZWxlY3QyLnByb3RvdHlwZS5pc09wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGNvbnRhaW5lci5oYXNDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLW9wZW4nKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlbGVjdDIucHJvdG90eXBlLmhhc0ZvY3VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRjb250YWluZXIuaGFzQ2xhc3MoJ3NlbGVjdDItY29udGFpbmVyLS1mb2N1cycpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VsZWN0Mi5wcm90b3R5cGUuZm9jdXMgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gcmUtdHJpZ2dlciBmb2N1cyBldmVudHMgaWYgd2UgYXJlIGFscmVhZHkgZm9jdXNlZFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc0ZvY3VzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRhaW5lci5hZGRDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWZvY3VzJyk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdmb2N1cycsIHt9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlbGVjdDIucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ2RlYnVnJykgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgICAgICAgICdTZWxlY3QyOiBUaGUgYHNlbGVjdDIoXCJlbmFibGVcIilgIG1ldGhvZCBoYXMgYmVlbiBkZXByZWNhdGVkIGFuZCB3aWxsJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnIGJlIHJlbW92ZWQgaW4gbGF0ZXIgU2VsZWN0MiB2ZXJzaW9ucy4gVXNlICRlbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiKScgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJyBpbnN0ZWFkLidcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYXJncyA9PSBudWxsIHx8IGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBbdHJ1ZV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGRpc2FibGVkID0gIWFyZ3NbMF07XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LnByb3AoJ2Rpc2FibGVkJywgZGlzYWJsZWQpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VsZWN0Mi5wcm90b3R5cGUuZGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmdldCgnZGVidWcnKSAmJlxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLndhcm4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1NlbGVjdDI6IERhdGEgY2FuIG5vIGxvbmdlciBiZSBzZXQgdXNpbmcgYHNlbGVjdDIoXCJkYXRhXCIpYC4gWW91ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3Nob3VsZCBjb25zaWRlciBzZXR0aW5nIHRoZSB2YWx1ZSBpbnN0ZWFkIHVzaW5nIGAkZWxlbWVudC52YWwoKWAuJ1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFBZGFwdGVyLmN1cnJlbnQoZnVuY3Rpb24gKGN1cnJlbnREYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBjdXJyZW50RGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VsZWN0Mi5wcm90b3R5cGUudmFsID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmdldCgnZGVidWcnKSAmJiB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLndhcm4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1NlbGVjdDI6IFRoZSBgc2VsZWN0MihcInZhbFwiKWAgbWV0aG9kIGhhcyBiZWVuIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICcgcmVtb3ZlZCBpbiBsYXRlciBTZWxlY3QyIHZlcnNpb25zLiBVc2UgJGVsZW1lbnQudmFsKCkgaW5zdGVhZC4nXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MgPT0gbnVsbCB8fCBhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZWxlbWVudC52YWwoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbmV3VmFsID0gYXJnc1swXTtcblxuICAgICAgICAgICAgICAgIGlmICgkLmlzQXJyYXkobmV3VmFsKSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdWYWwgPSAkLm1hcChuZXdWYWwsIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmoudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudC52YWwobmV3VmFsKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNlbGVjdDIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuJGVsZW1lbnRbMF0uZGV0YWNoRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudFswXS5kZXRhY2hFdmVudCgnb25wcm9wZXJ0eWNoYW5nZScsIHRoaXMuX3N5bmNBKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fb2JzZXJ2ZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29ic2VydmVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuJGVsZW1lbnRbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50WzBdXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NQXR0ck1vZGlmaWVkJywgdGhpcy5fc3luY0EsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudFswXVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVJbnNlcnRlZCcsIHRoaXMuX3N5bmNTLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnRbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVFdmVudExpc3RlbmVyKCdET01Ob2RlUmVtb3ZlZCcsIHRoaXMuX3N5bmNTLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5fc3luY0EgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuX3N5bmNTID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQub2ZmKCcuc2VsZWN0MicpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuYXR0cigndGFiaW5kZXgnLCB0aGlzLiRlbGVtZW50LmRhdGEoJ29sZC10YWJpbmRleCcpKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ3NlbGVjdDItaGlkZGVuLWFjY2Vzc2libGUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LmF0dHIoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5yZW1vdmVEYXRhKCdzZWxlY3QyJyk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFBZGFwdGVyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wZG93bi5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRzLmRlc3Ryb3koKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YUFkYXB0ZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3Bkb3duID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdHMgPSBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgU2VsZWN0Mi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkY29udGFpbmVyID0gJChcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwic2VsZWN0MiBzZWxlY3QyLWNvbnRhaW5lclwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJzZWxlY3Rpb25cIj48L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImRyb3Bkb3duLXdyYXBwZXJcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgICAgICc8L3NwYW4+J1xuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAkY29udGFpbmVyLmF0dHIoJ2RpcicsIHRoaXMub3B0aW9ucy5nZXQoJ2RpcicpKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRhaW5lciA9ICRjb250YWluZXI7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoJ3NlbGVjdDItY29udGFpbmVyLS0nICsgdGhpcy5vcHRpb25zLmdldCgndGhlbWUnKSk7XG5cbiAgICAgICAgICAgICAgICAkY29udGFpbmVyLmRhdGEoJ2VsZW1lbnQnLCB0aGlzLiRlbGVtZW50KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAkY29udGFpbmVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFNlbGVjdDI7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFMyLmRlZmluZSgnc2VsZWN0Mi9jb21wYXQvdXRpbHMnLFtcbiAgICAgICAgICAgICdqcXVlcnknXG4gICAgICAgIF0sIGZ1bmN0aW9uICgkKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBzeW5jQ3NzQ2xhc3NlcyAoJGRlc3QsICRzcmMsIGFkYXB0ZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2xhc3NlcywgcmVwbGFjZW1lbnRzID0gW10sIGFkYXB0ZWQ7XG5cbiAgICAgICAgICAgICAgICBjbGFzc2VzID0gJC50cmltKCRkZXN0LmF0dHIoJ2NsYXNzJykpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNsYXNzZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NlcyA9ICcnICsgY2xhc3NlczsgLy8gZm9yIElFIHdoaWNoIHJldHVybnMgb2JqZWN0XG5cbiAgICAgICAgICAgICAgICAgICAgJChjbGFzc2VzLnNwbGl0KC9cXHMrLykpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSBhbGwgU2VsZWN0MiBjbGFzc2VzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleE9mKCdzZWxlY3QyLScpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRzLnB1c2godGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNsYXNzZXMgPSAkLnRyaW0oJHNyYy5hdHRyKCdjbGFzcycpKTtcblxuICAgICAgICAgICAgICAgIGlmIChjbGFzc2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzZXMgPSAnJyArIGNsYXNzZXM7IC8vIGZvciBJRSB3aGljaCByZXR1cm5zIG9iamVjdFxuXG4gICAgICAgICAgICAgICAgICAgICQoY2xhc3Nlcy5zcGxpdCgvXFxzKy8pKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgYWRhcHQgbm9uLVNlbGVjdDIgY2xhc3Nlc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXhPZignc2VsZWN0Mi0nKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkYXB0ZWQgPSBhZGFwdGVyKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkYXB0ZWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudHMucHVzaChhZGFwdGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRkZXN0LmF0dHIoJ2NsYXNzJywgcmVwbGFjZW1lbnRzLmpvaW4oJyAnKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3luY0Nzc0NsYXNzZXM6IHN5bmNDc3NDbGFzc2VzXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvY29tcGF0L2NvbnRhaW5lckNzcycsW1xuICAgICAgICAgICAgJ2pxdWVyeScsXG4gICAgICAgICAgICAnLi91dGlscydcbiAgICAgICAgXSwgZnVuY3Rpb24gKCQsIENvbXBhdFV0aWxzKSB7XG4gICAgICAgICAgICAvLyBOby1vcCBDU1MgYWRhcHRlciB0aGF0IGRpc2NhcmRzIGFsbCBjbGFzc2VzIGJ5IGRlZmF1bHRcbiAgICAgICAgICAgIGZ1bmN0aW9uIF9jb250YWluZXJBZGFwdGVyIChjbGF6eikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBDb250YWluZXJDU1MgKCkgeyB9XG5cbiAgICAgICAgICAgIENvbnRhaW5lckNTUy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGRlY29yYXRlZCkge1xuICAgICAgICAgICAgICAgIHZhciAkY29udGFpbmVyID0gZGVjb3JhdGVkLmNhbGwodGhpcyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyQ3NzQ2xhc3MgPSB0aGlzLm9wdGlvbnMuZ2V0KCdjb250YWluZXJDc3NDbGFzcycpIHx8ICcnO1xuXG4gICAgICAgICAgICAgICAgaWYgKCQuaXNGdW5jdGlvbihjb250YWluZXJDc3NDbGFzcykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyQ3NzQ2xhc3MgPSBjb250YWluZXJDc3NDbGFzcyh0aGlzLiRlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyQ3NzQWRhcHRlciA9IHRoaXMub3B0aW9ucy5nZXQoJ2FkYXB0Q29udGFpbmVyQ3NzQ2xhc3MnKTtcbiAgICAgICAgICAgICAgICBjb250YWluZXJDc3NBZGFwdGVyID0gY29udGFpbmVyQ3NzQWRhcHRlciB8fCBfY29udGFpbmVyQWRhcHRlcjtcblxuICAgICAgICAgICAgICAgIGlmIChjb250YWluZXJDc3NDbGFzcy5pbmRleE9mKCc6YWxsOicpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJDc3NDbGFzcyA9IGNvbnRhaW5lckNzc0NsYXNzLnJlcGxhY2UoJzphbGw6JywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBfY3NzQWRhcHRlciA9IGNvbnRhaW5lckNzc0FkYXB0ZXI7XG5cbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyQ3NzQWRhcHRlciA9IGZ1bmN0aW9uIChjbGF6eikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkYXB0ZWQgPSBfY3NzQWRhcHRlcihjbGF6eik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGFwdGVkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgdGhlIG9sZCBvbmUgYWxvbmcgd2l0aCB0aGUgYWRhcHRlZCBvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRhcHRlZCArICcgJyArIGNsYXp6O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xheno7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lckNzcyA9IHRoaXMub3B0aW9ucy5nZXQoJ2NvbnRhaW5lckNzcycpIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgaWYgKCQuaXNGdW5jdGlvbihjb250YWluZXJDc3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lckNzcyA9IGNvbnRhaW5lckNzcyh0aGlzLiRlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBDb21wYXRVdGlscy5zeW5jQ3NzQ2xhc3NlcygkY29udGFpbmVyLCB0aGlzLiRlbGVtZW50LCBjb250YWluZXJDc3NBZGFwdGVyKTtcblxuICAgICAgICAgICAgICAgICRjb250YWluZXIuY3NzKGNvbnRhaW5lckNzcyk7XG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lci5hZGRDbGFzcyhjb250YWluZXJDc3NDbGFzcyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJGNvbnRhaW5lcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBDb250YWluZXJDU1M7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFMyLmRlZmluZSgnc2VsZWN0Mi9jb21wYXQvZHJvcGRvd25Dc3MnLFtcbiAgICAgICAgICAgICdqcXVlcnknLFxuICAgICAgICAgICAgJy4vdXRpbHMnXG4gICAgICAgIF0sIGZ1bmN0aW9uICgkLCBDb21wYXRVdGlscykge1xuICAgICAgICAgICAgLy8gTm8tb3AgQ1NTIGFkYXB0ZXIgdGhhdCBkaXNjYXJkcyBhbGwgY2xhc3NlcyBieSBkZWZhdWx0XG4gICAgICAgICAgICBmdW5jdGlvbiBfZHJvcGRvd25BZGFwdGVyIChjbGF6eikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBEcm9wZG93bkNTUyAoKSB7IH1cblxuICAgICAgICAgICAgRHJvcGRvd25DU1MucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGRyb3Bkb3duID0gZGVjb3JhdGVkLmNhbGwodGhpcyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgZHJvcGRvd25Dc3NDbGFzcyA9IHRoaXMub3B0aW9ucy5nZXQoJ2Ryb3Bkb3duQ3NzQ2xhc3MnKSB8fCAnJztcblxuICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24oZHJvcGRvd25Dc3NDbGFzcykpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25Dc3NDbGFzcyA9IGRyb3Bkb3duQ3NzQ2xhc3ModGhpcy4kZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGRyb3Bkb3duQ3NzQWRhcHRlciA9IHRoaXMub3B0aW9ucy5nZXQoJ2FkYXB0RHJvcGRvd25Dc3NDbGFzcycpO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duQ3NzQWRhcHRlciA9IGRyb3Bkb3duQ3NzQWRhcHRlciB8fCBfZHJvcGRvd25BZGFwdGVyO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRyb3Bkb3duQ3NzQ2xhc3MuaW5kZXhPZignOmFsbDonKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25Dc3NDbGFzcyA9IGRyb3Bkb3duQ3NzQ2xhc3MucmVwbGFjZSgnOmFsbDonLCAnJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIF9jc3NBZGFwdGVyID0gZHJvcGRvd25Dc3NBZGFwdGVyO1xuXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duQ3NzQWRhcHRlciA9IGZ1bmN0aW9uIChjbGF6eikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkYXB0ZWQgPSBfY3NzQWRhcHRlcihjbGF6eik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGFwdGVkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgdGhlIG9sZCBvbmUgYWxvbmcgd2l0aCB0aGUgYWRhcHRlZCBvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRhcHRlZCArICcgJyArIGNsYXp6O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xheno7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGRyb3Bkb3duQ3NzID0gdGhpcy5vcHRpb25zLmdldCgnZHJvcGRvd25Dc3MnKSB8fCB7fTtcblxuICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24oZHJvcGRvd25Dc3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duQ3NzID0gZHJvcGRvd25Dc3ModGhpcy4kZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgQ29tcGF0VXRpbHMuc3luY0Nzc0NsYXNzZXMoJGRyb3Bkb3duLCB0aGlzLiRlbGVtZW50LCBkcm9wZG93bkNzc0FkYXB0ZXIpO1xuXG4gICAgICAgICAgICAgICAgJGRyb3Bkb3duLmNzcyhkcm9wZG93bkNzcyk7XG4gICAgICAgICAgICAgICAgJGRyb3Bkb3duLmFkZENsYXNzKGRyb3Bkb3duQ3NzQ2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICRkcm9wZG93bjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBEcm9wZG93bkNTUztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2NvbXBhdC9pbml0U2VsZWN0aW9uJyxbXG4gICAgICAgICAgICAnanF1ZXJ5J1xuICAgICAgICBdLCBmdW5jdGlvbiAoJCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gSW5pdFNlbGVjdGlvbiAoZGVjb3JhdGVkLCAkZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmdldCgnZGVidWcnKSAmJiB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLndhcm4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1NlbGVjdDI6IFRoZSBgaW5pdFNlbGVjdGlvbmAgb3B0aW9uIGhhcyBiZWVuIGRlcHJlY2F0ZWQgaW4gZmF2b3InICtcbiAgICAgICAgICAgICAgICAgICAgICAgICcgb2YgYSBjdXN0b20gZGF0YSBhZGFwdGVyIHRoYXQgb3ZlcnJpZGVzIHRoZSBgY3VycmVudGAgbWV0aG9kLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdUaGlzIG1ldGhvZCBpcyBub3cgY2FsbGVkIG11bHRpcGxlIHRpbWVzIGluc3RlYWQgb2YgYSBzaW5nbGUgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAndGltZSB3aGVuIHRoZSBpbnN0YW5jZSBpcyBpbml0aWFsaXplZC4gU3VwcG9ydCB3aWxsIGJlIHJlbW92ZWQgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnZm9yIHRoZSBgaW5pdFNlbGVjdGlvbmAgb3B0aW9uIGluIGZ1dHVyZSB2ZXJzaW9ucyBvZiBTZWxlY3QyJ1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdFNlbGVjdGlvbiA9IG9wdGlvbnMuZ2V0KCdpbml0U2VsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5faXNJbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBJbml0U2VsZWN0aW9uLnByb3RvdHlwZS5jdXJyZW50ID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBjYWxsYmFjayk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdFNlbGVjdGlvbi5jYWxsKG51bGwsIHRoaXMuJGVsZW1lbnQsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2lzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghJC5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gW2RhdGFdO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gSW5pdFNlbGVjdGlvbjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2NvbXBhdC9pbnB1dERhdGEnLFtcbiAgICAgICAgICAgICdqcXVlcnknXG4gICAgICAgIF0sIGZ1bmN0aW9uICgkKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBJbnB1dERhdGEgKGRlY29yYXRlZCwgJGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50RGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlU2VwYXJhdG9yID0gb3B0aW9ucy5nZXQoJ3ZhbHVlU2VwYXJhdG9yJykgfHwgJywnO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRlbGVtZW50LnByb3AoJ3R5cGUnKSA9PT0gJ2hpZGRlbicpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZ2V0KCdkZWJ1ZycpICYmIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NlbGVjdDI6IFVzaW5nIGEgaGlkZGVuIGlucHV0IHdpdGggU2VsZWN0MiBpcyBubyBsb25nZXIgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N1cHBvcnRlZCBhbmQgbWF5IHN0b3Agd29ya2luZyBpbiB0aGUgZnV0dXJlLiBJdCBpcyByZWNvbW1lbmRlZCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndG8gdXNlIGEgYDxzZWxlY3Q+YCBlbGVtZW50IGluc3RlYWQuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlbGVtZW50LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgSW5wdXREYXRhLnByb3RvdHlwZS5jdXJyZW50ID0gZnVuY3Rpb24gKF8sIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWQgKGRhdGEsIHNlbGVjdGVkSWRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnNlbGVjdGVkIHx8ICQuaW5BcnJheShkYXRhLmlkLCBzZWxlY3RlZElkcykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQucHVzaC5hcHBseShzZWxlY3RlZCwgZ2V0U2VsZWN0ZWQoZGF0YS5jaGlsZHJlbiwgc2VsZWN0ZWRJZHMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgdGhpcy5fY3VycmVudERhdGEubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLl9jdXJyZW50RGF0YVtkXTtcblxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZC5wdXNoLmFwcGx5KFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRTZWxlY3RlZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQudmFsKCkuc3BsaXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlU2VwYXJhdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHNlbGVjdGVkKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIElucHV0RGF0YS5wcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24gKF8sIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5nZXQoJ211bHRpcGxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50KGZ1bmN0aW9uIChhbGxEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLm1hcChhbGxEYXRhLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LnZhbChkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLiRlbGVtZW50LnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSB0aGlzLl92YWx1ZVNlcGFyYXRvciArIGRhdGEuaWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudC52YWwodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIElucHV0RGF0YS5wcm90b3R5cGUudW5zZWxlY3QgPSBmdW5jdGlvbiAoXywgZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgICAgIGRhdGEuc2VsZWN0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudChmdW5jdGlvbiAoYWxsRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVzID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBhbGxEYXRhLmxlbmd0aDsgZCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGFsbERhdGFbZF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmlkID09IGl0ZW0uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2goaXRlbS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzZWxmLiRlbGVtZW50LnZhbCh2YWx1ZXMuam9pbihzZWxmLl92YWx1ZVNlcGFyYXRvcikpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRlbGVtZW50LnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgSW5wdXREYXRhLnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChfLCBwYXJhbXMsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgdGhpcy5fY3VycmVudERhdGEubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLl9jdXJyZW50RGF0YVtkXTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IHRoaXMubWF0Y2hlcyhwYXJhbXMsIGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gobWF0Y2hlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IHJlc3VsdHNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIElucHV0RGF0YS5wcm90b3R5cGUuYWRkT3B0aW9ucyA9IGZ1bmN0aW9uIChfLCAkb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gJC5tYXAoJG9wdGlvbnMsIGZ1bmN0aW9uICgkb3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkLmRhdGEoJG9wdGlvblswXSwgJ2RhdGEnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnREYXRhLnB1c2guYXBwbHkodGhpcy5fY3VycmVudERhdGEsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIElucHV0RGF0YTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2NvbXBhdC9tYXRjaGVyJyxbXG4gICAgICAgICAgICAnanF1ZXJ5J1xuICAgICAgICBdLCBmdW5jdGlvbiAoJCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gb2xkTWF0Y2hlciAobWF0Y2hlcikge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdyYXBwZWRNYXRjaGVyIChwYXJhbXMsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gJC5leHRlbmQodHJ1ZSwge30sIGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbXMudGVybSA9PSBudWxsIHx8ICQudHJpbShwYXJhbXMudGVybSkgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IGRhdGEuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgYyA+PSAwOyBjLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBkYXRhLmNoaWxkcmVuW2NdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNoaWxkIG9iamVjdCBtYXRjaGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG9sZCBtYXRjaGVyIHJldHVybmVkIGEgYm9vbGVhbiB0cnVlIG9yIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvZXNNYXRjaCA9IG1hdGNoZXIocGFyYW1zLnRlcm0sIGNoaWxkLnRleHQsIGNoaWxkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjaGlsZCBkaWRuJ3QgbWF0Y2gsIHBvcCBpdCBvZmZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRvZXNNYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaC5jaGlsZHJlbi5zcGxpY2UoYywgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2guY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVyKHBhcmFtcy50ZXJtLCBkYXRhLnRleHQsIGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gd3JhcHBlZE1hdGNoZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvbGRNYXRjaGVyO1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvY29tcGF0L3F1ZXJ5JyxbXG5cbiAgICAgICAgXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gUXVlcnkgKGRlY29yYXRlZCwgJGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5nZXQoJ2RlYnVnJykgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgICAgICAgICdTZWxlY3QyOiBUaGUgYHF1ZXJ5YCBvcHRpb24gaGFzIGJlZW4gZGVwcmVjYXRlZCBpbiBmYXZvciBvZiBhICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2N1c3RvbSBkYXRhIGFkYXB0ZXIgdGhhdCBvdmVycmlkZXMgdGhlIGBxdWVyeWAgbWV0aG9kLiBTdXBwb3J0ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpbGwgYmUgcmVtb3ZlZCBmb3IgdGhlIGBxdWVyeWAgb3B0aW9uIGluIGZ1dHVyZSB2ZXJzaW9ucyBvZiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdTZWxlY3QyLidcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFF1ZXJ5LnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChfLCBwYXJhbXMsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cbiAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSB0aGlzLm9wdGlvbnMuZ2V0KCdxdWVyeScpO1xuXG4gICAgICAgICAgICAgICAgcXVlcnkuY2FsbChudWxsLCBwYXJhbXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFF1ZXJ5O1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24vYXR0YWNoQ29udGFpbmVyJyxbXG5cbiAgICAgICAgXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gQXR0YWNoQ29udGFpbmVyIChkZWNvcmF0ZWQsICRlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBBdHRhY2hDb250YWluZXIucHJvdG90eXBlLnBvc2l0aW9uID1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZGVjb3JhdGVkLCAkZHJvcGRvd24sICRjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRkcm9wZG93bkNvbnRhaW5lciA9ICRjb250YWluZXIuZmluZCgnLmRyb3Bkb3duLXdyYXBwZXInKTtcbiAgICAgICAgICAgICAgICAgICAgJGRyb3Bkb3duQ29udGFpbmVyLmFwcGVuZCgkZHJvcGRvd24pO1xuXG4gICAgICAgICAgICAgICAgICAgICRkcm9wZG93bi5hZGRDbGFzcygnc2VsZWN0Mi1kcm9wZG93bi0tYmVsb3cnKTtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lci5hZGRDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWJlbG93Jyk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIEF0dGFjaENvbnRhaW5lcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgUzIuZGVmaW5lKCdzZWxlY3QyL2Ryb3Bkb3duL3N0b3BQcm9wYWdhdGlvbicsW1xuXG4gICAgICAgIF0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIFN0b3BQcm9wYWdhdGlvbiAoKSB7IH1cblxuICAgICAgICAgICAgU3RvcFByb3BhZ2F0aW9uLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcblxuICAgICAgICAgICAgICAgIHZhciBzdG9wcGVkRXZlbnRzID0gW1xuICAgICAgICAgICAgICAgICAgICAnYmx1cicsXG4gICAgICAgICAgICAgICAgICAgICdjaGFuZ2UnLFxuICAgICAgICAgICAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAgICAgICAgICAgICAnZGJsY2xpY2snLFxuICAgICAgICAgICAgICAgICAgICAnZm9jdXMnLFxuICAgICAgICAgICAgICAgICAgICAnZm9jdXNpbicsXG4gICAgICAgICAgICAgICAgICAgICdmb2N1c291dCcsXG4gICAgICAgICAgICAgICAgICAgICdpbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICdrZXlkb3duJyxcbiAgICAgICAgICAgICAgICAgICAgJ2tleXVwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2tleXByZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgJ21vdXNlZG93bicsXG4gICAgICAgICAgICAgICAgICAgICdtb3VzZWVudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgJ21vdXNlbGVhdmUnLFxuICAgICAgICAgICAgICAgICAgICAnbW91c2Vtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgJ21vdXNlb3ZlcicsXG4gICAgICAgICAgICAgICAgICAgICdtb3VzZXVwJyxcbiAgICAgICAgICAgICAgICAgICAgJ3NlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgICd0b3VjaGVuZCcsXG4gICAgICAgICAgICAgICAgICAgICd0b3VjaHN0YXJ0J1xuICAgICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRkcm9wZG93bi5vbihzdG9wcGVkRXZlbnRzLmpvaW4oJyAnKSwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gU3RvcFByb3BhZ2F0aW9uO1xuICAgICAgICB9KTtcblxuICAgICAgICBTMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL3N0b3BQcm9wYWdhdGlvbicsW1xuXG4gICAgICAgIF0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIFN0b3BQcm9wYWdhdGlvbiAoKSB7IH1cblxuICAgICAgICAgICAgU3RvcFByb3BhZ2F0aW9uLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcblxuICAgICAgICAgICAgICAgIHZhciBzdG9wcGVkRXZlbnRzID0gW1xuICAgICAgICAgICAgICAgICAgICAnYmx1cicsXG4gICAgICAgICAgICAgICAgICAgICdjaGFuZ2UnLFxuICAgICAgICAgICAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAgICAgICAgICAgICAnZGJsY2xpY2snLFxuICAgICAgICAgICAgICAgICAgICAnZm9jdXMnLFxuICAgICAgICAgICAgICAgICAgICAnZm9jdXNpbicsXG4gICAgICAgICAgICAgICAgICAgICdmb2N1c291dCcsXG4gICAgICAgICAgICAgICAgICAgICdpbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICdrZXlkb3duJyxcbiAgICAgICAgICAgICAgICAgICAgJ2tleXVwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2tleXByZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgJ21vdXNlZG93bicsXG4gICAgICAgICAgICAgICAgICAgICdtb3VzZWVudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgJ21vdXNlbGVhdmUnLFxuICAgICAgICAgICAgICAgICAgICAnbW91c2Vtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgJ21vdXNlb3ZlcicsXG4gICAgICAgICAgICAgICAgICAgICdtb3VzZXVwJyxcbiAgICAgICAgICAgICAgICAgICAgJ3NlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgICd0b3VjaGVuZCcsXG4gICAgICAgICAgICAgICAgICAgICd0b3VjaHN0YXJ0J1xuICAgICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb24ub24oc3RvcHBlZEV2ZW50cy5qb2luKCcgJyksIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFN0b3BQcm9wYWdhdGlvbjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyohXG4gKiBqUXVlcnkgTW91c2V3aGVlbCAzLjEuMTNcbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKi9cblxuICAgICAgICAoZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICAgICAgICAgIGlmICggdHlwZW9mIFMyLmRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBTMi5kZWZpbmUuYW1kICkge1xuICAgICAgICAgICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgICAgICAgICBTMi5kZWZpbmUoJ2pxdWVyeS1tb3VzZXdoZWVsJyxbJ2pxdWVyeSddLCBmYWN0b3J5KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgLy8gTm9kZS9Db21tb25KUyBzdHlsZSBmb3IgQnJvd3NlcmlmeVxuICAgICAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgICAgICAgICAgICAgZmFjdG9yeShqUXVlcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KGZ1bmN0aW9uICgkKSB7XG5cbiAgICAgICAgICAgIHZhciB0b0ZpeCAgPSBbJ3doZWVsJywgJ21vdXNld2hlZWwnLCAnRE9NTW91c2VTY3JvbGwnLCAnTW96TW91c2VQaXhlbFNjcm9sbCddLFxuICAgICAgICAgICAgICAgIHRvQmluZCA9ICggJ29ud2hlZWwnIGluIGRvY3VtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+PSA5ICkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgIFsnd2hlZWwnXSA6IFsnbW91c2V3aGVlbCcsICdEb21Nb3VzZVNjcm9sbCcsICdNb3pNb3VzZVBpeGVsU2Nyb2xsJ10sXG4gICAgICAgICAgICAgICAgc2xpY2UgID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLFxuICAgICAgICAgICAgICAgIG51bGxMb3dlc3REZWx0YVRpbWVvdXQsIGxvd2VzdERlbHRhO1xuXG4gICAgICAgICAgICBpZiAoICQuZXZlbnQuZml4SG9va3MgKSB7XG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSB0b0ZpeC5sZW5ndGg7IGk7ICkge1xuICAgICAgICAgICAgICAgICAgICAkLmV2ZW50LmZpeEhvb2tzWyB0b0ZpeFstLWldIF0gPSAkLmV2ZW50Lm1vdXNlSG9va3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc3BlY2lhbCA9ICQuZXZlbnQuc3BlY2lhbC5tb3VzZXdoZWVsID0ge1xuICAgICAgICAgICAgICAgIHZlcnNpb246ICczLjEuMTInLFxuXG4gICAgICAgICAgICAgICAgc2V0dXA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gdG9CaW5kLmxlbmd0aDsgaTsgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCB0b0JpbmRbLS1pXSwgaGFuZGxlciwgZmFsc2UgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25tb3VzZXdoZWVsID0gaGFuZGxlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSB0aGUgbGluZSBoZWlnaHQgYW5kIHBhZ2UgaGVpZ2h0IGZvciB0aGlzIHBhcnRpY3VsYXIgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAkLmRhdGEodGhpcywgJ21vdXNld2hlZWwtbGluZS1oZWlnaHQnLCBzcGVjaWFsLmdldExpbmVIZWlnaHQodGhpcykpO1xuICAgICAgICAgICAgICAgICAgICAkLmRhdGEodGhpcywgJ21vdXNld2hlZWwtcGFnZS1oZWlnaHQnLCBzcGVjaWFsLmdldFBhZ2VIZWlnaHQodGhpcykpO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICB0ZWFyZG93bjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSB0b0JpbmQubGVuZ3RoOyBpOyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHRvQmluZFstLWldLCBoYW5kbGVyLCBmYWxzZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbm1vdXNld2hlZWwgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBkYXRhIHdlIGFkZGVkIHRvIHRoZSBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICQucmVtb3ZlRGF0YSh0aGlzLCAnbW91c2V3aGVlbC1saW5lLWhlaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICAkLnJlbW92ZURhdGEodGhpcywgJ21vdXNld2hlZWwtcGFnZS1oZWlnaHQnKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgZ2V0TGluZUhlaWdodDogZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGVsZW0gPSAkKGVsZW0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgJHBhcmVudCA9ICRlbGVtWydvZmZzZXRQYXJlbnQnIGluICQuZm4gPyAnb2Zmc2V0UGFyZW50JyA6ICdwYXJlbnQnXSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISRwYXJlbnQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcGFyZW50ID0gJCgnYm9keScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludCgkcGFyZW50LmNzcygnZm9udFNpemUnKSwgMTApIHx8IHBhcnNlSW50KCRlbGVtLmNzcygnZm9udFNpemUnKSwgMTApIHx8IDE2O1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBnZXRQYWdlSGVpZ2h0OiBmdW5jdGlvbihlbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKGVsZW0pLmhlaWdodCgpO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgICAgICBhZGp1c3RPbGREZWx0YXM6IHRydWUsIC8vIHNlZSBzaG91bGRBZGp1c3RPbGREZWx0YXMoKSBiZWxvd1xuICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVPZmZzZXQ6IHRydWUgIC8vIGNhbGxzIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmb3IgZWFjaCBldmVudFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICBtb3VzZXdoZWVsOiBmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4gPyB0aGlzLmJpbmQoJ21vdXNld2hlZWwnLCBmbikgOiB0aGlzLnRyaWdnZXIoJ21vdXNld2hlZWwnKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgdW5tb3VzZXdoZWVsOiBmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51bmJpbmQoJ21vdXNld2hlZWwnLCBmbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlcihldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciBvcmdFdmVudCAgID0gZXZlbnQgfHwgd2luZG93LmV2ZW50LFxuICAgICAgICAgICAgICAgICAgICBhcmdzICAgICAgID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLFxuICAgICAgICAgICAgICAgICAgICBkZWx0YSAgICAgID0gMCxcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFYICAgICA9IDAsXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWSAgICAgPSAwLFxuICAgICAgICAgICAgICAgICAgICBhYnNEZWx0YSAgID0gMCxcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WCAgICA9IDAsXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFkgICAgPSAwO1xuICAgICAgICAgICAgICAgIGV2ZW50ID0gJC5ldmVudC5maXgob3JnRXZlbnQpO1xuICAgICAgICAgICAgICAgIGV2ZW50LnR5cGUgPSAnbW91c2V3aGVlbCc7XG5cbiAgICAgICAgICAgICAgICAvLyBPbGQgc2Nob29sIHNjcm9sbHdoZWVsIGRlbHRhXG4gICAgICAgICAgICAgICAgaWYgKCAnZGV0YWlsJyAgICAgIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVkgPSBvcmdFdmVudC5kZXRhaWwgKiAtMTsgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCAnd2hlZWxEZWx0YScgIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVkgPSBvcmdFdmVudC53aGVlbERlbHRhOyAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCAnd2hlZWxEZWx0YVknIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVkgPSBvcmdFdmVudC53aGVlbERlbHRhWTsgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCAnd2hlZWxEZWx0YVgnIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVggPSBvcmdFdmVudC53aGVlbERlbHRhWCAqIC0xOyB9XG5cbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IDwgMTcgaG9yaXpvbnRhbCBzY3JvbGxpbmcgcmVsYXRlZCB0byBET01Nb3VzZVNjcm9sbCBldmVudFxuICAgICAgICAgICAgICAgIGlmICggJ2F4aXMnIGluIG9yZ0V2ZW50ICYmIG9yZ0V2ZW50LmF4aXMgPT09IG9yZ0V2ZW50LkhPUklaT05UQUxfQVhJUyApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFYID0gZGVsdGFZICogLTE7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU2V0IGRlbHRhIHRvIGJlIGRlbHRhWSBvciBkZWx0YVggaWYgZGVsdGFZIGlzIDAgZm9yIGJhY2t3YXJkcyBjb21wYXRhYmlsaXRpeVxuICAgICAgICAgICAgICAgIGRlbHRhID0gZGVsdGFZID09PSAwID8gZGVsdGFYIDogZGVsdGFZO1xuXG4gICAgICAgICAgICAgICAgLy8gTmV3IHNjaG9vbCB3aGVlbCBkZWx0YSAod2hlZWwgZXZlbnQpXG4gICAgICAgICAgICAgICAgaWYgKCAnZGVsdGFZJyBpbiBvcmdFdmVudCApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFZID0gb3JnRXZlbnQuZGVsdGFZICogLTE7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhICA9IGRlbHRhWTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCAnZGVsdGFYJyBpbiBvcmdFdmVudCApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFYID0gb3JnRXZlbnQuZGVsdGFYO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGRlbHRhWSA9PT0gMCApIHsgZGVsdGEgID0gZGVsdGFYICogLTE7IH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBObyBjaGFuZ2UgYWN0dWFsbHkgaGFwcGVuZWQsIG5vIHJlYXNvbiB0byBnbyBhbnkgZnVydGhlclxuICAgICAgICAgICAgICAgIGlmICggZGVsdGFZID09PSAwICYmIGRlbHRhWCA9PT0gMCApIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIGNvbnZlcnQgbGluZXMgYW5kIHBhZ2VzIHRvIHBpeGVscyBpZiB3ZSBhcmVuJ3QgYWxyZWFkeSBpbiBwaXhlbHNcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSBhcmUgdGhyZWUgZGVsdGEgbW9kZXM6XG4gICAgICAgICAgICAgICAgLy8gICAqIGRlbHRhTW9kZSAwIGlzIGJ5IHBpeGVscywgbm90aGluZyB0byBkb1xuICAgICAgICAgICAgICAgIC8vICAgKiBkZWx0YU1vZGUgMSBpcyBieSBsaW5lc1xuICAgICAgICAgICAgICAgIC8vICAgKiBkZWx0YU1vZGUgMiBpcyBieSBwYWdlc1xuICAgICAgICAgICAgICAgIGlmICggb3JnRXZlbnQuZGVsdGFNb2RlID09PSAxICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGluZUhlaWdodCA9ICQuZGF0YSh0aGlzLCAnbW91c2V3aGVlbC1saW5lLWhlaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICBkZWx0YSAgKj0gbGluZUhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFZICo9IGxpbmVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWCAqPSBsaW5lSGVpZ2h0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG9yZ0V2ZW50LmRlbHRhTW9kZSA9PT0gMiApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhZ2VIZWlnaHQgPSAkLmRhdGEodGhpcywgJ21vdXNld2hlZWwtcGFnZS1oZWlnaHQnKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgICo9IHBhZ2VIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWSAqPSBwYWdlSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBkZWx0YVggKj0gcGFnZUhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTdG9yZSBsb3dlc3QgYWJzb2x1dGUgZGVsdGEgdG8gbm9ybWFsaXplIHRoZSBkZWx0YSB2YWx1ZXNcbiAgICAgICAgICAgICAgICBhYnNEZWx0YSA9IE1hdGgubWF4KCBNYXRoLmFicyhkZWx0YVkpLCBNYXRoLmFicyhkZWx0YVgpICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoICFsb3dlc3REZWx0YSB8fCBhYnNEZWx0YSA8IGxvd2VzdERlbHRhICkge1xuICAgICAgICAgICAgICAgICAgICBsb3dlc3REZWx0YSA9IGFic0RlbHRhO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkanVzdCBvbGRlciBkZWx0YXMgaWYgbmVjZXNzYXJ5XG4gICAgICAgICAgICAgICAgICAgIGlmICggc2hvdWxkQWRqdXN0T2xkRGVsdGFzKG9yZ0V2ZW50LCBhYnNEZWx0YSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlc3REZWx0YSAvPSA0MDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEFkanVzdCBvbGRlciBkZWx0YXMgaWYgbmVjZXNzYXJ5XG4gICAgICAgICAgICAgICAgaWYgKCBzaG91bGRBZGp1c3RPbGREZWx0YXMob3JnRXZlbnQsIGFic0RlbHRhKSApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGl2aWRlIGFsbCB0aGUgdGhpbmdzIGJ5IDQwIVxuICAgICAgICAgICAgICAgICAgICBkZWx0YSAgLz0gNDA7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWCAvPSA0MDtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFZIC89IDQwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEdldCBhIHdob2xlLCBub3JtYWxpemVkIHZhbHVlIGZvciB0aGUgZGVsdGFzXG4gICAgICAgICAgICAgICAgZGVsdGEgID0gTWF0aFsgZGVsdGEgID49IDEgPyAnZmxvb3InIDogJ2NlaWwnIF0oZGVsdGEgIC8gbG93ZXN0RGVsdGEpO1xuICAgICAgICAgICAgICAgIGRlbHRhWCA9IE1hdGhbIGRlbHRhWCA+PSAxID8gJ2Zsb29yJyA6ICdjZWlsJyBdKGRlbHRhWCAvIGxvd2VzdERlbHRhKTtcbiAgICAgICAgICAgICAgICBkZWx0YVkgPSBNYXRoWyBkZWx0YVkgPj0gMSA/ICdmbG9vcicgOiAnY2VpbCcgXShkZWx0YVkgLyBsb3dlc3REZWx0YSk7XG5cbiAgICAgICAgICAgICAgICAvLyBOb3JtYWxpc2Ugb2Zmc2V0WCBhbmQgb2Zmc2V0WSBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgaWYgKCBzcGVjaWFsLnNldHRpbmdzLm5vcm1hbGl6ZU9mZnNldCAmJiB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvdW5kaW5nUmVjdCA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFggPSBldmVudC5jbGllbnRYIC0gYm91bmRpbmdSZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFkgPSBldmVudC5jbGllbnRZIC0gYm91bmRpbmdSZWN0LnRvcDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgaW5mb3JtYXRpb24gdG8gdGhlIGV2ZW50IG9iamVjdFxuICAgICAgICAgICAgICAgIGV2ZW50LmRlbHRhWCA9IGRlbHRhWDtcbiAgICAgICAgICAgICAgICBldmVudC5kZWx0YVkgPSBkZWx0YVk7XG4gICAgICAgICAgICAgICAgZXZlbnQuZGVsdGFGYWN0b3IgPSBsb3dlc3REZWx0YTtcbiAgICAgICAgICAgICAgICBldmVudC5vZmZzZXRYID0gb2Zmc2V0WDtcbiAgICAgICAgICAgICAgICBldmVudC5vZmZzZXRZID0gb2Zmc2V0WTtcbiAgICAgICAgICAgICAgICAvLyBHbyBhaGVhZCBhbmQgc2V0IGRlbHRhTW9kZSB0byAwIHNpbmNlIHdlIGNvbnZlcnRlZCB0byBwaXhlbHNcbiAgICAgICAgICAgICAgICAvLyBBbHRob3VnaCB0aGlzIGlzIGEgbGl0dGxlIG9kZCBzaW5jZSB3ZSBvdmVyd3JpdGUgdGhlIGRlbHRhWC9ZXG4gICAgICAgICAgICAgICAgLy8gcHJvcGVydGllcyB3aXRoIG5vcm1hbGl6ZWQgZGVsdGFzLlxuICAgICAgICAgICAgICAgIGV2ZW50LmRlbHRhTW9kZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgZXZlbnQgYW5kIGRlbHRhIHRvIHRoZSBmcm9udCBvZiB0aGUgYXJndW1lbnRzXG4gICAgICAgICAgICAgICAgYXJncy51bnNoaWZ0KGV2ZW50LCBkZWx0YSwgZGVsdGFYLCBkZWx0YVkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXJvdXQgbG93ZXN0RGVsdGEgYWZ0ZXIgc29tZXRpbWUgdG8gYmV0dGVyXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIG11bHRpcGxlIGRldmljZSB0eXBlcyB0aGF0IGdpdmUgZGlmZmVyZW50XG4gICAgICAgICAgICAgICAgLy8gYSBkaWZmZXJlbnQgbG93ZXN0RGVsdGFcbiAgICAgICAgICAgICAgICAvLyBFeDogdHJhY2twYWQgPSAzIGFuZCBtb3VzZSB3aGVlbCA9IDEyMFxuICAgICAgICAgICAgICAgIGlmIChudWxsTG93ZXN0RGVsdGFUaW1lb3V0KSB7IGNsZWFyVGltZW91dChudWxsTG93ZXN0RGVsdGFUaW1lb3V0KTsgfVxuICAgICAgICAgICAgICAgIG51bGxMb3dlc3REZWx0YVRpbWVvdXQgPSBzZXRUaW1lb3V0KG51bGxMb3dlc3REZWx0YSwgMjAwKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoJC5ldmVudC5kaXNwYXRjaCB8fCAkLmV2ZW50LmhhbmRsZSkuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG51bGxMb3dlc3REZWx0YSgpIHtcbiAgICAgICAgICAgICAgICBsb3dlc3REZWx0YSA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNob3VsZEFkanVzdE9sZERlbHRhcyhvcmdFdmVudCwgYWJzRGVsdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIG9sZGVyIGV2ZW50IGFuZCB0aGUgZGVsdGEgaXMgZGl2aXNhYmxlIGJ5IDEyMCxcbiAgICAgICAgICAgICAgICAvLyB0aGVuIHdlIGFyZSBhc3N1bWluZyB0aGF0IHRoZSBicm93c2VyIGlzIHRyZWF0aW5nIHRoaXMgYXMgYW5cbiAgICAgICAgICAgICAgICAvLyBvbGRlciBtb3VzZSB3aGVlbCBldmVudCBhbmQgdGhhdCB3ZSBzaG91bGQgZGl2aWRlIHRoZSBkZWx0YXNcbiAgICAgICAgICAgICAgICAvLyBieSA0MCB0byB0cnkgYW5kIGdldCBhIG1vcmUgdXNhYmxlIGRlbHRhRmFjdG9yLlxuICAgICAgICAgICAgICAgIC8vIFNpZGUgbm90ZSwgdGhpcyBhY3R1YWxseSBpbXBhY3RzIHRoZSByZXBvcnRlZCBzY3JvbGwgZGlzdGFuY2VcbiAgICAgICAgICAgICAgICAvLyBpbiBvbGRlciBicm93c2VycyBhbmQgY2FuIGNhdXNlIHNjcm9sbGluZyB0byBiZSBzbG93ZXIgdGhhbiBuYXRpdmUuXG4gICAgICAgICAgICAgICAgLy8gVHVybiB0aGlzIG9mZiBieSBzZXR0aW5nICQuZXZlbnQuc3BlY2lhbC5tb3VzZXdoZWVsLnNldHRpbmdzLmFkanVzdE9sZERlbHRhcyB0byBmYWxzZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gc3BlY2lhbC5zZXR0aW5ncy5hZGp1c3RPbGREZWx0YXMgJiYgb3JnRXZlbnQudHlwZSA9PT0gJ21vdXNld2hlZWwnICYmIGFic0RlbHRhICUgMTIwID09PSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pKTtcblxuICAgICAgICBTMi5kZWZpbmUoJ2pxdWVyeS5zZWxlY3QyJyxbXG4gICAgICAgICAgICAnanF1ZXJ5JyxcbiAgICAgICAgICAgICdqcXVlcnktbW91c2V3aGVlbCcsXG5cbiAgICAgICAgICAgICcuL3NlbGVjdDIvY29yZScsXG4gICAgICAgICAgICAnLi9zZWxlY3QyL2RlZmF1bHRzJ1xuICAgICAgICBdLCBmdW5jdGlvbiAoJCwgXywgU2VsZWN0MiwgRGVmYXVsdHMpIHtcbiAgICAgICAgICAgIGlmICgkLmZuLnNlbGVjdDIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIEFsbCBtZXRob2RzIHRoYXQgc2hvdWxkIHJldHVybiB0aGUgZWxlbWVudFxuICAgICAgICAgICAgICAgIHZhciB0aGlzTWV0aG9kcyA9IFsnb3BlbicsICdjbG9zZScsICdkZXN0cm95J107XG5cbiAgICAgICAgICAgICAgICAkLmZuLnNlbGVjdDIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZU9wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgU2VsZWN0MigkKHRoaXMpLCBpbnN0YW5jZU9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSAkKHRoaXMpLmRhdGEoJ3NlbGVjdDInKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSA9PSBudWxsICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdUaGUgc2VsZWN0MihcXCcnICsgb3B0aW9ucyArICdcXCcpIG1ldGhvZCB3YXMgY2FsbGVkIG9uIGFuICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VsZW1lbnQgdGhhdCBpcyBub3QgdXNpbmcgU2VsZWN0Mi4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gaW5zdGFuY2Vbb3B0aW9uc10uYXBwbHkoaW5zdGFuY2UsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlIHNob3VsZCBiZSByZXR1cm5pbmcgYHRoaXNgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KG9wdGlvbnMsIHRoaXNNZXRob2RzKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzIGZvciBTZWxlY3QyOiAnICsgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoJC5mbi5zZWxlY3QyLmRlZmF1bHRzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAkLmZuLnNlbGVjdDIuZGVmYXVsdHMgPSBEZWZhdWx0cztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFNlbGVjdDI7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vU1VJLVNFTEVDVDJcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlYnJhbmRpbmcgc2VsZWN0MiB0byBTVUlzZWxlY3QyXG4gICAgICAgICAqIEl0IGRvZXMgYXZvaWQgY29uZmxpY3RzIHdpdGggb3RoZXIocykgdGhhdCBpbmNsdWRlIHNlbGVjdDIgbWFudWFsbHlcbiAgICAgICAgICovXG4gICAgICAgIFMyLmRlZmluZSgnc3VpLnNlbGVjdDInLFtcbiAgICAgICAgICAgICdqcXVlcnknLFxuICAgICAgICAgICAgJ2pxdWVyeS1tb3VzZXdoZWVsJyxcblxuICAgICAgICAgICAgJy4vc2VsZWN0Mi9jb3JlJyxcbiAgICAgICAgICAgICcuL3NlbGVjdDIvZGVmYXVsdHMnXG4gICAgICAgIF0sIGZ1bmN0aW9uICgkLCBfLCBTZWxlY3QyLCBEZWZhdWx0cykge1xuICAgICAgICAgICAgaWYgKCQuZm4uU1VJc2VsZWN0MiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gQWxsIG1ldGhvZHMgdGhhdCBzaG91bGQgcmV0dXJuIHRoZSBlbGVtZW50XG4gICAgICAgICAgICAgICAgdmFyIHRoaXNNZXRob2RzID0gWydvcGVuJywgJ2Nsb3NlJywgJ2Rlc3Ryb3knXTtcblxuICAgICAgICAgICAgICAgICQuZm4uU1VJc2VsZWN0MiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlT3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBTZWxlY3QyKCQodGhpcyksIGluc3RhbmNlT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9ICQodGhpcykuZGF0YSgnc2VsZWN0MicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlID09IG51bGwgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1RoZSBTVUlTZWxlY3QyKFxcJycgKyBvcHRpb25zICsgJ1xcJykgbWV0aG9kIHdhcyBjYWxsZWQgb24gYW4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZWxlbWVudCB0aGF0IGlzIG5vdCB1c2luZyBTZWxlY3QyLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBpbnN0YW5jZVtvcHRpb25zXS5hcHBseShpbnN0YW5jZSwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2Ugc2hvdWxkIGJlIHJldHVybmluZyBgdGhpc2BcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkLmluQXJyYXkob3B0aW9ucywgdGhpc01ldGhvZHMpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMgZm9yIFNVSVNlbGVjdDI6ICcgKyBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgkLmZuLlNVSXNlbGVjdDIuZGVmYXVsdHMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICQuZm4uU1VJc2VsZWN0Mi5kZWZhdWx0cyA9IERlZmF1bHRzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gU2VsZWN0MjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBBTUQgbG9hZGVyIGNvbmZpZ3VyYXRpb24gc28gaXQgY2FuIGJlIHVzZWQgb3V0c2lkZSBvZiB0aGlzIGZpbGVcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRlZmluZTogUzIuZGVmaW5lLFxuICAgICAgICAgICAgcmVxdWlyZTogUzIucmVxdWlyZVxuICAgICAgICB9O1xuICAgIH0oKSk7XG5cbiAgICAvLyAvLyBBdXRvbG9hZCB0aGUgalF1ZXJ5IGJpbmRpbmdzXG4gICAgLy8gLy8gV2Uga25vdyB0aGF0IGFsbCBvZiB0aGUgbW9kdWxlcyBleGlzdCBhYm92ZSB0aGlzLCBzbyB3ZSdyZSBzYWZlXG4gICAgLy8gdmFyIHNlbGVjdDIgPSBTMi5yZXF1aXJlKCdqcXVlcnkuc2VsZWN0MicpO1xuICAgIC8vXG4gICAgLy8gLy8gSG9sZCB0aGUgQU1EIG1vZHVsZSByZWZlcmVuY2VzIG9uIHRoZSBqUXVlcnkgZnVuY3Rpb24gdGhhdCB3YXMganVzdCBsb2FkZWRcbiAgICAvLyAvLyBUaGlzIGFsbG93cyBTZWxlY3QyIHRvIHVzZSB0aGUgaW50ZXJuYWwgbG9hZGVyIG91dHNpZGUgb2YgdGhpcyBmaWxlLCBzdWNoXG4gICAgLy8gLy8gYXMgaW4gdGhlIGxhbmd1YWdlIGZpbGVzLlxuICAgIC8vIGpRdWVyeS5mbi5zZWxlY3QyLmFtZCA9IFMyO1xuICAgIC8vXG4gICAgLy8gLy8gUmV0dXJuIHRoZSBTZWxlY3QyIGluc3RhbmNlIGZvciBhbnlvbmUgd2hvIGlzIGltcG9ydGluZyBpdC5cbiAgICAvLyByZXR1cm4gc2VsZWN0MjtcblxuICAgIC8vIFNVSS1TRUxFQ1QyXG4gICAgdmFyIHNlbGVjdDIgPSBTMi5yZXF1aXJlKCdzdWkuc2VsZWN0MicpO1xuICAgIHJldHVybiBzZWxlY3QyO1xufSkpO1xuXG4oIGZ1bmN0aW9uKCAkICkge1xuXG5cdC8vIENvbnZlcnQgYWxsIHNlbGVjdCBsaXN0cyB0byBmYW5jeSBzdWkgU2VsZWN0IGxpc3RzLlxuXHQkKCAnLnN1aS1zZWxlY3QnICkuU1VJc2VsZWN0Mih7XG5cdFx0ZHJvcGRvd25Dc3NDbGFzczogJ3N1aS1zZWxlY3QtZHJvcGRvd24nXG5cdH0pO1xuXG59KCBqUXVlcnkgKSApO1xuXG4oIGZ1bmN0aW9uKCAkICkge1xuXG4gICAgLy8gRW5hYmxlIHN0cmljdCBtb2RlLlxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIERlZmluZSBnbG9iYWwgU1VJIG9iamVjdCBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgIGlmICggJ29iamVjdCcgIT09IHR5cGVvZiB3aW5kb3cuU1VJICkge1xuICAgICAgICB3aW5kb3cuU1VJID0ge307XG4gICAgfVxuXG4gICAgU1VJLnN1aVRhYnMgPSBmdW5jdGlvbiggZWwgKSB7XG5cdFx0dmFyIGpxID0gJCggZWwgKS5jbG9zZXN0KCAnLnN1aS10YWJzJyApO1xuXG5cdFx0aWYgKCAhIGpxLmxlbmd0aCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBSZXNpemUgdGhlIHRhYi1hcmVhIGFmdGVyIHNob3J0IGRlbGF5LlxuXHRcdGZ1bmN0aW9uIHJlc2l6ZUFyZWEoKSB7XG5cdFx0XHR3aW5kb3cuc2V0VGltZW91dCggcmVzaXplQXJlYUhhbmRsZXIsIDIwICk7XG5cdFx0fVxuXG5cdFx0Ly8gUmVzaXplIHRoZSB0YWIgYXJlYSB0byBtYXRjaCB0aGUgY3VycmVudCB0YWIuXG5cdFx0ZnVuY3Rpb24gcmVzaXplQXJlYUhhbmRsZXIoKSB7XG5cdFx0XHR2YXIgY3VycmVudCA9IGpxLmZpbmQoICcuc3VpLXRhYiA+IGlucHV0OmNoZWNrZWQnICkucGFyZW50KCksXG5cdFx0XHRcdGNvbnRlbnQgPSBjdXJyZW50LmZpbmQoICcuc3VpLXRhYi1jb250ZW50JyApO1xuXG5cdFx0XHRqcS5oZWlnaHQoIGNvbnRlbnQub3V0ZXJIZWlnaHQoKSArIGN1cnJlbnQub3V0ZXJIZWlnaHQoKSAtIDYgKTtcblx0XHR9XG5cblx0XHQvLyBVcGRhdGVzIHRoZSBVUkwgaGFzaCB0byBrZWVwIHRhYiBvcGVuIGR1cmluZyBwYWdlIHJlZnJlc2hcblx0XHRmdW5jdGlvbiB1cGRhdGVIYXNoKCkge1xuXHRcdFx0dmFyIGN1cnJlbnQgPSBqcS5maW5kKCAnLnN1aS10YWIgPiBpbnB1dDpjaGVja2VkJyApO1xuXG5cdFx0XHRqcS5maW5kKCAnLnN1aS10YWIgbGFiZWwuYWN0aXZlJyApLnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApO1xuXHRcdFx0Y3VycmVudC5wYXJlbnQoKS5maW5kKCAnbGFiZWwnICkuYWRkQ2xhc3MoICdhY3RpdmUnICk7XG5cblx0XHRcdHJlc2l6ZUFyZWEoKTtcblx0XHR9XG5cblx0XHQvLyBPcGVuIHRoZSB0YWIgdGhhdCBpcyBzcGVjaWZpZWQgaW4gd2luZG93IFVSTCBoYXNoXG5cdFx0ZnVuY3Rpb24gc3dpdGNoVGFiKCkge1xuXHRcdFx0dmFyIGN1clRhYixcblx0XHRcdFx0cm91dGUgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5yZXBsYWNlKCAvW15cXHctX10vZywgJycgKTtcblxuXHRcdFx0aWYgKCByb3V0ZSApIHtcblx0XHRcdFx0Y3VyVGFiID0ganEuZmluZCggJ2lucHV0IycgKyByb3V0ZSApO1xuXG5cdFx0XHRcdGlmICggY3VyVGFiLnBhcmVudCgpLmZpbmQoICdsYWJlbCcgKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0anEuZmluZCggJy5zdWktdGFiIGxhYmVsLmFjdGl2ZScgKS5yZW1vdmVDbGFzcyggJ2FjdGl2ZScgKTtcblx0XHRcdFx0XHRjdXJUYWIucGFyZW50KCkuZmluZCggJ2xhYmVsJyApLmFkZENsYXNzKCAnYWN0aXZlJyApO1xuXG5cdFx0XHRcdFx0aWYgKCBjdXJUYWIubGVuZ3RoICYmICEgY3VyVGFiLnByb3AoICdjaGVja2VkJyApICkge1xuXHRcdFx0XHRcdFx0Y3VyVGFiLnByb3AoICdjaGVja2VkJywgdHJ1ZSApO1xuXG5cdFx0XHRcdFx0XHRzY3JvbGxXaW5kb3coKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHQvLyBTY3JvbGwgdGhlIHdpbmRvdyB0byB0b3Agb2YgdGhlIHRhYiBsaXN0LlxuXHRcdGZ1bmN0aW9uIHNjcm9sbFdpbmRvdygpIHtcblx0XHRcdHJlc2l6ZUFyZWEoKTtcblxuXHRcdFx0JCggJ2h0bWwsIGJvZHknICkuc2Nyb2xsVG9wKFxuXHRcdFx0XHRqcS5vZmZzZXQoKS50b3AgLVxuXHRcdFx0XHRwYXJzZUludCggJCggJ2h0bWwnICkuY3NzKCAncGFkZGluZ1RvcCcgKSApIC1cblx0XHRcdFx0MjBcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gQ29uc3RydWN0b3IuXG5cdFx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHRcdHZhciBjdXJyZW50ID0ganEuZmluZCggJy5zdWktdGFiID4gaW5wdXQ6Y2hlY2tlZCcgKTtcblxuXHRcdFx0anEub24oICdjbGljaycsICcuc3VpLXRhYiA+IGlucHV0W3R5cGU9cmFkaW9dJywgdXBkYXRlSGFzaCApO1xuXHRcdFx0JCggd2luZG93ICkub24oICdoYXNoY2hhbmdlJywgc3dpdGNoVGFiICk7XG5cdFx0XHRjdXJyZW50LnBhcmVudCgpLmZpbmQoICdsYWJlbCcgKS5hZGRDbGFzcyggJ2FjdGl2ZScgKTtcblxuXHRcdFx0cmVzaXplQXJlYSgpO1xuXHRcdFx0c3dpdGNoVGFiKCk7XG5cdFx0fVxuXG5cdFx0aW5pdCgpO1xuXG5cdFx0JCggd2luZG93ICkucmVzaXplKCBmdW5jdGlvbigpIHtcblx0XHRcdHJlc2l6ZUFyZWEoKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8vIEluaXRpYWxpemUgYWxsIHRhYi1hcmVhcy5cblx0JCggJy5zdWktMi0yLTQgLnN1aS10YWJzJyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFNVSS5zdWlUYWJzKCB0aGlzICk7XG5cdH0pO1xuXG59KCBqUXVlcnkgKSApO1xuXG4oIGZ1bmN0aW9uKCAkICkge1xuXG5cdC8vIEVuYWJsZSBzdHJpY3QgbW9kZS5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdC8vIERlZmluZSBnbG9iYWwgU1VJIG9iamVjdCBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuXHRpZiAoICdvYmplY3QnICE9PSB0eXBlb2Ygd2luZG93LlNVSSApIHtcblx0XHR3aW5kb3cuU1VJID0ge307XG5cdH1cblxuXHRTVUkudXBsb2FkID0gZnVuY3Rpb24oKSB7XG5cblx0XHQkKCAnLnN1aS0yLTItNCAuc3VpLXVwbG9hZC1ncm91cCBpbnB1dFt0eXBlPVwiZmlsZVwiXScgKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0dmFyIGZpbGUgPSAkKCB0aGlzIClbMF0uZmlsZXNbMF0sXG5cdFx0XHRcdG1lc3NhZ2UgPSAkKCB0aGlzICkuZmluZCggJ34gLnN1aS11cGxvYWQtbWVzc2FnZScgKTtcblxuXHRcdFx0aWYgKCBmaWxlICkge1xuXHRcdFx0XHRtZXNzYWdlLnRleHQoIGZpbGUubmFtZSApO1xuXHRcdFx0fVxuXG5cdFx0fSk7XG5cblx0fTtcblxuXHRTVUkudXBsb2FkKCk7XG5cbn0oIGpRdWVyeSApICk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0EsV0FFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUdBLG1CQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@wpmudev/shared-ui/dist/js/shared-ui.js\n");

/***/ }),

/***/ "./node_modules/@wpmudev/shared-ui/js/a11y-dialog.js":
/*!***********************************************************!*\
  !*** ./node_modules/@wpmudev/shared-ui/js/a11y-dialog.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global NodeList, Element, define */\n\n(function (global) {\n  'use strict';\n\n  var FOCUSABLE_ELEMENTS = ['a[href]', 'area[href]', 'input:not([disabled])', 'select:not([disabled])', 'textarea:not([disabled])', 'button:not([disabled])', 'iframe', 'object', 'embed', '[contenteditable]', '[tabindex]:not([tabindex^=\"-\"])'];\n  var TAB_KEY = 9;\n  var ESCAPE_KEY = 27;\n  var focusedBeforeDialog;\n\n  /**\n   * Define the constructor to instantiate a dialog\n   *\n   * @constructor\n   * @param {Element} node\n   * @param {(NodeList | Element | string)} targets\n   */\n  function A11yDialog (node, targets) {\n    // Prebind the functions that will be bound in addEventListener and\n    // removeEventListener to avoid losing references\n    this._show = this.show.bind(this);\n    this._hide = this.hide.bind(this);\n    this._maintainFocus = this._maintainFocus.bind(this);\n    this._bindKeypress = this._bindKeypress.bind(this);\n\n    // Keep a reference of the node on the instance\n    this.node = node;\n\n    // Keep an object of listener types mapped to callback functions\n    this._listeners = {};\n\n    // Initialise everything needed for the dialog to work properly\n    this.create(targets);\n  }\n\n  /**\n   * Set up everything necessary for the dialog to be functioning\n   *\n   * @param {(NodeList | Element | string)} targets\n   * @return {this}\n   */\n  A11yDialog.prototype.create = function (targets) {\n    // Keep a collection of nodes to disable/enable when toggling the dialog\n    this._targets = this._targets || collect(targets) || getSiblings(this.node);\n\n    // Make sure the dialog element is disabled on load, and that the `shown`\n    // property is synced with its value\n    this.node.setAttribute('aria-hidden', true);\n    this.shown = false;\n\n    // Keep a collection of dialog openers, each of which will be bound a click\n    // event listener to open the dialog\n    this._openers = $$('[data-a11y-dialog-show=\"' + this.node.id + '\"]');\n    this._openers.forEach(function (opener) {\n      opener.addEventListener('click', this._show);\n    }.bind(this));\n\n    // Keep a collection of dialog closers, each of which will be bound a click\n    // event listener to close the dialog\n    this._closers = $$('[data-a11y-dialog-hide]', this.node)\n      .concat($$('[data-a11y-dialog-hide=\"' + this.node.id + '\"]'));\n    this._closers.forEach(function (closer) {\n      closer.addEventListener('click', this._hide);\n    }.bind(this));\n\n    // Execute all callbacks registered for the `create` event\n    this._fire('create');\n\n    return this;\n  };\n\n  /**\n   * Show the dialog element, disable all the targets (siblings), trap the\n   * current focus within it, listen for some specific key presses and fire all\n   * registered callbacks for `show` event\n   *\n   * @param {Event} event\n   * @return {this}\n   */\n  A11yDialog.prototype.show = function (event) {\n    // If the dialog is already open, abort\n    if (this.shown) {\n      return this;\n    }\n\n    var overlay = this.node.getElementsByClassName('sui-dialog-overlay');\n    var content = this.node.getElementsByClassName('sui-dialog-content');\n    content[0].className = 'sui-dialog-content sui-bounce-in';\n    overlay[0].className = 'sui-dialog-overlay sui-fade-in';\n\n    this.shown = true;\n    this.node.removeAttribute('aria-hidden');\n\n    // Iterate over the targets to disable them by setting their `aria-hidden`\n    // attribute to `true`; in case they already have this attribute, keep a\n    // reference of their original value to be able to restore it later\n    this._targets.forEach(function (target) {\n      var original = target.getAttribute('aria-hidden');\n\n      if (original) {\n        target.setAttribute('data-a11y-dialog-original', original);\n      }\n\n      target.setAttribute('aria-hidden', 'true');\n    });\n\n    // Keep a reference to the currently focused element to be able to restore\n    // it later, then set the focus to the first focusable child of the dialog\n    // element\n    focusedBeforeDialog = document.activeElement;\n    setFocusToFirstItem(this.node);\n\n    // Bind a focus event listener to the body element to make sure the focus\n    // stays trapped inside the dialog while open, and start listening for some\n    // specific key presses (TAB and ESC)\n    document.body.addEventListener('focus', this._maintainFocus, true);\n    document.addEventListener('keydown', this._bindKeypress);\n\n    // Add overlay class to document body.\n    document.getElementsByTagName( 'html' )[0].classList.add( 'sui-has-overlay' );\n\n    // Execute all callbacks registered for the `show` event\n    this._fire('show', event);\n\n    return this;\n  };\n\n  /**\n   * Hide the dialog element, enable all the targets (siblings), restore the\n   * focus to the previously active element, stop listening for some specific\n   * key presses and fire all registered callbacks for `hide` event\n   *\n   * @param {Event} event\n   * @return {this}\n   */\n  A11yDialog.prototype.hide = function (event) {\n    // If the dialog is already closed, abort\n    if (!this.shown) {\n      return this;\n    }\n\n\n    var overlay = this.node.getElementsByClassName('sui-dialog-overlay');\n\n    var content = this.node.getElementsByClassName('sui-dialog-content');\n\n    content[0].className = 'sui-dialog-content sui-bounce-out';\n\n    overlay[0].className = 'sui-dialog-overlay sui-fade-out';\n\n    this.shown = false;\n    // This has been set so there is enough time for the animation to show\n    var timeout_node = this.node;\n    setTimeout(function () {\n\t\ttimeout_node.setAttribute('aria-hidden', 'true');\n\t}, 300);\n\n    // Iterate over the targets to enable them by remove their `aria-hidden`\n    // attribute or resetting them to their initial value\n    this._targets.forEach(function (target) {\n      var original = target.getAttribute('data-a11y-dialog-original');\n\n\n      if (original) {\n        target.setAttribute('aria-hidden', original);\n        target.removeAttribute('data-a11y-dialog-original');\n      } else {\n        target.removeAttribute('aria-hidden');\n      }\n    });\n\n    // If their was a focused element before the dialog was opened, restore the\n    // focus back to it\n    if (focusedBeforeDialog) {\n      focusedBeforeDialog.focus();\n    }\n\n    // Remove the focus event listener to the body element and stop listening\n    // for specific key presses\n    document.body.removeEventListener('focus', this._maintainFocus, true);\n    document.removeEventListener('keydown', this._bindKeypress);\n\n    // Remove overlay class to document body.\n    document.getElementsByTagName( 'html' )[0].classList.remove( 'sui-has-overlay' );\n\n    // Execute all callbacks registered for the `hide` event\n    this._fire('hide', event);\n\n    return this;\n  };\n\n  /**\n   * Destroy the current instance (after making sure the dialog has been hidden)\n   * and remove all associated listeners from dialog openers and closers\n   *\n   * @return {this}\n   */\n  A11yDialog.prototype.destroy = function () {\n    // Hide the dialog to avoid destroying an open instance\n    this.hide();\n\n    // Remove the click event listener from all dialog openers\n    this._openers.forEach(function (opener) {\n      opener.removeEventListener('click', this._show);\n    }.bind(this));\n\n    // Remove the click event listener from all dialog closers\n    this._closers.forEach(function (closer) {\n      closer.removeEventListener('click', this._hide);\n    }.bind(this));\n\n    // Execute all callbacks registered for the `destroy` event\n    this._fire('destroy');\n\n    // Keep an object of listener types mapped to callback functions\n    this._listeners = {};\n\n    return this;\n  };\n\n  /**\n   * Register a new callback for the given event type\n   *\n   * @param {string} type\n   * @param {Function} handler\n   */\n  A11yDialog.prototype.on = function (type, handler) {\n    if (typeof this._listeners[type] === 'undefined') {\n      this._listeners[type] = [];\n    }\n\n    this._listeners[type].push(handler);\n\n    return this;\n  };\n\n  /**\n   * Unregister an existing callback for the given event type\n   *\n   * @param {string} type\n   * @param {Function} handler\n   */\n  A11yDialog.prototype.off = function (type, handler) {\n    var index = this._listeners[type].indexOf(handler);\n\n    if (index > -1) {\n      this._listeners[type].splice(index, 1);\n    }\n\n    return this;\n  };\n\n  /**\n   * Iterate over all registered handlers for given type and call them all with\n   * the dialog element as first argument, event as second argument (if any).\n   *\n   * @access private\n   * @param {string} type\n   * @param {Event} event\n   */\n  A11yDialog.prototype._fire = function (type, event) {\n    var listeners = this._listeners[type] || [];\n\n    listeners.forEach(function (listener) {\n      listener(this.node, event);\n    }.bind(this));\n  };\n\n  /**\n   * Private event handler used when listening to some specific key presses\n   * (namely ESCAPE and TAB)\n   *\n   * @access private\n   * @param {Event} event\n   */\n  A11yDialog.prototype._bindKeypress = function (event) {\n    // If the dialog is shown and the ESCAPE key is being pressed, prevent any\n    // further effects from the ESCAPE key and hide the dialog\n    if (this.shown && event.which === ESCAPE_KEY) {\n      event.preventDefault();\n      this.hide();\n    }\n\n    // If the dialog is shown and the TAB key is being pressed, make sure the\n    // focus stays trapped within the dialog element\n    if (this.shown && event.which === TAB_KEY) {\n      trapTabKey(this.node, event);\n    }\n  };\n\n  /**\n   * Private event handler used when making sure the focus stays within the\n   * currently open dialog\n   *\n   * @access private\n   * @param {Event} event\n   */\n  A11yDialog.prototype._maintainFocus = function (event) {\n    // If the dialog is shown and the focus is not within the dialog element,\n    // move it back to its first focusable child\n    if (this.shown && !this.node.contains(event.target)) {\n      setFocusToFirstItem(this.node);\n    }\n  };\n\n  /**\n   * Convert a NodeList into an array\n   *\n   * @param {NodeList} collection\n   * @return {Array<Element>}\n   */\n  function toArray (collection) {\n    return Array.prototype.slice.call(collection);\n  }\n\n  /**\n   * Query the DOM for nodes matching the given selector, scoped to context (or\n   * the whole document)\n   *\n   * @param {String} selector\n   * @param {Element} [context = document]\n   * @return {Array<Element>}\n   */\n  function $$ (selector, context) {\n    return toArray((context || document).querySelectorAll(selector));\n  }\n\n  /**\n   * Return an array of Element based on given argument (NodeList, Element or\n   * string representing a selector)\n   *\n   * @param {(NodeList | Element | string)} target\n   * @return {Array<Element>}\n   */\n  function collect (target) {\n    if (NodeList.prototype.isPrototypeOf(target)) {\n      return toArray(target);\n    }\n\n    if (Element.prototype.isPrototypeOf(target)) {\n      return [target];\n    }\n\n    if (typeof target === 'string') {\n      return $$(target);\n    }\n  }\n\n  /**\n   * Set the focus to the first focusable child of the given element\n   *\n   * @param {Element} node\n   */\n  function setFocusToFirstItem (node) {\n    var focusableChildren = getFocusableChildren(node);\n\n    if (focusableChildren.length) {\n      focusableChildren[0].focus();\n    }\n  }\n\n  /**\n   * Get the focusable children of the given element\n   *\n   * @param {Element} node\n   * @return {Array<Element>}\n   */\n  function getFocusableChildren (node) {\n    return $$(FOCUSABLE_ELEMENTS.join(','), node).filter(function (child) {\n      return !!(child.offsetWidth || child.offsetHeight || child.getClientRects().length);\n    });\n  }\n\n  /**\n   * Trap the focus inside the given element\n   *\n   * @param {Element} node\n   * @param {Event} event\n   */\n  function trapTabKey (node, event) {\n    var focusableChildren = getFocusableChildren(node);\n    var focusedItemIndex = focusableChildren.indexOf(document.activeElement);\n\n    // If the SHIFT key is being pressed while tabbing (moving backwards) and\n    // the currently focused item is the first one, move the focus to the last\n    // focusable item from the dialog element\n    if (event.shiftKey && focusedItemIndex === 0) {\n      focusableChildren[focusableChildren.length - 1].focus();\n      event.preventDefault();\n    // If the SHIFT key is not being pressed (moving forwards) and the currently\n    // focused item is the last one, move the focus to the first focusable item\n    // from the dialog element\n    } else if (!event.shiftKey && focusedItemIndex === focusableChildren.length - 1) {\n      focusableChildren[0].focus();\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * Retrieve siblings from given element\n   *\n   * @param {Element} node\n   * @return {Array<Element>}\n   */\n  function getSiblings (node) {\n    var nodes = toArray(node.parentNode.childNodes);\n    var siblings = nodes.filter(function (node) {\n      return node.nodeType === 1;\n    });\n\n    siblings.splice(siblings.indexOf(node), 1);\n\n    return siblings;\n  }\n\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = A11yDialog;\n  } else if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n      return A11yDialog;\n    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {}\n}(typeof global !== 'undefined' ? global : window));\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHdwbXVkZXYvc2hhcmVkLXVpL2pzL2ExMXktZGlhbG9nLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B3cG11ZGV2L3NoYXJlZC11aS9qcy9hMTF5LWRpYWxvZy5qcz84NDUxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBOb2RlTGlzdCwgRWxlbWVudCwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgRk9DVVNBQkxFX0VMRU1FTlRTID0gWydhW2hyZWZdJywgJ2FyZWFbaHJlZl0nLCAnaW5wdXQ6bm90KFtkaXNhYmxlZF0pJywgJ3NlbGVjdDpub3QoW2Rpc2FibGVkXSknLCAndGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pJywgJ2J1dHRvbjpub3QoW2Rpc2FibGVkXSknLCAnaWZyYW1lJywgJ29iamVjdCcsICdlbWJlZCcsICdbY29udGVudGVkaXRhYmxlXScsICdbdGFiaW5kZXhdOm5vdChbdGFiaW5kZXhePVwiLVwiXSknXTtcbiAgdmFyIFRBQl9LRVkgPSA5O1xuICB2YXIgRVNDQVBFX0tFWSA9IDI3O1xuICB2YXIgZm9jdXNlZEJlZm9yZURpYWxvZztcblxuICAvKipcbiAgICogRGVmaW5lIHRoZSBjb25zdHJ1Y3RvciB0byBpbnN0YW50aWF0ZSBhIGRpYWxvZ1xuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlXG4gICAqIEBwYXJhbSB7KE5vZGVMaXN0IHwgRWxlbWVudCB8IHN0cmluZyl9IHRhcmdldHNcbiAgICovXG4gIGZ1bmN0aW9uIEExMXlEaWFsb2cgKG5vZGUsIHRhcmdldHMpIHtcbiAgICAvLyBQcmViaW5kIHRoZSBmdW5jdGlvbnMgdGhhdCB3aWxsIGJlIGJvdW5kIGluIGFkZEV2ZW50TGlzdGVuZXIgYW5kXG4gICAgLy8gcmVtb3ZlRXZlbnRMaXN0ZW5lciB0byBhdm9pZCBsb3NpbmcgcmVmZXJlbmNlc1xuICAgIHRoaXMuX3Nob3cgPSB0aGlzLnNob3cuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oaWRlID0gdGhpcy5oaWRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fbWFpbnRhaW5Gb2N1cyA9IHRoaXMuX21haW50YWluRm9jdXMuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9iaW5kS2V5cHJlc3MgPSB0aGlzLl9iaW5kS2V5cHJlc3MuYmluZCh0aGlzKTtcblxuICAgIC8vIEtlZXAgYSByZWZlcmVuY2Ugb2YgdGhlIG5vZGUgb24gdGhlIGluc3RhbmNlXG4gICAgdGhpcy5ub2RlID0gbm9kZTtcblxuICAgIC8vIEtlZXAgYW4gb2JqZWN0IG9mIGxpc3RlbmVyIHR5cGVzIG1hcHBlZCB0byBjYWxsYmFjayBmdW5jdGlvbnNcbiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcblxuICAgIC8vIEluaXRpYWxpc2UgZXZlcnl0aGluZyBuZWVkZWQgZm9yIHRoZSBkaWFsb2cgdG8gd29yayBwcm9wZXJseVxuICAgIHRoaXMuY3JlYXRlKHRhcmdldHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB1cCBldmVyeXRoaW5nIG5lY2Vzc2FyeSBmb3IgdGhlIGRpYWxvZyB0byBiZSBmdW5jdGlvbmluZ1xuICAgKlxuICAgKiBAcGFyYW0geyhOb2RlTGlzdCB8IEVsZW1lbnQgfCBzdHJpbmcpfSB0YXJnZXRzXG4gICAqIEByZXR1cm4ge3RoaXN9XG4gICAqL1xuICBBMTF5RGlhbG9nLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAodGFyZ2V0cykge1xuICAgIC8vIEtlZXAgYSBjb2xsZWN0aW9uIG9mIG5vZGVzIHRvIGRpc2FibGUvZW5hYmxlIHdoZW4gdG9nZ2xpbmcgdGhlIGRpYWxvZ1xuICAgIHRoaXMuX3RhcmdldHMgPSB0aGlzLl90YXJnZXRzIHx8IGNvbGxlY3QodGFyZ2V0cykgfHwgZ2V0U2libGluZ3ModGhpcy5ub2RlKTtcblxuICAgIC8vIE1ha2Ugc3VyZSB0aGUgZGlhbG9nIGVsZW1lbnQgaXMgZGlzYWJsZWQgb24gbG9hZCwgYW5kIHRoYXQgdGhlIGBzaG93bmBcbiAgICAvLyBwcm9wZXJ0eSBpcyBzeW5jZWQgd2l0aCBpdHMgdmFsdWVcbiAgICB0aGlzLm5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsIHRydWUpO1xuICAgIHRoaXMuc2hvd24gPSBmYWxzZTtcblxuICAgIC8vIEtlZXAgYSBjb2xsZWN0aW9uIG9mIGRpYWxvZyBvcGVuZXJzLCBlYWNoIG9mIHdoaWNoIHdpbGwgYmUgYm91bmQgYSBjbGlja1xuICAgIC8vIGV2ZW50IGxpc3RlbmVyIHRvIG9wZW4gdGhlIGRpYWxvZ1xuICAgIHRoaXMuX29wZW5lcnMgPSAkJCgnW2RhdGEtYTExeS1kaWFsb2ctc2hvdz1cIicgKyB0aGlzLm5vZGUuaWQgKyAnXCJdJyk7XG4gICAgdGhpcy5fb3BlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChvcGVuZXIpIHtcbiAgICAgIG9wZW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX3Nob3cpO1xuICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICAvLyBLZWVwIGEgY29sbGVjdGlvbiBvZiBkaWFsb2cgY2xvc2VycywgZWFjaCBvZiB3aGljaCB3aWxsIGJlIGJvdW5kIGEgY2xpY2tcbiAgICAvLyBldmVudCBsaXN0ZW5lciB0byBjbG9zZSB0aGUgZGlhbG9nXG4gICAgdGhpcy5fY2xvc2VycyA9ICQkKCdbZGF0YS1hMTF5LWRpYWxvZy1oaWRlXScsIHRoaXMubm9kZSlcbiAgICAgIC5jb25jYXQoJCQoJ1tkYXRhLWExMXktZGlhbG9nLWhpZGU9XCInICsgdGhpcy5ub2RlLmlkICsgJ1wiXScpKTtcbiAgICB0aGlzLl9jbG9zZXJzLmZvckVhY2goZnVuY3Rpb24gKGNsb3Nlcikge1xuICAgICAgY2xvc2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGlkZSk7XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIC8vIEV4ZWN1dGUgYWxsIGNhbGxiYWNrcyByZWdpc3RlcmVkIGZvciB0aGUgYGNyZWF0ZWAgZXZlbnRcbiAgICB0aGlzLl9maXJlKCdjcmVhdGUnKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTaG93IHRoZSBkaWFsb2cgZWxlbWVudCwgZGlzYWJsZSBhbGwgdGhlIHRhcmdldHMgKHNpYmxpbmdzKSwgdHJhcCB0aGVcbiAgICogY3VycmVudCBmb2N1cyB3aXRoaW4gaXQsIGxpc3RlbiBmb3Igc29tZSBzcGVjaWZpYyBrZXkgcHJlc3NlcyBhbmQgZmlyZSBhbGxcbiAgICogcmVnaXN0ZXJlZCBjYWxsYmFja3MgZm9yIGBzaG93YCBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgKiBAcmV0dXJuIHt0aGlzfVxuICAgKi9cbiAgQTExeURpYWxvZy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIC8vIElmIHRoZSBkaWFsb2cgaXMgYWxyZWFkeSBvcGVuLCBhYm9ydFxuICAgIGlmICh0aGlzLnNob3duKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgb3ZlcmxheSA9IHRoaXMubm9kZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzdWktZGlhbG9nLW92ZXJsYXknKTtcbiAgICB2YXIgY29udGVudCA9IHRoaXMubm9kZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzdWktZGlhbG9nLWNvbnRlbnQnKTtcbiAgICBjb250ZW50WzBdLmNsYXNzTmFtZSA9ICdzdWktZGlhbG9nLWNvbnRlbnQgc3VpLWJvdW5jZS1pbic7XG4gICAgb3ZlcmxheVswXS5jbGFzc05hbWUgPSAnc3VpLWRpYWxvZy1vdmVybGF5IHN1aS1mYWRlLWluJztcblxuICAgIHRoaXMuc2hvd24gPSB0cnVlO1xuICAgIHRoaXMubm9kZS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIHRhcmdldHMgdG8gZGlzYWJsZSB0aGVtIGJ5IHNldHRpbmcgdGhlaXIgYGFyaWEtaGlkZGVuYFxuICAgIC8vIGF0dHJpYnV0ZSB0byBgdHJ1ZWA7IGluIGNhc2UgdGhleSBhbHJlYWR5IGhhdmUgdGhpcyBhdHRyaWJ1dGUsIGtlZXAgYVxuICAgIC8vIHJlZmVyZW5jZSBvZiB0aGVpciBvcmlnaW5hbCB2YWx1ZSB0byBiZSBhYmxlIHRvIHJlc3RvcmUgaXQgbGF0ZXJcbiAgICB0aGlzLl90YXJnZXRzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgdmFyIG9yaWdpbmFsID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcblxuICAgICAgaWYgKG9yaWdpbmFsKSB7XG4gICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtYTExeS1kaWFsb2ctb3JpZ2luYWwnLCBvcmlnaW5hbCk7XG4gICAgICB9XG5cbiAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICB9KTtcblxuICAgIC8vIEtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnRseSBmb2N1c2VkIGVsZW1lbnQgdG8gYmUgYWJsZSB0byByZXN0b3JlXG4gICAgLy8gaXQgbGF0ZXIsIHRoZW4gc2V0IHRoZSBmb2N1cyB0byB0aGUgZmlyc3QgZm9jdXNhYmxlIGNoaWxkIG9mIHRoZSBkaWFsb2dcbiAgICAvLyBlbGVtZW50XG4gICAgZm9jdXNlZEJlZm9yZURpYWxvZyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgc2V0Rm9jdXNUb0ZpcnN0SXRlbSh0aGlzLm5vZGUpO1xuXG4gICAgLy8gQmluZCBhIGZvY3VzIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBib2R5IGVsZW1lbnQgdG8gbWFrZSBzdXJlIHRoZSBmb2N1c1xuICAgIC8vIHN0YXlzIHRyYXBwZWQgaW5zaWRlIHRoZSBkaWFsb2cgd2hpbGUgb3BlbiwgYW5kIHN0YXJ0IGxpc3RlbmluZyBmb3Igc29tZVxuICAgIC8vIHNwZWNpZmljIGtleSBwcmVzc2VzIChUQUIgYW5kIEVTQylcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fbWFpbnRhaW5Gb2N1cywgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2JpbmRLZXlwcmVzcyk7XG5cbiAgICAvLyBBZGQgb3ZlcmxheSBjbGFzcyB0byBkb2N1bWVudCBib2R5LlxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnaHRtbCcgKVswXS5jbGFzc0xpc3QuYWRkKCAnc3VpLWhhcy1vdmVybGF5JyApO1xuXG4gICAgLy8gRXhlY3V0ZSBhbGwgY2FsbGJhY2tzIHJlZ2lzdGVyZWQgZm9yIHRoZSBgc2hvd2AgZXZlbnRcbiAgICB0aGlzLl9maXJlKCdzaG93JywgZXZlbnQpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEhpZGUgdGhlIGRpYWxvZyBlbGVtZW50LCBlbmFibGUgYWxsIHRoZSB0YXJnZXRzIChzaWJsaW5ncyksIHJlc3RvcmUgdGhlXG4gICAqIGZvY3VzIHRvIHRoZSBwcmV2aW91c2x5IGFjdGl2ZSBlbGVtZW50LCBzdG9wIGxpc3RlbmluZyBmb3Igc29tZSBzcGVjaWZpY1xuICAgKiBrZXkgcHJlc3NlcyBhbmQgZmlyZSBhbGwgcmVnaXN0ZXJlZCBjYWxsYmFja3MgZm9yIGBoaWRlYCBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgKiBAcmV0dXJuIHt0aGlzfVxuICAgKi9cbiAgQTExeURpYWxvZy5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIC8vIElmIHRoZSBkaWFsb2cgaXMgYWxyZWFkeSBjbG9zZWQsIGFib3J0XG4gICAgaWYgKCF0aGlzLnNob3duKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cblxuICAgIHZhciBvdmVybGF5ID0gdGhpcy5ub2RlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3N1aS1kaWFsb2ctb3ZlcmxheScpO1xuXG4gICAgdmFyIGNvbnRlbnQgPSB0aGlzLm5vZGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc3VpLWRpYWxvZy1jb250ZW50Jyk7XG5cbiAgICBjb250ZW50WzBdLmNsYXNzTmFtZSA9ICdzdWktZGlhbG9nLWNvbnRlbnQgc3VpLWJvdW5jZS1vdXQnO1xuXG4gICAgb3ZlcmxheVswXS5jbGFzc05hbWUgPSAnc3VpLWRpYWxvZy1vdmVybGF5IHN1aS1mYWRlLW91dCc7XG5cbiAgICB0aGlzLnNob3duID0gZmFsc2U7XG4gICAgLy8gVGhpcyBoYXMgYmVlbiBzZXQgc28gdGhlcmUgaXMgZW5vdWdoIHRpbWUgZm9yIHRoZSBhbmltYXRpb24gdG8gc2hvd1xuICAgIHZhciB0aW1lb3V0X25vZGUgPSB0aGlzLm5vZGU7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0dGltZW91dF9ub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuXHR9LCAzMDApO1xuXG4gICAgLy8gSXRlcmF0ZSBvdmVyIHRoZSB0YXJnZXRzIHRvIGVuYWJsZSB0aGVtIGJ5IHJlbW92ZSB0aGVpciBgYXJpYS1oaWRkZW5gXG4gICAgLy8gYXR0cmlidXRlIG9yIHJlc2V0dGluZyB0aGVtIHRvIHRoZWlyIGluaXRpYWwgdmFsdWVcbiAgICB0aGlzLl90YXJnZXRzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgdmFyIG9yaWdpbmFsID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1hMTF5LWRpYWxvZy1vcmlnaW5hbCcpO1xuXG5cbiAgICAgIGlmIChvcmlnaW5hbCkge1xuICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsIG9yaWdpbmFsKTtcbiAgICAgICAgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1hMTF5LWRpYWxvZy1vcmlnaW5hbCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIElmIHRoZWlyIHdhcyBhIGZvY3VzZWQgZWxlbWVudCBiZWZvcmUgdGhlIGRpYWxvZyB3YXMgb3BlbmVkLCByZXN0b3JlIHRoZVxuICAgIC8vIGZvY3VzIGJhY2sgdG8gaXRcbiAgICBpZiAoZm9jdXNlZEJlZm9yZURpYWxvZykge1xuICAgICAgZm9jdXNlZEJlZm9yZURpYWxvZy5mb2N1cygpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSB0aGUgZm9jdXMgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGJvZHkgZWxlbWVudCBhbmQgc3RvcCBsaXN0ZW5pbmdcbiAgICAvLyBmb3Igc3BlY2lmaWMga2V5IHByZXNzZXNcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fbWFpbnRhaW5Gb2N1cywgdHJ1ZSk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2JpbmRLZXlwcmVzcyk7XG5cbiAgICAvLyBSZW1vdmUgb3ZlcmxheSBjbGFzcyB0byBkb2N1bWVudCBib2R5LlxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnaHRtbCcgKVswXS5jbGFzc0xpc3QucmVtb3ZlKCAnc3VpLWhhcy1vdmVybGF5JyApO1xuXG4gICAgLy8gRXhlY3V0ZSBhbGwgY2FsbGJhY2tzIHJlZ2lzdGVyZWQgZm9yIHRoZSBgaGlkZWAgZXZlbnRcbiAgICB0aGlzLl9maXJlKCdoaWRlJywgZXZlbnQpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgdGhlIGN1cnJlbnQgaW5zdGFuY2UgKGFmdGVyIG1ha2luZyBzdXJlIHRoZSBkaWFsb2cgaGFzIGJlZW4gaGlkZGVuKVxuICAgKiBhbmQgcmVtb3ZlIGFsbCBhc3NvY2lhdGVkIGxpc3RlbmVycyBmcm9tIGRpYWxvZyBvcGVuZXJzIGFuZCBjbG9zZXJzXG4gICAqXG4gICAqIEByZXR1cm4ge3RoaXN9XG4gICAqL1xuICBBMTF5RGlhbG9nLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIEhpZGUgdGhlIGRpYWxvZyB0byBhdm9pZCBkZXN0cm95aW5nIGFuIG9wZW4gaW5zdGFuY2VcbiAgICB0aGlzLmhpZGUoKTtcblxuICAgIC8vIFJlbW92ZSB0aGUgY2xpY2sgZXZlbnQgbGlzdGVuZXIgZnJvbSBhbGwgZGlhbG9nIG9wZW5lcnNcbiAgICB0aGlzLl9vcGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKG9wZW5lcikge1xuICAgICAgb3BlbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fc2hvdyk7XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIC8vIFJlbW92ZSB0aGUgY2xpY2sgZXZlbnQgbGlzdGVuZXIgZnJvbSBhbGwgZGlhbG9nIGNsb3NlcnNcbiAgICB0aGlzLl9jbG9zZXJzLmZvckVhY2goZnVuY3Rpb24gKGNsb3Nlcikge1xuICAgICAgY2xvc2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGlkZSk7XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIC8vIEV4ZWN1dGUgYWxsIGNhbGxiYWNrcyByZWdpc3RlcmVkIGZvciB0aGUgYGRlc3Ryb3lgIGV2ZW50XG4gICAgdGhpcy5fZmlyZSgnZGVzdHJveScpO1xuXG4gICAgLy8gS2VlcCBhbiBvYmplY3Qgb2YgbGlzdGVuZXIgdHlwZXMgbWFwcGVkIHRvIGNhbGxiYWNrIGZ1bmN0aW9uc1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgbmV3IGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gZXZlbnQgdHlwZVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAqL1xuICBBMTF5RGlhbG9nLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9saXN0ZW5lcnNbdHlwZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnNbdHlwZV0gPSBbXTtcbiAgICB9XG5cbiAgICB0aGlzLl9saXN0ZW5lcnNbdHlwZV0ucHVzaChoYW5kbGVyKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVbnJlZ2lzdGVyIGFuIGV4aXN0aW5nIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gZXZlbnQgdHlwZVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAqL1xuICBBMTF5RGlhbG9nLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAodHlwZSwgaGFuZGxlcikge1xuICAgIHZhciBpbmRleCA9IHRoaXMuX2xpc3RlbmVyc1t0eXBlXS5pbmRleE9mKGhhbmRsZXIpO1xuXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHRoaXMuX2xpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJdGVyYXRlIG92ZXIgYWxsIHJlZ2lzdGVyZWQgaGFuZGxlcnMgZm9yIGdpdmVuIHR5cGUgYW5kIGNhbGwgdGhlbSBhbGwgd2l0aFxuICAgKiB0aGUgZGlhbG9nIGVsZW1lbnQgYXMgZmlyc3QgYXJndW1lbnQsIGV2ZW50IGFzIHNlY29uZCBhcmd1bWVudCAoaWYgYW55KS5cbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAqL1xuICBBMTF5RGlhbG9nLnByb3RvdHlwZS5fZmlyZSA9IGZ1bmN0aW9uICh0eXBlLCBldmVudCkge1xuICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNbdHlwZV0gfHwgW107XG5cbiAgICBsaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgIGxpc3RlbmVyKHRoaXMubm9kZSwgZXZlbnQpO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByaXZhdGUgZXZlbnQgaGFuZGxlciB1c2VkIHdoZW4gbGlzdGVuaW5nIHRvIHNvbWUgc3BlY2lmaWMga2V5IHByZXNzZXNcbiAgICogKG5hbWVseSBFU0NBUEUgYW5kIFRBQilcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAqL1xuICBBMTF5RGlhbG9nLnByb3RvdHlwZS5fYmluZEtleXByZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gSWYgdGhlIGRpYWxvZyBpcyBzaG93biBhbmQgdGhlIEVTQ0FQRSBrZXkgaXMgYmVpbmcgcHJlc3NlZCwgcHJldmVudCBhbnlcbiAgICAvLyBmdXJ0aGVyIGVmZmVjdHMgZnJvbSB0aGUgRVNDQVBFIGtleSBhbmQgaGlkZSB0aGUgZGlhbG9nXG4gICAgaWYgKHRoaXMuc2hvd24gJiYgZXZlbnQud2hpY2ggPT09IEVTQ0FQRV9LRVkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLmhpZGUoKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgZGlhbG9nIGlzIHNob3duIGFuZCB0aGUgVEFCIGtleSBpcyBiZWluZyBwcmVzc2VkLCBtYWtlIHN1cmUgdGhlXG4gICAgLy8gZm9jdXMgc3RheXMgdHJhcHBlZCB3aXRoaW4gdGhlIGRpYWxvZyBlbGVtZW50XG4gICAgaWYgKHRoaXMuc2hvd24gJiYgZXZlbnQud2hpY2ggPT09IFRBQl9LRVkpIHtcbiAgICAgIHRyYXBUYWJLZXkodGhpcy5ub2RlLCBldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBQcml2YXRlIGV2ZW50IGhhbmRsZXIgdXNlZCB3aGVuIG1ha2luZyBzdXJlIHRoZSBmb2N1cyBzdGF5cyB3aXRoaW4gdGhlXG4gICAqIGN1cnJlbnRseSBvcGVuIGRpYWxvZ1xuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICovXG4gIEExMXlEaWFsb2cucHJvdG90eXBlLl9tYWludGFpbkZvY3VzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gSWYgdGhlIGRpYWxvZyBpcyBzaG93biBhbmQgdGhlIGZvY3VzIGlzIG5vdCB3aXRoaW4gdGhlIGRpYWxvZyBlbGVtZW50LFxuICAgIC8vIG1vdmUgaXQgYmFjayB0byBpdHMgZmlyc3QgZm9jdXNhYmxlIGNoaWxkXG4gICAgaWYgKHRoaXMuc2hvd24gJiYgIXRoaXMubm9kZS5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4gICAgICBzZXRGb2N1c1RvRmlyc3RJdGVtKHRoaXMubm9kZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGEgTm9kZUxpc3QgaW50byBhbiBhcnJheVxuICAgKlxuICAgKiBAcGFyYW0ge05vZGVMaXN0fSBjb2xsZWN0aW9uXG4gICAqIEByZXR1cm4ge0FycmF5PEVsZW1lbnQ+fVxuICAgKi9cbiAgZnVuY3Rpb24gdG9BcnJheSAoY29sbGVjdGlvbikge1xuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjb2xsZWN0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWVyeSB0aGUgRE9NIGZvciBub2RlcyBtYXRjaGluZyB0aGUgZ2l2ZW4gc2VsZWN0b3IsIHNjb3BlZCB0byBjb250ZXh0IChvclxuICAgKiB0aGUgd2hvbGUgZG9jdW1lbnQpXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IFtjb250ZXh0ID0gZG9jdW1lbnRdXG4gICAqIEByZXR1cm4ge0FycmF5PEVsZW1lbnQ+fVxuICAgKi9cbiAgZnVuY3Rpb24gJCQgKHNlbGVjdG9yLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIHRvQXJyYXkoKGNvbnRleHQgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgRWxlbWVudCBiYXNlZCBvbiBnaXZlbiBhcmd1bWVudCAoTm9kZUxpc3QsIEVsZW1lbnQgb3JcbiAgICogc3RyaW5nIHJlcHJlc2VudGluZyBhIHNlbGVjdG9yKVxuICAgKlxuICAgKiBAcGFyYW0geyhOb2RlTGlzdCB8IEVsZW1lbnQgfCBzdHJpbmcpfSB0YXJnZXRcbiAgICogQHJldHVybiB7QXJyYXk8RWxlbWVudD59XG4gICAqL1xuICBmdW5jdGlvbiBjb2xsZWN0ICh0YXJnZXQpIHtcbiAgICBpZiAoTm9kZUxpc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YodGFyZ2V0KSkge1xuICAgICAgcmV0dXJuIHRvQXJyYXkodGFyZ2V0KTtcbiAgICB9XG5cbiAgICBpZiAoRWxlbWVudC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih0YXJnZXQpKSB7XG4gICAgICByZXR1cm4gW3RhcmdldF07XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gJCQodGFyZ2V0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBmb2N1cyB0byB0aGUgZmlyc3QgZm9jdXNhYmxlIGNoaWxkIG9mIHRoZSBnaXZlbiBlbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxuICAgKi9cbiAgZnVuY3Rpb24gc2V0Rm9jdXNUb0ZpcnN0SXRlbSAobm9kZSkge1xuICAgIHZhciBmb2N1c2FibGVDaGlsZHJlbiA9IGdldEZvY3VzYWJsZUNoaWxkcmVuKG5vZGUpO1xuXG4gICAgaWYgKGZvY3VzYWJsZUNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgZm9jdXNhYmxlQ2hpbGRyZW5bMF0uZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBmb2N1c2FibGUgY2hpbGRyZW4gb2YgdGhlIGdpdmVuIGVsZW1lbnRcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlXG4gICAqIEByZXR1cm4ge0FycmF5PEVsZW1lbnQ+fVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0Rm9jdXNhYmxlQ2hpbGRyZW4gKG5vZGUpIHtcbiAgICByZXR1cm4gJCQoRk9DVVNBQkxFX0VMRU1FTlRTLmpvaW4oJywnKSwgbm9kZSkuZmlsdGVyKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgcmV0dXJuICEhKGNoaWxkLm9mZnNldFdpZHRoIHx8IGNoaWxkLm9mZnNldEhlaWdodCB8fCBjaGlsZC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVHJhcCB0aGUgZm9jdXMgaW5zaWRlIHRoZSBnaXZlbiBlbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgKi9cbiAgZnVuY3Rpb24gdHJhcFRhYktleSAobm9kZSwgZXZlbnQpIHtcbiAgICB2YXIgZm9jdXNhYmxlQ2hpbGRyZW4gPSBnZXRGb2N1c2FibGVDaGlsZHJlbihub2RlKTtcbiAgICB2YXIgZm9jdXNlZEl0ZW1JbmRleCA9IGZvY3VzYWJsZUNoaWxkcmVuLmluZGV4T2YoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XG5cbiAgICAvLyBJZiB0aGUgU0hJRlQga2V5IGlzIGJlaW5nIHByZXNzZWQgd2hpbGUgdGFiYmluZyAobW92aW5nIGJhY2t3YXJkcykgYW5kXG4gICAgLy8gdGhlIGN1cnJlbnRseSBmb2N1c2VkIGl0ZW0gaXMgdGhlIGZpcnN0IG9uZSwgbW92ZSB0aGUgZm9jdXMgdG8gdGhlIGxhc3RcbiAgICAvLyBmb2N1c2FibGUgaXRlbSBmcm9tIHRoZSBkaWFsb2cgZWxlbWVudFxuICAgIGlmIChldmVudC5zaGlmdEtleSAmJiBmb2N1c2VkSXRlbUluZGV4ID09PSAwKSB7XG4gICAgICBmb2N1c2FibGVDaGlsZHJlbltmb2N1c2FibGVDaGlsZHJlbi5sZW5ndGggLSAxXS5mb2N1cygpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAvLyBJZiB0aGUgU0hJRlQga2V5IGlzIG5vdCBiZWluZyBwcmVzc2VkIChtb3ZpbmcgZm9yd2FyZHMpIGFuZCB0aGUgY3VycmVudGx5XG4gICAgLy8gZm9jdXNlZCBpdGVtIGlzIHRoZSBsYXN0IG9uZSwgbW92ZSB0aGUgZm9jdXMgdG8gdGhlIGZpcnN0IGZvY3VzYWJsZSBpdGVtXG4gICAgLy8gZnJvbSB0aGUgZGlhbG9nIGVsZW1lbnRcbiAgICB9IGVsc2UgaWYgKCFldmVudC5zaGlmdEtleSAmJiBmb2N1c2VkSXRlbUluZGV4ID09PSBmb2N1c2FibGVDaGlsZHJlbi5sZW5ndGggLSAxKSB7XG4gICAgICBmb2N1c2FibGVDaGlsZHJlblswXS5mb2N1cygpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgc2libGluZ3MgZnJvbSBnaXZlbiBlbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxuICAgKiBAcmV0dXJuIHtBcnJheTxFbGVtZW50Pn1cbiAgICovXG4gIGZ1bmN0aW9uIGdldFNpYmxpbmdzIChub2RlKSB7XG4gICAgdmFyIG5vZGVzID0gdG9BcnJheShub2RlLnBhcmVudE5vZGUuY2hpbGROb2Rlcyk7XG4gICAgdmFyIHNpYmxpbmdzID0gbm9kZXMuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gMTtcbiAgICB9KTtcblxuICAgIHNpYmxpbmdzLnNwbGljZShzaWJsaW5ncy5pbmRleE9mKG5vZGUpLCAxKTtcblxuICAgIHJldHVybiBzaWJsaW5ncztcbiAgfVxuXG4gIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBBMTF5RGlhbG9nO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZSgnQTExeURpYWxvZycsIFtdLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gQTExeURpYWxvZztcbiAgICB9KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0Jykge1xuICAgIGdsb2JhbC5BMTF5RGlhbG9nID0gQTExeURpYWxvZztcbiAgfVxufSh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHdpbmRvdykpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0EsV0FFQTtBQUNBOztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@wpmudev/shared-ui/js/a11y-dialog.js\n");

/***/ }),

/***/ "./node_modules/@wpmudev/shared-ui/js/clipboard.js":
/*!*********************************************************!*\
  !*** ./node_modules/@wpmudev/shared-ui/js/clipboard.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var require;var require;/**\n * clipboard.js v1.7.1\n * https://zenorocha.github.io/clipboard.js\n *\n * Licensed MIT Â© Zeno Rocha\n */\n(function(f){if(true){module.exports=f()}else { var g; }})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n\tvar proto = Element.prototype;\n\n\tproto.matches = proto.matchesSelector ||\n\t\t\t\t\tproto.mozMatchesSelector ||\n\t\t\t\t\tproto.msMatchesSelector ||\n\t\t\t\t\tproto.oMatchesSelector ||\n\t\t\t\t\tproto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest(element, selector) {\n\twhile (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n\t\tif (typeof element.matches === 'function' &&\n\t\t\telement.matches(selector)) {\n\t\t\treturn element;\n\t\t}\n\t\telement = element.parentNode;\n\t}\n}\n\nmodule.exports = closest;\n\n},{}],2:[function(require,module,exports){\nvar closest = require('./closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(element, selector, type, callback, useCapture) {\n\tvar listenerFn = listener.apply(this, arguments);\n\n\telement.addEventListener(type, listenerFn, useCapture);\n\n\treturn {\n\t\tdestroy: function() {\n\t\t\telement.removeEventListener(type, listenerFn, useCapture);\n\t\t}\n\t}\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n\treturn function(e) {\n\t\te.delegateTarget = closest(e.target, selector);\n\n\t\tif (e.delegateTarget) {\n\t\t\tcallback.call(element, e);\n\t\t}\n\t}\n}\n\nmodule.exports = delegate;\n\n},{\"./closest\":1}],3:[function(require,module,exports){\n/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n\treturn value !== undefined\n\t\t&& value instanceof HTMLElement\n\t\t&& value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n\tvar type = Object.prototype.toString.call(value);\n\n\treturn value !== undefined\n\t\t&& (type === '[object NodeList]' || type === '[object HTMLCollection]')\n\t\t&& ('length' in value)\n\t\t&& (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n\treturn typeof value === 'string'\n\t\t|| value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n\tvar type = Object.prototype.toString.call(value);\n\n\treturn type === '[object Function]';\n};\n\n},{}],4:[function(require,module,exports){\nvar is = require('./is');\nvar delegate = require('delegate');\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n\tif (!target && !type && !callback) {\n\t\tthrow new Error('Missing required arguments');\n\t}\n\n\tif (!is.string(type)) {\n\t\tthrow new TypeError('Second argument must be a String');\n\t}\n\n\tif (!is.fn(callback)) {\n\t\tthrow new TypeError('Third argument must be a Function');\n\t}\n\n\tif (is.node(target)) {\n\t\treturn listenNode(target, type, callback);\n\t}\n\telse if (is.nodeList(target)) {\n\t\treturn listenNodeList(target, type, callback);\n\t}\n\telse if (is.string(target)) {\n\t\treturn listenSelector(target, type, callback);\n\t}\n\telse {\n\t\tthrow new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n\t}\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n\tnode.addEventListener(type, callback);\n\n\treturn {\n\t\tdestroy: function() {\n\t\t\tnode.removeEventListener(type, callback);\n\t\t}\n\t}\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n\tArray.prototype.forEach.call(nodeList, function(node) {\n\t\tnode.addEventListener(type, callback);\n\t});\n\n\treturn {\n\t\tdestroy: function() {\n\t\t\tArray.prototype.forEach.call(nodeList, function(node) {\n\t\t\t\tnode.removeEventListener(type, callback);\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n\treturn delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n\n},{\"./is\":3,\"delegate\":2}],5:[function(require,module,exports){\nfunction select(element) {\n\tvar selectedText;\n\n\tif (element.nodeName === 'SELECT') {\n\t\telement.focus();\n\n\t\tselectedText = element.value;\n\t}\n\telse if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n\t\tvar isReadOnly = element.hasAttribute('readonly');\n\n\t\tif (!isReadOnly) {\n\t\t\telement.setAttribute('readonly', '');\n\t\t}\n\n\t\telement.select();\n\t\telement.setSelectionRange(0, element.value.length);\n\n\t\tif (!isReadOnly) {\n\t\t\telement.removeAttribute('readonly');\n\t\t}\n\n\t\tselectedText = element.value;\n\t}\n\telse {\n\t\tif (element.hasAttribute('contenteditable')) {\n\t\t\telement.focus();\n\t\t}\n\n\t\tvar selection = window.getSelection();\n\t\tvar range = document.createRange();\n\n\t\trange.selectNodeContents(element);\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(range);\n\n\t\tselectedText = selection.toString();\n\t}\n\n\treturn selectedText;\n}\n\nmodule.exports = select;\n\n},{}],6:[function(require,module,exports){\nfunction E () {\n\t// Keep this empty so it's easier to inherit from\n\t// (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n\ton: function (name, callback, ctx) {\n\tvar e = this.e || (this.e = {});\n\n\t(e[name] || (e[name] = [])).push({\n\t\tfn: callback,\n\t\tctx: ctx\n\t});\n\n\treturn this;\n\t},\n\n\tonce: function (name, callback, ctx) {\n\tvar self = this;\n\tfunction listener () {\n\t\tself.off(name, listener);\n\t\tcallback.apply(ctx, arguments);\n\t};\n\n\tlistener._ = callback\n\treturn this.on(name, listener, ctx);\n\t},\n\n\temit: function (name) {\n\tvar data = [].slice.call(arguments, 1);\n\tvar evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n\tvar i = 0;\n\tvar len = evtArr.length;\n\n\tfor (i; i < len; i++) {\n\t\tevtArr[i].fn.apply(evtArr[i].ctx, data);\n\t}\n\n\treturn this;\n\t},\n\n\toff: function (name, callback) {\n\tvar e = this.e || (this.e = {});\n\tvar evts = e[name];\n\tvar liveEvents = [];\n\n\tif (evts && callback) {\n\t\tfor (var i = 0, len = evts.length; i < len; i++) {\n\t\tif (evts[i].fn !== callback && evts[i].fn._ !== callback)\n\t\t\tliveEvents.push(evts[i]);\n\t\t}\n\t}\n\n\t// Remove event from queue to prevent memory leak\n\t// Suggested by https://github.com/lazd\n\t// Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n\t(liveEvents.length)\n\t\t? e[name] = liveEvents\n\t\t: delete e[name];\n\n\treturn this;\n\t}\n};\n\nmodule.exports = E;\n\n},{}],7:[function(require,module,exports){\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'select'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, require('select'));\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, global.select);\n\t\tglobal.clipboardAction = mod.exports;\n\t}\n})(this, function (module, _select) {\n\t'use strict';\n\n\tvar _select2 = _interopRequireDefault(_select);\n\n\tfunction _interopRequireDefault(obj) {\n\t\treturn obj && obj.__esModule ? obj : {\n\t\t\tdefault: obj\n\t\t};\n\t}\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n\t\treturn typeof obj;\n\t} : function (obj) {\n\t\treturn obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n\t};\n\n\tfunction _classCallCheck(instance, Constructor) {\n\t\tif (!(instance instanceof Constructor)) {\n\t\t\tthrow new TypeError(\"Cannot call a class as a function\");\n\t\t}\n\t}\n\n\tvar _createClass = function () {\n\t\tfunction defineProperties(target, props) {\n\t\t\tfor (var i = 0; i < props.length; i++) {\n\t\t\t\tvar descriptor = props[i];\n\t\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\n\t\t\t\tdescriptor.configurable = true;\n\t\t\t\tif (\"value\" in descriptor) descriptor.writable = true;\n\t\t\t\tObject.defineProperty(target, descriptor.key, descriptor);\n\t\t\t}\n\t\t}\n\n\t\treturn function (Constructor, protoProps, staticProps) {\n\t\t\tif (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t\t\tif (staticProps) defineProperties(Constructor, staticProps);\n\t\t\treturn Constructor;\n\t\t};\n\t}();\n\n\tvar ClipboardJSAction = function () {\n\t\t/**\n\t\t * @param {Object} options\n\t\t */\n\t\tfunction ClipboardJSAction(options) {\n\t\t\t_classCallCheck(this, ClipboardJSAction);\n\n\t\t\tthis.resolveOptions(options);\n\t\t\tthis.initSelection();\n\t\t}\n\n\t\t/**\n\t\t * Defines base properties passed from constructor.\n\t\t * @param {Object} options\n\t\t */\n\n\n\t\t_createClass(ClipboardJSAction, [{\n\t\t\tkey: 'resolveOptions',\n\t\t\tvalue: function resolveOptions() {\n\t\t\t\tvar options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t\t\t\tthis.action = options.action;\n\t\t\t\tthis.container = options.container;\n\t\t\t\tthis.emitter = options.emitter;\n\t\t\t\tthis.target = options.target;\n\t\t\t\tthis.text = options.text;\n\t\t\t\tthis.trigger = options.trigger;\n\n\t\t\t\tthis.selectedText = '';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'initSelection',\n\t\t\tvalue: function initSelection() {\n\t\t\t\tif (this.text) {\n\t\t\t\t\tthis.selectFake();\n\t\t\t\t} else if (this.target) {\n\t\t\t\t\tthis.selectTarget();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'selectFake',\n\t\t\tvalue: function selectFake() {\n\t\t\t\tvar _this = this;\n\n\t\t\t\tvar isRTL = document.documentElement.getAttribute('dir') == 'rtl';\n\n\t\t\t\tthis.removeFake();\n\n\t\t\t\tthis.fakeHandlerCallback = function () {\n\t\t\t\t\treturn _this.removeFake();\n\t\t\t\t};\n\t\t\t\tthis.fakeHandler = this.container.addEventListener('click', this.fakeHandlerCallback) || true;\n\n\t\t\t\tthis.fakeElem = document.createElement('textarea');\n\t\t\t\t// Prevent zooming on iOS\n\t\t\t\tthis.fakeElem.style.fontSize = '12pt';\n\t\t\t\t// Reset box model\n\t\t\t\tthis.fakeElem.style.border = '0';\n\t\t\t\tthis.fakeElem.style.padding = '0';\n\t\t\t\tthis.fakeElem.style.margin = '0';\n\t\t\t\t// Move element out of screen horizontally\n\t\t\t\tthis.fakeElem.style.position = 'absolute';\n\t\t\t\tthis.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';\n\t\t\t\t// Move element to the same position vertically\n\t\t\t\tvar yPosition = window.pageYOffset || document.documentElement.scrollTop;\n\t\t\t\tthis.fakeElem.style.top = yPosition + 'px';\n\n\t\t\t\tthis.fakeElem.setAttribute('readonly', '');\n\t\t\t\tthis.fakeElem.value = this.text;\n\n\t\t\t\tthis.container.appendChild(this.fakeElem);\n\n\t\t\t\tthis.selectedText = (0, _select2.default)(this.fakeElem);\n\t\t\t\tthis.copyText();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'removeFake',\n\t\t\tvalue: function removeFake() {\n\t\t\t\tif (this.fakeHandler) {\n\t\t\t\t\tthis.container.removeEventListener('click', this.fakeHandlerCallback);\n\t\t\t\t\tthis.fakeHandler = null;\n\t\t\t\t\tthis.fakeHandlerCallback = null;\n\t\t\t\t}\n\n\t\t\t\tif (this.fakeElem) {\n\t\t\t\t\tthis.container.removeChild(this.fakeElem);\n\t\t\t\t\tthis.fakeElem = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'selectTarget',\n\t\t\tvalue: function selectTarget() {\n\t\t\t\tthis.selectedText = (0, _select2.default)(this.target);\n\t\t\t\tthis.copyText();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'copyText',\n\t\t\tvalue: function copyText() {\n\t\t\t\tvar succeeded = void 0;\n\n\t\t\t\ttry {\n\t\t\t\t\tsucceeded = document.execCommand(this.action);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tsucceeded = false;\n\t\t\t\t}\n\n\t\t\t\tthis.handleResult(succeeded);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'handleResult',\n\t\t\tvalue: function handleResult(succeeded) {\n\t\t\t\tthis.emitter.emit(succeeded ? 'success' : 'error', {\n\t\t\t\t\taction: this.action,\n\t\t\t\t\ttext: this.selectedText,\n\t\t\t\t\ttrigger: this.trigger,\n\t\t\t\t\tclearSelection: this.clearSelection.bind(this)\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'clearSelection',\n\t\t\tvalue: function clearSelection() {\n\t\t\t\tif (this.trigger) {\n\t\t\t\t\tthis.trigger.focus();\n\t\t\t\t}\n\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'destroy',\n\t\t\tvalue: function destroy() {\n\t\t\t\tthis.removeFake();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'action',\n\t\t\tset: function set() {\n\t\t\t\tvar action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';\n\n\t\t\t\tthis._action = action;\n\n\t\t\t\tif (this._action !== 'copy' && this._action !== 'cut') {\n\t\t\t\t\tthrow new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n\t\t\t\t}\n\t\t\t},\n\t\t\tget: function get() {\n\t\t\t\treturn this._action;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'target',\n\t\t\tset: function set(target) {\n\t\t\t\tif (target !== undefined) {\n\t\t\t\t\tif (target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target.nodeType === 1) {\n\t\t\t\t\t\tif (this.action === 'copy' && target.hasAttribute('disabled')) {\n\t\t\t\t\t\t\tthrow new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n\t\t\t\t\t\t\tthrow new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._target = target;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error('Invalid \"target\" value, use a valid Element');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tget: function get() {\n\t\t\t\treturn this._target;\n\t\t\t}\n\t\t}]);\n\n\t\treturn ClipboardJSAction;\n\t}();\n\n\tmodule.exports = ClipboardJSAction;\n});\n\n},{\"select\":5}],8:[function(require,module,exports){\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', './clipboard-action', 'tiny-emitter', 'good-listener'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, require('./clipboard-action'), require('tiny-emitter'), require('good-listener'));\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, global.clipboardAction, global.tinyEmitter, global.goodListener);\n\t\tglobal.clipboard = mod.exports;\n\t}\n})(this, function (module, _clipboardAction, _tinyEmitter, _goodListener) {\n\t'use strict';\n\n\tvar _clipboardAction2 = _interopRequireDefault(_clipboardAction);\n\n\tvar _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);\n\n\tvar _goodListener2 = _interopRequireDefault(_goodListener);\n\n\tfunction _interopRequireDefault(obj) {\n\t\treturn obj && obj.__esModule ? obj : {\n\t\t\tdefault: obj\n\t\t};\n\t}\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n\t\treturn typeof obj;\n\t} : function (obj) {\n\t\treturn obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n\t};\n\n\tfunction _classCallCheck(instance, Constructor) {\n\t\tif (!(instance instanceof Constructor)) {\n\t\t\tthrow new TypeError(\"Cannot call a class as a function\");\n\t\t}\n\t}\n\n\tvar _createClass = function () {\n\t\tfunction defineProperties(target, props) {\n\t\t\tfor (var i = 0; i < props.length; i++) {\n\t\t\t\tvar descriptor = props[i];\n\t\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\n\t\t\t\tdescriptor.configurable = true;\n\t\t\t\tif (\"value\" in descriptor) descriptor.writable = true;\n\t\t\t\tObject.defineProperty(target, descriptor.key, descriptor);\n\t\t\t}\n\t\t}\n\n\t\treturn function (Constructor, protoProps, staticProps) {\n\t\t\tif (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t\t\tif (staticProps) defineProperties(Constructor, staticProps);\n\t\t\treturn Constructor;\n\t\t};\n\t}();\n\n\tfunction _possibleConstructorReturn(self, call) {\n\t\tif (!self) {\n\t\t\tthrow new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n\t\t}\n\n\t\treturn call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n\t}\n\n\tfunction _inherits(subClass, superClass) {\n\t\tif (typeof superClass !== \"function\" && superClass !== null) {\n\t\t\tthrow new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n\t\t}\n\n\t\tsubClass.prototype = Object.create(superClass && superClass.prototype, {\n\t\t\tconstructor: {\n\t\t\t\tvalue: subClass,\n\t\t\t\tenumerable: false,\n\t\t\t\twritable: true,\n\t\t\t\tconfigurable: true\n\t\t\t}\n\t\t});\n\t\tif (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n\t}\n\n\tvar ClipboardJS = function (_Emitter) {\n\t\t_inherits(ClipboardJS, _Emitter);\n\n\t\t/**\n\t\t * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n\t\t * @param {Object} options\n\t\t */\n\t\tfunction ClipboardJS(trigger, options) {\n\t\t\t_classCallCheck(this, ClipboardJS);\n\n\t\t\tvar _this = _possibleConstructorReturn(this, (ClipboardJS.__proto__ || Object.getPrototypeOf(ClipboardJS)).call(this));\n\n\t\t\t_this.resolveOptions(options);\n\t\t\t_this.listenClick(trigger);\n\t\t\treturn _this;\n\t\t}\n\n\t\t/**\n\t\t * Defines if attributes would be resolved using internal setter functions\n\t\t * or custom functions that were passed in the constructor.\n\t\t * @param {Object} options\n\t\t */\n\n\n\t\t_createClass(ClipboardJS, [{\n\t\t\tkey: 'resolveOptions',\n\t\t\tvalue: function resolveOptions() {\n\t\t\t\tvar options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t\t\t\tthis.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n\t\t\t\tthis.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n\t\t\t\tthis.text = typeof options.text === 'function' ? options.text : this.defaultText;\n\t\t\t\tthis.container = _typeof(options.container) === 'object' ? options.container : document.body;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'listenClick',\n\t\t\tvalue: function listenClick(trigger) {\n\t\t\t\tvar _this2 = this;\n\n\t\t\t\tthis.listener = (0, _goodListener2.default)(trigger, 'click', function (e) {\n\t\t\t\t\treturn _this2.onClick(e);\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'onClick',\n\t\t\tvalue: function onClick(e) {\n\t\t\t\tvar trigger = e.delegateTarget || e.currentTarget;\n\n\t\t\t\tif (this.clipboardAction) {\n\t\t\t\t\tthis.clipboardAction = null;\n\t\t\t\t}\n\n\t\t\t\tthis.clipboardAction = new _clipboardAction2.default({\n\t\t\t\t\taction: this.action(trigger),\n\t\t\t\t\ttarget: this.target(trigger),\n\t\t\t\t\ttext: this.text(trigger),\n\t\t\t\t\tcontainer: this.container,\n\t\t\t\t\ttrigger: trigger,\n\t\t\t\t\temitter: this\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'defaultAction',\n\t\t\tvalue: function defaultAction(trigger) {\n\t\t\t\treturn getAttributeValue('action', trigger);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'defaultTarget',\n\t\t\tvalue: function defaultTarget(trigger) {\n\t\t\t\tvar selector = getAttributeValue('target', trigger);\n\n\t\t\t\tif (selector) {\n\t\t\t\t\treturn document.querySelector(selector);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'defaultText',\n\t\t\tvalue: function defaultText(trigger) {\n\t\t\t\treturn getAttributeValue('text', trigger);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'destroy',\n\t\t\tvalue: function destroy() {\n\t\t\t\tthis.listener.destroy();\n\n\t\t\t\tif (this.clipboardAction) {\n\t\t\t\t\tthis.clipboardAction.destroy();\n\t\t\t\t\tthis.clipboardAction = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: 'isSupported',\n\t\t\tvalue: function isSupported() {\n\t\t\t\tvar action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n\n\t\t\t\tvar actions = typeof action === 'string' ? [action] : action;\n\t\t\t\tvar support = !!document.queryCommandSupported;\n\n\t\t\t\tactions.forEach(function (action) {\n\t\t\t\t\tsupport = support && !!document.queryCommandSupported(action);\n\t\t\t\t});\n\n\t\t\t\treturn support;\n\t\t\t}\n\t\t}]);\n\n\t\treturn ClipboardJS;\n\t}(_tinyEmitter2.default);\n\n\t/**\n\t * Helper function to retrieve attribute value.\n\t * @param {String} suffix\n\t * @param {Element} element\n\t */\n\tfunction getAttributeValue(suffix, element) {\n\t\tvar attribute = 'data-clipboard-' + suffix;\n\n\t\tif (!element.hasAttribute(attribute)) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn element.getAttribute(attribute);\n\t}\n\n\tmodule.exports = ClipboardJS;\n});\n\n},{\"./clipboard-action\":7,\"good-listener\":4,\"tiny-emitter\":6}]},{},[8])(8)\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHdwbXVkZXYvc2hhcmVkLXVpL2pzL2NsaXBib2FyZC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9Ad3BtdWRldi9zaGFyZWQtdWkvanMvY2xpcGJvYXJkLmpzP2RhM2IiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBjbGlwYm9hcmQuanMgdjEuNy4xXG4gKiBodHRwczovL3plbm9yb2NoYS5naXRodWIuaW8vY2xpcGJvYXJkLmpzXG4gKlxuICogTGljZW5zZWQgTUlUIMKpIFplbm8gUm9jaGFcbiAqL1xuKGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09XCJvYmplY3RcIiYmdHlwZW9mIG1vZHVsZSE9PVwidW5kZWZpbmVkXCIpe21vZHVsZS5leHBvcnRzPWYoKX1lbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT1cImZ1bmN0aW9uXCImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiKXtnPXdpbmRvd31lbHNlIGlmKHR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiKXtnPWdsb2JhbH1lbHNlIGlmKHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuQ2xpcGJvYXJkSlMgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgRE9DVU1FTlRfTk9ERV9UWVBFID0gOTtcblxuLyoqXG4gKiBBIHBvbHlmaWxsIGZvciBFbGVtZW50Lm1hdGNoZXMoKVxuICovXG5pZiAodHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmICFFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzKSB7XG5cdHZhciBwcm90byA9IEVsZW1lbnQucHJvdG90eXBlO1xuXG5cdHByb3RvLm1hdGNoZXMgPSBwcm90by5tYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRcdFx0XHRwcm90by5tb3pNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRcdFx0XHRwcm90by5tc01hdGNoZXNTZWxlY3RvciB8fFxuXHRcdFx0XHRcdHByb3RvLm9NYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRcdFx0XHRwcm90by53ZWJraXRNYXRjaGVzU2VsZWN0b3I7XG59XG5cbi8qKlxuICogRmluZHMgdGhlIGNsb3Nlc3QgcGFyZW50IHRoYXQgbWF0Y2hlcyBhIHNlbGVjdG9yLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gY2xvc2VzdChlbGVtZW50LCBzZWxlY3Rvcikge1xuXHR3aGlsZSAoZWxlbWVudCAmJiBlbGVtZW50Lm5vZGVUeXBlICE9PSBET0NVTUVOVF9OT0RFX1RZUEUpIHtcblx0XHRpZiAodHlwZW9mIGVsZW1lbnQubWF0Y2hlcyA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdFx0ZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSkge1xuXHRcdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdFx0fVxuXHRcdGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjbG9zZXN0O1xuXG59LHt9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBjbG9zZXN0ID0gcmVxdWlyZSgnLi9jbG9zZXN0Jyk7XG5cbi8qKlxuICogRGVsZWdhdGVzIGV2ZW50IHRvIGEgc2VsZWN0b3IuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtCb29sZWFufSB1c2VDYXB0dXJlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGRlbGVnYXRlKGVsZW1lbnQsIHNlbGVjdG9yLCB0eXBlLCBjYWxsYmFjaywgdXNlQ2FwdHVyZSkge1xuXHR2YXIgbGlzdGVuZXJGbiA9IGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cblx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyRm4sIHVzZUNhcHR1cmUpO1xuXG5cdHJldHVybiB7XG5cdFx0ZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdFx0XHRlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXJGbiwgdXNlQ2FwdHVyZSk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogRmluZHMgY2xvc2VzdCBtYXRjaCBhbmQgaW52b2tlcyBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gbGlzdGVuZXIoZWxlbWVudCwgc2VsZWN0b3IsIHR5cGUsIGNhbGxiYWNrKSB7XG5cdHJldHVybiBmdW5jdGlvbihlKSB7XG5cdFx0ZS5kZWxlZ2F0ZVRhcmdldCA9IGNsb3Nlc3QoZS50YXJnZXQsIHNlbGVjdG9yKTtcblxuXHRcdGlmIChlLmRlbGVnYXRlVGFyZ2V0KSB7XG5cdFx0XHRjYWxsYmFjay5jYWxsKGVsZW1lbnQsIGUpO1xuXHRcdH1cblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlbGVnYXRlO1xuXG59LHtcIi4vY2xvc2VzdFwiOjF9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qKlxuICogQ2hlY2sgaWYgYXJndW1lbnQgaXMgYSBIVE1MIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLm5vZGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZFxuXHRcdCYmIHZhbHVlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnRcblx0XHQmJiB2YWx1ZS5ub2RlVHlwZSA9PT0gMTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYXJndW1lbnQgaXMgYSBsaXN0IG9mIEhUTUwgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLm5vZGVMaXN0ID0gZnVuY3Rpb24odmFsdWUpIHtcblx0dmFyIHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXG5cdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkXG5cdFx0JiYgKHR5cGUgPT09ICdbb2JqZWN0IE5vZGVMaXN0XScgfHwgdHlwZSA9PT0gJ1tvYmplY3QgSFRNTENvbGxlY3Rpb25dJylcblx0XHQmJiAoJ2xlbmd0aCcgaW4gdmFsdWUpXG5cdFx0JiYgKHZhbHVlLmxlbmd0aCA9PT0gMCB8fCBleHBvcnRzLm5vZGUodmFsdWVbMF0pKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYXJndW1lbnQgaXMgYSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLnN0cmluZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnXG5cdFx0fHwgdmFsdWUgaW5zdGFuY2VvZiBTdHJpbmc7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGFyZ3VtZW50IGlzIGEgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLmZuID0gZnVuY3Rpb24odmFsdWUpIHtcblx0dmFyIHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXG5cdHJldHVybiB0eXBlID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufTtcblxufSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgaXMgPSByZXF1aXJlKCcuL2lzJyk7XG52YXIgZGVsZWdhdGUgPSByZXF1aXJlKCdkZWxlZ2F0ZScpO1xuXG4vKipcbiAqIFZhbGlkYXRlcyBhbGwgcGFyYW1zIGFuZCBjYWxscyB0aGUgcmlnaHRcbiAqIGxpc3RlbmVyIGZ1bmN0aW9uIGJhc2VkIG9uIGl0cyB0YXJnZXQgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xIVE1MRWxlbWVudHxIVE1MQ29sbGVjdGlvbnxOb2RlTGlzdH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gbGlzdGVuKHRhcmdldCwgdHlwZSwgY2FsbGJhY2spIHtcblx0aWYgKCF0YXJnZXQgJiYgIXR5cGUgJiYgIWNhbGxiYWNrKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkIGFyZ3VtZW50cycpO1xuXHR9XG5cblx0aWYgKCFpcy5zdHJpbmcodHlwZSkpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdTZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBhIFN0cmluZycpO1xuXHR9XG5cblx0aWYgKCFpcy5mbihjYWxsYmFjaykpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGlyZCBhcmd1bWVudCBtdXN0IGJlIGEgRnVuY3Rpb24nKTtcblx0fVxuXG5cdGlmIChpcy5ub2RlKHRhcmdldCkpIHtcblx0XHRyZXR1cm4gbGlzdGVuTm9kZSh0YXJnZXQsIHR5cGUsIGNhbGxiYWNrKTtcblx0fVxuXHRlbHNlIGlmIChpcy5ub2RlTGlzdCh0YXJnZXQpKSB7XG5cdFx0cmV0dXJuIGxpc3Rlbk5vZGVMaXN0KHRhcmdldCwgdHlwZSwgY2FsbGJhY2spO1xuXHR9XG5cdGVsc2UgaWYgKGlzLnN0cmluZyh0YXJnZXQpKSB7XG5cdFx0cmV0dXJuIGxpc3RlblNlbGVjdG9yKHRhcmdldCwgdHlwZSwgY2FsbGJhY2spO1xuXHR9XG5cdGVsc2Uge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBTdHJpbmcsIEhUTUxFbGVtZW50LCBIVE1MQ29sbGVjdGlvbiwgb3IgTm9kZUxpc3QnKTtcblx0fVxufVxuXG4vKipcbiAqIEFkZHMgYW4gZXZlbnQgbGlzdGVuZXIgdG8gYSBIVE1MIGVsZW1lbnRcbiAqIGFuZCByZXR1cm5zIGEgcmVtb3ZlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGVcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBsaXN0ZW5Ob2RlKG5vZGUsIHR5cGUsIGNhbGxiYWNrKSB7XG5cdG5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjayk7XG5cblx0cmV0dXJuIHtcblx0XHRkZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHRcdG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjayk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGEgbGlzdCBvZiBIVE1MIGVsZW1lbnRzXG4gKiBhbmQgcmV0dXJucyBhIHJlbW92ZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge05vZGVMaXN0fEhUTUxDb2xsZWN0aW9ufSBub2RlTGlzdFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGxpc3Rlbk5vZGVMaXN0KG5vZGVMaXN0LCB0eXBlLCBjYWxsYmFjaykge1xuXHRBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG5vZGVMaXN0LCBmdW5jdGlvbihub2RlKSB7XG5cdFx0bm9kZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrKTtcblx0fSk7XG5cblx0cmV0dXJuIHtcblx0XHRkZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwobm9kZUxpc3QsIGZ1bmN0aW9uKG5vZGUpIHtcblx0XHRcdFx0bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIEFkZCBhbiBldmVudCBsaXN0ZW5lciB0byBhIHNlbGVjdG9yXG4gKiBhbmQgcmV0dXJucyBhIHJlbW92ZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBsaXN0ZW5TZWxlY3RvcihzZWxlY3RvciwgdHlwZSwgY2FsbGJhY2spIHtcblx0cmV0dXJuIGRlbGVnYXRlKGRvY3VtZW50LmJvZHksIHNlbGVjdG9yLCB0eXBlLCBjYWxsYmFjayk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbGlzdGVuO1xuXG59LHtcIi4vaXNcIjozLFwiZGVsZWdhdGVcIjoyfV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5mdW5jdGlvbiBzZWxlY3QoZWxlbWVudCkge1xuXHR2YXIgc2VsZWN0ZWRUZXh0O1xuXG5cdGlmIChlbGVtZW50Lm5vZGVOYW1lID09PSAnU0VMRUNUJykge1xuXHRcdGVsZW1lbnQuZm9jdXMoKTtcblxuXHRcdHNlbGVjdGVkVGV4dCA9IGVsZW1lbnQudmFsdWU7XG5cdH1cblx0ZWxzZSBpZiAoZWxlbWVudC5ub2RlTmFtZSA9PT0gJ0lOUFVUJyB8fCBlbGVtZW50Lm5vZGVOYW1lID09PSAnVEVYVEFSRUEnKSB7XG5cdFx0dmFyIGlzUmVhZE9ubHkgPSBlbGVtZW50Lmhhc0F0dHJpYnV0ZSgncmVhZG9ubHknKTtcblxuXHRcdGlmICghaXNSZWFkT25seSkge1xuXHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JywgJycpO1xuXHRcdH1cblxuXHRcdGVsZW1lbnQuc2VsZWN0KCk7XG5cdFx0ZWxlbWVudC5zZXRTZWxlY3Rpb25SYW5nZSgwLCBlbGVtZW50LnZhbHVlLmxlbmd0aCk7XG5cblx0XHRpZiAoIWlzUmVhZE9ubHkpIHtcblx0XHRcdGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdyZWFkb25seScpO1xuXHRcdH1cblxuXHRcdHNlbGVjdGVkVGV4dCA9IGVsZW1lbnQudmFsdWU7XG5cdH1cblx0ZWxzZSB7XG5cdFx0aWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKSkge1xuXHRcdFx0ZWxlbWVudC5mb2N1cygpO1xuXHRcdH1cblxuXHRcdHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0dmFyIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcblxuXHRcdHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhlbGVtZW50KTtcblx0XHRzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG5cdFx0c2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTtcblxuXHRcdHNlbGVjdGVkVGV4dCA9IHNlbGVjdGlvbi50b1N0cmluZygpO1xuXHR9XG5cblx0cmV0dXJuIHNlbGVjdGVkVGV4dDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZWxlY3Q7XG5cbn0se31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuZnVuY3Rpb24gRSAoKSB7XG5cdC8vIEtlZXAgdGhpcyBlbXB0eSBzbyBpdCdzIGVhc2llciB0byBpbmhlcml0IGZyb21cblx0Ly8gKHZpYSBodHRwczovL2dpdGh1Yi5jb20vbGlwc21hY2sgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRjb3JnYW4vdGlueS1lbWl0dGVyL2lzc3Vlcy8zKVxufVxuXG5FLnByb3RvdHlwZSA9IHtcblx0b246IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaywgY3R4KSB7XG5cdHZhciBlID0gdGhpcy5lIHx8ICh0aGlzLmUgPSB7fSk7XG5cblx0KGVbbmFtZV0gfHwgKGVbbmFtZV0gPSBbXSkpLnB1c2goe1xuXHRcdGZuOiBjYWxsYmFjayxcblx0XHRjdHg6IGN0eFxuXHR9KTtcblxuXHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRvbmNlOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2ssIGN0eCkge1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdGZ1bmN0aW9uIGxpc3RlbmVyICgpIHtcblx0XHRzZWxmLm9mZihuYW1lLCBsaXN0ZW5lcik7XG5cdFx0Y2FsbGJhY2suYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xuXHR9O1xuXG5cdGxpc3RlbmVyLl8gPSBjYWxsYmFja1xuXHRyZXR1cm4gdGhpcy5vbihuYW1lLCBsaXN0ZW5lciwgY3R4KTtcblx0fSxcblxuXHRlbWl0OiBmdW5jdGlvbiAobmFtZSkge1xuXHR2YXIgZGF0YSA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblx0dmFyIGV2dEFyciA9ICgodGhpcy5lIHx8ICh0aGlzLmUgPSB7fSkpW25hbWVdIHx8IFtdKS5zbGljZSgpO1xuXHR2YXIgaSA9IDA7XG5cdHZhciBsZW4gPSBldnRBcnIubGVuZ3RoO1xuXG5cdGZvciAoaTsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0ZXZ0QXJyW2ldLmZuLmFwcGx5KGV2dEFycltpXS5jdHgsIGRhdGEpO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0b2ZmOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHtcblx0dmFyIGUgPSB0aGlzLmUgfHwgKHRoaXMuZSA9IHt9KTtcblx0dmFyIGV2dHMgPSBlW25hbWVdO1xuXHR2YXIgbGl2ZUV2ZW50cyA9IFtdO1xuXG5cdGlmIChldnRzICYmIGNhbGxiYWNrKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIGxlbiA9IGV2dHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRpZiAoZXZ0c1tpXS5mbiAhPT0gY2FsbGJhY2sgJiYgZXZ0c1tpXS5mbi5fICE9PSBjYWxsYmFjaylcblx0XHRcdGxpdmVFdmVudHMucHVzaChldnRzW2ldKTtcblx0XHR9XG5cdH1cblxuXHQvLyBSZW1vdmUgZXZlbnQgZnJvbSBxdWV1ZSB0byBwcmV2ZW50IG1lbW9yeSBsZWFrXG5cdC8vIFN1Z2dlc3RlZCBieSBodHRwczovL2dpdGh1Yi5jb20vbGF6ZFxuXHQvLyBSZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGNvcmdhbi90aW55LWVtaXR0ZXIvY29tbWl0L2M2ZWJmYWE5YmM5NzNiMzNkMTEwYTg0YTMwNzc0MmI3Y2Y5NGM5NTMjY29tbWl0Y29tbWVudC01MDI0OTEwXG5cblx0KGxpdmVFdmVudHMubGVuZ3RoKVxuXHRcdD8gZVtuYW1lXSA9IGxpdmVFdmVudHNcblx0XHQ6IGRlbGV0ZSBlW25hbWVdO1xuXG5cdHJldHVybiB0aGlzO1xuXHR9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEU7XG5cbn0se31dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKFsnbW9kdWxlJywgJ3NlbGVjdCddLCBmYWN0b3J5KTtcblx0fSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdGZhY3RvcnkobW9kdWxlLCByZXF1aXJlKCdzZWxlY3QnKSk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIG1vZCA9IHtcblx0XHRcdGV4cG9ydHM6IHt9XG5cdFx0fTtcblx0XHRmYWN0b3J5KG1vZCwgZ2xvYmFsLnNlbGVjdCk7XG5cdFx0Z2xvYmFsLmNsaXBib2FyZEFjdGlvbiA9IG1vZC5leHBvcnRzO1xuXHR9XG59KSh0aGlzLCBmdW5jdGlvbiAobW9kdWxlLCBfc2VsZWN0KSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgX3NlbGVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWxlY3QpO1xuXG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdFx0cmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHtcblx0XHRcdGRlZmF1bHQ6IG9ialxuXHRcdH07XG5cdH1cblxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuXHRcdHJldHVybiB0eXBlb2Ygb2JqO1xuXHR9IDogZnVuY3Rpb24gKG9iaikge1xuXHRcdHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0XHRpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0XHR9XG5cdH1cblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHRcdGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuXHRcdFx0XHRkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG5cdFx0XHRcdGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcblx0XHRcdFx0aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdFx0XHRpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuXHRcdFx0aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG5cdFx0XHRyZXR1cm4gQ29uc3RydWN0b3I7XG5cdFx0fTtcblx0fSgpO1xuXG5cdHZhciBDbGlwYm9hcmRKU0FjdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHQvKipcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIENsaXBib2FyZEpTQWN0aW9uKG9wdGlvbnMpIHtcblx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbGlwYm9hcmRKU0FjdGlvbik7XG5cblx0XHRcdHRoaXMucmVzb2x2ZU9wdGlvbnMob3B0aW9ucyk7XG5cdFx0XHR0aGlzLmluaXRTZWxlY3Rpb24oKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIGJhc2UgcHJvcGVydGllcyBwYXNzZWQgZnJvbSBjb25zdHJ1Y3Rvci5cblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHRcdCAqL1xuXG5cblx0XHRfY3JlYXRlQ2xhc3MoQ2xpcGJvYXJkSlNBY3Rpb24sIFt7XG5cdFx0XHRrZXk6ICdyZXNvbHZlT3B0aW9ucycsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZU9wdGlvbnMoKSB7XG5cdFx0XHRcdHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuXHRcdFx0XHR0aGlzLmFjdGlvbiA9IG9wdGlvbnMuYWN0aW9uO1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lciA9IG9wdGlvbnMuY29udGFpbmVyO1xuXHRcdFx0XHR0aGlzLmVtaXR0ZXIgPSBvcHRpb25zLmVtaXR0ZXI7XG5cdFx0XHRcdHRoaXMudGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQ7XG5cdFx0XHRcdHRoaXMudGV4dCA9IG9wdGlvbnMudGV4dDtcblx0XHRcdFx0dGhpcy50cmlnZ2VyID0gb3B0aW9ucy50cmlnZ2VyO1xuXG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWRUZXh0ID0gJyc7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnaW5pdFNlbGVjdGlvbicsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gaW5pdFNlbGVjdGlvbigpIHtcblx0XHRcdFx0aWYgKHRoaXMudGV4dCkge1xuXHRcdFx0XHRcdHRoaXMuc2VsZWN0RmFrZSgpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMudGFyZ2V0KSB7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RUYXJnZXQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ3NlbGVjdEZha2UnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHNlbGVjdEZha2UoKSB7XG5cdFx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRcdFx0dmFyIGlzUlRMID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGlyJykgPT0gJ3J0bCc7XG5cblx0XHRcdFx0dGhpcy5yZW1vdmVGYWtlKCk7XG5cblx0XHRcdFx0dGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHJldHVybiBfdGhpcy5yZW1vdmVGYWtlKCk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdHRoaXMuZmFrZUhhbmRsZXIgPSB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZmFrZUhhbmRsZXJDYWxsYmFjaykgfHwgdHJ1ZTtcblxuXHRcdFx0XHR0aGlzLmZha2VFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcblx0XHRcdFx0Ly8gUHJldmVudCB6b29taW5nIG9uIGlPU1xuXHRcdFx0XHR0aGlzLmZha2VFbGVtLnN0eWxlLmZvbnRTaXplID0gJzEycHQnO1xuXHRcdFx0XHQvLyBSZXNldCBib3ggbW9kZWxcblx0XHRcdFx0dGhpcy5mYWtlRWxlbS5zdHlsZS5ib3JkZXIgPSAnMCc7XG5cdFx0XHRcdHRoaXMuZmFrZUVsZW0uc3R5bGUucGFkZGluZyA9ICcwJztcblx0XHRcdFx0dGhpcy5mYWtlRWxlbS5zdHlsZS5tYXJnaW4gPSAnMCc7XG5cdFx0XHRcdC8vIE1vdmUgZWxlbWVudCBvdXQgb2Ygc2NyZWVuIGhvcml6b250YWxseVxuXHRcdFx0XHR0aGlzLmZha2VFbGVtLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0XHRcdFx0dGhpcy5mYWtlRWxlbS5zdHlsZVtpc1JUTCA/ICdyaWdodCcgOiAnbGVmdCddID0gJy05OTk5cHgnO1xuXHRcdFx0XHQvLyBNb3ZlIGVsZW1lbnQgdG8gdGhlIHNhbWUgcG9zaXRpb24gdmVydGljYWxseVxuXHRcdFx0XHR2YXIgeVBvc2l0aW9uID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG5cdFx0XHRcdHRoaXMuZmFrZUVsZW0uc3R5bGUudG9wID0geVBvc2l0aW9uICsgJ3B4JztcblxuXHRcdFx0XHR0aGlzLmZha2VFbGVtLnNldEF0dHJpYnV0ZSgncmVhZG9ubHknLCAnJyk7XG5cdFx0XHRcdHRoaXMuZmFrZUVsZW0udmFsdWUgPSB0aGlzLnRleHQ7XG5cblx0XHRcdFx0dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5mYWtlRWxlbSk7XG5cblx0XHRcdFx0dGhpcy5zZWxlY3RlZFRleHQgPSAoMCwgX3NlbGVjdDIuZGVmYXVsdCkodGhpcy5mYWtlRWxlbSk7XG5cdFx0XHRcdHRoaXMuY29weVRleHQoKTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdyZW1vdmVGYWtlJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiByZW1vdmVGYWtlKCkge1xuXHRcdFx0XHRpZiAodGhpcy5mYWtlSGFuZGxlcikge1xuXHRcdFx0XHRcdHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrKTtcblx0XHRcdFx0XHR0aGlzLmZha2VIYW5kbGVyID0gbnVsbDtcblx0XHRcdFx0XHR0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2sgPSBudWxsO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHRoaXMuZmFrZUVsZW0pIHtcblx0XHRcdFx0XHR0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLmZha2VFbGVtKTtcblx0XHRcdFx0XHR0aGlzLmZha2VFbGVtID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ3NlbGVjdFRhcmdldCcsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gc2VsZWN0VGFyZ2V0KCkge1xuXHRcdFx0XHR0aGlzLnNlbGVjdGVkVGV4dCA9ICgwLCBfc2VsZWN0Mi5kZWZhdWx0KSh0aGlzLnRhcmdldCk7XG5cdFx0XHRcdHRoaXMuY29weVRleHQoKTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdjb3B5VGV4dCcsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gY29weVRleHQoKSB7XG5cdFx0XHRcdHZhciBzdWNjZWVkZWQgPSB2b2lkIDA7XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRzdWNjZWVkZWQgPSBkb2N1bWVudC5leGVjQ29tbWFuZCh0aGlzLmFjdGlvbik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdHN1Y2NlZWRlZCA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5oYW5kbGVSZXN1bHQoc3VjY2VlZGVkKTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdoYW5kbGVSZXN1bHQnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVJlc3VsdChzdWNjZWVkZWQpIHtcblx0XHRcdFx0dGhpcy5lbWl0dGVyLmVtaXQoc3VjY2VlZGVkID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJywge1xuXHRcdFx0XHRcdGFjdGlvbjogdGhpcy5hY3Rpb24sXG5cdFx0XHRcdFx0dGV4dDogdGhpcy5zZWxlY3RlZFRleHQsXG5cdFx0XHRcdFx0dHJpZ2dlcjogdGhpcy50cmlnZ2VyLFxuXHRcdFx0XHRcdGNsZWFyU2VsZWN0aW9uOiB0aGlzLmNsZWFyU2VsZWN0aW9uLmJpbmQodGhpcylcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnY2xlYXJTZWxlY3Rpb24nLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uKCkge1xuXHRcdFx0XHRpZiAodGhpcy50cmlnZ2VyKSB7XG5cdFx0XHRcdFx0dGhpcy50cmlnZ2VyLmZvY3VzKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnZGVzdHJveScsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRcdFx0dGhpcy5yZW1vdmVGYWtlKCk7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnYWN0aW9uJyxcblx0XHRcdHNldDogZnVuY3Rpb24gc2V0KCkge1xuXHRcdFx0XHR2YXIgYWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnY29weSc7XG5cblx0XHRcdFx0dGhpcy5fYWN0aW9uID0gYWN0aW9uO1xuXG5cdFx0XHRcdGlmICh0aGlzLl9hY3Rpb24gIT09ICdjb3B5JyAmJiB0aGlzLl9hY3Rpb24gIT09ICdjdXQnKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFwiYWN0aW9uXCIgdmFsdWUsIHVzZSBlaXRoZXIgXCJjb3B5XCIgb3IgXCJjdXRcIicpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0Z2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9hY3Rpb247XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAndGFyZ2V0Jyxcblx0XHRcdHNldDogZnVuY3Rpb24gc2V0KHRhcmdldCkge1xuXHRcdFx0XHRpZiAodGFyZ2V0ICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRpZiAodGFyZ2V0ICYmICh0eXBlb2YgdGFyZ2V0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih0YXJnZXQpKSA9PT0gJ29iamVjdCcgJiYgdGFyZ2V0Lm5vZGVUeXBlID09PSAxKSB7XG5cdFx0XHRcdFx0XHRpZiAodGhpcy5hY3Rpb24gPT09ICdjb3B5JyAmJiB0YXJnZXQuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG5cdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignSW52YWxpZCBcInRhcmdldFwiIGF0dHJpYnV0ZS4gUGxlYXNlIHVzZSBcInJlYWRvbmx5XCIgaW5zdGVhZCBvZiBcImRpc2FibGVkXCIgYXR0cmlidXRlJyk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmICh0aGlzLmFjdGlvbiA9PT0gJ2N1dCcgJiYgKHRhcmdldC5oYXNBdHRyaWJ1dGUoJ3JlYWRvbmx5JykgfHwgdGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkpIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFwidGFyZ2V0XCIgYXR0cmlidXRlLiBZb3UgY2FuXFwndCBjdXQgdGV4dCBmcm9tIGVsZW1lbnRzIHdpdGggXCJyZWFkb25seVwiIG9yIFwiZGlzYWJsZWRcIiBhdHRyaWJ1dGVzJyk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHRoaXMuX3RhcmdldCA9IHRhcmdldDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFwidGFyZ2V0XCIgdmFsdWUsIHVzZSBhIHZhbGlkIEVsZW1lbnQnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX3RhcmdldDtcblx0XHRcdH1cblx0XHR9XSk7XG5cblx0XHRyZXR1cm4gQ2xpcGJvYXJkSlNBY3Rpb247XG5cdH0oKTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IENsaXBib2FyZEpTQWN0aW9uO1xufSk7XG5cbn0se1wic2VsZWN0XCI6NX1dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKFsnbW9kdWxlJywgJy4vY2xpcGJvYXJkLWFjdGlvbicsICd0aW55LWVtaXR0ZXInLCAnZ29vZC1saXN0ZW5lciddLCBmYWN0b3J5KTtcblx0fSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdGZhY3RvcnkobW9kdWxlLCByZXF1aXJlKCcuL2NsaXBib2FyZC1hY3Rpb24nKSwgcmVxdWlyZSgndGlueS1lbWl0dGVyJyksIHJlcXVpcmUoJ2dvb2QtbGlzdGVuZXInKSk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIG1vZCA9IHtcblx0XHRcdGV4cG9ydHM6IHt9XG5cdFx0fTtcblx0XHRmYWN0b3J5KG1vZCwgZ2xvYmFsLmNsaXBib2FyZEFjdGlvbiwgZ2xvYmFsLnRpbnlFbWl0dGVyLCBnbG9iYWwuZ29vZExpc3RlbmVyKTtcblx0XHRnbG9iYWwuY2xpcGJvYXJkID0gbW9kLmV4cG9ydHM7XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uIChtb2R1bGUsIF9jbGlwYm9hcmRBY3Rpb24sIF90aW55RW1pdHRlciwgX2dvb2RMaXN0ZW5lcikge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIF9jbGlwYm9hcmRBY3Rpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xpcGJvYXJkQWN0aW9uKTtcblxuXHR2YXIgX3RpbnlFbWl0dGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RpbnlFbWl0dGVyKTtcblxuXHR2YXIgX2dvb2RMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nb29kTGlzdGVuZXIpO1xuXG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdFx0cmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHtcblx0XHRcdGRlZmF1bHQ6IG9ialxuXHRcdH07XG5cdH1cblxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuXHRcdHJldHVybiB0eXBlb2Ygb2JqO1xuXHR9IDogZnVuY3Rpb24gKG9iaikge1xuXHRcdHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0XHRpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0XHR9XG5cdH1cblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHRcdGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuXHRcdFx0XHRkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG5cdFx0XHRcdGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcblx0XHRcdFx0aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdFx0XHRpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuXHRcdFx0aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG5cdFx0XHRyZXR1cm4gQ29uc3RydWN0b3I7XG5cdFx0fTtcblx0fSgpO1xuXG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcblx0XHRpZiAoIXNlbGYpIHtcblx0XHRcdHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHRcdGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpO1xuXHRcdH1cblxuXHRcdHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuXHRcdFx0Y29uc3RydWN0b3I6IHtcblx0XHRcdFx0dmFsdWU6IHN1YkNsYXNzLFxuXHRcdFx0XHRlbnVtZXJhYmxlOiBmYWxzZSxcblx0XHRcdFx0d3JpdGFibGU6IHRydWUsXG5cdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXG5cdHZhciBDbGlwYm9hcmRKUyA9IGZ1bmN0aW9uIChfRW1pdHRlcikge1xuXHRcdF9pbmhlcml0cyhDbGlwYm9hcmRKUywgX0VtaXR0ZXIpO1xuXG5cdFx0LyoqXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd8SFRNTEVsZW1lbnR8SFRNTENvbGxlY3Rpb258Tm9kZUxpc3R9IHRyaWdnZXJcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIENsaXBib2FyZEpTKHRyaWdnZXIsIG9wdGlvbnMpIHtcblx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbGlwYm9hcmRKUyk7XG5cblx0XHRcdHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDbGlwYm9hcmRKUy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENsaXBib2FyZEpTKSkuY2FsbCh0aGlzKSk7XG5cblx0XHRcdF90aGlzLnJlc29sdmVPcHRpb25zKG9wdGlvbnMpO1xuXHRcdFx0X3RoaXMubGlzdGVuQ2xpY2sodHJpZ2dlcik7XG5cdFx0XHRyZXR1cm4gX3RoaXM7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyBpZiBhdHRyaWJ1dGVzIHdvdWxkIGJlIHJlc29sdmVkIHVzaW5nIGludGVybmFsIHNldHRlciBmdW5jdGlvbnNcblx0XHQgKiBvciBjdXN0b20gZnVuY3Rpb25zIHRoYXQgd2VyZSBwYXNzZWQgaW4gdGhlIGNvbnN0cnVjdG9yLlxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdFx0ICovXG5cblxuXHRcdF9jcmVhdGVDbGFzcyhDbGlwYm9hcmRKUywgW3tcblx0XHRcdGtleTogJ3Jlc29sdmVPcHRpb25zJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiByZXNvbHZlT3B0aW9ucygpIHtcblx0XHRcdFx0dmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG5cdFx0XHRcdHRoaXMuYWN0aW9uID0gdHlwZW9mIG9wdGlvbnMuYWN0aW9uID09PSAnZnVuY3Rpb24nID8gb3B0aW9ucy5hY3Rpb24gOiB0aGlzLmRlZmF1bHRBY3Rpb247XG5cdFx0XHRcdHRoaXMudGFyZ2V0ID0gdHlwZW9mIG9wdGlvbnMudGFyZ2V0ID09PSAnZnVuY3Rpb24nID8gb3B0aW9ucy50YXJnZXQgOiB0aGlzLmRlZmF1bHRUYXJnZXQ7XG5cdFx0XHRcdHRoaXMudGV4dCA9IHR5cGVvZiBvcHRpb25zLnRleHQgPT09ICdmdW5jdGlvbicgPyBvcHRpb25zLnRleHQgOiB0aGlzLmRlZmF1bHRUZXh0O1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lciA9IF90eXBlb2Yob3B0aW9ucy5jb250YWluZXIpID09PSAnb2JqZWN0JyA/IG9wdGlvbnMuY29udGFpbmVyIDogZG9jdW1lbnQuYm9keTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdsaXN0ZW5DbGljaycsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gbGlzdGVuQ2xpY2sodHJpZ2dlcikge1xuXHRcdFx0XHR2YXIgX3RoaXMyID0gdGhpcztcblxuXHRcdFx0XHR0aGlzLmxpc3RlbmVyID0gKDAsIF9nb29kTGlzdGVuZXIyLmRlZmF1bHQpKHRyaWdnZXIsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0cmV0dXJuIF90aGlzMi5vbkNsaWNrKGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdvbkNsaWNrJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcblx0XHRcdFx0dmFyIHRyaWdnZXIgPSBlLmRlbGVnYXRlVGFyZ2V0IHx8IGUuY3VycmVudFRhcmdldDtcblxuXHRcdFx0XHRpZiAodGhpcy5jbGlwYm9hcmRBY3Rpb24pIHtcblx0XHRcdFx0XHR0aGlzLmNsaXBib2FyZEFjdGlvbiA9IG51bGw7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLmNsaXBib2FyZEFjdGlvbiA9IG5ldyBfY2xpcGJvYXJkQWN0aW9uMi5kZWZhdWx0KHtcblx0XHRcdFx0XHRhY3Rpb246IHRoaXMuYWN0aW9uKHRyaWdnZXIpLFxuXHRcdFx0XHRcdHRhcmdldDogdGhpcy50YXJnZXQodHJpZ2dlciksXG5cdFx0XHRcdFx0dGV4dDogdGhpcy50ZXh0KHRyaWdnZXIpLFxuXHRcdFx0XHRcdGNvbnRhaW5lcjogdGhpcy5jb250YWluZXIsXG5cdFx0XHRcdFx0dHJpZ2dlcjogdHJpZ2dlcixcblx0XHRcdFx0XHRlbWl0dGVyOiB0aGlzXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ2RlZmF1bHRBY3Rpb24nLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGRlZmF1bHRBY3Rpb24odHJpZ2dlcikge1xuXHRcdFx0XHRyZXR1cm4gZ2V0QXR0cmlidXRlVmFsdWUoJ2FjdGlvbicsIHRyaWdnZXIpO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ2RlZmF1bHRUYXJnZXQnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGRlZmF1bHRUYXJnZXQodHJpZ2dlcikge1xuXHRcdFx0XHR2YXIgc2VsZWN0b3IgPSBnZXRBdHRyaWJ1dGVWYWx1ZSgndGFyZ2V0JywgdHJpZ2dlcik7XG5cblx0XHRcdFx0aWYgKHNlbGVjdG9yKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnZGVmYXVsdFRleHQnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGRlZmF1bHRUZXh0KHRyaWdnZXIpIHtcblx0XHRcdFx0cmV0dXJuIGdldEF0dHJpYnV0ZVZhbHVlKCd0ZXh0JywgdHJpZ2dlcik7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnZGVzdHJveScsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRcdFx0dGhpcy5saXN0ZW5lci5kZXN0cm95KCk7XG5cblx0XHRcdFx0aWYgKHRoaXMuY2xpcGJvYXJkQWN0aW9uKSB7XG5cdFx0XHRcdFx0dGhpcy5jbGlwYm9hcmRBY3Rpb24uZGVzdHJveSgpO1xuXHRcdFx0XHRcdHRoaXMuY2xpcGJvYXJkQWN0aW9uID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1dLCBbe1xuXHRcdFx0a2V5OiAnaXNTdXBwb3J0ZWQnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkge1xuXHRcdFx0XHR2YXIgYWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbJ2NvcHknLCAnY3V0J107XG5cblx0XHRcdFx0dmFyIGFjdGlvbnMgPSB0eXBlb2YgYWN0aW9uID09PSAnc3RyaW5nJyA/IFthY3Rpb25dIDogYWN0aW9uO1xuXHRcdFx0XHR2YXIgc3VwcG9ydCA9ICEhZG9jdW1lbnQucXVlcnlDb21tYW5kU3VwcG9ydGVkO1xuXG5cdFx0XHRcdGFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uKSB7XG5cdFx0XHRcdFx0c3VwcG9ydCA9IHN1cHBvcnQgJiYgISFkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoYWN0aW9uKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0cmV0dXJuIHN1cHBvcnQ7XG5cdFx0XHR9XG5cdFx0fV0pO1xuXG5cdFx0cmV0dXJuIENsaXBib2FyZEpTO1xuXHR9KF90aW55RW1pdHRlcjIuZGVmYXVsdCk7XG5cblx0LyoqXG5cdCAqIEhlbHBlciBmdW5jdGlvbiB0byByZXRyaWV2ZSBhdHRyaWJ1dGUgdmFsdWUuXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdWZmaXhcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRBdHRyaWJ1dGVWYWx1ZShzdWZmaXgsIGVsZW1lbnQpIHtcblx0XHR2YXIgYXR0cmlidXRlID0gJ2RhdGEtY2xpcGJvYXJkLScgKyBzdWZmaXg7XG5cblx0XHRpZiAoIWVsZW1lbnQuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZSkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRyZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTtcblx0fVxuXG5cdG1vZHVsZS5leHBvcnRzID0gQ2xpcGJvYXJkSlM7XG59KTtcblxufSx7XCIuL2NsaXBib2FyZC1hY3Rpb25cIjo3LFwiZ29vZC1saXN0ZW5lclwiOjQsXCJ0aW55LWVtaXR0ZXJcIjo2fV19LHt9LFs4XSkoOClcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@wpmudev/shared-ui/js/clipboard.js\n");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanM/Y2QwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSwgZXZhbCkoXCJ0aGlzXCIpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webpack/buildin/global.js\n");

/***/ })

/******/ });