{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./_src/js/modules/notice.js","webpack:///./_src/js/modules/modals.js","webpack:///./_src/js/modules/bulk-smush.js","webpack:///./_src/js/modules/admin.js","webpack:///./node_modules/jqueryfiletree/src/jQueryFileTree.js","webpack:///./_src/js/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","jQuery","el_notice","btn_act","find","btn_dismiss","remove_notice","fadeTo","slideUp","remove","notify_wordpress","message","attr","addClass","post","ajaxurl","action","send_dismiss_request","param","fadeIn","click","ev","data","on","e","preventDefault","this","$","self","ajax","type","url","serialize","beforeSend","insertAfter","success","removeAttr","parent","location","reload","form","stop","window","length","SUI","dialogs","show","WP_Smush","wp_smush_msgs","progress_bar","cur_ele","txt","state","progress_button","parents","eq","html","toggleClass","all_done","hide","membership_validity","member_validity_notice","show_warning","remove_element","el","timeout","update_image_stats","new_size","attachmentSize","contents","filter","nodeType","text","sizeStrongEl","size","WDP","showOverlay","title","quick_setup_title","class","smushAddParams","isEmptyObject","indexOf","errors","wp_smushit_data","geturlparam","arg","$sURLVariables","search","substring","split","$sParameterName","Smush","$button","bulk","smush_type","skip_resmush","_typeof","init","is_bulk","$log","deferred","Deferred","ids","resmush","unsmushed","concat","itm","a","is_bulk_resmush","$status","single_ajax_suffix","bulk_ajax_suffix","$id","$send_url","$getnxt","nonce","attachment_id","get_next","_nonce","dataType","start","bulk_start","single_start","show_loader","removeClass","enable_button","prop","smushing","hide_loader","single_done","request","done","response","stats_div","status","replaceWith","error_msg","stats","append","error","sync_stats","message_holder","progress_message","extend","count_images","count_smushed","count_total","count_resize","count_supersmushed","savings_bytes","savings_conversion","savings_resize","size_before","size_after","update_stats","always","bulk_done","is_resolved","free_exceeded","update_remaining_count","update_progress","_res","progress","update_localized_stats","_update_progress","count","width","$progress_bar","css","continue","continue_smush","increment_errors","id","push","call_ajax","nonce_value","current_id","shift","update_smush_ids","nonce_field","val","res","error_class","error_message","ajax_error_message","after","prepend","error_count","image_count","parseInt","unshift","complete","resolve","arguments","run","bind_deferred_events","error_in_bulk","replace","cancel_ajax","abort","u_index","splice","index","process_smush_action","current_button","smush_action","document","params","opacity","button","formatBytes","b","Math","abs","units","u","toFixed","precise_round","num","decimals","sign","round","pow","run_re_check","process_settings","blur","scan_type","get_ui","wp_smush_options_nonce","resmush_ids","count_image","bytes","smush_percent","notices","unsmushed_count","smushed_count","update_progress_bar_resmush","content","notice","super_smush","enable_lossy","super_smush_stats","resmush_complete","setTimeout","resmush_check","getDirectoryList","list_nonce","async","add_dir","close_dialog","set_accordion","suiAccordion","update_dir_progress","ele","ele_tr","closest","ele_prev_tr","prev","ele_dir_progress","ele_dir_progress_percent","ele_dir_count","ele_exclude_btn","children","is","total","smushed","percent","is_last_element","unfinished_smush_single","unfinished_smush","add_dir_browser_button","height","choose_button","clone","add_smush_button","smush_button","add_smush_dir_notice","notice_type","image_stats","is_lossy","super_savings","is_nextgen","formatted_size","trim","getFormatFromString","getSizeFromString","savings_percent","isNaN","smush_conversion_savings","conversion_savings","smush_resize_savings","savings_value","resize_savings","resize_message","savings","orig_diff","pro_savings","set_pro_savings","smush_pro_savings","pro_savings_percent","pro_savings_bytes","directory_smush_finished","image_ele","remaning","not","goToByScroll","selector","animate","scrollTop","offset","top","slide_symbol","slideToggle","hasClass","$el","setting_type","setting_input","submit","keep_exif","getElementById","smush_original","resize_images","smush_pngjpg","update_button_txt","checked","checking","container","savings_dir_smush","orig_size","image_size","scroll_and_enable_resize","focus","scroll_and_enable_lossy","hash","setting_hash","keypress","keyCode","wrapper_div","width_only","height_only","resize_checkbox","width_input","width_error_note","height_input","height_error_note","width_error","height_error","resize_sizes","validate_resize_settings","settings_wrap","notice_wrap","each","slice","decodeURI","removeSpan","href","left","opts","open","membership_valid","membership_invalid","wp_smush_run_re_check","initFileTree","fileTree","script","multiFolder","multiSelect","file","console","log","li","unbind","spinner","path","abs_path","smush_path","image_list_nonce","smush_all","unprocessed_child","first_child","first","img_progress","parent_tr","dir_progress","exclude_btn","image_id","get_stats","image","ele_img_progress","pause_button","prevAll","next","disable_buttons","dir_smush","ajax_error","stats_human","stats_percent","human","combined_stats","c_stats","total_count","update_cummulative_stats","keyup","modal","fn","wpsmush","options","element","FileTree","me","apply","args","callback","_this","defaults","onEvent","root","folderEvent","expandSpeed","collapseSpeed","expandEasing","collapseEasing","loadMessage","errorMessage","onlyFolders","onlyFiles","preventLinkAction","jqft","showTree","escape","_trigger","delegate","event","$ev","ref","target","directory","rel","duration","easing","dir","finishCallback","handleFail","handleResult","result","slideDown","decodeURIComponent","fail","eventType","triggerHandler","$this","option"],"mappings":"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","file":"admin.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","/**\n * Created by umeshkumar on 12/05/16.\n */\njQuery(function () {\n\tvar el_notice = jQuery(\".smush-notice\"),\n\t\tbtn_act = el_notice.find(\".smush-notice-act\"),\n\t\tbtn_dismiss = el_notice.find(\".smush-notice-dismiss\");\n\tel_notice.fadeIn(500);\n\n\t// Hide the notice after a CTA button was clicked\n\tfunction remove_notice() {\n\t\tel_notice.fadeTo(100, 0, function () {\n\t\t\tel_notice.slideUp(100, function () {\n\t\t\t\tel_notice.remove();\n\t\t\t});\n\t\t});\n\t}\n\n\tbtn_act.click(function (ev) {\n\t\tremove_notice();\n\t\tnotify_wordpress(btn_act.data(\"msg\"));\n\t});\n\tbtn_dismiss.click(function (ev) {\n\t\tremove_notice();\n\t\tnotify_wordpress(btn_act.data(\"msg\"));\n\t});\n\n\t// Notify WordPress about the users choice and close the message.\n\tfunction notify_wordpress(message) {\n\t\tel_notice.attr(\"data-message\", message);\n\t\tel_notice.addClass(\"loading\");\n\n\t\t//Send a ajax request to save the dismissed notice option\n\t\tvar param = {\n\t\t\taction: 'dismiss_upgrade_notice'\n\t\t};\n\t\tjQuery.post(ajaxurl, param);\n\t}\n\n\t// Store the preference in db.\n\tfunction send_dismiss_request( action ) {\n\t\tvar param = {\n\t\t\taction: action\n\t\t};\n\t\tjQuery.post(ajaxurl, param);\n\t}\n\n\t// Dismiss the update notice.\n\tjQuery('.wp-smush-update-info').on('click', '.notice-dismiss', function (e) {\n\t\te.preventDefault();\n\t\tel_notice = jQuery(this);\n\t\tremove_notice();\n\t\tsend_dismiss_request( 'dismiss_update_info' );\n\t});\n\n\t// Dismiss S3 support alert.\n\tjQuery('div.wp-smush-s3support-alert').on('click', '.icon-fi-close', function (e) {\n\t\tel_notice = jQuery(this);\n\t\tremove_notice();\n\t\tsend_dismiss_request( 'dismiss_s3support_alert' );\n\t});\n\n});","( function( $ ) {\n\t'use strict';\n\n\t/**\n\t * Quick Setup - Form Submit\n\t */\n\t$( '#smush-quick-setup-submit' ).on( 'click', function () {\n\t\tconst self = $( this );\n\n\t\t$.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: $( '#smush-quick-setup-form' ).serialize(),\n\t\t\tbeforeSend: function () {\n\t\t\t\t// Disable the button.\n\t\t\t\tself.attr( 'disabled', 'disabled' );\n\n\t\t\t\t// Show loader.\n\t\t\t\t$( '<span class=\"sui-icon-loader sui-loading\"></span>' ).insertAfter( self );\n\t\t\t},\n\t\t\tsuccess: function ( data ) {\n\t\t\t\t// Enable the button.\n\t\t\t\tself.removeAttr( 'disabled' );\n\t\t\t\t// Remove the loader.\n\t\t\t\tself.parent().find( 'span.spinner' ).remove();\n\n\t\t\t\t// Reload the Page.\n\t\t\t\tlocation.reload();\n\t\t\t}\n\t\t} );\n\t} );\n\n\t/**\n\t * Quick Setup - Skip button\n\t */\n\t$( '.smush-skip-setup' ).on( 'click', function () {\n\t\tconst form = $('form#smush-quick-setup-form');\n\n\t\t$.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: form.serialize(),\n\t\t\tbeforeSend: function () {\n\t\t\t\tform.find( '.button' ).attr( 'disabled', 'disabled' );\n\t\t\t}\n\t\t} );\n\t} );\n\n}( jQuery ));","jQuery( function ( $ ) {\n\n\t// Remove dismissable notices\n\t$( '.sui-wrap' ).on( 'click', '.sui-notice-dismiss', function ( e ) {\n\t\te.preventDefault();\n\n\t\t$( this ).parent().stop().slideUp( 'slow' );\n\t} );\n\n\t$( window ).on( 'load', function () {\n\t\t// If quick setup box is found, show.\n\t\tif ( $( '#smush-quick-setup-dialog' ).length > 0 ) {\n\t\t\t// Show the modal.\n\t\t\twindow.SUI.dialogs['smush-quick-setup-dialog'].show();\n\t\t}\n\t} );\n\n} );","/**\n * Processes bulk smushing\n *\n * @author Umesh Kumar <umeshsingla05@gmail.com>\n *\n * TODO: Use Element tag for all the class selectors\n */\nlet WP_Smush = WP_Smush || {};\n\n/**\n * Smush translation strings.\n *\n * @var {array} wp_smush_msgs\n */\nif ( wp_smush_msgs ) {\n\tconst wp_smush_msgs = wp_smush_msgs;\n}\n\n/**\n * Show/hide the progress bar for Smushing/Restore/SuperSmush\n *\n * @param cur_ele\n * @param txt Message to be displayed\n * @param {string} state show/hide\n */\nlet progress_bar = function ( cur_ele, txt, state ) {\n\t//Update Progress bar text and show it\n\tlet progress_button = cur_ele.parents().eq( 1 ).find( '.wp-smush-progress' );\n\n\tif ( 'show' === state ) {\n\t\tprogress_button.find( 'span' ).html( txt );\n\t\tprogress_button.toggleClass( 'visible' );\n\t} else {\n\t\t/** @var {string} wp_smush_msgs.all_done */\n\t\tprogress_button.find( 'span' ).html( wp_smush_msgs.all_done );\n\t\tprogress_button.hide();\n\t}\n};\n\n/**\n * Check membership validity\n *\n * @param {int} data.show_warning\n */\nlet membership_validity = function ( data ) {\n\tconst member_validity_notice = jQuery( '#wp-smush-invalid-member' );\n\n\t//Check for Membership warning\n\n\tif ( 'undefined' !== typeof ( data ) && 'undefined' !== typeof ( data.show_warning ) && member_validity_notice.length > 0 ) {\n\t\tif ( data.show_warning ) {\n\t\t\tmember_validity_notice.show();\n\t\t} else {\n\t\t\tmember_validity_notice.hide();\n\t\t}\n\t}\n};\n\nlet remove_element = function ( el, timeout ) {\n\tif ( typeof timeout === 'undefined' ) {\n\t\ttimeout = 100;\n\t}\n\tel.fadeTo( timeout, 0, function () {\n\t\tel.slideUp( timeout, function () {\n\t\t\tel.remove();\n\t\t} );\n\t} );\n};\n\njQuery( function ( $ ) {\n\t'use strict';\n\n\t/**\n\t * Remove the quick setup dialog\n\t */\n\tfunction remove_dialog() {\n\t\t$('dialog#smush-quick-setup').remove();\n\t}\n\n\t/**\n\t * Update image size in attachment info panel.\n\t *\n\t * @since 2.8\n\t *\n\t * @param new_size\n\t */\n\tfunction update_image_stats( new_size ) {\n\t\tif ( 0 === new_size ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet attachmentSize = $('.attachment-info .file-size');\n\t\tconst currentSize = attachmentSize.contents().filter(function() {\n\t\t\treturn this.nodeType === 3;\n\t\t}).text();\n\n\t\t// There is a space before the size.\n\t\tif ( currentSize !== ( ' ' + new_size ) ) {\n\t\t\tconst sizeStrongEl = attachmentSize.contents().filter(function() {\n\t\t\t\treturn this.nodeType === 1;\n\t\t\t}   ).text();\n\t\t\tattachmentSize.html( '<strong>' + sizeStrongEl + '</strong> ' + new_size );\n\t\t}\n\t}\n\n\t// Show the Quick Setup dialog.\n\tif ( $( '#smush-quick-setup' ).size() > 0 ) {\n\t\t/** @var {string} wp_smush_msgs.quick_setup_title */\n\t\tWDP.showOverlay( \"#smush-quick-setup\", {\n\t\t\ttitle: wp_smush_msgs.quick_setup_title,\n\t\t\tclass: 'no-close wp-smush-overlay wp-smush-quick-setup'\n\t\t} );\n\t\tremove_dialog();\n\t}\n\n\tlet smushAddParams = function ( url, data ) {\n\t\tif ( !$.isEmptyObject( data ) ) {\n\t\t\turl += ( url.indexOf( '?' ) >= 0 ? '&' : '?' ) + $.param( data );\n\t\t}\n\n\t\treturn url;\n\t};\n\n\t// url for smushing\n\tWP_Smush.errors = [];\n\n\t/** @var {array} wp_smushit_data */\n\tWP_Smush.timeout = wp_smushit_data.timeout;\n\n\t/**\n\t * Checks for the specified param in URL\n\t * @param arg\n\t * @returns {*}\n\t */\n\tWP_Smush.geturlparam = function ( arg ) {\n\t\tvar $sPageURL = window.location.search.substring( 1 );\n\t\tvar $sURLVariables = $sPageURL.split( '&' );\n\n\t\tfor ( var i = 0; i < $sURLVariables.length; i++ ) {\n\t\t\tvar $sParameterName = $sURLVariables[i].split( '=' );\n\t\t\tif ( $sParameterName[0] == arg ) {\n\t\t\t\treturn $sParameterName[1];\n\t\t\t}\n\t\t}\n\t};\n\n\tWP_Smush.Smush = function ( $button, bulk, smush_type ) {\n\t\tvar self = this;\n\t\tvar skip_resmush = $button.data( 'smush' );\n\t\t//If smush attribute is not defined, Need not skip resmush ids\n\t\tskip_resmush = ( ( typeof skip_resmush == typeof undefined ) || skip_resmush == false ) ? false : true;\n\n\t\tthis.init = function () {\n\t\t\tthis.$button = $( $button[0] );\n\t\t\tthis.is_bulk = typeof bulk ? bulk : false;\n\t\t\tthis.url = ajaxurl;\n\t\t\tthis.$log = $( \".smush-final-log\" );\n\t\t\tthis.deferred = jQuery.Deferred();\n\t\t\tthis.deferred.errors = [];\n\n\t\t\tvar ids = wp_smushit_data.resmush.length > 0 && !skip_resmush ? ( wp_smushit_data.unsmushed.length > 0 ? wp_smushit_data.resmush.concat( wp_smushit_data.unsmushed ) : wp_smushit_data.resmush ) : wp_smushit_data.unsmushed;\n\t\t\tif ( 'object' == typeof ids ) {\n\t\t\t\t//If button has resmush class, and we do have ids that needs to resmushed, put them in the list\n\t\t\t\tthis.ids = ids.filter( function ( itm, i, a ) {\n\t\t\t\t\treturn i == a.indexOf( itm );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tthis.ids = ids;\n\t\t\t}\n\n\t\t\tthis.is_bulk_resmush = wp_smushit_data.resmush.length > 0 && !skip_resmush ? true : false;\n\n\t\t\tthis.$status = this.$button.parent().find( '.smush-status' );\n\n\t\t\t//Added for NextGen support\n\t\t\tthis.smush_type = 'undefined' != typeof smush_type ? smush_type : 'media';\n\t\t\tthis.single_ajax_suffix = 'nextgen' == this.smush_type ? 'smush_manual_nextgen' : 'wp_smushit_manual';\n\t\t\tthis.bulk_ajax_suffix = 'nextgen' == this.smush_type ? 'wp_smushit_nextgen_bulk' : 'wp_smushit_bulk';\n\t\t\tthis.url = this.is_bulk ? smushAddParams( this.url, {action: this.bulk_ajax_suffix} ) : smushAddParams( this.url, {action: this.single_ajax_suffix} );\n\t\t};\n\n\t\t/** Send Ajax request for smushing the image **/\n\t\tWP_Smush.ajax = function ( is_bulk_resmush, $id, $send_url, $getnxt, nonce ) {\n\t\t\t\"use strict\";\n\t\t\tvar param = {\n\t\t\t\tis_bulk_resmush: is_bulk_resmush,\n\t\t\t\tattachment_id: $id,\n\t\t\t\tget_next: $getnxt,\n\t\t\t\t_nonce: nonce\n\t\t\t};\n\t\t\tparam = jQuery.param( param );\n\t\t\treturn $.ajax( {\n\t\t\t\ttype: \"GET\",\n\t\t\t\tdata: param,\n\t\t\t\turl: $send_url,\n\t\t\t\ttimeout: WP_Smush.timeout,\n\t\t\t\tdataType: 'json'\n\t\t\t} );\n\t\t};\n\n\t\t//Show loader in button for single and bulk smush\n\t\tthis.start = function () {\n\n\t\t\tthis.$button.attr( 'disabled', 'disabled' );\n\t\t\tthis.$button.addClass( 'wp-smush-started' );\n\n\t\t\tthis.bulk_start();\n\t\t\tthis.single_start();\n\t\t};\n\n\t\tthis.bulk_start = function () {\n\t\t\tif ( !this.is_bulk ) return;\n\n\t\t\t//Hide the Bulk Div\n\t\t\t$( '.wp-smush-bulk-wrapper' ).hide();\n\n\t\t\t//Show the Progress Bar\n\t\t\t$( '.bulk-smush-wrapper .wp-smush-bulk-progress-bar-wrapper' ).show();\n\n\t\t\t//Remove any Global Notices if there\n\t\t\t$( '.sui-notice-top' ).remove();\n\n\t\t\t//Hide the Bulk Limit message\n\t\t\t$( 'p.smush-error-message.limit_exceeded' ).remove();\n\t\t\t//Hide parent wrapper, if there are no other messages\n\t\t\tif ( $( 'div.smush-final-log p' ).length <= 0 ) {\n\t\t\t\t$( 'div.smush-final-log' ).hide();\n\t\t\t}\n\t\t};\n\n\t\tthis.single_start = function () {\n\t\t\tif ( this.is_bulk ) return;\n\t\t\tthis.show_loader();\n\t\t\tthis.$status.removeClass( \"error\" );\n\t\t};\n\n\t\tthis.enable_button = function () {\n\t\t\tthis.$button.prop( \"disabled\", false );\n\t\t\t//For Bulk process, Enable other buttons\n\t\t\t$( 'button.wp-smush-all' ).removeAttr( 'disabled' );\n\t\t\t$( 'button.wp-smush-scan, a.wp-smush-lossy-enable, button.wp-smush-resize-enable, input#wp-smush-save-settings' ).removeAttr( 'disabled' );\n\t\t};\n\n\t\tthis.show_loader = function () {\n\t\t\tprogress_bar( this.$button, wp_smush_msgs.smushing, 'show' );\n\t\t};\n\n\t\tthis.hide_loader = function () {\n\t\t\tprogress_bar( this.$button, wp_smush_msgs.smushing, 'hide' );\n\t\t};\n\n\t\tthis.single_done = function () {\n\t\t\tif ( this.is_bulk ) return;\n\n\t\t\tthis.hide_loader();\n\n\t\t\tthis.request.done( function ( response ) {\n\t\t\t\tif ( typeof response.data != 'undefined' ) {\n\n\t\t\t\t\t// Check if stats div exists.\n\t\t\t\t\tvar parent = self.$status.parent();\n\t\t\t\t\tvar stats_div = parent.find('.smush-stats-wrapper');\n\n\t\t\t\t\t// If we've updated status, replace the content.\n\t\t\t\t\tif ( response.data.status ) {\n\t\t\t\t\t\t//remove Links\n\t\t\t\t\t\tparent.find('.smush-status-links').remove();\n\t\t\t\t\t\tself.$status.replaceWith( response.data.status );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check whether to show membership validity notice or not.\n\t\t\t\t\tmembership_validity( response.data );\n\n\t\t\t\t\tif ( response.success && response.data !== \"Not processed\" ) {\n\t\t\t\t\t\tself.$status.removeClass( 'sui-hidden' );\n\t\t\t\t\t\tself.$button.parent().removeClass( 'unsmushed' ).addClass( 'smushed' );\n\t\t\t\t\t\tself.$button.remove();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.$status.addClass( \"error\" );\n\t\t\t\t\t\tself.$status.html( response.data.error_msg );\n\t\t\t\t\t\tself.$status.show();\n\t\t\t\t\t}\n\t\t\t\t\tif ('undefined' != stats_div && stats_div.length ) {\n\t\t\t\t\t\tstats_div.replaceWith( response.data.stats );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparent.append( response.data.stats );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Update image size in attachment info panel.\n\t\t\t\t\tupdate_image_stats(response.data.new_size);\n\t\t\t\t}\n\t\t\t\tself.enable_button();\n\t\t\t} ).error( function ( response ) {\n\t\t\t\tself.$status.html( response.data );\n\t\t\t\tself.$status.addClass( \"error\" );\n\t\t\t\tself.enable_button();\n\t\t\t} );\n\n\t\t};\n\n\t\tthis.sync_stats = function () {\n\t\t\tvar message_holder = $( 'div.wp-smush-bulk-progress-bar-wrapper div.wp-smush-count.tc' );\n\t\t\t//Store the existing content in a variable\n\t\t\tvar progress_message = message_holder.html();\n\t\t\tmessage_holder.html( wp_smush_msgs.sync_stats );\n\n\t\t\t//Send ajax\n\t\t\t$.ajax( {\n\t\t\t\ttype: \"GET\",\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\t'action': 'get_stats'\n\t\t\t\t},\n\t\t\t\tsuccess: function ( response ) {\n\t\t\t\t\tif ( response && 'undefined' != typeof response ) {\n\t\t\t\t\t\tresponse = response.data;\n\t\t\t\t\t\t$.extend( wp_smushit_data, {\n\t\t\t\t\t\t\tcount_images: response.count_images,\n\t\t\t\t\t\t\tcount_smushed: response.count_smushed,\n\t\t\t\t\t\t\tcount_total: response.count_total,\n\t\t\t\t\t\t\tcount_resize: response.count_resize,\n\t\t\t\t\t\t\tcount_supersmushed: response.count_supersmushed,\n\t\t\t\t\t\t\tsavings_bytes: response.savings_bytes,\n\t\t\t\t\t\t\tsavings_conversion: response.savings_conversion,\n\t\t\t\t\t\t\tsavings_resize: response.savings_resize,\n\t\t\t\t\t\t\tsize_before: response.size_before,\n\t\t\t\t\t\t\tsize_after: response.size_after\n\t\t\t\t\t\t} );\n\t\t\t\t\t\t//Got the stats, Update it\n\t\t\t\t\t\tupdate_stats( this.smush_type );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} ).always( function () {\n\t\t\t\t\tmessage_holder.html( progress_message );\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\t/** After the Bulk Smushing has been Finished **/\n\t\tthis.bulk_done = function () {\n\t\t\tif ( !this.is_bulk ) return;\n\n\t\t\t//Enable the button\n\t\t\tthis.enable_button();\n\n\t\t\t//Show Notice\n\t\t\tif ( self.ids.length == 0 ) {\n\t\t\t\t$( '.bulk-smush-wrapper .wp-smush-all-done, .wp-smush-pagespeed-recommendation' ).show();\n\t\t\t\t$( '.wp-smush-bulk-wrapper' ).hide();\n\t\t\t} else {\n\t\t\t\tif ( $( '.bulk-smush-wrapper .wp-smush-resmush-notice' ).length > 0 ) {\n\t\t\t\t\t$( '.bulk-smush-wrapper .wp-smush-resmush-notice' ).show();\n\t\t\t\t} else {\n\t\t\t\t\t$( '.bulk-smush-wrapper .wp-smush-remaining' ).show();\n\t\t\t\t}\n\t\t\t\t$( '.wp-smush-bulk-wrapper' ).show();\n\t\t\t}\n\n\t\t\t//Hide the Progress Bar\n\t\t\t$( '.wp-smush-bulk-progress-bar-wrapper' ).hide();\n\n\t\t\t//Enable Resmush and scan button\n\t\t\t$( '.wp-resmush.wp-smush-action, .wp-smush-scan' ).removeAttr( 'disabled' );\n\n\t\t\t// Show loader.\n\t\t\tif ( self.ids.length == 0 ) {\n\t\t\t\t$( '.sui-summary-smush .smush-stats-icon' ).addClass( 'sui-hidden' );\n\t\t\t} else {\n\t\t\t\t$( '.sui-summary-smush .smush-stats-icon' ).removeClass( 'sui-icon-loader sui-loading sui-hidden' ).addClass( 'sui-icon-info sui-warning' );\n\t\t\t}\n\t\t};\n\n\t\tthis.is_resolved = function () {\n\t\t\t\"use strict\";\n\t\t\treturn this.deferred.state() === \"resolved\";\n\t\t};\n\n\t\tthis.free_exceeded = function () {\n\t\t\t//Hide the Progress bar and show the Bulk smush wrapper\n\t\t\t$( '.wp-smush-bulk-progress-bar-wrapper' ).hide();\n\n\t\t\tif ( self.ids.length > 0 ) {\n\t\t\t\t//Show Bulk wrapper\n\t\t\t\t$( '.wp-smush-bulk-wrapper ' ).show();\n\t\t\t} else {\n\t\t\t\t$( '.wp-smush-notice.wp-smush-all-done, .wp-smush-pagespeed-recommendation' ).show();\n\t\t\t}\n\t\t};\n\n\t\tthis.update_remaining_count = function () {\n\t\t\tif ( this.is_bulk_resmush ) {\n\t\t\t\t//ReSmush Notice\n\t\t\t\tif ( $( '.wp-smush-resmush-notice .wp-smush-remaining-count' ).length && 'undefined' != typeof self.ids ) {\n\t\t\t\t\t$( '.wp-smush-resmush-notice .wp-smush-remaining-count' ).html( self.ids.length );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//Smush Notice\n\t\t\t\tif ( $( '.bulk-smush-wrapper .wp-smush-remaining-count' ).length && 'undefined' != typeof self.ids ) {\n\t\t\t\t\t$( '.bulk-smush-wrapper .wp-smush-remaining-count' ).html( self.ids.length );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Update sidebar count.\n\t\t\tif ( $( '.smush-sidenav .wp-smush-remaining-count' ).length && 'undefined' != typeof self.ids ) {\n\t\t\t\tif ( self.ids.length > 0 ) {\n\t\t\t\t\t$( '.smush-sidenav .wp-smush-remaining-count' ).html( self.ids.length );\n\t\t\t\t} else {\n\t\t\t\t\t$( '.sui-summary-smush .smush-stats-icon' ).addClass( 'sui-hidden' );\n\t\t\t\t\t$( '.smush-sidenav .wp-smush-remaining-count' ).removeClass( 'sui-tag sui-tag-warning' ).html('');\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.update_progress = function ( _res ) {\n\t\t\t//If not bulk\n\t\t\tif ( !this.is_bulk_resmush && !this.is_bulk ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar progress = '';\n\n\t\t\t//Update localized stats\n\t\t\tif ( _res && ( 'undefined' != typeof _res.data || 'undefined' != typeof _res.data.stats ) ) {\n\t\t\t\tupdate_localized_stats( _res.data.stats, this.smush_type );\n\t\t\t}\n\n\t\t\tif ( !this.is_bulk_resmush ) {\n\t\t\t\t//handle progress for normal bulk smush\n\t\t\t\tprogress = ( wp_smushit_data.count_smushed / wp_smushit_data.count_total ) * 100;\n\t\t\t} else {\n\t\t\t\t//If the Request was successful, Update the progress bar\n\t\t\t\tif ( _res.success ) {\n\t\t\t\t\t//Handle progress for Super smush progress bar\n\t\t\t\t\tif ( wp_smushit_data.resmush.length > 0 ) {\n\t\t\t\t\t\t//Update the Count\n\t\t\t\t\t\t$( '.wp-smush-images-remaining' ).html( wp_smushit_data.resmush.length );\n\t\t\t\t\t} else if ( wp_smushit_data.resmush.length == 0 && this.ids.length == 0 ) {\n\t\t\t\t\t\t//If all images are resmushed, show the All Smushed message\n\n\t\t\t\t\t\t//Show All Smushed\n\t\t\t\t\t\t$( '.bulk-resmush-wrapper .wp-smush-all-done, .wp-smush-pagespeed-recommendation' ).removeClass( 'sui-hidden' );\n\n\t\t\t\t\t\t//Hide Everything else\n\t\t\t\t\t\t$( '.wp-smush-resmush-wrap, .wp-smush-bulk-progress-bar-wrapper' ).hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//handle progress for normal bulk smush\n\t\t\t\t//Set Progress Bar width\n\t\t\t\tif ( 'undefined' !== typeof self.ids && 'undefined' !== typeof wp_smushit_data.count_total && wp_smushit_data.count_total > 0 ) {\n\t\t\t\t\tprogress = ( wp_smushit_data.count_smushed / wp_smushit_data.count_total ) * 100;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Show Bulk Wrapper and Smush Notice\n\t\t\tif ( self.ids.length == 0 ) {\n\t\t\t\t//Sync stats for Bulk smush media Library ( Skip for Nextgen )\n\t\t\t\tif ( 'nextgen' != this.smush_type ) {\n\t\t\t\t\tthis.sync_stats();\n\t\t\t\t}\n\t\t\t\t$( '.bulk-smush-wrapper .wp-smush-all-done, .wp-smush-pagespeed-recommendation' ).show();\n\t\t\t\t$( '.wp-smush-bulk-wrapper' ).hide();\n\t\t\t}\n\n\t\t\t//Update remaining count\n\t\t\tself.update_remaining_count();\n\n\t\t\t//if we have received the progress data, update the stats else skip\n\t\t\tif ( 'undefined' != typeof _res.data.stats ) {\n\n\t\t\t\t// increase the progress bar\n\t\t\t\tthis._update_progress( wp_smushit_data.count_smushed, progress );\n\t\t\t}\n\t\t\t// Update stats and counts.\n\t\t\tupdate_stats( this.smush_type );\n\t\t};\n\n\t\tthis._update_progress = function ( count, width ) {\n\t\t\t\"use strict\";\n\t\t\tif ( !this.is_bulk && !this.is_bulk_resmush ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//Update the Progress Bar Width\n\t\t\t// get the progress bar\n\t\t\tvar $progress_bar = jQuery( '.bulk-smush-wrapper .wp-smush-progress-inner' );\n\t\t\tif ( $progress_bar.length < 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// increase progress\n\t\t\t$progress_bar.css( 'width', width + '%' );\n\n\t\t};\n\n\t\t//Whether to send the ajax requests further or not\n\t\tthis.continue = function () {\n\t\t\tvar continue_smush = self.$button.attr( 'continue_smush' );\n\n\t\t\tif ( typeof continue_smush == typeof undefined ) {\n\t\t\t\tcontinue_smush = true;\n\t\t\t}\n\n\t\t\tif ( 'false' == continue_smush || !continue_smush ) {\n\t\t\t\tcontinue_smush = false;\n\t\t\t}\n\n\t\t\treturn continue_smush && this.ids.length > 0 && this.is_bulk;\n\t\t};\n\n\t\tthis.increment_errors = function ( id ) {\n\t\t\tWP_Smush.errors.push( id );\n\t\t};\n\n\t\t//Send ajax request for smushing single and bulk, call update_progress on ajax response\n\t\tthis.call_ajax = function () {\n\t\t\tvar nonce_value = '';\n\t\t\tthis.current_id = this.is_bulk ? this.ids.shift() : this.$button.data( \"id\" ); //remove from array while processing so we can continue where left off\n\n\t\t\t//Remove the id from respective variable as well\n\t\t\tthis.update_smush_ids( this.current_id );\n\n\t\t\tvar nonce_field = this.$button.parent().find( '#_wp_smush_nonce' );\n\t\t\tif ( nonce_field ) {\n\t\t\t\tnonce_value = nonce_field.val();\n\t\t\t}\n\n\t\t\tthis.request = WP_Smush.ajax( this.is_bulk_resmush, this.current_id, this.url, 0, nonce_value )\n\t\t\t\t.error( function () {\n\t\t\t\t\tself.increment_errors( self.current_id );\n\t\t\t\t} ).done( function ( res ) {\n\t\t\t\t\t//Increase the error count except if bulk request limit excceded\n\t\t\t\t\tif ( typeof res.success === \"undefined\" || ( typeof res.success !== \"undefined\" && typeof res.success.data !== \"undefined\" && res.success === false && res.data.error !== 'bulk_request_image_limit_exceeded' ) ) {\n\t\t\t\t\t\tself.increment_errors( self.current_id );\n\t\t\t\t\t}\n\t\t\t\t\t//If no response or success is false, do not process further\n\t\t\t\t\tif ( !res || !res.success ) {\n\t\t\t\t\t\t//@todo: Handle Bulk Smush limit error message\n\t\t\t\t\t\tif ( 'undefined' !== typeof res && 'undefined' !== typeof res.data && typeof res.data.error !== 'undefined' ) {\n\t\t\t\t\t\t\tvar error_class = 'undefined' != typeof res.data.error_class ? 'smush-error-message ' + res.data.error_class : 'smush-error-message';\n\t\t\t\t\t\t\tvar error_msg = '<p class=\"' + error_class + '\">' + res.data.error_message + '</p>';\n\t\t\t\t\t\t\tif ( 'undefined' != typeof res.data.error && 'bulk_request_image_limit_exceeded' == res.data.error ) {\n\t\t\t\t\t\t\t\tvar ajax_error_message = $( '.wp-smush-ajax-error' );\n\t\t\t\t\t\t\t\t//If we have ajax error message div, append after it\n\t\t\t\t\t\t\t\tif ( ajax_error_message.length > 0 ) {\n\t\t\t\t\t\t\t\t\tajax_error_message.after( error_msg );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t//Otherwise prepend\n\t\t\t\t\t\t\t\t\tself.$log.prepend( error_msg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( 'undefined' != typeof res.data.error_class && \"\" != res.data.error_class && $( 'div.smush-final-log .' + res.data.error_class ).length > 0 ) {\n\t\t\t\t\t\t\t\tvar error_count = $( 'p.smush-error-message.' + res.data.error_class + ' .image-error-count' );\n\t\t\t\t\t\t\t\t//Get the error count, increase and append\n\t\t\t\t\t\t\t\tvar image_count = error_count.html();\n\t\t\t\t\t\t\t\timage_count = parseInt( image_count ) + 1;\n\t\t\t\t\t\t\t\t//Append the updated image count\n\t\t\t\t\t\t\t\terror_count.html( image_count );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t//Print the error on screen\n\t\t\t\t\t\t\t\tself.$log.append( error_msg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself.$log.show();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//Check whether to show the warning notice or not\n\t\t\t\t\tmembership_validity( res.data );\n\n\t\t\t\t\t//Bulk Smush Limit Exceeded: Stop ajax requests, remove progress bar, append the last image id back to smush variable, and reset variables to allow the user to continue bulk smush\n\t\t\t\t\tif ( typeof res.data !== \"undefined\" && res.data.error == 'bulk_request_image_limit_exceeded' && !self.is_resolved() ) {\n\t\t\t\t\t\t//Add a data attribute to the smush button, to stop sending ajax\n\t\t\t\t\t\tself.$button.attr( 'continue_smush', false );\n\n\t\t\t\t\t\tself.free_exceeded();\n\n\t\t\t\t\t\t//Reinsert the current id\n\t\t\t\t\t\twp_smushit_data.unsmushed.unshift( self.current_id );\n\n\t\t\t\t\t\t//Update the remaining count to length of remaining ids + 1 (Current id)\n\t\t\t\t\t\tself.update_remaining_count();\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( self.is_bulk && res.success ) {\n\t\t\t\t\t\t\tself.update_progress( res );\n\t\t\t\t\t\t}else if (self.ids.length == 0) {\n\t\t\t\t\t\t\t//Sync stats anyway\n\t\t\t\t\t\t\tself.sync_stats();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tself.single_done();\n\t\t\t\t} ).complete( function () {\n\t\t\t\t\tif ( !self.continue() || !self.is_bulk ) {\n\t\t\t\t\t\t//Calls deferred.done()\n\t\t\t\t\t\tself.deferred.resolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.call_ajax();\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\tself.deferred.errors = WP_Smush.errors;\n\t\t\treturn self.deferred;\n\t\t};\n\n\t\tthis.init( arguments );\n\n\t\t//Send ajax request for single and bulk smushing\n\t\tthis.run = function () {\n\n\t\t\t// if we have a definite number of ids\n\t\t\tif ( this.is_bulk && this.ids.length > 0 ) {\n\t\t\t\tthis.call_ajax();\n\t\t\t}\n\n\t\t\tif ( !this.is_bulk )\n\t\t\t\tthis.call_ajax();\n\n\t\t};\n\n\t\t//Show bulk smush errors, and disable bulk smush button on completion\n\t\tthis.bind_deferred_events = function () {\n\n\t\t\tthis.deferred.done( function () {\n\n\t\t\t\tself.$button.removeAttr( 'continue_smush' );\n\n\t\t\t\tif ( WP_Smush.errors.length ) {\n\t\t\t\t\tvar error_message = '<div class=\"wp-smush-ajax-error\">' + wp_smush_msgs.error_in_bulk.replace( \"{{errors}}\", WP_Smush.errors.length ) + '</div>';\n\t\t\t\t\t//Remove any existing notice\n\t\t\t\t\t$( '.wp-smush-ajax-error' ).remove();\n\t\t\t\t\tself.$log.prepend( error_message );\n\t\t\t\t}\n\n\t\t\t\tself.bulk_done();\n\n\t\t\t\t//Re enable the buttons\n\t\t\t\t$( '.wp-smush-button:not(.wp-smush-finished), .wp-smush-scan' ).removeAttr( 'disabled' );\n\t\t\t} );\n\n\t\t};\n\t\t/** Handles the Cancel button Click\n\t\t *\n\t\t * Update the UI, and enables the bulk smush button\n\t\t *\n\t\t **/\n\t\tthis.cancel_ajax = function () {\n\t\t\t$( '.wp-smush-cancel-bulk' ).on( 'click', function () {\n\t\t\t\t//Add a data attribute to the smush button, to stop sending ajax\n\t\t\t\tself.$button.attr( 'continue_smush', false );\n\t\t\t\t//Sync and update stats\n\t\t\t\tself.sync_stats();\n\t\t\t\tupdate_stats( this.smush_type );\n\n\t\t\t\tself.request.abort();\n\t\t\t\tself.enable_button();\n\t\t\t\tself.$button.removeClass( 'wp-smush-started' );\n\t\t\t\twp_smushit_data.unsmushed.unshift( self.current_id );\n\t\t\t\t$( '.wp-smush-bulk-wrapper' ).show();\n\n\t\t\t\t//Hide the Progress Bar\n\t\t\t\t$( '.wp-smush-bulk-progress-bar-wrapper' ).hide();\n\t\t\t} );\n\t\t};\n\t\t/**\n\t\t * Remove the current id from unsmushed/resmush variable\n\t\t * @param current_id\n\t\t */\n\t\tthis.update_smush_ids = function ( current_id ) {\n\t\t\tif ( 'undefined' !== typeof wp_smushit_data.unsmushed && wp_smushit_data.unsmushed.length > 0 ) {\n\t\t\t\tvar u_index = wp_smushit_data.unsmushed.indexOf( current_id );\n\t\t\t\tif ( u_index > -1 ) {\n\t\t\t\t\twp_smushit_data.unsmushed.splice( u_index, 1 );\n\t\t\t\t}\n\t\t\t}\n\t\t\t//remove from the resmush list\n\t\t\tif ( 'undefined' !== typeof wp_smushit_data.resmush && wp_smushit_data.resmush.length > 0 ) {\n\t\t\t\tvar index = wp_smushit_data.resmush.indexOf( current_id );\n\t\t\t\tif ( index > -1 ) {\n\t\t\t\t\twp_smushit_data.resmush.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.start();\n\t\tthis.run();\n\t\tthis.bind_deferred_events();\n\n\t\t//Handle Cancel Ajax\n\t\tthis.cancel_ajax();\n\n\t\treturn this.deferred;\n\t};\n\n\t/**\n\t * Handle the Bulk Smush/ Bulk Resmush button click\n\t */\n\t$( 'body' ).on( 'click', 'button.wp-smush-all', function ( e ) {\n\n\t\t// prevent the default action\n\t\te.preventDefault();\n\n\t\t$( '.sui-notice-top.sui-notice-success' ).remove();\n\n\t\t//Disable Resmush and scan button\n\t\t$( '.wp-resmush.wp-smush-action, .wp-smush-scan, .wp-smush-button, a.wp-smush-lossy-enable, button.wp-smush-resize-enable, input#wp-smush-save-settings' ).attr( 'disabled', 'disabled' );\n\n\t\t//Check for ids, if there is none (Unsmushed or lossless), don't call smush function\n\t\tif ( typeof wp_smushit_data == 'undefined' ||\n\t\t\t( wp_smushit_data.unsmushed.length == 0 && wp_smushit_data.resmush.length == 0 )\n\t\t) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t$( \".wp-smush-remaining\" ).hide();\n\n\t\t// Show loader.\n\t\t$( '.sui-summary-smush .smush-stats-icon' ).removeClass( 'sui-icon-info sui-warning' ).addClass( 'sui-icon-loader sui-loading' );\n\n\t\tnew WP_Smush.Smush( $( this ), true );\n\n\n\t} );\n\n\t/** Disable the action links **/\n\tvar disable_links = function ( c_element ) {\n\n\t\tvar parent = c_element.parent();\n\t\t//reduce parent opacity\n\t\tparent.css( {'opacity': '0.5'} );\n\t\t//Disable Links\n\t\tparent.find( 'a' ).attr( 'disabled', 'disabled' );\n\t};\n\n\t/** Enable the Action Links **/\n\tvar enable_links = function ( c_element ) {\n\n\t\tvar parent = c_element.parent();\n\n\t\t//reduce parent opacity\n\t\tparent.css( {'opacity': '1'} );\n\t\t//Disable Links\n\t\tparent.find( 'a' ).removeAttr( 'disabled' );\n\t};\n\t/**\n\t * Restore image request with a specified action for Media Library / NextGen Gallery\n\t * @param e\n\t * @param current_button\n\t * @param smush_action\n\t * @returns {boolean}\n\t */\n\tvar process_smush_action = function ( e, current_button, smush_action, action ) {\n\n\t\t//If disabled\n\t\tif ( 'disabled' == current_button.attr( 'disabled' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\te.preventDefault();\n\n\t\t//Remove Error\n\t\t$( '.wp-smush-error' ).remove();\n\n\t\t//Hide stats\n\t\t$( '.smush-stats-wrapper' ).hide();\n\n\t\tvar mode = 'grid';\n\t\tif ( 'smush_restore_image' == smush_action ) {\n\t\t\tif ( $( document ).find( 'div.media-modal.wp-core-ui' ).length > 0 ) {\n\t\t\t\tmode = 'grid';\n\t\t\t} else {\n\t\t\t\tmode = window.location.search.indexOf( 'item' ) > -1 ? 'grid' : 'list';\n\t\t\t}\n\t\t}\n\n\t\t//Get the image ID and nonce\n\t\tvar params = {\n\t\t\taction: smush_action,\n\t\t\tattachment_id: current_button.data( 'id' ),\n\t\t\tmode: mode,\n\t\t\t_nonce: current_button.data( 'nonce' )\n\t\t};\n\n\t\t//Reduce the opacity of stats and disable the click\n\t\tdisable_links( current_button );\n\n\t\tprogress_bar( current_button, wp_smush_msgs[action], 'show' );\n\n\t\t//Restore the image\n\t\t$.post( ajaxurl, params, function ( r ) {\n\n\t\t\tprogress_bar( current_button, wp_smush_msgs[action], 'hide' );\n\n\t\t\t//reset all functionality\n\t\t\tenable_links( current_button );\n\n\t\t\tif (r.success && 'undefined' != typeof(r.data.button)) {\n\t\t\t\t//Replace in immediate parent for nextgen\n\t\t\t\tif ('undefined' != typeof (this.data) && this.data.indexOf('nextgen') > -1) {\n\t\t\t\t\t//Show the smush button, and remove stats and restore option\n\t\t\t\t\tcurrent_button.parent().html(r.data.button);\n\t\t\t\t} else {\n\t\t\t\t\t//Show the smush button, and remove stats and restore option\n\t\t\t\t\tcurrent_button.parents().eq(1).html(r.data.button);\n\t\t\t\t}\n\n\t\t\t\tif ( 'undefined' != typeof (r.data) && 'restore' === action ) {\n\t\t\t\t\tupdate_image_stats(r.data.new_size);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( r.data.message ) {\n\t\t\t\t\t//show error\n\t\t\t\t\tcurrent_button.parent().append( r.data.message );\n\t\t\t\t}\n\t\t\t}\n\t\t} )\n\t};\n\n\t/**\n\t * Validates the Resize Width and Height against the Largest Thumbnail Width and Height\n\t *\n\t * @param wrapper_div jQuery object for the whole setting row wrapper div\n\t * @param width_only Whether to validate only width\n\t * @param height_only Validate only Height\n\t * @returns {boolean} All Good or not\n\t *\n\t */\n\tvar validate_resize_settings = function ( wrapper_div, width_only, height_only ) {\n\t\tvar resize_checkbox = wrapper_div.find( '#wp-smush-resize, #wp-smush-resize-quick-setup' );\n\n\t\tif ( !height_only ) {\n\t\t\tvar width_input = wrapper_div.find( '#wp-smush-resize_width' );\n\t\t\tvar width_error_note = wrapper_div.find( '.sui-notice-info.wp-smush-update-width' );\n\t\t}\n\t\tif ( !width_only ) {\n\t\t\tvar height_input = wrapper_div.find( '#wp-smush-resize_height' );\n\t\t\tvar height_error_note = wrapper_div.find( '.sui-notice-info.wp-smush-update-height' );\n\t\t}\n\n\t\tvar width_error = false;\n\t\tvar height_error = false;\n\n\t\t//If resize settings is not enabled, return true\n\t\tif ( !resize_checkbox.is( ':checked' ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t//Check if we have localised width and height\n\t\tif ( 'undefined' == typeof (wp_smushit_data.resize_sizes) || 'undefined' == typeof (wp_smushit_data.resize_sizes.width) ) {\n\t\t\t//Rely on server validation\n\t\t\treturn true;\n\t\t}\n\n\t\t//Check for width\n\t\tif ( !height_only && 'undefined' != typeof width_input && parseInt( wp_smushit_data.resize_sizes.width ) > parseInt( width_input.val() ) ) {\n\t\t\twidth_input.parent().addClass('sui-form-field-error');\n\t\t\twidth_error_note.show( 'slow' );\n\t\t\twidth_error = true;\n\t\t} else {\n\t\t\t//Remove error class\n\t\t\twidth_input.parent().removeClass('sui-form-field-error');\n\t\t\twidth_error_note.hide();\n\t\t\tif ( height_input.hasClass( 'error' ) ) {\n\t\t\t\theight_error_note.show( 'slow' );\n\t\t\t}\n\t\t}\n\n\t\t//Check for height\n\t\tif ( !width_only && 'undefined' != typeof height_input && parseInt( wp_smushit_data.resize_sizes.height ) > parseInt( height_input.val() ) ) {\n\t\t\theight_input.parent().addClass('sui-form-field-error');\n\t\t\t//If we are not showing the width error already\n\t\t\tif ( !width_error ) {\n\t\t\t\theight_error_note.show( 'slow' );\n\t\t\t}\n\t\t\theight_error = true;\n\t\t} else {\n\t\t\t//Remove error class\n\t\t\theight_input.parent().removeClass('sui-form-field-error');\n\t\t\theight_error_note.hide();\n\t\t\tif ( width_input.hasClass( 'error' ) ) {\n\t\t\t\twidth_error_note.show( 'slow' );\n\t\t\t}\n\t\t}\n\n\t\tif ( width_error || height_error ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\n\t};\n\n\t/**\n\t * Convert bytes to human readable form\n\t * @param a, Bytes\n\t * @param b, Number of digits\n\t * @returns {*} Formatted Bytes\n\t */\n\tvar formatBytes = function ( a, b ) {\n\t\tvar thresh = 1024;\n\t\tif ( Math.abs( a ) < thresh ) {\n\t\t\treturn a + ' B';\n\t\t}\n\t\tvar units = ['KB', 'MB', 'GB', 'TB', 'PB'];\n\t\tvar u = -1;\n\t\tdo {\n\t\t\ta /= thresh;\n\t\t\t++u;\n\t\t} while ( Math.abs( a ) >= thresh && u < units.length - 1 );\n\t\treturn a.toFixed( b ) + ' ' + units[u];\n\t};\n\n\t/**\n\t * Convert bytes to human readable form\n\t * @param a, Bytes\n\t * @param b, Number of digits\n\t * @returns {*} Formatted Bytes\n\t */\n\tvar getSizeFromString = function ( formatted_size ) {\n\t\treturn formatted_size.replace( /[a-zA-Z]/g, '' ).trim();\n\t};\n\n\t/**\n\t * Convert bytes to human readable form\n\t * @param a, Bytes\n\t * @param b, Number of digits\n\t * @returns {*} Formatted Bytes\n\t */\n\tvar getFormatFromString = function ( formatted_size ) {\n\t\treturn formatted_size.replace( /[0-9.]/g, '' ).trim();\n\t};\n\n\t//Stackoverflow: http://stackoverflow.com/questions/1726630/formatting-a-number-with-exactly-two-decimals-in-javascript\n\tvar precise_round = function ( num, decimals ) {\n\t\tvar sign = num >= 0 ? 1 : -1;\n\t\t//Keep the percentage below 100\n\t\tnum = num > 100 ? 100 : num;\n\t\treturn (Math.round( (num * Math.pow( 10, decimals )) + (sign * 0.001) ) / Math.pow( 10, decimals ));\n\t};\n\n\t/**\n\t * Update the progress bar width if we have images that needs to be resmushed\n\t * @param unsmushed_count\n\t * @returns {boolean}\n\t */\n\tvar update_progress_bar_resmush = function ( unsmushed_count ) {\n\n\t\tif ( 'undefined' == typeof unsmushed_count ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar smushed_count = wp_smushit_data.count_total - unsmushed_count;\n\n\t\t//Update the Progress Bar Width\n\t\t// get the progress bar\n\t\tvar $progress_bar = jQuery( '.bulk-smush-wrapper .wp-smush-progress-inner' );\n\t\tif ( $progress_bar.length < 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar width = ( smushed_count / wp_smushit_data.count_total ) * 100;\n\n\t\t// increase progress\n\t\t$progress_bar.css( 'width', width + '%' );\n\t};\n\n\tvar run_re_check = function ( button, process_settings ) {\n\n\t\t// Empty the button text and add loader class.\n\t\tbutton.text( '' ).addClass( 'sui-button-onload sui-icon-loader sui-loading' ).blur();\n\n\t\t//Check if type is set in data attributes\n\t\tvar scan_type = button.data( 'type' );\n\t\tscan_type = 'undefined' == typeof scan_type ? 'media' : scan_type;\n\n\t\t//Remove the Skip resmush attribute from button\n\t\t$( 'button.wp-smush-all' ).removeAttr( 'data-smush' );\n\n\t\t//remove notices\n\t\tvar el = $( '.sui-notice-top.sui-notice-success' );\n\t\tel.slideUp( 100, function () {\n\t\t\tel.remove();\n\t\t} );\n\n\t\t//Disable Bulk smush button and itself\n\t\t$( '.wp-smush-button' ).attr( 'disabled', 'disabled' );\n\n\t\t//Hide Settings changed Notice\n\t\t$( '.wp-smush-settings-changed' ).hide();\n\n\t\t//Ajax Params\n\t\tvar params = {\n\t\t\taction: 'scan_for_resmush',\n\t\t\ttype: scan_type,\n\t\t\tget_ui: true,\n\t\t\tprocess_settings: process_settings,\n\t\t\twp_smush_options_nonce: jQuery( '#wp_smush_options_nonce' ).val()\n\t\t};\n\n\t\t//Send ajax request and get ids if any\n\t\t$.get( ajaxurl, params, function ( r ) {\n\t\t\t//Check if we have the ids,  initialize the local variable\n\t\t\tif ( 'undefined' != typeof r.data ) {\n\t\t\t\t//Update Resmush id list\n\t\t\t\tif ( 'undefined' != typeof r.data.resmush_ids ) {\n\t\t\t\t\twp_smushit_data.resmush = r.data.resmush_ids;\n\n\t\t\t\t\t//Update wp_smushit_data ( Smushed count, Smushed Percent, Image count, Super smush count, resize savings, conversion savings )\n\t\t\t\t\tif ( 'undefinied' != typeof wp_smushit_data ) {\n\t\t\t\t\t\twp_smushit_data.count_smushed = 'undefined' != typeof r.data.count_smushed ? r.data.count_smushed : wp_smushit_data.count_smushed;\n\t\t\t\t\t\twp_smushit_data.count_supersmushed = 'undefined' != typeof r.data.count_supersmushed ? r.data.count_supersmushed : wp_smushit_data.count_supersmushed;\n\t\t\t\t\t\twp_smushit_data.count_images = 'undefined' != typeof r.data.count_image ? r.data.count_image : wp_smushit_data.count_images;\n\t\t\t\t\t\twp_smushit_data.size_before = 'undefined' != typeof r.data.size_before ? r.data.size_before : wp_smushit_data.size_before;\n\t\t\t\t\t\twp_smushit_data.size_after = 'undefined' != typeof r.data.size_after ? r.data.size_after : wp_smushit_data.size_after;\n\t\t\t\t\t\twp_smushit_data.savings_resize = 'undefined' != typeof r.data.savings_resize ? r.data.savings_resize : wp_smushit_data.savings_resize;\n\t\t\t\t\t\twp_smushit_data.savings_conversion = 'undefined' != typeof r.data.savings_conversion ? r.data.savings_conversion : wp_smushit_data.savings_conversion;\n\t\t\t\t\t\twp_smushit_data.count_resize = 'undefined' != typeof r.data.count_resize ? r.data.count_resize : wp_smushit_data.count_resize;\n\t\t\t\t\t}\n\n\t\t\t\t\tif( 'nextgen' == scan_type ) {\n\t\t\t\t\t\twp_smushit_data.bytes = parseInt( wp_smushit_data.size_before ) - parseInt( wp_smushit_data.size_after )\n\t\t\t\t\t}\n\n\t\t\t\t\tvar smush_percent = ( wp_smushit_data.count_smushed / wp_smushit_data.count_total ) * 100;\n\t\t\t\t\tsmush_percent = precise_round( smush_percent, 1 );\n\n\t\t\t\t\t//Update it in stats bar\n\t\t\t\t\t$( '.wp-smush-images-percent' ).html( smush_percent );\n\n\t\t\t\t\t//Hide the Existing wrapper\n\t\t\t\t\tvar notices = $( '.bulk-smush-wrapper .sui-notice' );\n\t\t\t\t\tif ( notices.length > 0 ) {\n\t\t\t\t\t\tnotices.hide();\n\t\t\t\t\t\t$( '.wp-smush-pagespeed-recommendation' ).hide();\n\t\t\t\t\t}\n\t\t\t\t\t//remove existing Re-Smush notices\n\t\t\t\t\t$( '.wp-smush-resmush-notice' ).remove();\n\n\t\t\t\t\t//Show Bulk wrapper\n\t\t\t\t\t$( '.wp-smush-bulk-wrapper' ).show();\n\n\t\t\t\t\tif ( 'undefined' !== typeof r.data.count ) {\n\t\t\t\t\t\t//Update progress bar\n\t\t\t\t\t\tupdate_progress_bar_resmush( r.data.count );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//If content is received, Prepend it\n\t\t\t\tif ( 'undefined' != typeof r.data.content ) {\n\t\t\t\t\t$( '.bulk-smush-wrapper .sui-box-body' ).prepend( r.data.content );\n\t\t\t\t}\n\t\t\t\t//If we have any notice to show\n\t\t\t\tif ( 'undefined' != typeof r.data.notice ) {\n\t\t\t\t\t$( '.wp-smush-page-header' ).after( r.data.notice );\n\t\t\t\t}\n\t\t\t\t//Hide errors\n\t\t\t\t$( 'div.smush-final-log' ).hide();\n\n\t\t\t\t//Hide Super Smush notice if it's enabled in media settings\n\t\t\t\tif ( 'undefined' != typeof r.data.super_smush && r.data.super_smush ) {\n\t\t\t\t\tvar enable_lossy = jQuery( '.wp-smush-enable-lossy' );\n\t\t\t\t\tif ( enable_lossy.length > 0 ) {\n\t\t\t\t\t\tenable_lossy.remove();\n\t\t\t\t\t}\n\t\t\t\t\tif ( 'undefined' !== r.data.super_smush_stats ) {\n\t\t\t\t\t\t$( '.super-smush-attachments .wp-smush-stats' ).html( r.data.super_smush_stats );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tupdate_stats( scan_type );\n\t\t\t}\n\n\t\t} ).always( function () {\n\n\t\t\t//Hide the progress bar\n\t\t\tjQuery( '.bulk-smush-wrapper .wp-smush-bulk-progress-bar-wrapper' ).hide();\n\n\t\t\t// Add check complete status to button.\n\t\t\tbutton.text( wp_smush_msgs.resmush_complete )\n\t\t\t\t.removeClass( 'sui-button-onload sui-icon-loader sui-loading' )\n\t\t\t\t.addClass( 'smush-button-check-success' );\n\n\t\t\t// Remove success message from button.\n\t\t\tsetTimeout( function () {\n\t\t\t\tbutton.removeClass( 'smush-button-check-success' )\n\t\t\t\t\t.text( wp_smush_msgs.resmush_check );\n\t\t\t}, 2000 );\n\n\t\t\t$( '.wp-smush-button' ).removeAttr( 'disabled' );\n\n\t\t\t//If wp-smush-re-check-message is there, remove it\n\t\t\tif ( $( '.wp-smush-re-check-message' ).length ) {\n\t\t\t\tremove_element( $( '.wp-smush-re-check-message' ) );\n\t\t\t}\n\t\t} );\n\t};\n\n\t/**\n\t * Get directory list using Ajax\n\t *\n\t * @param param\n\t * @returns {string}\n\t *\n\t */\n\tvar getDirectoryList = function ( param ) {\n\t\tparam.action = 'smush_get_directory_list';\n\t\tparam.list_nonce = jQuery( 'input[name=\"list_nonce\"]' ).val();\n\t\tvar res = '';\n\t\t$.ajax( {\n\t\t\ttype: \"GET\",\n\t\t\turl: ajaxurl,\n\t\t\tdata: param,\n\t\t\tsuccess: function ( response ) {\n\t\t\t\tres = response;\n\t\t\t},\n\t\t\tasync: false\n\t\t} );\n\t\t//Update the button text\n\t\t$( 'button.wp-smush-select-dir' ).html( wp_smush_msgs.add_dir );\n\t\treturn res;\n\t};\n\t/**\n\t * Hide the popup and reset the opacity for the button\n\t *\n\t */\n\tvar close_dialog = function () {\n\n\t\t// Close the dialog.\n\t\tSUI.dialogs['wp-smush-list-dialog'].hide();\n\n\t\t$( '.wp-smush-select-dir, button.wp-smush-browse, button.wp-smush-resume, a.wp-smush-dir-link' ).removeAttr( 'disabled' );\n\n\t\t// Reset the opacity for content and scan button\n\t\t$( '.wp-smush-select-dir, .wp-smush-list-dialog .sui-box-body' ).css( {'opacity': '1'} );\n\t};\n\n\t/**\n\t * Initialize accordion\n\t *\n\t */\n\tvar set_accordion = function () {\n\n\t\t// backward compat of instantiate new accordion\n\t\tSUI.suiAccordion( $( '.sui-table.sui-accordion.smush-dir-smush-accordion' ) );\n\t};\n\n\t/**\n\t * Check if all the elements in the directory are smushed or not\n\t *\n\t * @param parent directory selector\n\t *\n\t * @returns {boolean}\n\t *\n\t */\n\tvar is_last_element = function ( parent ) {\n\t\tvar elements = parent.find( 'li.wp-smush-image-ele:not(.optimised,.processed,.error)' );\n\t\tif ( elements.length <= 0 ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Update directory optimisation progress if the element has a parent\n\t *\n\t * @param ele\n\t *\n\t */\n\tvar update_dir_progress = function ( ele ) {\n\n\t\tvar ele_tr = ele.closest( 'tr' );\n\t\tvar ele_prev_tr = ele_tr.prev( 'tr' );\n\t\tvar ele_dir_progress = ele_prev_tr.find( '.wp-smush-image-dir-progress' );\n\t\tvar ele_dir_progress_percent = ele_prev_tr.find( '.wp-smush-image-progress-percent' );\n\t\tvar ele_dir_count = ele_prev_tr.find( '.sui-tag' );\n\t\tvar ele_exclude_btn = ele_prev_tr.find( '.wp-smush-exclude-dir' );\n\n\t\tvar children = ele.closest( 'tr' ).find( '.wp-smush-image-ele' );\n\t\tvar parent = ele.is( 'li' ) ? ele.parent() : '';\n\n\t\t//Update the percentage, Check the total number of images inside dir, smushed images count\n\t\tif ( children.length > 0 ) {\n\t\t\tvar total = children.length;\n\t\t\tvar smushed = children.filter( '.optimised' ).length;\n\t\t\tif ( smushed > 0 && total > 0 ) {\n\t\t\t\tele_dir_progress_percent.removeClass( 'sui-hidden' );\n\t\t\t\tvar percent = ( smushed / total ) * 100;\n\t\t\t\tpercent = precise_round( percent, 1 );\n\t\t\t\tele_dir_progress_percent.html( percent + '%' );\n\t\t\t}\n\t\t}\n\n\t\t//Add the class in-progress, to show the respective icon for parent\n\t\tif ( 0 != $( 'input[name=\"wp-smush-continue-ajax\"]' ).val() && smushed != total ) {\n\t\t\t//Append a spinner\n\t\t\tele_dir_progress.addClass( 'sui-icon-loader sui-loading' );\n\t\t}\n\n\t\tif ( parent.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t//Check if last image, and if all the images are not smushed under the specified directory path, add a generic warning message\n\t\tif ( is_last_element( parent ) ) {\n\t\t\tif ( smushed < total ) {\n\t\t\t\tvar unsmushed = total - smushed;\n\t\t\t\tvar message = '<div class=\"sui-notice sui-notice-warning\"><p>' + unsmushed + ' ' + ( 1 == unsmushed ? wp_smush_msgs.unfinished_smush_single : wp_smush_msgs.unfinished_smush ) + '</p></div>';\n\n\t\t\t\t//If the notice is already displayed, remove it\n\t\t\t\tvar notice = parent.find( 'div.sui-notice' );\n\t\t\t\tif ( notice.length ) {\n\t\t\t\t\tnotice.remove();\n\t\t\t\t}\n\n\t\t\t\t//Append message to 2nd parent i.e li\n\t\t\t\tparent.after( message );\n\t\t\t\tele_dir_progress.removeClass( 'sui-icon-loader sui-loading' ).addClass( 'partial' );\n\t\t\t\tele_tr.find( 'td' ).addClass( 'partial' );\n\t\t\t\tele_prev_tr.find( 'td' ).addClass( 'partial' );\n\t\t\t} else {\n\t\t\t\tele_dir_progress.removeClass( 'partial sui-icon-loader sui-loading' ).addClass( 'optimised' );\n\t\t\t\t// Update the count tag class.\n\t\t\t\tele_dir_count.removeClass( 'sui-tag-warning' ).addClass( 'sui-tag-inactive' );\n\t\t\t\tele_exclude_btn.hide();\n\t\t\t\tele_tr.find( 'td' ).removeClass( 'partial' ).addClass( 'optimised' );\n\t\t\t\tele_prev_tr.find( 'td' ).removeClass( 'partial' ).addClass( 'optimised' );\n\t\t\t}\n\t\t\t//Remove the loader and percentage.\n\t\t\tele_dir_progress.removeClass( 'sui-icon-loader sui-loading' );\n\t\t\tele_dir_progress_percent.html( '' );\n\t\t}\n\n\t};\n\n\t/**\n\t * Add choose directory button at the top\n\t *\n\t */\n\tvar add_dir_browser_button = function () {\n\t\t//Get the content div length, if less than 1500, Skip\n\t\tif ( $( 'div.wp-smush-scan-result div.content' ).height() < 1500 || $( 'div.dir-smush-button-wrap.top' ).length >= 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar choose_button = $( 'div.dir-smush-button-wrap' ).clone();\n\t\tchoose_button.addClass( 'top' );\n\t\t$( 'div.wp-smush-scan-result div.content' ).prepend( choose_button );\n\t};\n\n\tvar add_smush_button = function () {\n\t\t//Get the content div length, if less than 1500, Skip\n\t\tif ( $( 'div.wp-smush-scan-result div.content' ).height() < 1500 || $( 'div.wp-smush-all-button-wrap.top' ).length >= 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar smush_button = $( 'div.wp-smush-all-button-wrap.bottom' ).clone();\n\t\tsmush_button.addClass( 'top' ).removeClass( 'bottom' );\n\t\t$( 'div.wp-smush-scan-result div.content' ).prepend( smush_button );\n\n\t};\n\n\t/**\n\t * Add smush notice after directory smushing is finished\n\t *\n\t * @param notice_type\n\t *  all_done -  If all the images were smushed else warning\n\t *  smush_limit - If Free users exceeded limit\n\t *\n\t */\n\tvar add_smush_dir_notice = function ( notice_type ) {\n\t\t//Get the content div length, if less than 1500, Skip\n\t\tif ( $( 'div.wp-smush-scan-result div.content' ).height() < 1500 || $( 'div.wp-smush-scan-result div.sui-notice.top' ).length >= 1 ) {\n\t\t\treturn;\n\t\t}\n\t\tvar notice = '';\n\t\t//Clone and append the notice\n\t\tif ( 'all_done' == notice_type ) {\n\t\t\tnotice = $( 'div.sui-notice.wp-smush-dir-all-done' ).clone();\n\t\t} else if ( 'smush_limit' == notice_type ) {\n\t\t\tnotice = $( 'div.sui-notice.wp-smush-dir-limit' ).clone();\n\t\t} else {\n\t\t\tnotice = $( 'div.sui-notice.wp-smush-dir-remaining' ).clone();\n\t\t}\n\n\t\t//Add class top\n\t\tnotice.addClass( 'top' );\n\n\t\t//Append the notice\n\t\t$( 'div.wp-smush-scan-result div.dir-smush-button-wrap' ).after( notice );\n\t};\n\n\tvar update_smush_progress = function () {\n\t\tvar in_progress_path = $( 'ul.wp-smush-image-list li.in-progress' );\n\t\tin_progress_path.removeClass( 'in-progress active' );\n\t\tif ( in_progress_path.length > 0 ) {\n\t\t\tin_progress_path.each( function ( index, ele ) {\n\t\t\t\tif ( $( ele ).hasClass( 'wp-smush-image-ul' ) ) {\n\t\t\t\t\t//Remove Spinner\n\t\t\t\t\t$( ele ).find( 'span.spinner' ).remove();\n\n\t\t\t\t\t//Check if images are pending\n\t\t\t\t\tvar in_progress_ele = $( ele ).find( 'li.wp-smush-image-ele' );\n\n\t\t\t\t\t//If there are elements\n\t\t\t\t\tif ( in_progress_ele.length > 0 ) {\n\t\t\t\t\t\tvar optimised = in_progress_ele.filter( '.optimised' ).length;\n\t\t\t\t\t\tvar error = in_progress_ele.filter( '.error' ).length;\n\t\t\t\t\t\t//if all the elements are optimised\n\t\t\t\t\t\tif ( optimised == in_progress_ele.length ) {\n\t\t\t\t\t\t\t$( ele ).addClass( 'complete' );\n\t\t\t\t\t\t} else if ( 0 < optimised || 0 < error ) {\n\t\t\t\t\t\t\t//If there are images that needs to be smushed, add the class partial\n\t\t\t\t\t\t\t$( ele ).addClass( 'partial' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t//Remove spinner for the element\n\t\t\t\t\t$( ele ).find( 'span.spinner' ).remove();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t};\n\n\t/**\n\t * Set pro savings stats if not premium user.\n\t *\n\t * For non-premium users, show expected avarage savings based\n\t * on the free version savings.\n\t */\n\tvar set_pro_savings = function () {\n\n\t\t// Default values.\n\t\tvar savings = wp_smushit_data.savings_percent > 0 ? wp_smushit_data.savings_percent : 0;\n\t\tvar savings_bytes = wp_smushit_data.savings_bytes > 0 ? wp_smushit_data.savings_bytes : 0;\n\t\tvar orig_diff = 2.22058824;\n\t\tif ( savings > 49 ) {\n\t\t\tvar orig_diff = 1.22054412;\n\t\t}\n\t\t//Calculate Pro savings\n\t\tif ( savings > 0 ) {\n\t\t\tsavings = orig_diff * savings;\n\t\t\tsavings_bytes = orig_diff * savings_bytes;\n\t\t}\n\n\t\twp_smushit_data.pro_savings = {\n\t\t\t'percent': precise_round( savings, 1 ),\n\t\t\t'savings_bytes': formatBytes( savings_bytes, 1 )\n\n\t\t}\n\t};\n\n\t/**\n\t * Adds the stats for the current image to existing stats\n\t *\n\t * @param image_stats\n\t *\n\t */\n\tvar update_localized_stats = function ( image_stats, type ) {\n\t\t//Increase the smush count\n\t\tif ( 'undefined' == typeof wp_smushit_data ) {\n\t\t\treturn;\n\t\t}\n\n\t\t//No need to increase attachment count, resize, conversion savings for directory smush\n\t\tif ( 'media' == type ) {\n\t\t\twp_smushit_data.count_smushed = parseInt( wp_smushit_data.count_smushed ) + 1;\n\n\t\t\t//Increase smushed image count\n\t\t\twp_smushit_data.count_images = parseInt( wp_smushit_data.count_images ) + parseInt( image_stats.count );\n\n\t\t\t//Increase super smush count, if applicable\n\t\t\tif ( image_stats.is_lossy ) {\n\t\t\t\twp_smushit_data.count_supersmushed = parseInt( wp_smushit_data.count_supersmushed ) + 1;\n\t\t\t}\n\n\t\t\t//Add to Resize Savings\n\t\t\twp_smushit_data.savings_resize = 'undefined' != typeof image_stats.savings_resize.bytes ? parseInt( wp_smushit_data.savings_resize ) + parseInt( image_stats.savings_resize.bytes ) : parseInt( wp_smushit_data.savings_resize );\n\n\t\t\t//Update Resize count\n\t\t\twp_smushit_data.count_resize = 'undefined' != typeof image_stats.savings_resize.bytes ? parseInt( wp_smushit_data.count_resize ) + 1 : wp_smushit_data.count_resize;\n\n\t\t\t//Add to Conversion Savings\n\t\t\twp_smushit_data.savings_conversion = 'undefined' != typeof image_stats.savings_conversion && 'undefined' != typeof image_stats.savings_conversion.bytes ? parseInt( wp_smushit_data.savings_conversion ) + parseInt( image_stats.savings_conversion.bytes ) : parseInt( wp_smushit_data.savings_conversion );\n\t\t} else if ( 'directory_smush' == type ) {\n\t\t\t//Increase smushed image count\n\t\t\twp_smushit_data.count_images = parseInt( wp_smushit_data.count_images ) + 1;\n\t\t} else if ( 'nextgen' == type ) {\n\t\t\twp_smushit_data.count_smushed = parseInt( wp_smushit_data.count_smushed ) + 1;\n\t\t\twp_smushit_data.count_supersmushed = parseInt( wp_smushit_data.count_supersmushed ) + 1;\n\n\t\t\t//Increase smushed image count\n\t\t\twp_smushit_data.count_images = parseInt( wp_smushit_data.count_images ) + parseInt( image_stats.count );\n\t\t}\n\n\t\t//If we have savings\n\t\tif ( image_stats.size_before > image_stats.size_after ) {\n\t\t\t//Update savings\n\t\t\twp_smushit_data.size_before = 'undefined' != typeof image_stats.size_before ? parseInt( wp_smushit_data.size_before ) + parseInt( image_stats.size_before ) : parseInt( wp_smushit_data.size_before );\n\t\t\twp_smushit_data.size_after = 'undefined' != typeof image_stats.size_after ? parseInt( wp_smushit_data.size_after ) + parseInt( image_stats.size_after ) : parseInt( wp_smushit_data.size_after );\n\t\t}\n\t\t//Add stats for resizing\n\t\tif ( 'undefined' != typeof image_stats.savings_resize ) {\n\t\t\t//Update savings\n\t\t\twp_smushit_data.size_before = 'undefined' != typeof image_stats.savings_resize.size_before ? parseInt( wp_smushit_data.size_before ) + parseInt( image_stats.savings_resize.size_before ) : parseInt( wp_smushit_data.size_before );\n\t\t\twp_smushit_data.size_after = 'undefined' != typeof image_stats.savings_resize.size_after ? parseInt( wp_smushit_data.size_after ) + parseInt( image_stats.savings_resize.size_after ) : parseInt( wp_smushit_data.size_after );\n\t\t}\n\t\t//Add stats for Conversion\n\t\tif ( 'undefined' != typeof image_stats.savings_conversion ) {\n\t\t\t//Update savings\n\t\t\twp_smushit_data.size_before = 'undefined' != typeof image_stats.savings_conversion.size_before ? parseInt( wp_smushit_data.size_before ) + parseInt( image_stats.savings_conversion.size_before ) : parseInt( wp_smushit_data.size_before );\n\t\t\twp_smushit_data.size_after = 'undefined' != typeof image_stats.savings_conversion.size_after ? parseInt( wp_smushit_data.size_after ) + parseInt( image_stats.savings_conversion.size_after ) : parseInt( wp_smushit_data.size_after );\n\t\t}\n\t};\n\n\t/**\n\t * Update all stats sections based on the response.\n\t *\n\t * @param scan_type Current scan type.\n\t */\n\tvar update_stats = function ( scan_type ) {\n\n\t\tvar super_savings = 0,\n\t\t\tsmushed_count = 0;\n\t\tvar is_nextgen = 'undefined' != typeof scan_type && 'nextgen' == scan_type;\n\n\t\t//Calculate updated savings in bytes\n\t\twp_smushit_data.savings_bytes = parseInt( wp_smushit_data.size_before ) - parseInt( wp_smushit_data.size_after );\n\n\t\tvar formatted_size = formatBytes( wp_smushit_data.savings_bytes, 1 );\n\n\t\tif ( is_nextgen ) {\n\t\t\t$( '.wp-smush-savings .wp-smush-stats-human' ).html( formatted_size );\n\t\t} else {\n\t\t\t$( '.wp-smush-savings .wp-smush-stats-human' ).html( getFormatFromString( formatted_size ) );\n\t\t\t$( '.sui-summary-large.wp-smush-stats-human' ).html( getSizeFromString( formatted_size ) );\n\t\t}\n\n\t\t//Update the savings percent\n\t\twp_smushit_data.savings_percent = precise_round( ( parseInt( wp_smushit_data.savings_bytes ) / parseInt( wp_smushit_data.size_before ) ) * 100, 1 );\n\t\tif ( ! isNaN( wp_smushit_data.savings_percent ) ) {\n\t\t\t$( '.wp-smush-savings .wp-smush-stats-percent' ).html( wp_smushit_data.savings_percent );\n\t\t}\n\n\t\t//Update Savings in share message\n\t\t//$( 'span.smush-share-savings' ).html( formatBytes( wp_smushit_data.savings_bytes, 1 ) );\n\n\t\t//Update Smush percent\n\t\twp_smushit_data.smush_percent = precise_round( ( parseInt( wp_smushit_data.count_smushed ) / parseInt( wp_smushit_data.count_total ) ) * 100, 1 );\n\t\t$( 'span.wp-smush-images-percent' ).html( wp_smushit_data.smush_percent );\n\n\t\t//Super-Smush Savings\n\t\tif ( 'undefined' != typeof wp_smushit_data.savings_bytes && 'undefined' != typeof wp_smushit_data.savings_resize ) {\n\t\t\tsuper_savings = parseInt( wp_smushit_data.savings_bytes ) - parseInt( wp_smushit_data.savings_resize );\n\t\t\tif ( super_savings > 0 ) {\n\t\t\t\t$( 'li.super-smush-attachments span.smushed-savings' ).html( formatBytes( super_savings, 1 ) );\n\t\t\t}\n\t\t}\n\n\t\t//Update Image count\n\t\tif ( is_nextgen ) {\n\t\t\t$( '.sui-summary-details span.wp-smush-total-optimised' ).html( wp_smushit_data.count_images );\n\t\t} else {\n\t\t\t$( 'span.smushed-items-count span.wp-smush-count-total span.wp-smush-total-optimised' ).html( wp_smushit_data.count_images );\n\t\t}\n\n\t\t//Update image count in share message\n\t\t//$( 'span.smush-share-image-count' ).html( wp_smushit_data.count_images );\n\n\t\t//Update Resize image count\n\t\t$( 'span.smushed-items-count span.wp-smush-count-resize-total span.wp-smush-total-optimised' ).html( wp_smushit_data.count_resize );\n\n\t\t//Update Attachment image count\n\t\t//$( 'div.wp-smush-count-attachment-total span.wp-smush-total-optimised' ).html( wp_smushit_data.count_smushed );\n\n\t\t//Update image count in share message\n\n\t\t//Update supersmushed image count\n\t\tif ( $( 'li.super-smush-attachments .smushed-count' ).length && 'undefined' != typeof wp_smushit_data.count_supersmushed ) {\n\t\t\t$( 'li.super-smush-attachments .smushed-count' ).html( wp_smushit_data.count_supersmushed );\n\t\t}\n\n\t\t//Update Conversion Savings\n\t\tvar smush_conversion_savings = $( '.smush-conversion-savings' );\n\t\tif ( smush_conversion_savings.length > 0 && 'undefined' != typeof ( wp_smushit_data.savings_conversion ) && wp_smushit_data.savings_conversion != '' ) {\n\t\t\tvar conversion_savings = smush_conversion_savings.find( '.wp-smush-stats' );\n\t\t\tif ( conversion_savings.length > 0 ) {\n\t\t\t\tconversion_savings.html( formatBytes( wp_smushit_data.savings_conversion, 1 ) );\n\t\t\t}\n\t\t}\n\n\t\t//Update Resize Savings\n\t\tvar smush_resize_savings = $( '.smush-resize-savings' );\n\t\tif ( smush_resize_savings.length > 0 && 'undefined' != typeof ( wp_smushit_data.savings_resize ) && wp_smushit_data.savings_resize != '' ) {\n\t\t\t// Get the resize savings in number.\n\t\t\tvar savings_value = parseInt( wp_smushit_data.savings_resize );\n\t\t\tvar resize_savings = smush_resize_savings.find( '.wp-smush-stats' );\n\t\t\tvar resize_message = smush_resize_savings.find( '.wp-smush-stats-label-message' );\n\t\t\t// Replace only if value is grater than 0.\n\t\t\tif ( savings_value > 0 && resize_savings.length > 0 ) {\n\t\t\t\t// Hide message.\n\t\t\t\tif ( resize_message.length > 0 ) {\n\t\t\t\t\tresize_message.hide();\n\t\t\t\t}\n\t\t\t\tresize_savings.html( formatBytes( wp_smushit_data.savings_resize, 1 ) );\n\t\t\t}\n\t\t}\n\n\t\t//Update pro Savings\n\t\tset_pro_savings();\n\n\t\t// Updating pro savings stats.\n\t\tif ( 'undefined' != typeof (wp_smushit_data.pro_savings) ) {\n\t\t\t// Pro stats section.\n\t\t\tvar smush_pro_savings = $( '.smush-avg-pro-savings' );\n\t\t\tif ( smush_pro_savings.length > 0 ) {\n\t\t\t\tvar pro_savings_percent = smush_pro_savings.find( '.wp-smush-stats-percent' );\n\t\t\t\tvar pro_savings_bytes = smush_pro_savings.find( '.wp-smush-stats-human' );\n\t\t\t\tif ( pro_savings_percent.length > 0 && 'undefined' != typeof (wp_smushit_data.pro_savings.percent) && wp_smushit_data.pro_savings.percent != '' ) {\n\t\t\t\t\tpro_savings_percent.html( wp_smushit_data.pro_savings.percent );\n\t\t\t\t}\n\t\t\t\tif ( pro_savings_bytes.length > 0 && 'undefined' != typeof (wp_smushit_data.pro_savings.savings_bytes) && wp_smushit_data.pro_savings.savings_bytes != '' ) {\n\t\t\t\t\tpro_savings_bytes.html( wp_smushit_data.pro_savings.savings_bytes );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Update the progress and show notice when smush completes\n\t */\n\tvar directory_smush_finished = function ( notice_type ) {\n\n\t\t// Remove progress icon from navbar.\n\t\t$( '.smush-nav-icon.directory' ).removeClass( 'sui-icon-loader sui-loading' );\n\n\t\t//If there are no images left\n\t\t$( 'button.wp-smush-pause' ).hide().attr( 'disabled', 'disabled' );\n\n\t\t//Hide Bulk Smush button if smush was stopped for error or finished\n\t\tif ( '' == notice_type ) {\n\t\t\t$( 'button.wp-smush-start' ).parent().hide();\n\t\t} else {\n\t\t\t$( 'button.wp-smush-start' ).show().removeAttr( 'disabled' );\n\t\t}\n\n\t\t//Enable Choose directory button\n\t\t$( 'button.wp-smush-browse' ).show().removeAttr( 'disabled', 'disabled' );\n\n\t\t//Clone Choose Directory Button and add at the top\n\t\tadd_dir_browser_button();\n\n\t\t//Clone and add Smush button\n\t\tadd_smush_button();\n\n\t\tif ( '' == notice_type ) {\n\t\t\t//Get the Total and Optimised image count\n\t\t\tvar image_ele = $( 'li.wp-smush-image-ele' );\n\t\t\tvar total = image_ele.length;\n\t\t\tvar remaning = image_ele.filter( ':not(.optimised)' ).length;\n\t\t\tvar smushed = total - remaning;\n\t\t\tif ( remaning > 0 ) {\n\t\t\t\t//Append the count\n\t\t\t\t$( 'span.wp-smush-dir-remaining' ).html( remaning );\n\t\t\t\t$( 'span.wp-smush-dir-total' ).html( total );\n\t\t\t\t$( 'span.wp-smush-dir-smushed' ).html( smushed );\n\n\t\t\t\t//Show remaining image notice\n\t\t\t\t$( '.sui-notice.wp-smush-dir-remaining' ).show();\n\n\t\t\t\t//Show notice on top if required\n\t\t\t\tadd_smush_dir_notice();\n\t\t\t} else {\n\n\t\t\t\t//Show success image notice\n\t\t\t\tvar message = $( '.sui-notice.wp-smush-dir-all-done' ).clone().show();\n\t\t\t\t// Hide images list.\n\t\t\t\t$( '.wp-smush-image-list tbody tr' ).not( ':first' ).not( ':last' ).hide();\n\t\t\t\t$( '.wp-smush-image-list tbody tr:first td' ).html( message ).removeClass( 'partial optimised' );\n\n\t\t\t\t//Show notice on top if required\n\t\t\t\tadd_smush_dir_notice( 'all_done' );\n\t\t\t}\n\t\t} else {\n\t\t\t//Show Bulk Limit Notice\n\t\t\t$( '.wp-smush-notice.wp-smush-dir-limit' ).show();\n\t\t\t//Show notice on top if required\n\t\t\tadd_smush_dir_notice( 'smush_limit' );\n\t\t}\n\t};\n\n\t/**\n\t * Start Optimising all the images listed in last directory scan\n\t */\n\tvar smush_all = function () {\n\n\t\tvar unprocessed_child = jQuery( '.wp-smush-image-list .wp-smush-image-ele:not(\".optimised, .processed\")' );\n\n\t\t//Update the Optimising status for the image\n\t\tvar first_child = unprocessed_child.first();\n\n\t\tvar img_progress = first_child.find( '.wp-smush-image-ele-progress' );\n\t\tvar parent_tr = first_child.closest( 'tr' ).prev( 'tr' );\n\t\tvar dir_progress = parent_tr.find( '.wp-smush-image-dir-progress' );\n\t\tvar exclude_btn = parent_tr.find( '.wp-smush-exclude-dir' );\n\t\tvar progress_percent = parent_tr.find( '.wp-smush-image-progress-percent' );\n\n\t\t//Check if the selected element is under expandable li\n\t\tif ( dir_progress.length == 1 ) {\n\t\t\tdir_progress.addClass( 'sui-icon-loader sui-loading' ).removeClass( 'partial optimised' );\n\t\t\texclude_btn.addClass( 'sui-hidden' ).hide();\n\t\t}\n\n\t\t// Show waiting message.\n\t\t$( '.wp-smush-image-progress-percent' ).not( '.optimised' ).removeClass( 'sui-hidden' );\n\n\t\t//Append and show spinner\n\t\timg_progress.addClass( 'sui-icon-loader sui-loading' );\n\n\t\t//If all the elements are optimised, No need to send ajax request\n\t\tif ( first_child.length === 0 ) {\n\t\t\tdirectory_smush_finished( '' );\n\t\t\treturn;\n\t\t}\n\n\t\t/** Ajax Request to optimise directory images */\n\t\tvar param = {\n\t\t\taction: 'optimise',\n\t\t\timage_id: first_child.attr( 'id' ),\n\t\t\tget_stats: unprocessed_child.length > 1 ? 0 : 1,\n\t\t\tnonce: $( '#wp-smush-all' ).val()\n\t\t};\n\n\t\t//Send Ajax request\n\t\t$.get( ajaxurl, param, function ( res ) {\n\n\t\t\t//Check, if limit is exceeded for free version\n\t\t\tif ( typeof res.data !== \"undefined\" && res.data.error == 'dir_smush_limit_exceeded' ) {\n\t\t\t\t//@todo: Check if this is required anymore\n\t\t\t\tfirst_child.removeClass('processed');\n\t\t\t\t//Show error, Bulk Smush limit exceeded\n\t\t\t\tdirectory_smush_finished( 'wp-smush-dir-limit' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//append stats, remove loader, add loader to next image, loop\n\t\t\tvar data = 'undefined' != typeof ( res.data ) ? res.data : '';\n\n\t\t\t//If image element is there\n\t\t\tif ( 'undefined' != typeof(data.image) ) {\n\t\t\t\t//Mark Optimised\n\t\t\t\tvar ele = jQuery( document.getElementById( data.image.id ) );\n\t\t\t\tvar ele_img_progress = ele.find( '.wp-smush-image-ele-progress' );\n\n\t\t\t\tele.removeClass( 'partial' );\n\t\t\t\tele_img_progress.removeClass( 'sui-icon-loader sui-loading' );\n\n\t\t\t\tif ( res.success ) {\n\n\t\t\t\t\tele.addClass( 'optimised' );\n\t\t\t\t\tele_img_progress.addClass( 'optimised' );\n\n\t\t\t\t\t//Update Directory progress\n\t\t\t\t\tupdate_dir_progress( ele );\n\n\t\t\t\t\t// @todo Update stats.\n\t\t\t\t} else {\n\t\t\t\t\t//If there was an error optimising the image\n\t\t\t\t\tele.addClass( 'processed' );\n\t\t\t\t\tele_img_progress.addClass( 'partial' );\n\t\t\t\t\t//Update Directory progress\n\t\t\t\t\tupdate_dir_progress( ele );\n\t\t\t\t}\n\n\t\t\t\t//@todo: Fixed stats UI\n\t\t\t}\n\n\t\t\t//If user haven't paused the Smushing\n\t\t\tif ( 1 == $( 'input[name=\"wp-smush-continue-ajax\"]' ).val() ) {\n\t\t\t\t//Loop\n\t\t\t\tsmush_all( false );\n\t\t\t} else {\n\t\t\t\t//Reset the Ajax flag\n\t\t\t\t$( 'input.wp-smush-continue-ajax' ).val( 1 );\n\t\t\t}\n\n\t\t} );\n\t};\n\n\t//Finds y value of given object\n\tfunction findPos( obj ) {\n\t\tvar curtop = 0;\n\t\tif ( obj.offsetParent ) {\n\t\t\tdo {\n\t\t\t\tcurtop += obj.offsetTop;\n\t\t\t} while ( obj = obj.offsetParent );\n\t\t\treturn [curtop];\n\t\t}\n\t}\n\n\t// Scroll the element to top of the page.\n\tvar goToByScroll = function ( selector ) {\n\t\t// Scroll if element found.\n\t\tif ( $( selector ).length > 0 ) {\n\t\t\t$( 'html, body' ).animate( {\n\t\t\t\t\tscrollTop: $( selector ).offset().top - 100\n\t\t\t\t}, 'slow'\n\t\t\t);\n\t\t}\n\t};\n\n\tvar disable_buttons = function ( self ) {\n\t\tself.attr( 'disabled', 'disabled' );\n\t\t$( '.wp-smush-browse' ).attr( 'disabled', 'disabled' );\n\t};\n\n\tvar update_cummulative_stats = function ( stats ) {\n\t\t//Update Directory Smush Stats\n\t\tif ( 'undefined' != typeof ( stats.dir_smush ) ) {\n\t\t\tvar stats_human = $( 'li.smush-dir-savings span.wp-smush-stats span.wp-smush-stats-human' );\n\t\t\tvar stats_percent = $( 'li.smush-dir-savings span.wp-smush-stats span.wp-smush-stats-percent' );\n\n\t\t\t// Do not replace if 0 savings.\n\t\t\tif ( stats.dir_smush.bytes > 0 ) {\n\t\t\t\t// Hide selector.\n\t\t\t\t$( 'li.smush-dir-savings .wp-smush-stats-label-message' ).hide();\n\t\t\t\t//Update Savings in bytes\n\t\t\t\tif ( stats_human.length > 0 ) {\n\t\t\t\t\tstats_human.html( stats.dir_smush.human );\n\t\t\t\t} else {\n\t\t\t\t\tvar span = '<span class=\"wp-smush-stats-human\">' + stats.dir_smush.bytes + '</span>';\n\t\t\t\t}\n\n\t\t\t\t//Percentage section\n\t\t\t\tif ( stats.dir_smush.percent > 0 ) {\n\t\t\t\t\t// Show size and percentage separator.\n\t\t\t\t\t$( 'li.smush-dir-savings span.wp-smush-stats span.wp-smush-stats-sep' ).removeClass('sui-hidden');\n\t\t\t\t\t//Update Optimisation percentage\n\t\t\t\t\tif ( stats_percent.length > 0 ) {\n\t\t\t\t\t\tstats_percent.html( stats.dir_smush.percent + '%' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar span = '<span class=\"wp-smush-stats-percent\">' + stats.dir_smush.percent + '%' + '</span>';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//Update Combined stats\n\t\tif ( 'undefined' != typeof ( stats.combined_stats ) && stats.combined_stats.length > 0 ) {\n\t\t\tvar c_stats = stats.combined_stats;\n\n\t\t\tvar smush_percent = ( c_stats.smushed / c_stats.total_count ) * 100;\n\t\t\tsmush_percent = precise_round( smush_percent, 1 );\n\n\t\t\t//Smushed Percent\n\t\t\tif ( smush_percent ) {\n\t\t\t\t$( 'div.wp-smush-count-total span.wp-smush-images-percent' ).html( smush_percent );\n\t\t\t}\n\t\t\t//Update Total Attachment Count\n\t\t\tif ( c_stats.total_count ) {\n\t\t\t\t$( 'span.wp-smush-count-total span.wp-smush-total-optimised' ).html( c_stats.total_count );\n\t\t\t}\n\t\t\t//Update Savings and Percent\n\t\t\tif ( c_stats.savings ) {\n\t\t\t\t$( 'span.wp-smush-savings span.wp-smush-stats-human' ).html( c_stats.savings );\n\t\t\t}\n\t\t\tif ( c_stats.percent ) {\n\t\t\t\t$( 'span.wp-smush-savings span.wp-smush-stats-percent' ).html( c_stats.percent );\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Show directory list popup and foucs on close button\n\t */\n\tvar showDialog = function () {\n\t\t//Shows the directories available\n\t\t$( '.wp-smush-list-dialog' ).show();\n\t\t$( '.wp-smush-list-dialog div.close' ).focus();\n\t};\n\n\t//Remove span tag from URL\n\tfunction removeSpan( url ) {\n\t\tvar url = url.slice( url.indexOf( '?' ) + 1 ).split( '&' );\n\t\tfor ( var i = 0; i < url.length; i++ ) {\n\t\t\tvar urlparam = decodeURI( url[i] ).split( /=(.+)/ )[1];\n\t\t\treturn urlparam.replace( /<(?:.|\\n)*?>/gm, '' );\n\t\t}\n\t}\n\n\t/**\n\t * Handle the Smush Stats link click\n\t */\n\t$( 'body' ).on( 'click', 'a.smush-stats-details', function ( e ) {\n\n\t\t//If disabled\n\t\tif ( 'disabled' == $( this ).attr( 'disabled' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// prevent the default action\n\t\te.preventDefault();\n\t\t//Replace the `+` with a `-`\n\t\tvar slide_symbol = $( this ).find( '.stats-toggle' );\n\t\t$( this ).parents().eq( 1 ).find( '.smush-stats-wrapper' ).slideToggle();\n\t\tslide_symbol.text( slide_symbol.text() == '+' ? '-' : '+' );\n\n\n\t} );\n\n\t/** Handle smush button click **/\n\t$( 'body' ).on( 'click', '.wp-smush-send:not(.wp-smush-resmush)', function ( e ) {\n\t\t// prevent the default action\n\t\te.preventDefault();\n\t\tnew WP_Smush.Smush( $( this ), false );\n\t} );\n\n\t/** Handle NextGen Gallery smush button click **/\n\t$( 'body' ).on( 'click', '.wp-smush-nextgen-send', function ( e ) {\n\t\t// prevent the default action\n\t\te.preventDefault();\n\t\tnew WP_Smush.Smush( $( this ), false, 'nextgen' );\n\t} );\n\n\t/** Handle NextGen Gallery Bulk smush button click **/\n\t$( 'body' ).on( 'click', '.wp-smush-nextgen-bulk', function ( e ) {\n\t\t// prevent the default action\n\t\te.preventDefault();\n\n\t\t//Check for ids, if there is none (Unsmushed or lossless), don't call smush function\n\t\tif ( typeof wp_smushit_data == 'undefined' ||\n\t\t\t( wp_smushit_data.unsmushed.length == 0 && wp_smushit_data.resmush.length == 0 )\n\t\t) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\tjQuery( '.wp-smush-button, .wp-smush-scan' ).attr( 'disabled', 'disabled' );\n\t\t$( \".wp-smush-notice.wp-smush-remaining\" ).hide();\n\t\tnew WP_Smush.Smush( $( this ), true, 'nextgen' );\n\n\t} );\n\n\t/** Restore: Media Library **/\n\t$( 'body' ).on( 'click', '.wp-smush-action.wp-smush-restore', function ( e ) {\n\t\tvar current_button = $( this );\n\t\tvar smush_action = 'smush_restore_image';\n\t\tprocess_smush_action( e, current_button, smush_action, 'restore' );\n\t\t//Change the class oa parent div ( Level 2 )\n\t\tvar parent = current_button.parents().eq( 1 );\n\t\tif ( parent.hasClass( 'smushed' ) ) {\n\t\t\tparent.removeClass( 'smushed' ).addClass( 'unsmushed' );\n\t\t}\n\t} );\n\n\t/** Resmush: Media Library **/\n\t$( 'body' ).on( 'click', '.wp-smush-action.wp-smush-resmush', function ( e ) {\n\t\tvar current_button = $( this );\n\t\tvar smush_action = 'smush_resmush_image';\n\t\tprocess_smush_action( e, current_button, smush_action, 'smushing' );\n\t} );\n\n\t/** Restore: NextGen Gallery **/\n\t$( 'body' ).on( 'click', '.wp-smush-action.wp-smush-nextgen-restore', function ( e ) {\n\t\tvar current_button = $( this );\n\t\tvar smush_action = 'smush_restore_nextgen_image';\n\t\tprocess_smush_action( e, current_button, smush_action, 'restore' );\n\t} );\n\n\t/** Resmush: NextGen Gallery **/\n\t$( 'body' ).on( 'click', '.wp-smush-action.wp-smush-nextgen-resmush', function ( e ) {\n\t\tvar current_button = $( this );\n\t\tvar smush_action = 'smush_resmush_nextgen_image';\n\t\tprocess_smush_action( e, current_button, smush_action, 'smushing' );\n\t} );\n\n\t//Scan For resmushing images\n\t$( 'body' ).on( 'click', '.wp-smush-scan', function ( e ) {\n\n\t\te.preventDefault();\n\n\t\t//Run the Re-check\n\t\trun_re_check( $( this ), false );\n\t} );\n\n\t//Dismiss Welcome notice\n\t//@todo: Use it for popup\n\t$( '#wp-smush-welcome-box .smush-dismiss-welcome' ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\t\tvar $el = $( this ).parents().eq( 1 );\n\t\tremove_element( $el );\n\n\t\t//Send a ajax request to save the dismissed notice option\n\t\tvar param = {\n\t\t\taction: 'dismiss_welcome_notice'\n\t\t};\n\t\t$.post( ajaxurl, param );\n\t} );\n\n\t//Remove Notice\n\t$( 'body' ).on( 'click', '.wp-smush-notice .icon-fi-close', function ( e ) {\n\t\te.preventDefault();\n\t\tvar $el = $( this ).parent();\n\t\tremove_element( $el );\n\t} );\n\n\t//On Click Update Settings. Check for change in settings\n\t$( 'input#wp-smush-save-settings' ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\n\t\tvar setting_type = '';\n\t\tvar setting_input = $( 'input[name=\"setting-type\"]' );\n\t\t//Check if setting type is set in the form\n\t\tif ( setting_input.length > 0 ) {\n\t\t\tsetting_type = setting_input.val();\n\t\t}\n\n\t\t//Show the spinner\n\t\tvar self = $( this );\n\t\tself.parent().find( 'span.sui-icon-loader.sui-loading' ).removeClass( 'sui-hidden' );\n\n\t\t//Save settings if in network admin\n\t\tif ( '' != setting_type && 'network' == setting_type ) {\n\t\t\t//Ajax param\n\t\t\tvar param = {\n\t\t\t\taction: 'save_settings',\n\t\t\t\tnonce: $( '#wp_smush_options_nonce' ).val()\n\t\t\t};\n\n\t\t\tparam = jQuery.param( param ) + '&' + jQuery( 'form#wp-smush-settings-form' ).serialize();\n\n\t\t\t//Send ajax, Update Settings, And Check For resmush\n\t\t\tjQuery.post( ajaxurl, param ).done( function () {\n\t\t\t\tjQuery( 'form#wp-smush-settings-form' ).submit();\n\t\t\t\treturn true;\n\t\t\t} );\n\t\t} else {\n\n\t\t\t//Check for all the settings, and scan for resmush\n\t\t\tvar wrapper_div = self.parents().eq( 1 );\n\n\t\t\t//Get all the main settings\n\t\t\tvar keep_exif = document.getElementById( \"wp-smush-keep_exif\" );\n\t\t\tvar super_smush = document.getElementById( \"wp-smush-lossy\" );\n\t\t\tvar smush_original = document.getElementById( \"wp-smush-original\" );\n\t\t\tvar resize_images = document.getElementById( \"wp-smush-resize\" );\n\t\t\tvar smush_pngjpg = document.getElementById( \"wp-smush-png_to_jpg\" );\n\n\t\t\tvar update_button_txt = true;\n\n\t\t\t$( '.wp-smush-hex-notice' ).hide();\n\n\t\t\t//If Preserve Exif is Checked, and all other settings are off, just save the settings\n\t\t\tif ( ( keep_exif === null || keep_exif.checked )\n\t\t\t\t&& ( super_smush === null || !super_smush.checked )\n\t\t\t\t&& ( smush_original === null || !smush_original.checked )\n\t\t\t\t&& ( resize_images === null || !resize_images.checked )\n\t\t\t\t&& ( smush_pngjpg === null || !smush_pngjpg.checked )\n\t\t\t) {\n\t\t\t\tupdate_button_txt = false;\n\t\t\t}\n\n\t\t\t//Update text\n\t\t\tself.attr( 'disabled', 'disabled' ).addClass( 'button-grey' );\n\n\t\t\tif ( update_button_txt ) {\n\t\t\t\tself.val( wp_smush_msgs.checking )\n\t\t\t}\n\n\t\t\t//Check if type is set in data attributes\n\t\t\tvar scan_type = self.data( 'type' );\n\t\t\tscan_type = 'undefined' == typeof scan_type ? 'media' : scan_type;\n\n\t\t\t//Ajax param\n\t\t\tvar param = {\n\t\t\t\taction: 'scan_for_resmush',\n\t\t\t\twp_smush_options_nonce: jQuery( '#wp_smush_options_nonce' ).val(),\n\t\t\t\tscan_type: scan_type\n\t\t\t};\n\n\t\t\tparam = jQuery.param( param ) + '&' + jQuery( 'form#wp-smush-settings-form' ).serialize();\n\n\t\t\t//Send ajax, Update Settings, And Check For resmush\n\t\t\tjQuery.post( ajaxurl, param ).done( function () {\n\t\t\t\tjQuery( 'form#wp-smush-settings-form' ).submit();\n\t\t\t\treturn true;\n\t\t\t} );\n\t\t}\n\t} );\n\n\t// On Resmush click.\n\t$( 'body' ).on( 'click', '.wp-smush-skip-resmush', function ( e ) {\n\t\te.preventDefault();\n\t\tvar self = jQuery( this );\n\t\tvar container = self.parents().eq( 1 );\n\n\t\t// Remove Parent div.\n\t\tvar $el = self.parent();\n\t\tremove_element( $el );\n\n\t\t// Remove Settings Notice.\n\t\t$( '.sui-notice-top.sui-notice-success' ).remove();\n\n\t\t// Set button attribute to skip re-smush ids.\n\t\tcontainer.find( '.wp-smush-all' ).attr( 'data-smush', 'skip_resmush' );\n\n\t\t// Update Smushed count.\n\t\twp_smushit_data.count_smushed = parseInt( wp_smushit_data.count_smushed ) + wp_smushit_data.resmush.length;\n\t\twp_smushit_data.count_supersmushed = parseInt( wp_smushit_data.count_supersmushed ) + wp_smushit_data.resmush.length;\n\n\t\t// Update Stats.\n\t\tif ( wp_smushit_data.count_smushed == wp_smushit_data.count_total ) {\n\n\t\t\t// Show all done notice.\n\t\t\t$( '.wp-smush-notice.wp-smush-all-done, .wp-smush-pagespeed-recommendation' ).show();\n\n\t\t\t// Hide Smush button.\n\t\t\t$( '.wp-smush-bulk-wrapper ' ).hide()\n\n\t\t}\n\t\t//Remove Re-Smush Notice\n\t\t$( '.wp-smush-resmush-notice' ).remove();\n\n\t\tvar type = $( '.wp-smush-scan' ).data( 'type' );\n\t\ttype = 'undefined' == typeof type ? 'media' : type;\n\n\t\tvar smushed_count = 'undefined' != typeof wp_smushit_data.count_smushed ? wp_smushit_data.count_smushed : 0;\n\n\t\tvar smush_percent = ( smushed_count / wp_smushit_data.count_total ) * 100;\n\t\tsmush_percent = precise_round( smush_percent, 1 );\n\n\t\t$( '.wp-smush-images-percent' ).html( smush_percent );\n\n\t\t//Update the Progress Bar Width\n\t\t// get the progress bar\n\t\tvar $progress_bar = jQuery( '.bulk-smush-wrapper .wp-smush-progress-inner' );\n\t\tif ( $progress_bar.length < 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// increase progress\n\t\t$progress_bar.css( 'width', smush_percent + '%' );\n\n\t\t//Show the default bulk smush notice\n\t\t$( '.wp-smush-bulk-wrapper' ).show();\n\t\t$( '.wp-smush-bulk-wrapper .sui-notice' ).show();\n\n\t\tvar params = {\n\t\t\taction: 'delete_resmush_list',\n\t\t\ttype: type\n\t\t};\n\t\t//Delete resmush list, @todo: update stats from the ajax response\n\t\t$.post( ajaxurl, params, function ( res ) {\n\t\t\t//Remove the whole li element on success\n\t\t\tif ( res.success && 'undefined' != typeof res.data.stats ) {\n\t\t\t\tvar stats = res.data.stats;\n\t\t\t\t//Update wp_smushit_data ( Smushed count, Smushed Percent, Image count, Super smush count, resize savings, conversion savings )\n\t\t\t\tif ( 'undefinied' != typeof wp_smushit_data ) {\n\t\t\t\t\twp_smushit_data.count_images = 'undefined' != typeof stats.count_images ? parseInt( wp_smushit_data.count_images ) + stats.count_images : wp_smushit_data.count_images;\n\t\t\t\t\twp_smushit_data.size_before = 'undefined' != typeof stats.size_before ? parseInt( wp_smushit_data.size_before ) + stats.size_before : wp_smushit_data.size_before;\n\t\t\t\t\twp_smushit_data.size_after = 'undefined' != typeof stats.size_after ? parseInt( wp_smushit_data.size_after ) + stats.size_after : wp_smushit_data.size_after;\n\t\t\t\t\twp_smushit_data.savings_resize = 'undefined' != typeof stats.savings_resize ? parseInt( wp_smushit_data.savings_resize ) + stats.savings_resize : wp_smushit_data.savings_resize;\n\t\t\t\t\twp_smushit_data.savings_conversion = 'undefined' != typeof stats.savings_conversion ? parseInt( wp_smushit_data.savings_conversion ) + stats.savings_conversion : wp_smushit_data.savings_conversion;\n\t\t\t\t\t//Add directory smush stats\n\t\t\t\t\tif ( 'undefined' != typeof ( wp_smushit_data.savings_dir_smush ) && 'undefined' != typeof ( wp_smushit_data.savings_dir_smush.orig_size ) ) {\n\t\t\t\t\t\twp_smushit_data.size_before = 'undefined' != typeof wp_smushit_data.savings_dir_smush ? parseInt( wp_smushit_data.size_before ) + parseInt( wp_smushit_data.savings_dir_smush.orig_size ) : wp_smushit_data.size_before;\n\t\t\t\t\t\twp_smushit_data.size_after = 'undefined' != typeof wp_smushit_data.savings_dir_smush ? parseInt( wp_smushit_data.size_after ) + parseInt( wp_smushit_data.savings_dir_smush.image_size ) : wp_smushit_data.size_after;\n\t\t\t\t\t}\n\n\t\t\t\t\twp_smushit_data.count_resize = 'undefined' != typeof stats.count_resize ? parseInt( wp_smushit_data.count_resize ) + stats.count_resize : wp_smushit_data.count_resize;\n\t\t\t\t}\n\t\t\t\t//Smush Notice\n\t\t\t\tif ($('.bulk-smush-wrapper .wp-smush-remaining-count').length && 'undefined' != typeof wp_smushit_data.unsmushed ) {\n\t\t\t\t\t$('.bulk-smush-wrapper .wp-smush-remaining-count').html(wp_smushit_data.unsmushed.length);\n\t\t\t\t}\n\t\t\t\tupdate_stats();\n\t\t\t}\n\t\t} );\n\n\t} );\n\n\t/**\n\t * Enable resize in settings and scroll.\n\t */\n\tvar scroll_and_enable_resize = function () {\n\t\t// Enable resize, show resize settings.\n\t\t$( '#wp-smush-resize' ).prop( 'checked', true ).focus();\n\t\t$( 'div.wp-smush-resize-settings-wrap' ).show();\n\n\t\t// Scroll down to settings area.\n\t\tgoToByScroll( \"#column-wp-smush-resize\" );\n\t}\n\n\t/**\n\t * Enable super smush in settings and scroll.\n\t */\n\tvar scroll_and_enable_lossy = function () {\n\t\t// Enable super smush.\n\t\t$( '#wp-smush-lossy' ).prop( 'checked', true ).focus();\n\n\t\t// Scroll down to settings area.\n\t\tgoToByScroll( \"#column-wp-smush-lossy\" );\n\t}\n\n\t// Enable super smush on clicking link from stats area.\n\t$( 'a.wp-smush-lossy-enable' ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\n\t\tscroll_and_enable_lossy();\n\t} );\n\n\t// Enable resize on clicking link from stats area.\n\t$( '.wp-smush-resize-enable' ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\n\t\tscroll_and_enable_resize();\n\t} );\n\n\t// If settings string is found in url, enable and scroll.\n\tif ( window.location.hash ) {\n\t\tvar setting_hash = window.location.hash.substring( 1 );\n\t\t// Enable and scroll to resize settings.\n\t\tif ( 'enable-resize' === setting_hash ) {\n\t\t\tscroll_and_enable_resize();\n\t\t} else if ( 'enable-lossy' === setting_hash ) {\n\t\t\t// Enable and scroll to lossy settings.\n\t\t\tscroll_and_enable_lossy();\n\t\t}\n\t}\n\n\t//Trigger Bulk\n\t$( 'body' ).on( 'click', '.wp-smush-trigger-bulk', function ( e ) {\n\t\te.preventDefault();\n\t\t//Induce Setting button save click\n\t\t$( 'button.wp-smush-all' ).click();\n\t\t$( 'span.sui-notice-dismiss' ).click();\n\t} );\n\n\t//Allow the checkboxes to be Keyboard Accessible\n\t$( '.wp-smush-setting-row .toggle-checkbox' ).focus( function () {\n\t\t//If Space is pressed\n\t\t$( this ).keypress( function ( e ) {\n\t\t\tif ( e.keyCode == 32 ) {\n\t\t\t\te.preventDefault();\n\t\t\t\t$( this ).find( '.toggle-checkbox' ).click();\n\t\t\t}\n\t\t} );\n\t} );\n\n\t// Re-Validate Resize Width And Height.\n\t$( 'body' ).on( 'blur', '.wp-smush-resize-input', function () {\n\n\t\tvar self = $( this );\n\n\t\tvar wrapper_div = self.parents().eq( 4 );\n\n\t\t// Initiate the check.\n\t\tvalidate_resize_settings( wrapper_div, false, false ); // run the validation.\n\t} );\n\n\t// Handle Resize Checkbox toggle, to show/hide width, height settings.\n\t$( 'body' ).on( 'click', '#wp-smush-resize, #wp-smush-resize-quick-setup', function () {\n\t\tvar self = $( this );\n\t\tvar settings_wrap = $( '.wp-smush-resize-settings-wrap' );\n\n\t\tif ( self.is( ':checked' ) ) {\n\t\t\tsettings_wrap.show();\n\t\t} else {\n\t\t\tsettings_wrap.hide();\n\t\t}\n\t} );\n\n\t// Handle Automatic Smush Checkbox toggle, to show/hide image size settings.\n\t$( 'body' ).on( 'click', '#wp-smush-auto', function () {\n\t\tvar self = $( this );\n\t\tvar settings_wrap = $( '.wp-smush-image-size-list' );\n\n\t\tif ( self.is( ':checked' ) ) {\n\t\t\tsettings_wrap.show();\n\t\t} else {\n\t\t\tsettings_wrap.hide();\n\t\t}\n\t} );\n\n\t// Handle auto detect checkbox toggle, to show/hide highlighting notice.\n\t$( 'body' ).on( 'click', '#wp-smush-detection', function () {\n\t\tvar self = $( this );\n\t\tvar notice_wrap = $( '.smush-highlighting-notice' );\n\n\t\tif ( self.is( ':checked' ) ) {\n\t\t\tnotice_wrap.show();\n\t\t} else {\n\t\t\tnotice_wrap.hide();\n\t\t}\n\t} );\n\n\t// Handle PNG to JPG Checkbox toggle, to show/hide Transparent image conversion settings.\n\t$( '#wp-smush-png_to_jpg' ).click( function () {\n\t\tvar self = $( this );\n\t\tvar settings_wrap = $( '.wp-smush-png_to_jpg-wrap' );\n\n\t\tif ( self.is( ':checked' ) ) {\n\t\t\tsettings_wrap.show();\n\t\t} else {\n\t\t\tsettings_wrap.hide();\n\t\t}\n\t} );\n\n\t//Handle, Change event in Enable Networkwide settings\n\t$( '#wp-smush-networkwide' ).on( 'click', function ( e ) {\n\t\tif ( $( this ).is( ':checked' ) ) {\n\t\t\t$( '.network-settings-wrapper' ).show();\n\t\t\t$( '.sui-vertical-tabs li' ).not( '.smush-bulk' ).each( function ( n ) {\n\t\t\t\t$( this ).removeClass( 'sui-hidden' );\n\t\t\t} );\n\t\t} else {\n\t\t\t$( '.network-settings-wrapper' ).hide();\n\t\t\t$( '.sui-vertical-tabs li' ).not( '.smush-bulk' ).each( function ( n ) {\n\t\t\t\t$( this ).addClass( 'sui-hidden' );\n\t\t\t} );\n\t\t}\n\t} );\n\n\t//Handle Twitter Share\n\t$( '#wp-smush-twitter-share' ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\t\tvar url = this.href;\n\t\tvar text = removeSpan( url );\n\t\t//Update text in URL\n\t\turl = url.replace( /(text=)[^\\&]+/, '$1' + text );\n\t\tvar width = 550,\n\t\t\theight = 420,\n\t\t\tleft = ($( window ).width() - width) / 2,\n\t\t\ttop = ($( window ).height() - height) / 2,\n\t\t\turl = url,\n\t\t\topts = 'status=1' +\n\t\t\t\t',width=' + width +\n\t\t\t\t',height=' + height +\n\t\t\t\t',top=' + top +\n\t\t\t\t',left=' + left;\n\n\t\twindow.open( url, 'twitter', opts );\n\n\t\treturn false;\n\t} );\n\n\t//Handle Facebook Share\n\t$( '#wp-smush-facebook-share' ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\t\tvar width = 550,\n\t\t\theight = 420,\n\t\t\tleft = ($( window ).width() - width) / 2,\n\t\t\ttop = ($( window ).height() - height) / 2,\n\t\t\turl = this.href,\n\t\t\topts = 'status=1' +\n\t\t\t\t',width=' + width +\n\t\t\t\t',height=' + height +\n\t\t\t\t',top=' + top +\n\t\t\t\t',left=' + left;\n\n\t\twindow.open( url, 'facebook', opts );\n\n\t\treturn false;\n\t} );\n\n\t//Handle Re-check button functionality\n\t$( \"#wp-smush-revalidate-member\" ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\t\t//Ajax Params\n\t\tvar params = {\n\t\t\taction: 'smush_show_warning',\n\t\t};\n\t\tvar link = $( this );\n\t\tvar parent = link.parents().eq( 1 );\n\t\tparent.addClass( 'loading-notice' );\n\t\t$.get( ajaxurl, params, function ( r ) {\n\t\t\t//remove the warning\n\t\t\tparent.removeClass( 'loading-notice' ).addClass( \"loaded-notice\" );\n\t\t\tif ( 0 == r ) {\n\t\t\t\tparent.attr( 'data-message', wp_smush_msgs.membership_valid );\n\t\t\t\tremove_element( parent, 1000 );\n\t\t\t} else {\n\t\t\t\tparent.attr( 'data-message', wp_smush_msgs.membership_invalid );\n\t\t\t\tsetTimeout( function remove_loader() {\n\t\t\t\t\tparent.removeClass( 'loaded-notice' );\n\t\t\t\t}, 1000 )\n\t\t\t}\n\t\t} );\n\t} );\n\n\t//Initiate Re-check if the variable is set\n\tif ( 'undefined' != typeof (wp_smush_run_re_check) && 1 == wp_smush_run_re_check && $( '.wp-smush-scan' ).length > 0 ) {\n\t\t//Run the Re-check\n\t\trun_re_check( $( '.wp-smush-scan' ), false );\n\t}\n\n\t/**\n\t * Init fileTree\n\t */\n\tvar initFileTree = function() {\n\t\t$( \".wp-smush-list-dialog .content\" ).fileTree( {\n\t\t\t\tscript: getDirectoryList,\n\t\t\t\tmultiFolder: false,\n\t\t\t\tmultiSelect: true\n\t\t\t},\n\t\t\tfunction ( file ) {\n\t\t\t\tconsole.log( file );\n\t\t\t}\n\t\t).on('filetreeexpanded', function(e, data) {\n\t\t\t// Add a selected class to directory.\n\t\t\tdata.container.find('li').removeClass('selected');\n\t\t\tdata.li.addClass('selected');\n\t\t}).on('filetreeclicked', function(e, data) {\n\t\t\tconsole.log( data.type );\n\t\t});\n\t};\n\n\t//Stats Section Choose Directory Link\n\t$( 'body' ).on( 'click', 'a.wp-smush-dir-link', function ( e ) {\n\t\tif ( $( 'div.sui-wrap button.wp-smush-browse' ).length > 0 ) {\n\t\t\te.preventDefault();\n\t\t\tSUI.dialogs[\"wp-smush-list-dialog\"].show();\n\t\t\t//Display the loader\n\t\t\t$( 'button.dir-smush-button-wrap span.spinner' ).addClass( 'is-active' );\n\t\t\t//Display File tree for Directory Smush\n\t\t\tinitFileTree();\n\t\t}\n\t} );\n\n\t//WP Smush all : Scan Images\n\t$( 'div.sui-wrap' ).on( 'click', 'button.wp-smush-browse', function ( e ) {\n\t\te.preventDefault();\n\n\t\t// Hide all the notices.\n\t\t$( 'div.wp-smush-scan-result div.wp-smush-notice' ).hide();\n\n\t\t//If disabled, do not process\n\t\tif ( $( this ).attr( 'disabled' ) ) {\n\t\t\treturn;\n\t\t} else {\n\t\t\t//Disable Buttons\n\t\t\t$( this ).attr( 'disabled', 'disabled' );\n\t\t\t$( 'button.wp-smush-resume' ).attr( 'disabled', 'disabled' );\n\t\t\t$( 'div.dir-smush-button-wrap span.spinner' ).addClass( 'is-active' );\n\t\t}\n\n\t\t//Remove Notice\n\t\t$( 'div.wp-smush-info' ).remove();\n\n\t\tshowDialog();\n\n\t\t//Display the loader\n\t\t$( 'button.dir-smush-button-wrap span.spinner' ).addClass( 'is-active' );\n\n\t\t//Display File tree for Directory Smush\n\t\tinitFileTree();\n\t} );\n\n\t// On dialog close make browse btutton active.\n\t$( '.sui-dialog-close' ).on( 'click', function ( e ) {\n\t\t$( '.wp-smush-browse' ).removeAttr( 'disabled' );\n\t\tclose_dialog();\n\t} );\n\n\t//Image Directories: On Select button click\n\t$( '.wp-smush-select-dir' ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\n\t\t//If disabled, do not process\n\t\tif ( $( this ).attr( 'disabled' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar button = $( this );\n\n\t\t$( 'div.wp-smush-list-dialog div.sui-box-body' ).css( {'opacity': '0.8'} );\n\t\t$( 'div.wp-smush-list-dialog div.sui-box-body a' ).unbind( 'click' );\n\n\t\t//Remove resume button\n\t\t$( 'button.wp-smush-resume' ).remove();\n\n\t\t//Disable Button\n\t\tbutton.attr( 'disabled', 'disabled' );\n\n\t\tvar spinner = button.parent().find( '.add-dir-loader' );\n\t\t//Display the spinner\n\t\tspinner.addClass( 'sui-icon-loader sui-loading' );\n\n\t\t//Get the Selected directory path\n\t\tvar path = $( '.jqueryFileTree .selected a' ).attr( 'rel' );\n\t\tpath = 'undefined' == typeof (path) ? '' : path;\n\t\tconsole.log( path );\n\n\t\t//Absolute path\n\t\tvar abs_path = $( 'input[name=\"wp-smush-base-path\"]' ).val();\n\n\t\t//Fill in the input field\n\t\t$( '.wp-smush-dir-path' ).val( abs_path + '/' + path );\n\n\t\t//Send a ajax request to get a list of all the image files\n\t\tvar param = {\n\t\t\taction: 'image_list',\n\t\t\tsmush_path: $( '.wp-smush-dir-path' ).val(),\n\t\t\timage_list_nonce: $( 'input[name=\"image_list_nonce\"]' ).val()\n\t\t};\n\n\t\t//Get the List of images\n\t\t$.get( ajaxurl, param, function ( res ) {\n\t\t\tif ( !res.success && 'undefined' !== typeof ( res.data.message ) ) {\n\t\t\t\t$( 'div.wp-smush-scan-result div.content' ).html( res.data.message );\n\t\t\t} else {\n\t\t\t\t$( '.wp-smush-scan-result .smush-dir-smush-done' ).addClass( 'sui-hidden' );\n\t\t\t\t$( 'div.wp-smush-scan-result div.content' ).html( res.data );\n\t\t\t\tvar wp_smush_dir_image_ids = res.data.ids;\n\t\t\t}\n\t\t\tset_accordion();\n\t\t\tclose_dialog();\n\n\t\t\t//Remove the spinner\n\t\t\tspinner.removeClass( 'sui-icon-loader sui-loading' );\n\n\t\t\t//Show Scan result\n\t\t\t$( '.wp-smush-scan-result' ).removeClass( 'sui-hidden' ).show();\n\t\t} ).done( function ( res ) {\n\n\t\t\t// Show select directory button on top.\n\t\t\t$( 'div.sui-box-header button.wp-smush-browse' ).removeClass( 'sui-hidden' );\n\n\t\t\t//If there was no image list, return\n\t\t\tif ( !res.success ) {\n\t\t\t\t//Hide the smush button\n\t\t\t\t$( 'div.wp-smush-all-button-wrap.bottom' ).addClass( 'sui-hidden' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//Show the smush button\n\t\t\t$( 'div.wp-smush-all-button-wrap.bottom' ).removeClass( 'sui-hidden' );\n\n\t\t\t//Remove disabled attribute for the button\n\t\t\t$( 'button.wp-smush-start' ).removeAttr( 'disabled' );\n\n\t\t\t//Append a Directory browser button at the top\n\t\t\tadd_dir_browser_button();\n\n\t\t\t//Clone and add Smush button\n\t\t\tadd_smush_button();\n\n\t\t\twindow.location.hash = '#wp-smush-dir-browser';\n\t\t} );\n\t} );\n\n\t/**\n\t * Handle the Smush Now button click\n\t */\n\t$( '#wp-smush-dir-wrap-box' ).on( 'click', 'button.wp-smush-start', function ( e ) {\n\t\te.preventDefault();\n\n\t\t//Check if we have images to be optimised\n\t\tif ( !$( '.wp-smush-image-ele:not(.optimised)' ).length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t//Disable this button\n\t\tvar button = $( '.wp-smush-start' );\n\t\tvar parent = button.parent();\n\n\t\t//Hide all the notices\n\t\t$( 'div.wp-smush-scan-result div.sui-notice' ).hide();\n\n\t\t//Set the button status to 0, to cancel next ajax request\n\t\t$( 'input[name=\"wp-smush-continue-ajax\"]' ).val( 1 );\n\n\t\t//Hide Directory browser button\n\t\t$( 'button.wp-smush-browse' ).hide();\n\n\t\t//Hide Exclude directory button link\n\t\t$( '.wp-smush-exclude-dir' ).hide();\n\n\t\t/** All the Styling changes **/\n\t\tbutton.hide();\n\t\tparent.find( 'button.wp-smush-pause' ).removeClass( 'disabled sui-hidden' ).removeAttr( 'disabled' );\n\n\t\t//Disable Select Directory button\n\t\t$( 'button.wp-smush-browse' ).attr( 'disabled', 'disabled' );\n\n\t\t// Add progress icon to navbar.\n\t\t$( '.smush-nav-icon.directory' ).addClass( 'sui-icon-loader sui-loading' );\n\n\t\t//Initialize the optimisation\n\t\tsmush_all( true );\n\t} );\n\n\t// Handle the Pause button click.\n\t$( 'div.wp-smush-scan-result' ).on( 'click', 'button.wp-smush-pause', function ( e ) {\n\t\te.preventDefault();\n\n\t\tvar pause_button = $( 'button.wp-smush-pause' );\n\t\t// Return if the link is disabled.\n\t\tif ( pause_button.hasClass( 'disabled' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Set the button status to 0, to cancel next ajax request.\n\t\t$( 'input[name=\"wp-smush-continue-ajax\"]' ).val( 0 );\n\n\t\t// Enable the smush button, disable Pause button.\n\t\tpause_button.addClass( 'sui-hidden' ).attr( 'disabled', 'disabled' );\n\n\t\t// Enable the smush button, hide the spinner.\n\t\t$( 'button.wp-smush-start, button.wp-smush-browse' ).show().removeAttr( 'disabled' );\n\t\t$( 'span.wp-smush-image-dir-progress, span.wp-smush-image-ele-progress' ).removeClass( 'sui-icon-loader sui-loading' );\n\n\t\t// Hide the waiting message.\n\t\t$( '.wp-smush-image-progress-percent' ).addClass( 'sui-hidden' );\n\n\t\t// Show directory exclude option.\n\t\t$( '.wp-smush-exclude-dir' ).each( function() {\n\t\t\tif ( $( this ).parent().prevAll( '.optimised, .partial' ).length === 0 ) {\n\t\t\t\t$( this ).show();\n\t\t\t}\n\t\t});\n\n\t\t// Remove progress icon from navbar.\n\t\t$( '.smush-nav-icon.directory' ).removeClass( 'sui-icon-loader sui-loading' );\n\t} );\n\n\t//Exclude Directory from list - Handle Click\n\t$( 'div.wp-smush-scan-result' ).on( 'click', '.wp-smush-exclude-dir', function ( e ) {\n\t\te.preventDefault();\n\n\t\tvar self = $( this );\n\n\t\t//Hide the link\n\t\t//self.hide();\n\n\t\tvar path = self.data( 'path' );\n\t\tvar param = {\n\t\t\taction: 'smush_exclude_path',\n\t\t\tpath: path,\n\t\t\tnonce: $( 'input[name=\"exclude-path-nonce\"]' ).val()\n\t\t};\n\n\t\t//Send Ajax request to remove image for the given path from db\n\t\t$.post( ajaxurl, param, function ( res ) {\n\t\t\t//Remove the whole li element on success\n\t\t\tif ( res.success ) {\n\t\t\t\t// Remove content and parent rows.\n\t\t\t\tself.closest( 'tr.sui-accordion-item' ).remove();\n\t\t\t\tself.closest( 'tr.sui-accordion-item' ).next( 'tr.sui-accordion-item-content' ).remove();\n\n\t\t\t\t//Remove the bottom bulk smsuh button if there are no more directories left in scan results\n\t\t\t\tif ( 0 == $( '.wp-smush-image-ele:not(.optimised)' ).length ) {\n\t\t\t\t\t$( 'div.wp-smush-all-button-wrap.bottom' ).hide();\n\t\t\t\t\t$( 'div.wp-smush-scan-result' ).hide();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t} );\n\n\t//Handle Click for Resume Last scan button\n\t$( 'button.wp-smush-resume' ).on( 'click', function () {\n\n\t\tvar self = $( this );\n\n\t\t//Disable buttons\n\t\tdisable_buttons( self );\n\n\t\t//Show Spinner\n\t\t$( 'span.wp-smush-resume-loder' ).removeClass( 'sui-hidden' );\n\n\t\tvar params = {\n\t\t\taction: 'resume_scan',\n\t\t};\n\n\t\t//Send Ajax request to load a list of images\n\t\t$.get( ajaxurl, params, function ( r ) {\n\t\t\t//Hide the buttons\n\t\t\t$( 'button.wp-smush-resume' ).remove();\n\t\t\t// Allow to select a new directory\n\t\t\t$( 'button.wp-smush-browse' ).removeAttr( 'disabled' );\n\t\t\t//Append the results\n\t\t\tif ( !r.success ) {\n\t\t\t\t//Append the error message before the buttons\n\t\t\t\t$( 'p.wp-smush-no-images-content' ).after( r.data.message );\n\t\t\t\t$( 'span.wp-smush-resume-loder' ).addClass( 'sui-hidden' );\n\t\t\t} else {\n\t\t\t\t//Append the image markup after the buttons\n\t\t\t\t$( 'div.wp-smush-scan-result div.content' ).html( r.data );\n\t\t\t\t$( 'div.wp-smush-scan-result' ).removeClass( 'sui-hidden' );\n\n\t\t\t\tset_accordion();\n\t\t\t}\n\t\t} ).done( function () {\n\t\t\t//Add Choose dir browser button\n\t\t\tadd_dir_browser_button();\n\n\t\t\t//Clone and add Smush button\n\t\t\tadd_smush_button();\n\t\t} );\n\n\t} );\n\n\tif ( $( 'li.smush-dir-savings' ).length > 0 ) {\n\t\t//Update Directory Smush, as soon as the page loads\n\t\tvar stats_param = {\n\t\t\taction: 'get_dir_smush_stats'\n\t\t};\n\t\t$.get( ajaxurl, stats_param, function ( r ) {\n\n\t\t\t//Hide the spinner\n\t\t\t$( 'li.smush-dir-savings .sui-icon-loader' ).hide();\n\n\t\t\t//If there are no errors, and we have a message to display\n\t\t\tif ( !r.success && 'undefined' != typeof ( r.data.message ) ) {\n\t\t\t\t$( 'div.wp-smush-scan-result div.content' ).prepend( r.data.message );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//If there is no value in r\n\t\t\tif ( 'undefined' == typeof ( r.data) || 'undefined' == typeof ( r.data.dir_smush ) ) {\n\t\t\t\t//Append the text\n\t\t\t\t$( 'li.smush-dir-savings span.wp-smush-stats' ).append( wp_smush_msgs.ajax_error );\n\t\t\t\t$( 'li.smush-dir-savings span.wp-smush-stats span' ).hide();\n\n\t\t\t} else {\n\t\t\t\t//Update the stats\n\t\t\t\tupdate_cummulative_stats( r.data );\n\t\t\t}\n\n\t\t} );\n\t}\n\t//Close Directory smush modal, if pressed esc\n\t$( document ).keyup( function ( e ) {\n\t\tif ( e.keyCode === 27 ) {\n\t\t\tvar modal = $( 'div.dev-overlay.wp-smush-list-dialog, div.dev-overlay.wp-smush-get-pro' );\n\t\t\t//If the Directory dialog is not visible\n\t\t\tif ( !modal.is( ':visible' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tmodal.find( 'div.close' ).click();\n\n\t\t}\n\t} );\n\n\t//Dismiss Smush recommendation\n\t$( 'span.dismiss-recommendation' ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\t\tvar parent = $( this ).parent();\n\t\t//remove div and save preference in db\n\t\tparent.hide( 'slow', function () {\n\t\t\tparent.remove();\n\t\t} );\n\t\t$.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\t'action': 'hide_pagespeed_suggestion'\n\t\t\t}\n\t\t} );\n\t} )\n\n\t//Remove API message\n\t$( 'div.wp-smush-api-message i.icon-fi-close' ).on( 'click', function ( e ) {\n\t\te.preventDefault();\n\t\tvar parent = $( this ).parent();\n\t\t//remove div and save preference in db\n\t\tparent.hide( 'slow', function () {\n\t\t\tparent.remove();\n\t\t} );\n\t\t$.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\t'action': 'hide_api_message'\n\t\t\t}\n\t\t} );\n\t} );\n\n} );\n(function ( $ ) {\n\tvar Smush = function ( element, options ) {\n\t\tvar elem = $( element );\n\n\t\tvar defaults = {\n\t\t\tisSingle: false,\n\t\t\tajaxurl: '',\n\t\t\tmsgs: {},\n\t\t\tmsgClass: 'wp-smush-msg',\n\t\t\tids: []\n\t\t};\n\t};\n\t$.fn.wpsmush = function ( options ) {\n\t\treturn this.each( function () {\n\t\t\tvar element = $( this );\n\n\t\t\t// Return early if this element already has a plugin instance\n\t\t\tif ( element.data( 'wpsmush' ) )\n\t\t\t\treturn;\n\n\t\t\t// pass options to plugin constructor and create a new instance\n\t\t\tvar wpsmush = new Smush( this, options );\n\n\t\t\t// Store plugin object in this element's data\n\t\t\telement.data( 'wpsmush', wpsmush );\n\t\t} );\n\t};\n\n})( jQuery );","\n/*\n  * jQueryFileTree Plugin\n  *\n  * @author - Cory S.N. LaViska - A Beautiful Site (http://abeautifulsite.net/) - 24 March 2008\n  * @author - Dave Rogers - (https://github.com/daverogers/)\n  *\n  * Usage: $('.fileTreeDemo').fileTree({ options }, callback )\n  *\n  * TERMS OF USE\n  *\n  * This plugin is dual-licensed under the GNU General Public License and the MIT License and\n  * is copyright 2008 A Beautiful Site, LLC.\n */\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n(function($, window) {\n  var FileTree;\n  FileTree = (function() {\n    function FileTree(el, args, callback) {\n      this.onEvent = bind(this.onEvent, this);\n      var $el, _this, defaults;\n      $el = $(el);\n      _this = this;\n      defaults = {\n        root: '/',\n        script: '/files/filetree',\n        folderEvent: 'click',\n        expandSpeed: 500,\n        collapseSpeed: 500,\n        expandEasing: 'swing',\n        collapseEasing: 'swing',\n        multiFolder: true,\n        loadMessage: 'Loading...',\n        errorMessage: 'Unable to get file tree information',\n        multiSelect: false,\n        onlyFolders: false,\n        onlyFiles: false,\n        preventLinkAction: false\n      };\n      this.jqft = {\n        container: $el\n      };\n      this.options = $.extend(defaults, args);\n      this.callback = callback;\n      this.data = {};\n      $el.html('<ul class=\"jqueryFileTree start\"><li class=\"wait\">' + this.options.loadMessage + '<li></ul>');\n      _this.showTree($el, escape(this.options.root), function() {\n        return _this._trigger('filetreeinitiated', {});\n      });\n      $el.delegate(\"li a\", this.options.folderEvent, _this.onEvent);\n    }\n\n    FileTree.prototype.onEvent = function(event) {\n      var $ev, _this, callback, jqft, options, ref;\n      $ev = $(event.target);\n      options = this.options;\n      jqft = this.jqft;\n      _this = this;\n      callback = this.callback;\n      _this.data = {};\n      _this.data.li = $ev.closest('li');\n      _this.data.type = (ref = _this.data.li.hasClass('directory')) != null ? ref : {\n        'directory': 'file'\n      };\n      _this.data.value = $ev.text();\n      _this.data.rel = $ev.prop('rel');\n      _this.data.container = jqft.container;\n      if (options.preventLinkAction) {\n        event.preventDefault();\n      }\n      if ($ev.parent().hasClass('directory')) {\n        if ($ev.parent().hasClass('collapsed')) {\n          if (!options.multiFolder) {\n            $ev.parent().parent().find('UL').slideUp({\n              duration: options.collapseSpeed,\n              easing: options.collapseEasing\n            });\n            $ev.parent().parent().find('LI.directory').removeClass('expanded').addClass('collapsed');\n          }\n          $ev.parent().removeClass('collapsed').addClass('expanded');\n          $ev.parent().find('UL').remove();\n          return _this.showTree($ev.parent(), $ev.attr('rel'), function() {\n            _this._trigger('filetreeexpanded', _this.data);\n            return callback != null;\n          });\n        } else {\n          return $ev.parent().find('UL').slideUp({\n            duration: options.collapseSpeed,\n            easing: options.collapseEasing,\n            start: function() {\n              return _this._trigger('filetreecollapse', _this.data);\n            },\n            complete: function() {\n              $ev.parent().removeClass('expanded').addClass('collapsed');\n              _this._trigger('filetreecollapsed', _this.data);\n              return callback != null;\n            }\n          });\n        }\n      } else {\n        if (!options.multiSelect) {\n          jqft.container.find('li').removeClass('selected');\n          $ev.parent().addClass('selected');\n        } else {\n          if ($ev.parent().find('input').is(':checked')) {\n            $ev.parent().find('input').prop('checked', false);\n            $ev.parent().removeClass('selected');\n          } else {\n            $ev.parent().find('input').prop('checked', true);\n            $ev.parent().addClass('selected');\n          }\n        }\n        _this._trigger('filetreeclicked', _this.data);\n        return typeof callback === \"function\" ? callback($ev.attr('rel')) : void 0;\n      }\n    };\n\n    FileTree.prototype.showTree = function(el, dir, finishCallback) {\n      var $el, _this, data, handleFail, handleResult, options, result;\n      $el = $(el);\n      options = this.options;\n      _this = this;\n      $el.addClass('wait');\n      $(\".jqueryFileTree.start\").remove();\n      data = {\n        dir: dir,\n        onlyFolders: options.onlyFolders,\n        onlyFiles: options.onlyFiles,\n        multiSelect: options.multiSelect\n      };\n      handleResult = function(result) {\n        var li;\n        $el.find('.start').html('');\n        $el.removeClass('wait').append(result);\n        if (options.root === dir) {\n          $el.find('UL:hidden').show(typeof callback !== \"undefined\" && callback !== null);\n        } else {\n          if (jQuery.easing[options.expandEasing] === void 0) {\n            console.log('Easing library not loaded. Include jQueryUI or 3rd party lib.');\n            options.expandEasing = 'swing';\n          }\n          $el.find('UL:hidden').slideDown({\n            duration: options.expandSpeed,\n            easing: options.expandEasing,\n            start: function() {\n              return _this._trigger('filetreeexpand', _this.data);\n            },\n            complete: finishCallback\n          });\n        }\n        li = $('[rel=\"' + decodeURIComponent(dir) + '\"]').parent();\n        if (options.multiSelect && li.children('input').is(':checked')) {\n          li.find('ul li input').each(function() {\n            $(this).prop('checked', true);\n            return $(this).parent().addClass('selected');\n          });\n        }\n        return false;\n      };\n      handleFail = function() {\n        $el.find('.start').html('');\n        $el.removeClass('wait').append(\"<p>\" + options.errorMessage + \"</p>\");\n        return false;\n      };\n      if (typeof options.script === 'function') {\n        result = options.script(data);\n        if (typeof result === 'string' || result instanceof jQuery) {\n          return handleResult(result);\n        } else {\n          return handleFail();\n        }\n      } else {\n        return $.ajax({\n          url: options.script,\n          type: 'POST',\n          dataType: 'HTML',\n          data: data\n        }).done(function(result) {\n          return handleResult(result);\n        }).fail(function() {\n          return handleFail();\n        });\n      }\n    };\n\n    FileTree.prototype._trigger = function(eventType, data) {\n      var $el;\n      $el = this.jqft.container;\n      return $el.triggerHandler(eventType, data);\n    };\n\n    return FileTree;\n\n  })();\n  return $.fn.extend({\n    fileTree: function(args, callback) {\n      return this.each(function() {\n        var $this, data;\n        $this = $(this);\n        data = $this.data('fileTree');\n        if (!data) {\n          $this.data('fileTree', (data = new FileTree(this, args, callback)));\n        }\n        if (typeof args === 'string') {\n          return data[option].apply(data);\n        }\n      });\n    }\n  });\n})(window.jQuery, window);\n","/**\n * jQueryFileTree plugin\n */\nimport 'jqueryfiletree/src/jQueryFileTree.js';\n\n/**\n * Admin modules\n */\nrequire('./modules/admin');\nrequire('./modules/bulk-smush');\nrequire('./modules/modals');\n\n/**\n * Notice scripts.\n *\n * Notices are used in the following functions:\n *\n * @used-by WpSmushitAdmin::smush_updated()\n * @used-by WpSmushS3::3_support_required_notice()\n * @used-by WpSmushBulkUi::installation_notice()\n *\n * TODO: should this be moved out in a separate file like common.scss?\n */\nrequire('./modules/notice');"],"sourceRoot":""}